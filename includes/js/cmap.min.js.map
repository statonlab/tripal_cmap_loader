{"version":3,"file":null,"sources":["../node_modules/ecma-proposal-math-extensions/reference-implementation/index.js","../src/polyfill/elementsFromPoint.js","../src/polyfill/index.js","../node_modules/pubsub-js/src/pubsub.js","../src/topics.js","../src/developmentTooling.js","../src/util/concatAll.js","../node_modules/mithril/mithril.js","../mixwith.js/src/mixwith.js","../src/util/isNil.js","../src/model/Bounds.js","../src/ui/layout/LayoutBase.js","../src/util/CanvasUtil.js","../node_modules/hammerjs/hammer.js","../src/canvas/DrawLazilyMixin.js","../src/ui/RegisterComponentMixin.js","../node_modules/quickselect/quickselect.js","../node_modules/rbush/index.js","../src/canvas/node/SceneGraphNodeBase.js","../src/canvas/node/SceneGraphNodeCanvas.js","../src/canvas/node/SceneGraphNodeGroup.js","../node_modules/tinyqueue/index.js","../node_modules/rbush-knn/index.js","../src/canvas/node/SceneGraphNodeTrack.js","../src/canvas/geometry/FeatureMark.js","../src/canvas/geometry/MapBackbone.js","../src/canvas/geometry/FeatureLabel.js","../src/canvas/layout/MapTrack.js","../src/canvas/geometry/Dot.js","../src/canvas/geometry/manhattanRuler.js","../src/canvas/layout/ManhattanPlot.js","../src/canvas/geometry/QTL.js","../src/canvas/layout/QtlTrack.js","../src/canvas/layout/FeatureTrack.js","../src/canvas/geometry/Ruler.js","../src/canvas/canvas/BioMap.js","../src/canvas/geometry/CorrespondenceMark.js","../src/model/Feature.js","../src/canvas/canvas/CorrespondenceMap.js","../src/ui/menus/Menu.js","../src/ui/menus/Popover.js","../src/ui/menus/ColorPicker.js","../src/ui/menus/FeatureMenu.js","../src/ui/layout/components/TitleComponent.js","../src/ui/layout/components/BioMapComponent.js","../src/ui/layout/HorizontalLayout.js","../node_modules/papaparse/papaparse.js","../src/model/BioMapModel.js","../src/model/BioMapConfigModel.js","../src/model/DataSourceModel.js","../src/model/AppModel.js","../node_modules/hamsterjs/hamster.js","../src/ui/tools/ResetButton.js","../src/ui/tools/RemoveMapButton.js","../src/ui/tools/AddMapButton.js","../src/ui/tools/ConfigurationButton.js","../src/ui/tools/UploadButton.js","../src/ui/tools/MapRemovalDialog.js","../src/ui/tools/MapAdditionDialog.js","../src/ui/tools/ConfigurationDialog.js","../src/ui/tools/UploadDialog.js","../src/ui/tools/Tools.js","../src/ui/Header.js","../src/ui/StatusBar.js","../src/ui/layout/CircosLayout.js","../src/ui/layout/LayoutContainer.js","../src/ui/UI.js","../src/ui/CMAP.js","../src/main.js"],"sourcesContent":["\"use strict\";\n\n{\n  const defineMath = (name, assignment) => {\n    var configurable = typeof assignment === \"function\" ? true : false;\n    var writable = typeof assignment === \"function\" ? true : false;\n    var enumerable = typeof assignment === \"function\" ? true : false;\n\n    Object.defineProperty(Math, name, {\n      configurable: configurable,\n      enumerable: enumerable,\n      writable: writable,\n      value: assignment\n    });\n  };\n\n  defineMath(\"DEG_PER_RAD\", Math.PI / 180);\n  defineMath(\"RAD_PER_DEG\", 180 / Math.PI);\n\n  const f32A = new Float32Array(1);\n\n  defineMath(\"scale\", function scale(x, inLow, inHigh, outLow, outHigh) {\n    if (arguments.length === 0) {\n      return NaN;\n    }\n\n    if (Number.isNaN(x) ||\n        Number.isNaN(inLow) ||\n        Number.isNaN(inHigh) ||\n        Number.isNaN(outLow) ||\n        Number.isNaN(outHigh)) {\n      return NaN;\n    }\n\n    if (x === Infinity ||\n        x === -Infinity) {\n      return x;\n    }\n\n    return (x - inLow) * (outHigh - outLow) /\n      (inHigh - inLow) + outLow;\n  });\n\n  defineMath(\"fscale\", function fscale(x, inLow, inHigh, outLow, outHigh) {\n    f32A[0] = Math.scale(x, inLow, inHigh, outLow, outHigh);\n    return f32A[0];\n  });\n\n  defineMath(\"clamp\", function clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  });\n\n  defineMath(\"radians\", function radians(degrees) {\n    return degrees * Math.DEG_PER_RAD;\n  });\n\n  defineMath(\"degrees\", function degrees(radians) {\n    return radians * Math.RAD_PER_DEG;\n  });\n}\n","/**\n * returns a list of all elements under the cursor\n * from https://gist.github.com/iddan/54d5d9e58311b0495a91bf06de661380\n *\n * It appears Safari and maybe Opera browsers are missing this;\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/elementsFromPoint\n */\n'use strict';\n\nif (!document.elementsFromPoint) {\n  document.elementsFromPoint = elementsFromPoint;\n}\n\n/* istanbul ignore next: depends on browser native elementFromPoint(x,y) */\nfunction elementsFromPoint(x, y) {\n  let parents = [];\n  let parent = void 0;\n  do {\n    if (parent !== document.elementFromPoint(x, y)) {\n      parent = document.elementFromPoint(x, y);\n      parents.push(parent);\n      parent.style.pointerEvents = 'none';\n    } else {\n      parent = false;\n    }\n  } while (parent);\n  parents.forEach(function (parent) {\n    return parent.style.pointerEvents = 'all';\n  });\n  return parents;\n}\n","/**\n * A polyfill is a type of shim that retrofits legacy browsers with modern\n * Javascript, HTML5, or CSS3 features.\n */\n\n// adds Math.scale, fscale, clamp, radians, degrees\nimport 'ecma-proposal-math-extensions';\n\n// adds elementsFromPoint\nimport './elementsFromPoint';\n","/*\nCopyright (c) 2010,2011,2012,2013,2014 Morgan Roderick http://roderick.dk\nLicense: MIT - http://mrgnrdrck.mit-license.org\n\nhttps://github.com/mroderick/PubSubJS\n*/\n(function (root, factory){\n    'use strict';\n\n    var PubSub = {};\n    root.PubSub = PubSub;\n\n    var define = root.define;\n\n    factory(PubSub);\n\n    // AMD support\n    if (typeof define === 'function' && define.amd){\n        define(function() { return PubSub; });\n\n        // CommonJS and Node.js module support\n    } else if (typeof exports === 'object'){\n        if (module !== undefined && module.exports) {\n            exports = module.exports = PubSub; // Node.js specific `module.exports`\n        }\n        exports.PubSub = PubSub; // CommonJS module 1.1.1 spec\n        module.exports = exports = PubSub; // CommonJS\n    }\n\n}(( typeof window === 'object' && window ) || this, function (PubSub){\n    'use strict';\n\n    var messages = {},\n        lastUid = -1;\n\n    function hasKeys(obj){\n        var key;\n\n        for (key in obj){\n            if ( obj.hasOwnProperty(key) ){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n\t *\tReturns a function that throws the passed exception, for use as argument for setTimeout\n\t *\t@param { Object } ex An Error object\n\t */\n    function throwException( ex ){\n        return function reThrowException(){\n            throw ex;\n        };\n    }\n\n    function callSubscriberWithDelayedExceptions( subscriber, message, data ){\n        try {\n            subscriber( message, data );\n        } catch( ex ){\n            setTimeout( throwException( ex ), 0);\n        }\n    }\n\n    function callSubscriberWithImmediateExceptions( subscriber, message, data ){\n        subscriber( message, data );\n    }\n\n    function deliverMessage( originalMessage, matchedMessage, data, immediateExceptions ){\n        var subscribers = messages[matchedMessage],\n            callSubscriber = immediateExceptions ? callSubscriberWithImmediateExceptions : callSubscriberWithDelayedExceptions,\n            s;\n\n        if ( !messages.hasOwnProperty( matchedMessage ) ) {\n            return;\n        }\n\n        for (s in subscribers){\n            if ( subscribers.hasOwnProperty(s)){\n                callSubscriber( subscribers[s], originalMessage, data );\n            }\n        }\n    }\n\n    function createDeliveryFunction( message, data, immediateExceptions ){\n        return function deliverNamespaced(){\n            var topic = String( message ),\n                position = topic.lastIndexOf( '.' );\n\n            // deliver the message as it is now\n            deliverMessage(message, message, data, immediateExceptions);\n\n            // trim the hierarchy and deliver message to each level\n            while( position !== -1 ){\n                topic = topic.substr( 0, position );\n                position = topic.lastIndexOf('.');\n                deliverMessage( message, topic, data, immediateExceptions );\n            }\n        };\n    }\n\n    function messageHasSubscribers( message ){\n        var topic = String( message ),\n            found = Boolean(messages.hasOwnProperty( topic ) && hasKeys(messages[topic])),\n            position = topic.lastIndexOf( '.' );\n\n        while ( !found && position !== -1 ){\n            topic = topic.substr( 0, position );\n            position = topic.lastIndexOf( '.' );\n            found = Boolean(messages.hasOwnProperty( topic ) && hasKeys(messages[topic]));\n        }\n\n        return found;\n    }\n\n    function publish( message, data, sync, immediateExceptions ){\n        var deliver = createDeliveryFunction( message, data, immediateExceptions ),\n            hasSubscribers = messageHasSubscribers( message );\n\n        if ( !hasSubscribers ){\n            return false;\n        }\n\n        if ( sync === true ){\n            deliver();\n        } else {\n            setTimeout( deliver, 0 );\n        }\n        return true;\n    }\n\n    /**\n\t *\tPubSub.publish( message[, data] ) -> Boolean\n\t *\t- message (String): The message to publish\n\t *\t- data: The data to pass to subscribers\n\t *\tPublishes the the message, passing the data to it's subscribers\n\t**/\n    PubSub.publish = function( message, data ){\n        return publish( message, data, false, PubSub.immediateExceptions );\n    };\n\n    /**\n\t *\tPubSub.publishSync( message[, data] ) -> Boolean\n\t *\t- message (String): The message to publish\n\t *\t- data: The data to pass to subscribers\n\t *\tPublishes the the message synchronously, passing the data to it's subscribers\n\t**/\n    PubSub.publishSync = function( message, data ){\n        return publish( message, data, true, PubSub.immediateExceptions );\n    };\n\n    /**\n\t *\tPubSub.subscribe( message, func ) -> String\n\t *\t- message (String): The message to subscribe to\n\t *\t- func (Function): The function to call when a new message is published\n\t *\tSubscribes the passed function to the passed message. Every returned token is unique and should be stored if\n\t *\tyou need to unsubscribe\n\t**/\n    PubSub.subscribe = function( message, func ){\n        if ( typeof func !== 'function'){\n            return false;\n        }\n\n        // message is not registered yet\n        if ( !messages.hasOwnProperty( message ) ){\n            messages[message] = {};\n        }\n\n        // forcing token as String, to allow for future expansions without breaking usage\n        // and allow for easy use as key names for the 'messages' object\n        var token = 'uid_' + String(++lastUid);\n        messages[message][token] = func;\n\n        // return token for unsubscribing\n        return token;\n    };\n\n    /**\n\t *\tPubSub.subscribeOnce( message, func ) -> PubSub\n\t *\t- message (String): The message to subscribe to\n\t *\t- func (Function): The function to call when a new message is published\n\t *\tSubscribes the passed function to the passed message once\n\t**/\n    PubSub.subscribeOnce = function( message, func ){\n        var token = PubSub.subscribe( message, function(){\n            // before func apply, unsubscribe message\n            PubSub.unsubscribe( token );\n            func.apply( this, arguments );\n        });\n        return PubSub;\n    };\n\n    /* Public: Clears all subscriptions\n\t */\n    PubSub.clearAllSubscriptions = function clearAllSubscriptions(){\n        messages = {};\n    };\n\n    /*Public: Clear subscriptions by the topic\n\t*/\n    PubSub.clearSubscriptions = function clearSubscriptions(topic){\n        var m;\n        for (m in messages){\n            if (messages.hasOwnProperty(m) && m.indexOf(topic) === 0){\n                delete messages[m];\n            }\n        }\n    };\n\n    /* Public: removes subscriptions.\n\t * When passed a token, removes a specific subscription.\n\t * When passed a function, removes all subscriptions for that function\n\t * When passed a topic, removes all subscriptions for that topic (hierarchy)\n\t *\n\t * value - A token, function or topic to unsubscribe.\n\t *\n\t * Examples\n\t *\n\t *\t\t// Example 1 - unsubscribing with a token\n\t *\t\tvar token = PubSub.subscribe('mytopic', myFunc);\n\t *\t\tPubSub.unsubscribe(token);\n\t *\n\t *\t\t// Example 2 - unsubscribing with a function\n\t *\t\tPubSub.unsubscribe(myFunc);\n\t *\n\t *\t\t// Example 3 - unsubscribing a topic\n\t *\t\tPubSub.unsubscribe('mytopic');\n\t */\n    PubSub.unsubscribe = function(value){\n        var descendantTopicExists = function(topic) {\n                var m;\n                for ( m in messages ){\n                    if ( messages.hasOwnProperty(m) && m.indexOf(topic) === 0 ){\n                        // a descendant of the topic exists:\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            isTopic    = typeof value === 'string' && ( messages.hasOwnProperty(value) || descendantTopicExists(value) ),\n            isToken    = !isTopic && typeof value === 'string',\n            isFunction = typeof value === 'function',\n            result = false,\n            m, message, t;\n\n        if (isTopic){\n            PubSub.clearSubscriptions(value);\n            return;\n        }\n\n        for ( m in messages ){\n            if ( messages.hasOwnProperty( m ) ){\n                message = messages[m];\n\n                if ( isToken && message[value] ){\n                    delete message[value];\n                    result = value;\n                    // tokens are unique, so we can just stop here\n                    break;\n                }\n\n                if (isFunction) {\n                    for ( t in message ){\n                        if (message.hasOwnProperty(t) && message[t] === value){\n                            delete message[t];\n                            result = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n}));\n","/**\n * @file\n * defines constants for all PubSub message topics used by cmap\n */\n\nexport const selectedMap = 'selectedMap'; // the selected map (canvas) changed\nexport const reset = 'reset'; // reset button click\nexport const layout = 'layout'; // layout selection changed\nexport const dataLoaded = 'loaded'; // data finished loading, or was filtered/updated\n\n// map removal: this means the bioMap objects sent in the message, were removed\n// by user\nexport const mapRemoved = 'mapRemoved';\nexport const mapAdded = 'mapAdded';\nexport const mapReorder = 'mapReorder';\n\nexport const featureUpdate = 'featureUpdate'; // change to qtlConfig from modal\n","/**\n * @file\n * Development tooling: conditionally run code based on the ENV string,\n * which is interpolated by a plugin in the rollup.config.js.\n *\n */\nimport PubSub from 'pubsub-js';\n\nimport * as topics from './topics';\n\n/**\n * @description Logger to check that pub-sub events propagate.\n */\n\nconst monitorPubSub = () => {\n  let logger = (topic, data) => {\n    // eslint-disable-next-line no-console\n    console.log(`[${topic}]`, data);\n  };\n  Object.keys(topics).forEach(t => {\n    //console.log(`subscribing to: ${t}`);\n    PubSub.subscribe(t, logger);\n  });\n};\n\nif (ENV !== 'production') {\n  PubSub.immediateExceptions = true;\n  monitorPubSub();\n}\n","/**\n * @description concatAll() aka flattenDeep(), based on http://reactivex.io/learnrx/\n * @return {array} concatenated array.\n */\n\nArray.prototype.concatAll = function () {\n  let results = [];\n  this.forEach(function (subArray) {\n    results.push.apply(results, subArray);\n  });\n  return results;\n};\n",";(function() {\n\"use strict\"\nfunction Vnode(tag, key, attrs0, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children, text: text, dom: dom, domSize: undefined, state: undefined, _state: undefined, events: undefined, instance: undefined, skip: false}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node === false ? \"\" : node, undefined, undefined)\n\treturn node\n}\nVnode.normalizeChildren = function normalizeChildren(children) {\n\tfor (var i = 0; i < children.length; i++) {\n\t\tchildren[i] = Vnode.normalize(children[i])\n\t}\n\treturn children\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\nfunction execSelector(state, attrs, children) {\n\tvar hasAttrs = false, childList, text\n\tvar className = attrs.className || attrs.class\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\t\tfor(var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) {\n\t\t\t\tnewAttrs[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t\tattrs = newAttrs\n\t}\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key)) {\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className !== undefined) {\n\t\tif (attrs.class !== undefined) {\n\t\t\tattrs.class = undefined\n\t\t\tattrs.className = className\n\t\t}\n\t\tif (state.attrs.className != null) {\n\t\t\tattrs.className = state.attrs.className + \" \" + className\n\t\t}\n\t}\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\thasAttrs = true\n\t\t\tbreak\n\t\t}\n\t}\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\ttext = children[0].children\n\t} else {\n\t\tchildList = children\n\t}\n\treturn Vnode(state.tag, attrs.key, hasAttrs ? attrs : undefined, childList, text)\n}\nfunction hyperscript(selector) {\n\t// Because sloppy mode sucks\n\tvar attrs = arguments[1], start = 2, children\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tif (typeof selector === \"string\") {\n\t\tvar cached = selectorCache[selector] || compileSelector(selector)\n\t}\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = 1\n\t}\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\tvar normalized = Vnode.normalizeChildren(children)\n\tif (typeof selector === \"string\") {\n\t\treturn execSelector(cached, attrs, normalized)\n\t} else {\n\t\treturn Vnode(selector, attrs.key, attrs, normalized)\n\t}\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function(attrs1, children) {\n\treturn Vnode(\"[\", attrs1.key, attrs1, Vnode.normalizeChildren(children), undefined, undefined)\n}\nvar m = hyperscript\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") global.Promise = PromisePolyfill\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key0 in object) {\n\t\tdestructure(key0, object[key0])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key0, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key0) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\nvar FILE_PROTOCOL_REGEX = new RegExp(\"^file://\", \"i\")\nvar _8 = function($window, Promise) {\n\tvar callbackCount = 0\n\tvar oncompletion\n\tfunction setCompletionCallback(callback) {oncompletion = callback}\n\tfunction finalizer() {\n\t\tvar count = 0\n\t\tfunction complete() {if (--count === 0 && typeof oncompletion === \"function\") oncompletion()}\n\t\treturn function finalize(promise0) {\n\t\t\tvar then0 = promise0.then\n\t\t\tpromise0.then = function() {\n\t\t\t\tcount++\n\t\t\t\tvar next = then0.apply(promise0, arguments)\n\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\tcomplete()\n\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t})\n\t\t\t\treturn finalize(next)\n\t\t\t}\n\t\t\treturn promise0\n\t\t}\n\t}\n\tfunction normalize(args, extra) {\n\t\tif (typeof args === \"string\") {\n\t\t\tvar url = args\n\t\t\targs = extra || {}\n\t\t\tif (args.url == null) args.url = url\n\t\t}\n\t\treturn args\n\t}\n\tfunction request(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tif (args.method == null) args.method = \"GET\"\n\t\t\targs.method = args.method.toUpperCase()\n\t\t\tvar useBody = (args.method === \"GET\" || args.method === \"TRACE\") ? false : (typeof args.useBody === \"boolean\" ? args.useBody : true)\n\t\t\tif (typeof args.serialize !== \"function\") args.serialize = typeof FormData !== \"undefined\" && args.data instanceof FormData ? function(value) {return value} : JSON.stringify\n\t\t\tif (typeof args.deserialize !== \"function\") args.deserialize = deserialize\n\t\t\tif (typeof args.extract !== \"function\") args.extract = extract\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\tif (useBody) args.data = args.serialize(args.data)\n\t\t\telse args.url = assemble(args.url, args.data)\n\t\t\tvar xhr = new $window.XMLHttpRequest(),\n\t\t\t\taborted = false,\n\t\t\t\t_abort = xhr.abort\n\t\t\txhr.abort = function abort() {\n\t\t\t\taborted = true\n\t\t\t\t_abort.call(xhr)\n\t\t\t}\n\t\t\txhr.open(args.method, args.url, typeof args.async === \"boolean\" ? args.async : true, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (args.serialize === JSON.stringify && useBody && !(args.headers && args.headers.hasOwnProperty(\"Content-Type\"))) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (args.deserialize === deserialize && !(args.headers && args.headers.hasOwnProperty(\"Accept\"))) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tfor (var key in args.headers) if ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif(aborted) return\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar response = (args.extract !== extract) ? args.extract(xhr, args) : args.deserialize(args.extract(xhr, args))\n\t\t\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || FILE_PROTOCOL_REGEX.test(args.url)) {\n\t\t\t\t\t\t\tresolve(cast(args.type, response))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar error = new Error(xhr.responseText)\n\t\t\t\t\t\t\tfor (var key in response) error[key] = response[key]\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useBody && (args.data != null)) xhr.send(args.data)\n\t\t\telse xhr.send()\n\t\t})\n\t\treturn args.background === true ? promise0 : finalize(promise0)\n\t}\n\tfunction jsonp(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(cast(args.type, data))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tif (args.data == null) args.data = {}\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\targs.data[args.callbackKey || \"callback\"] = callbackName\n\t\t\tscript.src = assemble(args.url, args.data)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t})\n\t\treturn args.background === true? promise0 : finalize(promise0)\n\t}\n\tfunction interpolate(url, data) {\n\t\tif (data == null) return url\n\t\tvar tokens = url.match(/:[^\\/]+/gi) || []\n\t\tfor (var i = 0; i < tokens.length; i++) {\n\t\t\tvar key = tokens[i].slice(1)\n\t\t\tif (data[key] != null) {\n\t\t\t\turl = url.replace(tokens[i], data[key])\n\t\t\t}\n\t\t}\n\t\treturn url\n\t}\n\tfunction assemble(url, data) {\n\t\tvar querystring = buildQueryString(data)\n\t\tif (querystring !== \"\") {\n\t\t\tvar prefix = url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\n\t\t\turl += prefix + querystring\n\t\t}\n\t\treturn url\n\t}\n\tfunction deserialize(data) {\n\t\ttry {return data !== \"\" ? JSON.parse(data) : null}\n\t\tcatch (e) {throw new Error(data)}\n\t}\n\tfunction extract(xhr) {return xhr.responseText}\n\tfunction cast(type0, data) {\n\t\tif (typeof type0 === \"function\") {\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tdata[i] = new type0(data[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse return new type0(data)\n\t\t}\n\t\treturn data\n\t}\n\treturn {request: request, jsonp: jsonp, setCompletionCallback: setCompletionCallback}\n}\nvar requestService = _8(window, PromisePolyfill)\nvar coreRenderer = function($window) {\n\tvar $doc = $window.document\n\tvar $emptyFragment = $doc.createDocumentFragment()\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\tvar onevent\n\tfunction setEventCallback(callback) {return onevent = callback}\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": return createText(parent, vnode, nextSibling)\n\t\t\t\tcase \"<\": return createHTML(parent, vnode, nextSibling)\n\t\t\t\tcase \"[\": return createFragment(parent, vnode, hooks, ns, nextSibling)\n\t\t\t\tdefault: return createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse return createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t\treturn vnode.dom\n\t}\n\tfunction createHTML(parent, vnode, nextSibling) {\n\t\tvar match1 = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\tvar parent1 = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}[match1[1]] || \"div\"\n\t\tvar temp = $doc.createElement(parent1)\n\t\ttemp.innerHTML = vnode.children\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs2 = vnode.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tns = getNameSpace(vnode) || ns\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tsetLateAttrs(vnode)\n\t\t\t}\n\t\t}\n\t\treturn element\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tvnode._state = vnode.state\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tinitLifecycle(vnode._state, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tvar element = createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t\tinsertNode(parent, element, nextSibling)\n\t\t\treturn element\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t\treturn $emptyFragment\n\t\t}\n\t}\n\t//update\n\tfunction updateNodes(parent, old, vnodes, recycling, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null) removeNodes(old, 0, old.length, vnodes)\n\t\telse {\n\t\t\tif (old.length === vnodes.length) {\n\t\t\t\tvar isUnkeyed = false\n\t\t\t\tfor (var i = 0; i < vnodes.length; i++) {\n\t\t\t\t\tif (vnodes[i] != null && old[i] != null) {\n\t\t\t\t\t\tisUnkeyed = vnodes[i].key == null && old[i].key == null\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isUnkeyed) {\n\t\t\t\t\tfor (var i = 0; i < old.length; i++) {\n\t\t\t\t\t\tif (old[i] === vnodes[i]) continue\n\t\t\t\t\t\telse if (old[i] == null && vnodes[i] != null) createNode(parent, vnodes[i], hooks, ns, getNextSibling(old, i + 1, nextSibling))\n\t\t\t\t\t\telse if (vnodes[i] == null) removeNodes(old, i, i + 1, vnodes)\n\t\t\t\t\t\telse updateNode(parent, old[i], vnodes[i], hooks, getNextSibling(old, i + 1, nextSibling), recycling, ns)\n\t\t\t\t\t}\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\trecycling = recycling || isRecyclable(old, vnodes)\n\t\t\tif (recycling) {\n\t\t\t\tvar pool = old.pool\n\t\t\t\told = old.concat(old.pool)\n\t\t\t}\n\t\t\tvar oldStart = 0, start = 0, oldEnd = old.length - 1, end = vnodes.length - 1, map\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldStart], v = vnodes[start]\n\t\t\t\tif (o === v && !recycling) oldStart++, start++\n\t\t\t\telse if (o == null) oldStart++\n\t\t\t\telse if (v == null) start++\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldStart >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar o = old[oldEnd]\n\t\t\t\t\tif (o === v && !recycling) oldEnd--, start++\n\t\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\t\tif (recycling || start < end) insertNode(parent, toFragment(o), getNextSibling(old, oldStart, nextSibling))\n\t\t\t\t\t\toldEnd--, start++\n\t\t\t\t\t}\n\t\t\t\t\telse break\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldEnd], v = vnodes[end]\n\t\t\t\tif (o === v && !recycling) oldEnd--, end--\n\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\telse if (v == null) end--\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\tif (o.dom != null) nextSibling = o.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (!map) map = getKeyMap(old, oldEnd)\n\t\t\t\t\tif (v != null) {\n\t\t\t\t\t\tvar oldIndex = map[v.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tvar movable = old[oldIndex]\n\t\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldIndex >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\t\tupdateNode(parent, movable, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\t\tinsertNode(parent, toFragment(movable), nextSibling)\n\t\t\t\t\t\t\told[oldIndex].skip = true\n\t\t\t\t\t\t\tif (movable.dom != null) nextSibling = movable.dom\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar dom = createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\tnextSibling = dom\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tend--\n\t\t\t\t}\n\t\t\t\tif (end < start) break\n\t\t\t}\n\t\t\tcreateNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\tremoveNodes(old, oldStart, oldEnd + 1, vnodes)\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode._state = old._state\n\t\t\tvnode.events = old.events\n\t\t\tif (!recycling && shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tif (recycling) {\n\t\t\t\t\t\tvnode.state = {}\n\t\t\t\t\t\tinitLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t\t}\n\t\t\t\t\telse updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, recycling, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old, null)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\ttoFragment(old)\n\t\t\tcreateHTML(parent, vnode, nextSibling)\n\t\t}\n\t\telse vnode.dom = old.dom, vnode.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, recycling, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, recycling, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle0 multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse if (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t}\n\t\telse {\n\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\tupdateNodes(element, old.children, vnode.children, recycling, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tif (recycling) {\n\t\t\tinitComponent(vnode, hooks)\n\t\t} else {\n\t\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tupdateLifecycle(vnode._state, vnode, hooks)\n\t\t}\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, recycling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance, null)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction isRecyclable(old, vnodes) {\n\t\tif (old.pool != null && Math.abs(old.pool.length - vnodes.length) <= Math.abs(old.length - vnodes.length)) {\n\t\t\tvar oldChildrenLength = old[0] && old[0].children && old[0].children.length || 0\n\t\t\tvar poolChildrenLength = old.pool[0] && old.pool[0].children && old.pool[0].children.length || 0\n\t\t\tvar vnodesChildrenLength = vnodes[0] && vnodes[0].children && vnodes[0].children.length || 0\n\t\t\tif (Math.abs(poolChildrenLength - vnodesChildrenLength) <= Math.abs(oldChildrenLength - vnodesChildrenLength)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\tfunction getKeyMap(vnodes, end) {\n\t\tvar map = {}, i = 0\n\t\tfor (var i = 0; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key2 = vnode.key\n\t\t\t\tif (key2 != null) map[key2] = i\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\tfunction toFragment(vnode) {\n\t\tvar count0 = vnode.domSize\n\t\tif (count0 != null || vnode.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count0 > 0) {\n\t\t\t\tvar dom = vnode.dom\n\t\t\t\twhile (--count0) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling && nextSibling.parentNode) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction setContentEditable(vnode) {\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\t//remove\n\tfunction removeNodes(vnodes, start, end, context) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tif (vnode.skip) vnode.skip = false\n\t\t\t\telse removeNode(vnode, context)\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNode(vnode, context) {\n\t\tvar expected = 1, called = 0\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode.attrs.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode._state.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tonremove(vnode)\n\t\t\t\tif (vnode.dom) {\n\t\t\t\t\tvar count0 = vnode.domSize || 1\n\t\t\t\t\tif (count0 > 1) {\n\t\t\t\t\t\tvar dom = vnode.dom\n\t\t\t\t\t\twhile (--count0) {\n\t\t\t\t\t\t\tremoveNodeFromDOM(dom.nextSibling)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tremoveNodeFromDOM(vnode.dom)\n\t\t\t\t\tif (context != null && vnode.domSize == null && !hasIntegrationMethods(vnode.attrs) && typeof vnode.tag === \"string\") { //TODO test custom elements\n\t\t\t\t\t\tif (!context.pool) context.pool = [vnode]\n\t\t\t\t\t\telse context.pool.push(vnode)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNodeFromDOM(node) {\n\t\tvar parent = node.parentNode\n\t\tif (parent != null) parent.removeChild(node)\n\t}\n\tfunction onremove(vnode) {\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") vnode.attrs.onremove.call(vnode.state, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (typeof vnode._state.onremove === \"function\") vnode._state.onremove.call(vnode.state, vnode)\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode, attrs2, ns) {\n\t\tfor (var key2 in attrs2) {\n\t\t\tsetAttr(vnode, key2, null, attrs2[key2], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key2, old, value, ns) {\n\t\tvar element = vnode.dom\n\t\tif (key2 === \"key\" || key2 === \"is\" || (old === value && !isFormAttribute(vnode, key2)) && typeof value !== \"object\" || typeof value === \"undefined\" || isLifecycleMethod(key2)) return\n\t\tvar nsLastIndex = key2.indexOf(\":\")\n\t\tif (nsLastIndex > -1 && key2.substr(0, nsLastIndex) === \"xlink\") {\n\t\t\telement.setAttributeNS(\"http://www.w3.org/1999/xlink\", key2.slice(nsLastIndex + 1), value)\n\t\t}\n\t\telse if (key2[0] === \"o\" && key2[1] === \"n\" && typeof value === \"function\") updateEvent(vnode, key2, value)\n\t\telse if (key2 === \"style\") updateStyle(element, old, value)\n\t\telse if (key2 in element && !isAttribute(key2) && ns === undefined && !isCustomElement(vnode)) {\n\t\t\tif (key2 === \"value\") {\n\t\t\t\tvar normalized0 = \"\" + value // eslint-disable-line no-implicit-coercion\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\") {\n\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\tif (vnode.dom.selectedIndex === -1 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (old !== null && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old != null && vnode.dom.value === normalized0) return\n\t\t\t}\n\t\t\t// If you assign an input type1 that is not supported by IE 11 with an assignment expression, an error0 will occur.\n\t\t\tif (vnode.tag === \"input\" && key2 === \"type\") {\n\t\t\t\telement.setAttribute(key2, value)\n\t\t\t\treturn\n\t\t\t}\n\t\t\telement[key2] = value\n\t\t}\n\t\telse {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) element.setAttribute(key2, \"\")\n\t\t\t\telse element.removeAttribute(key2)\n\t\t\t}\n\t\t\telse element.setAttribute(key2 === \"className\" ? \"class\" : key2, value)\n\t\t}\n\t}\n\tfunction setLateAttrs(vnode) {\n\t\tvar attrs2 = vnode.attrs\n\t\tif (vnode.tag === \"select\" && attrs2 != null) {\n\t\t\tif (\"value\" in attrs2) setAttr(vnode, \"value\", null, attrs2.value, undefined)\n\t\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t\t}\n\t}\n\tfunction updateAttrs(vnode, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key2 in attrs2) {\n\t\t\t\tsetAttr(vnode, key2, old && old[key2], attrs2[key2], ns)\n\t\t\t}\n\t\t}\n\t\tif (old != null) {\n\t\t\tfor (var key2 in old) {\n\t\t\t\tif (attrs2 == null || !(key2 in attrs2)) {\n\t\t\t\t\tif (key2 === \"className\") key2 = \"class\"\n\t\t\t\t\tif (key2[0] === \"o\" && key2[1] === \"n\" && !isLifecycleMethod(key2)) updateEvent(vnode, key2, undefined)\n\t\t\t\t\telse if (key2 !== \"key\") vnode.dom.removeAttribute(key2)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction isAttribute(attr) {\n\t\treturn attr === \"href\" || attr === \"list\" || attr === \"form\" || attr === \"width\" || attr === \"height\"// || attr === \"type\"\n\t}\n\tfunction isCustomElement(vnode){\n\t\treturn vnode.attrs.is || vnode.tag.indexOf(\"-\") > -1\n\t}\n\tfunction hasIntegrationMethods(source) {\n\t\treturn source != null && (source.oncreate || source.onupdate || source.onbeforeremove || source.onremove)\n\t}\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) element.style.cssText = \"\", old = null\n\t\tif (style == null) element.style.cssText = \"\"\n\t\telse if (typeof style === \"string\") element.style.cssText = style\n\t\telse {\n\t\t\tif (typeof old === \"string\") element.style.cssText = \"\"\n\t\t\tfor (var key2 in style) {\n\t\t\t\telement.style[key2] = style[key2]\n\t\t\t}\n\t\t\tif (old != null && typeof old !== \"string\") {\n\t\t\t\tfor (var key2 in old) {\n\t\t\t\t\tif (!(key2 in style)) element.style[key2] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode, key2, value) {\n\t\tvar element = vnode.dom\n\t\tvar callback = typeof onevent !== \"function\" ? value : function(e) {\n\t\t\tvar result = value.call(element, e)\n\t\t\tonevent.call(element, e)\n\t\t\treturn result\n\t\t}\n\t\tif (key2 in element) element[key2] = typeof value === \"function\" ? callback : null\n\t\telse {\n\t\t\tvar eventName = key2.slice(2)\n\t\t\tif (vnode.events === undefined) vnode.events = {}\n\t\t\tif (vnode.events[key2] === callback) return\n\t\t\tif (vnode.events[key2] != null) element.removeEventListener(eventName, vnode.events[key2], false)\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tvnode.events[key2] = callback\n\t\t\t\telement.addEventListener(eventName, vnode.events[key2], false)\n\t\t\t}\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") source.oninit.call(vnode.state, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(source.oncreate.bind(vnode.state, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(source.onupdate.bind(vnode.state, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tvar forceVnodeUpdate, forceComponentUpdate\n\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") forceVnodeUpdate = vnode.attrs.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeupdate === \"function\") forceComponentUpdate = vnode._state.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (!(forceVnodeUpdate === undefined && forceComponentUpdate === undefined) && !forceVnodeUpdate && !forceComponentUpdate) {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = $doc.activeElement\n\t\tvar namespace = dom.namespaceURI\n\t\t// First time0 rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tif (!Array.isArray(vnodes)) vnodes = [vnodes]\n\t\tupdateNodes(dom, dom.vnodes, Vnode.normalizeChildren(vnodes), false, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\tdom.vnodes = vnodes\n\t\t// document.activeElement can return null in IE https://developer.mozilla.org/en-US/docs/Web/API/Document/activeElement\n\t\tif (active != null && $doc.activeElement !== active) active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n\treturn {render: render, setEventCallback: setEventCallback}\n}\nfunction throttle(callback) {\n\t//60fps translates to 16.6ms, round it down since setTimeout requires int\n\tvar time = 16\n\tvar last = 0, pending = null\n\tvar timeout = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : setTimeout\n\treturn function() {\n\t\tvar now = Date.now()\n\t\tif (last === 0 || now - last >= time) {\n\t\t\tlast = now\n\t\t\tcallback()\n\t\t}\n\t\telse if (pending === null) {\n\t\t\tpending = timeout(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t\tlast = Date.now()\n\t\t\t}, time - (now - last))\n\t\t}\n\t}\n}\nvar _11 = function($window) {\n\tvar renderService = coreRenderer($window)\n\trenderService.setEventCallback(function(e) {\n\t\tif (e.redraw === false) e.redraw = undefined\n\t\telse redraw()\n\t})\n\tvar callbacks = []\n\tfunction subscribe(key1, callback) {\n\t\tunsubscribe(key1)\n\t\tcallbacks.push(key1, throttle(callback))\n\t}\n\tfunction unsubscribe(key1) {\n\t\tvar index = callbacks.indexOf(key1)\n\t\tif (index > -1) callbacks.splice(index, 2)\n\t}\n\tfunction redraw() {\n\t\tfor (var i = 1; i < callbacks.length; i += 2) {\n\t\t\tcallbacks[i]()\n\t\t}\n\t}\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\nvar redrawService = _11(window)\nrequestService.setCompletionCallback(redrawService.redraw)\nvar _16 = function(redrawService0) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService0.render(root, [])\n\t\t\tredrawService0.unsubscribe(root)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif (component.view == null && typeof component !== \"function\") throw new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t\n\t\tvar run0 = function() {\n\t\t\tredrawService0.render(root, Vnode(component))\n\t\t}\n\t\tredrawService0.subscribe(root, run0)\n\t\tredrawService0.redraw()\n\t}\n}\nm.mount = _16(redrawService)\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), data0 = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key5 = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\t\tvar levels = key5.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data0\n\t\tif (key5.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key5 = levels.slice(0, j).join()\n\t\t\t\tif (counters[key5] == null) counters[key5] = 0\n\t\t\t\tlevel = counters[key5]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data0\n}\nvar coreRouter = function($window) {\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction normalize1(fragment0) {\n\t\tvar data = $window.location[fragment0].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\tif (fragment0 === \"pathname\" && data[0] !== \"/\") data = \"/\" + data\n\t\treturn data\n\t}\n\tvar asyncId\n\tfunction debounceAsync(callback0) {\n\t\treturn function() {\n\t\t\tif (asyncId != null) return\n\t\t\tasyncId = callAsync0(function() {\n\t\t\t\tasyncId = null\n\t\t\t\tcallback0()\n\t\t\t})\n\t\t}\n\t}\n\tfunction parsePath(path, queryData, hashData) {\n\t\tvar queryIndex = path.indexOf(\"?\")\n\t\tvar hashIndex = path.indexOf(\"#\")\n\t\tvar pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length\n\t\tif (queryIndex > -1) {\n\t\t\tvar queryEnd = hashIndex > -1 ? hashIndex : path.length\n\t\t\tvar queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd))\n\t\t\tfor (var key4 in queryParams) queryData[key4] = queryParams[key4]\n\t\t}\n\t\tif (hashIndex > -1) {\n\t\t\tvar hashParams = parseQueryString(path.slice(hashIndex + 1))\n\t\t\tfor (var key4 in hashParams) hashData[key4] = hashParams[key4]\n\t\t}\n\t\treturn path.slice(0, pathEnd)\n\t}\n\tvar router = {prefix: \"#!\"}\n\trouter.getPath = function() {\n\t\tvar type2 = router.prefix.charAt(0)\n\t\tswitch (type2) {\n\t\t\tcase \"#\": return normalize1(\"hash\").slice(router.prefix.length)\n\t\t\tcase \"?\": return normalize1(\"search\").slice(router.prefix.length) + normalize1(\"hash\")\n\t\t\tdefault: return normalize1(\"pathname\").slice(router.prefix.length) + normalize1(\"search\") + normalize1(\"hash\")\n\t\t}\n\t}\n\trouter.setPath = function(path, data, options) {\n\t\tvar queryData = {}, hashData = {}\n\t\tpath = parsePath(path, queryData, hashData)\n\t\tif (data != null) {\n\t\t\tfor (var key4 in data) queryData[key4] = data[key4]\n\t\t\tpath = path.replace(/:([^\\/]+)/g, function(match2, token) {\n\t\t\t\tdelete queryData[token]\n\t\t\t\treturn data[token]\n\t\t\t})\n\t\t}\n\t\tvar query = buildQueryString(queryData)\n\t\tif (query) path += \"?\" + query\n\t\tvar hash = buildQueryString(hashData)\n\t\tif (hash) path += \"#\" + hash\n\t\tif (supportsPushState) {\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\t$window.onpopstate()\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, router.prefix + path)\n\t\t\telse $window.history.pushState(state, title, router.prefix + path)\n\t\t}\n\t\telse $window.location.href = router.prefix + path\n\t}\n\trouter.defineRoutes = function(routes, resolve, reject) {\n\t\tfunction resolveRoute() {\n\t\t\tvar path = router.getPath()\n\t\t\tvar params = {}\n\t\t\tvar pathname = parsePath(path, params, params)\n\t\t\tvar state = $window.history.state\n\t\t\tif (state != null) {\n\t\t\t\tfor (var k in state) params[k] = state[k]\n\t\t\t}\n\t\t\tfor (var route0 in routes) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + route0.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\n\t\t\t\tif (matcher.test(pathname)) {\n\t\t\t\t\tpathname.replace(matcher, function() {\n\t\t\t\t\t\tvar keys = route0.match(/:[^\\/]+/g) || []\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\n\t\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\t\tparams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(routes[route0], params, path, route0)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(path, params)\n\t\t}\n\t\tif (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute)\n\t\telse if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute\n\t\tresolveRoute()\n\t}\n\treturn router\n}\nvar _20 = function($window, redrawService0) {\n\tvar routeService = coreRouter($window)\n\tvar identity = function(v) {return v}\n\tvar render1, component, attrs3, currentPath, lastUpdate\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tvar run1 = function() {\n\t\t\tif (render1 != null) redrawService0.render(root, render1(Vnode(component, attrs3.key, attrs3)))\n\t\t}\n\t\tvar bail = function(path) {\n\t\t\tif (path !== defaultRoute) routeService.setPath(defaultRoute, null, {replace: true})\n\t\t\telse throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path) {\n\t\t\tvar update = lastUpdate = function(routeResolver, comp) {\n\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\tattrs3 = params, currentPath = path, lastUpdate = null\n\t\t\t\trender1 = (routeResolver.render || identity).bind(routeResolver)\n\t\t\t\trun1()\n\t\t\t}\n\t\t\tif (payload.view || typeof payload === \"function\") update({}, payload)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path)).then(function(resolved) {\n\t\t\t\t\t\tupdate(payload, resolved)\n\t\t\t\t\t}, bail)\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\")\n\t\t\t}\n\t\t}, bail)\n\t\tredrawService0.subscribe(root, run1)\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\trouteService.setPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix0) {routeService.prefix = prefix0}\n\troute.link = function(vnode1) {\n\t\tvnode1.dom.setAttribute(\"href\", routeService.prefix + vnode1.attrs.href)\n\t\tvnode1.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, undefined)\n\t\t}\n\t}\n\troute.param = function(key3) {\n\t\tif(typeof attrs3 !== \"undefined\" && typeof key3 !== \"undefined\") return attrs3[key3]\n\t\treturn attrs3\n\t}\n\treturn route\n}\nm.route = _20(window, redrawService)\nm.withAttr = function(attrName, callback1, context) {\n\treturn function(e) {\n\t\tcallback1.call(context || this, attrName in e.currentTarget ? e.currentTarget[attrName] : e.currentTarget.getAttribute(attrName))\n\t}\n}\nvar _28 = coreRenderer(window)\nm.render = _28.render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.version = \"1.1.6\"\nm.vnode = Vnode\nif (typeof module !== \"undefined\") module[\"exports\"] = m\nelse window.m = m\n}());","'use strict';\n\n// used by apply() and isApplicationOf()\nconst _appliedMixin = '__mixwith_appliedMixin';\n\n/**\n * A function that returns a subclass of its argument.\n *\n * @example\n * const M = (superclass) => class extends superclass {\n *   getMessage() {\n *     return \"Hello\";\n *   }\n * }\n *\n * @typedef {Function} MixinFunction\n * @param {Function} superclass\n * @return {Function} A subclass of `superclass`\n */\n\n/**\n * Applies `mixin` to `superclass`.\n *\n * `apply` stores a reference from the mixin application to the unwrapped mixin\n * to make `isApplicationOf` and `hasMixin` work.\n *\n * This function is usefull for mixin wrappers that want to automatically enable\n * {@link hasMixin} support.\n *\n * @example\n * const Applier = (mixin) => wrap(mixin, (superclass) => apply(superclass, mixin));\n *\n * // M now works with `hasMixin` and `isApplicationOf`\n * const M = Applier((superclass) => class extends superclass {});\n *\n * class C extends M(Object) {}\n * let i = new C();\n * hasMixin(i, M); // true\n *\n * @function\n * @param {Function} superclass A class or constructor function\n * @param {MixinFunction} mixin The mixin to apply\n * @return {Function} A subclass of `superclass` produced by `mixin`\n */\nexport const apply = (superclass, mixin) => {\n  let application = mixin(superclass);\n  application.prototype[_appliedMixin] = unwrap(mixin);\n  return application;\n};\n\n/**\n * Returns `true` iff `proto` is a prototype created by the application of\n * `mixin` to a superclass.\n *\n * `isApplicationOf` works by checking that `proto` has a reference to `mixin`\n * as created by `apply`.\n *\n * @function\n * @param {Object} proto A prototype object created by {@link apply}.\n * @param {MixinFunction} mixin A mixin function used with {@link apply}.\n * @return {boolean} whether `proto` is a prototype created by the application of\n * `mixin` to a superclass\n */\nexport const isApplicationOf = (proto, mixin) =>\n  proto.hasOwnProperty(_appliedMixin) && proto[_appliedMixin] === unwrap(mixin);\n\n/**\n * Returns `true` iff `o` has an application of `mixin` on its prototype\n * chain.\n *\n * @function\n * @param {Object} o An object\n * @param {MixinFunction} mixin A mixin applied with {@link apply}\n * @return {boolean} whether `o` has an application of `mixin` on its prototype\n * chain\n */\nexport const hasMixin = (o, mixin) => {\n  while (o != null) {\n    if (isApplicationOf(o, mixin)) return true;\n    o = Object.getPrototypeOf(o);\n  }\n  return false;\n}\n\n\n// used by wrap() and unwrap()\nconst _wrappedMixin = '__mixwith_wrappedMixin';\n\n/**\n * Sets up the function `mixin` to be wrapped by the function `wrapper`, while\n * allowing properties on `mixin` to be available via `wrapper`, and allowing\n * `wrapper` to be unwrapped to get to the original function.\n *\n * `wrap` does two things:\n *   1. Sets the prototype of `mixin` to `wrapper` so that properties set on\n *      `mixin` inherited by `wrapper`.\n *   2. Sets a special property on `mixin` that points back to `mixin` so that\n *      it can be retreived from `wrapper`\n *\n * @function\n * @param {MixinFunction} mixin A mixin function\n * @param {MixinFunction} wrapper A function that wraps {@link mixin}\n * @return {MixinFunction} `wrapper`\n */\nexport const wrap = (mixin, wrapper) => {\n  Object.setPrototypeOf(wrapper, mixin);\n  if (!mixin[_wrappedMixin]) {\n    mixin[_wrappedMixin] = mixin;\n  }\n  return wrapper;\n};\n\n/**\n * Unwraps the function `wrapper` to return the original function wrapped by\n * one or more calls to `wrap`. Returns `wrapper` if it's not a wrapped\n * function.\n *\n * @function\n * @param {MixinFunction} wrapper A wrapped mixin produced by {@link wrap}\n * @return {MixinFunction} The originally wrapped mixin\n */\nexport const unwrap = (wrapper) => wrapper[_wrappedMixin] || wrapper;\n\nconst _cachedApplications = '__mixwith_cachedApplications';\n\n/**\n * Decorates `mixin` so that it caches its applications. When applied multiple\n * times to the same superclass, `mixin` will only create one subclass, memoize\n * it and return it for each application.\n *\n * Note: If `mixin` somehow stores properties its classes constructor (static\n * properties), or on its classes prototype, it will be shared across all\n * applications of `mixin` to a super class. It's reccomended that `mixin` only\n * access instance state.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap with caching behavior\n * @return {MixinFunction} a new mixin function\n */\nexport const Cached = (mixin) => wrap(mixin, (superclass) => {\n  // Get or create a symbol used to look up a previous application of mixin\n  // to the class. This symbol is unique per mixin definition, so a class will have N\n  // applicationRefs if it has had N mixins applied to it. A mixin will have\n  // exactly one _cachedApplicationRef used to store its applications.\n\n  let cachedApplications = superclass[_cachedApplications];\n  if (!cachedApplications) {\n    cachedApplications = superclass[_cachedApplications] = new Map();\n  }\n\n  let application = cachedApplications.get(mixin);\n  if (!application) {\n    application = mixin(superclass);\n    cachedApplications.set(mixin, application);\n  }\n\n  return application;\n});\n\n/**\n * Decorates `mixin` so that it only applies if it's not already on the\n * prototype chain.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap with deduplication behavior\n * @return {MixinFunction} a new mixin function\n */\nexport const DeDupe = (mixin) => wrap(mixin, (superclass) =>\n    (hasMixin(superclass.prototype, mixin))\n      ? superclass\n      : mixin(superclass));\n\n/**\n * Adds [Symbol.hasInstance] (ES2015 custom instanceof support) to `mixin`.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to add [Symbol.hasInstance] to\n * @return {MixinFunction} the given mixin function\n */\nexport const HasInstance = (mixin) => {\n  if (Symbol && Symbol.hasInstance && !mixin[Symbol.hasInstance]) {\n    Object.defineProperty(mixin, Symbol.hasInstance, {\n      value(o) {\n        return hasMixin(o, mixin);\n      },\n    });\n  }\n  return mixin;\n};\n\n/**\n * A basic mixin decorator that applies the mixin with {@link apply} so that it\n * can be used with {@link isApplicationOf}, {@link hasMixin} and the other\n * mixin decorator functions.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap\n * @return {MixinFunction} a new mixin function\n */\nexport const BareMixin = (mixin) => wrap(mixin, (s) => apply(s, mixin));\n\n/**\n * Decorates a mixin function to add deduplication, application caching and\n * instanceof support.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap\n * @return {MixinFunction} a new mixin function\n */\nexport const Mixin = (mixin) => DeDupe(Cached(BareMixin(mixin)));\n\n/**\n * A fluent interface to apply a list of mixins to a superclass.\n *\n * ```javascript\n * class X extends mix(Object).with(A, B, C) {}\n * ```\n *\n * The mixins are applied in order to the superclass, so the prototype chain\n * will be: X->C'->B'->A'->Object.\n *\n * This is purely a convenience function. The above example is equivalent to:\n *\n * ```javascript\n * class X extends C(B(A(Object))) {}\n * ```\n *\n * @function\n * @param {Function} [superclass=Object]\n * @return {MixinBuilder}\n */\nexport const mix = (superclass) => new MixinBuilder(superclass);\n\nclass MixinBuilder {\n\n  constructor(superclass) {\n    this.superclass = superclass || class {};\n  }\n\n  /**\n   * Applies `mixins` in order to the superclass given to `mix()`.\n   *\n   * @param {Array.<Mixin>} mixins\n   * @return {Function} a subclass of `superclass` with `mixins` applied\n   */\n  with(...mixins) {\n    return mixins.reduce((c, m) => m(c), this.superclass);\n  }\n}\n","/**\n * @description Helper function for detecting null or undefined.\n */\n\nconst isNil = (o) => o === null || o === undefined;\n\nexport {isNil};\n","/**\n * @description\n * Bounds\n * Class representing a 2D bounds, having the same properties as a DOMRect.\n * This class can be instantiated by script, unlike DOMRect object itself which\n * comes from the browser's DOM by getBoundingClientRect().\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n */\nimport {isNil} from '../util/isNil';\n\nexport class Bounds {\n  /**\n   * Create a Bounds\n   *\n   * @param {Object} params - having the following properties:\n   * @param {Number} bottom\n   * @param {Number} left\n   * @param {Number} right\n   * @param {Number} top\n   * @param {Number} width\n   * @param {Number} height\n   * @returns {Object}\n   */\n  constructor({top, left, bottom, right, width, height, allowSubpixel = true}) {\n    this._bottom = bottom;\n    this._left = left;\n    this._right = right;\n    this._top = top;\n    this._height = height;\n    this._width = width;\n    this.allowSubpixel = allowSubpixel;\n\n    if (isNil(this.width)) this._width = this.right - this.left;\n    if (isNil(this.height)) this._height = this.bottom - this.top;\n    if (isNil(this.bottom)) this._bottom = this.top + this.height;\n    if (isNil(this.right)) this._right = this.left + this.width;\n\n    if (!allowSubpixel) {\n      // noinspection JSSuspiciousNameCombination\n      this._bottom = Math.floor(this.bottom);\n      // noinspection JSSuspiciousNameCombination\n      this._top = Math.floor(this.top);\n      this._left = Math.floor(this.left);\n      this._right = Math.floor(this.right);\n      this._width = Math.floor(this.width);\n      // noinspection JSSuspiciousNameCombination\n      this._height = Math.floor(this.height);\n      if (this.x) this.x = Math.floor(this.x);\n      if (this.y) { // noinspection JSSuspiciousNameCombination\n        this.y = Math.floor(this.y);\n      }\n    }\n  }\n\n  /**\n   * Getters and setters, should be allowed to update bounds without having to\n   * resort to making a new bounds object.\n   */\n\n  get bottom() {\n    return this._bottom;\n  }\n\n  set bottom(val) {\n    if (this.allowSubpixel) {\n      this._bottom = val;\n      this._height = this._bottom - this._top;\n    } else {\n      this._bottom = Math.floor(val);\n      this._height = Math.floor(this._bottom - this._top);\n    }\n  }\n\n  get top() {\n    return this._top;\n  }\n\n  set top(val) {\n    if (this.allowSubpixel) {\n      this._top = val;\n      this._height = this._bottom - this._top;\n    } else {\n      this._top = Math.floor(val);\n      this._height = Math.floor(this._bottom - this._top);\n    }\n  }\n\n  get left() {\n    return this._left;\n  }\n\n  set left(val) {\n    if (this.allowSubpixel) {\n      this._left = val;\n      this._width = this._right - this._left;\n    } else {\n      this._left = Math.floor(val);\n      this._width = Math.floor(this._right - this._left);\n    }\n  }\n\n  get right() {\n    return this._right;\n  }\n\n  set right(val) {\n    if (this.allowSubpixel) {\n      this._right = val;\n      this._width = this._right - this._left;\n    } else {\n      this._right = Math.floor(val);\n      this._width = Math.floor(this._right - this._left);\n    }\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  set width(val) {\n    if (this.allowSubpixel) {\n      this._width = val;\n      this._right = this._left + this._width;\n    } else {\n      this._right = Math.floor(val);\n      this._width = Math.floor(this._left + this._width);\n    }\n  }\n\n  get height() {\n    return this._height;\n  }\n\n  set height(val) {\n    if (this.allowSubpixel) {\n      this._height = val;\n      this._bottom = this._top + this._height;\n    } else {\n      this._height = Math.floor(val);\n      this._bottom = Math.floor(this._top + this._height);\n    }\n  }\n\n  /**\n   * Check if width or height is zero, making the Bounds effectively empty.\n   */\n  get isEmptyArea() {\n    return !this.width || !this.height;\n  }\n\n  /**\n   * Area of bounds (width * height)\n   */\n  get area() {\n    return this.width * this.height;\n  }\n\n  /**\n   * Class method- test whether two bounds are equal (rounds to nearest pixel)\n   *\n   * @param bounds1 - DOMRect or Bounds instance\n   * @param bounds2 - DOMRect or Bounds instance\n   * @returns Boolean\n   */\n  static equals(bounds1, bounds2) {\n    let p, n1, n2;\n    if (!bounds1 || !bounds2)\n      return false; // check for null args\n    for (let i = 0; i < PROPS.length; i++) {\n      p = PROPS[i];\n      n1 = bounds1[p];\n      n2 = bounds2[p];\n      if (n1 === undefined || n2 === undefined) { // skip test, see note about x,y\n        continue;\n      }\n      // cast properties from float to int before equality comparison\n      if (Math.floor(n1) !== Math.floor(n2))\n        return false;\n    }\n    return true;\n  }\n\n  /**\n   * Class method- test whether two bounds are equal in area (rounds to nearest pixel)\n   *\n   * @param bounds1 - DOMRect or Bounds instance\n   * @param bounds2 - DOMRect or Bounds instance\n   * @returns Boolean\n   */\n  static areaEquals(bounds1, bounds2) {\n    if (!bounds1 || !bounds2)\n      return false; // check for null args\n    return Math.floor(bounds1.area) === Math.floor(bounds2.area);\n  }\n\n  /**\n   * Instance method call of Bounds.equals()\n   */\n  equals(otherBounds) {\n    return Bounds.equals(this, otherBounds);\n  }\n\n  /**\n   * Area equality, rounds to integer pixel.\n   */\n  areaEquals(otherBounds) {\n    return Bounds.areaEquals(this, otherBounds);\n  }\n}\n\n// DOMRect may *not* have iterable properties, so hardcode them here\nconst PROPS = [\n  // note: x any y may not exist!\n  'bottom', 'left', 'right', 'top', 'width', 'height', 'x', 'y'\n];\n","/**\n * LayoutBase\n * A Mithril component Base class for Layouts, e.g. HorizontalLayout and\n * CircosLayout.\n */\nimport {Bounds} from '../../model/Bounds';\n\nexport class LayoutBase {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle callback\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.appState = vnode.attrs.appState;\n  }\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oncreate(vnode) {\n    // save a reference to this component's dom element\n    this.el = vnode.dom;\n    this.bounds = new Bounds(vnode.dom.getBoundingClientRect());\n  }\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  onupdate(vnode) {\n    this.bounds = new Bounds(vnode.dom.getBoundingClientRect());\n  }\n\n}\n","/**\n * @file Helper functions for calculating canvas points.\n */\n\n/**\n * Takes a point on a map and translates it from the newScale to the baseScale scale\n * @param point - Map point in terms of new scale\n * @param baseScale - largest and smallest possible values of the scale\n * @param newScale - largest and smallest values of the adjusted scale\n * @param {boolean} invert - is the scale to be drawn \"flipped\"\n * @returns {number} point converted from location on new scale to location on base scale\n */\n\nexport function translateScale(point, baseScale, newScale, invert) {\n  let loc = ((baseScale.stop - baseScale.start) * (point - newScale.start) / (newScale.stop - newScale.start) + baseScale.start) - baseScale.start;\n  if (invert) {\n    loc = (baseScale.start + baseScale.stop) - loc;\n  }\n  return loc;\n}\n\n/**\n * Takes an event and translates the event coordinates to canvas coordinates\n * here because webkit events vs mozilla events vs ie events don't all provide\n * the same data\n *\n * @param evt - dom event\n * @param canvas - target canvas\n * @returns {{x: number, y: number}} location translated from page event coordinates to canvas coordinates.\n */\n\nexport function pageToCanvas(evt, canvas) {\n  function getOffset(el) {\n    let _x = 0;\n    let _y = 0;\n    while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\n      _x += el.offsetLeft - el.scrollLeft;\n      _y += el.offsetTop - el.scrollTop;\n      el = el.offsetParent;\n    }\n    return {top: _y, left: _x};\n  }\n\n  let pageOffset = getOffset(canvas);\n  return {\n    'x': evt.srcEvent.pageX - pageOffset.left,\n    'y': evt.srcEvent.pageY - pageOffset.top\n  };\n}\n","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","/**\n * lazily draw on the canvas, because mithril updates the dom asynchronously.\n * The canvas will be cleared when mithril writes the new width and height\n * of canvas element into dom. So we cannot draw upon canvas until after that.\n */\nimport {Bounds} from '../model/Bounds';\n\nexport let DrawLazilyMixin = (superclass) => class extends superclass {\n\n  /**\n   *\n   * @param wantedBounds\n   */\n\n  drawLazily(wantedBounds) {\n    if (wantedBounds.area === 0) return;\n    if (this._drawLazilyTimeoutId) clearTimeout(this._drawLazilyTimeoutId);\n    if (!Bounds.areaEquals(this.lastDrawnMithrilBounds, wantedBounds)) {\n      console.log('waiting for wantedBounds from mithril: ',\n        wantedBounds.width, wantedBounds.height);\n      let tid1 = this._drawLazilyTimeoutId = setTimeout(() => {\n        if (tid1 !== this._drawLazilyTimeoutId) return;\n        this.drawLazily(wantedBounds);\n      });\n    }\n    else {\n      console.log('scheduling lazy draw for: ',\n        wantedBounds.width, wantedBounds.height);\n      let tid2 = this._drawLazilyTimeoutId = setTimeout(() => {\n        if (tid2 !== this._drawLazilyTimeoutId) return;\n        if (!Bounds.areaEquals(this.lastDrawnCanvasBounds, wantedBounds)) {\n          this.draw();\n        }\n      });\n    }\n  }\n};\n","/**\n * Store a reference to the mithril component on it's corresponding dom\n * element.\n */\n\nexport let RegisterComponentMixin = (superclass) => class extends superclass {\n\n  /**\n   *\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    if (super.oninit) super.oninit(vnode);\n    if (vnode.attrs && vnode.attrs.registerComponentCallback) {\n      vnode.attrs.registerComponentCallback(this);\n    }\n  }\n\n  /**\n   *\n   * @param vnode\n   */\n\n  oncreate(vnode) {\n    if (super.oncreate) super.oncreate(vnode);\n    vnode.dom.mithrilComponent = this;\n  }\n\n  /**\n   *\n   * @param vnode\n   */\n\n  onbeforeremove(vnode) {\n    if (super.onbeforeremove) super.onbeforeremove(vnode);\n    delete vnode.dom.mithrilComponent;\n  }\n};\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n","'use strict';\n\nmodule.exports = rbush;\nmodule.exports.default = rbush;\n\nvar quickselect = require('quickselect');\n\nfunction rbush(maxEntries, format) {\n    if (!(this instanceof rbush)) return new rbush(maxEntries, format);\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries || 9);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n\n    if (format) {\n        this._initFormat(format);\n    }\n\n    this.clear();\n}\n\nrbush.prototype = {\n\n    all: function () {\n        return this._all(this.data, []);\n    },\n\n    search: function (bbox) {\n\n        var node = this.data,\n            result = [],\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return result;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    },\n\n    collides: function (bbox) {\n\n        var node = this.data,\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return false;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    },\n\n    load: function (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (var i = 0, len = data.length; i < len; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                var tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    },\n\n    insert: function (item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    },\n\n    clear: function () {\n        this.data = createNode([]);\n        return this;\n    },\n\n    remove: function (item, equalsFn) {\n        if (!item) return this;\n\n        var node = this.data,\n            bbox = this.toBBox(item),\n            path = [],\n            indexes = [],\n            i, parent, index, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    },\n\n    toBBox: function (item) { return item; },\n\n    compareMinX: compareNodeMinX,\n    compareMinY: compareNodeMinY,\n\n    toJSON: function () { return this.data; },\n\n    fromJSON: function (data) {\n        this.data = data;\n        return this;\n    },\n\n    _all: function (node, result) {\n        var nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push.apply(result, node.children);\n            else nodesToSearch.push.apply(nodesToSearch, node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    },\n\n    _build: function (items, left, right, height) {\n\n        var N = right - left + 1,\n            M = this._maxEntries,\n            node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        var N2 = Math.ceil(N / M),\n            N1 = N2 * Math.ceil(Math.sqrt(M)),\n            i, j, right2, right3;\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (i = left; i <= right; i += N1) {\n\n            right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (j = i; j <= right2; j += N2) {\n\n                right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    },\n\n    _chooseSubtree: function (bbox, node, level, path) {\n\n        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;\n\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            minArea = minEnlargement = Infinity;\n\n            for (i = 0, len = node.children.length; i < len; i++) {\n                child = node.children[i];\n                area = bboxArea(child);\n                enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    },\n\n    _insert: function (item, level, isNode) {\n\n        var toBBox = this.toBBox,\n            bbox = isNode ? item : toBBox(item),\n            insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    },\n\n    // split overflowed node into two\n    _split: function (insertPath, level) {\n\n        var node = insertPath[level],\n            M = node.children.length,\n            m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        var splitIndex = this._chooseSplitIndex(node, m, M);\n\n        var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    },\n\n    _splitRoot: function (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    },\n\n    _chooseSplitIndex: function (node, m, M) {\n\n        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;\n\n        minOverlap = minArea = Infinity;\n\n        for (i = m; i <= M - m; i++) {\n            bbox1 = distBBox(node, 0, i, this.toBBox);\n            bbox2 = distBBox(node, i, M, this.toBBox);\n\n            overlap = intersectionArea(bbox1, bbox2);\n            area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index;\n    },\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis: function (node, m, M) {\n\n        var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX,\n            compareMinY = node.leaf ? this.compareMinY : compareNodeMinY,\n            xMargin = this._allDistMargin(node, m, M, compareMinX),\n            yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    },\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin: function (node, m, M, compare) {\n\n        node.children.sort(compare);\n\n        var toBBox = this.toBBox,\n            leftBBox = distBBox(node, 0, m, toBBox),\n            rightBBox = distBBox(node, M - m, M, toBBox),\n            margin = bboxMargin(leftBBox) + bboxMargin(rightBBox),\n            i, child;\n\n        for (i = m; i < M - m; i++) {\n            child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (i = M - m - 1; i >= m; i--) {\n            child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    },\n\n    _adjustParentBBoxes: function (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (var i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    },\n\n    _condense: function (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (var i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    },\n\n    _initFormat: function (format) {\n        // data format (minX, minY, maxX, maxY accessors)\n\n        // uses eval-type function compilation instead of just accepting a toBBox function\n        // because the algorithms are very sensitive to sorting functions performance,\n        // so they should be dead simple and without inner calls\n\n        var compareArr = ['return a', ' - b', ';'];\n\n        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));\n        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));\n\n        this.toBBox = new Function('a',\n            'return {minX: a' + format[0] +\n            ', minY: a' + format[1] +\n            ', maxX: a' + format[2] +\n            ', maxY: a' + format[3] + '};');\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k, child; i < p; i++) {\n        child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX),\n        minY = Math.max(a.minY, b.minY),\n        maxX = Math.min(a.maxX, b.maxX),\n        maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right],\n        mid;\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","/**\n * SceneGraphNodeBase\n * Base Class representing a drawable element in canvas scenegraph\n */\n\nimport rbush from 'rbush';\n\nimport {Bounds} from '../../model/Bounds';\n\nexport class SceneGraphNodeBase {\n\n  /**\n   * Create a SceneGraphNode.\n   * Constructor uses ES6 destructuring of parameters from an object.\n   * e.g. new SceneGraphNode({param: .., param2, etc.})\n   *\n   * @param {Object} params - having the following properties:\n   * @param {Array} tags - an label or slug\n   * @param {Object} parent - the parent node\n   * @param {Object} bounds - local Canvas bounds, relative to our parent.\n   * This is not the same as DOM bounds of the canvas element!\n   * @param {Number} rotation - degrees, default 0.\n   */\n\n  constructor({parent, bounds, rotation = 0, tags = []}) {\n    this.parent = parent;\n    this._rotation = rotation;\n    this._tags = tags;\n    this.bounds = bounds;\n    this._children = []; // note: subclasses implement own children data structure\n    this.locMap = rbush();\n    this._visble = [];\n  }\n\n  /* getters and setters */\n  /* define getters for our properties; note subclasses can override setters,\n    e.g. to perform layout or calculations based on new state */\n\n  /* getters */\n\n  /**\n   * Children scene graph nodes\n   * @returns {Array|*} any child nodes this node has\n   */\n\n  get children() {\n    return this._children;\n  }\n\n  /**\n   * Local bounds\n   * @returns {*} local bounds\n   */\n\n  get bounds() {\n    return this._bounds;\n  }\n\n  /**\n   *  Rotation applied on this and subsequent children\n   * @returns {*} rotation\n   */\n\n  get rotation() {\n    return this._rotation;\n  }\n\n  /**\n   * Info tags\n   * @returns {*} tags\n   */\n\n  get tags() {\n    return this._tags;\n  }\n\n  /**\n   * Traverse all parents bounds to calculate self Bounds on Canvas.\n   * @returns {Object} - Bounds instance\n   */\n\n  get globalBounds() {\n    console.assert(this.bounds, 'bounds missing');\n    if (!this.parent) return this.bounds;\n    let gb = this.parent.globalBounds;\n    return new Bounds({\n      top: this.bounds.top + gb.top,\n      bottom: this.bounds.bottom + gb.top,\n      left: this.bounds.left + gb.left,\n      right: this.bounds.right + gb.left,\n      width: this.bounds.width,\n      height: this.bounds.height\n    });\n  }\n\n  /**\n   * Use rbush to return children nodes that may be visible.\n   * At this level, it is assumed that there is no viewport\n   * constraints to the filter.\n   *\n   *  @return {Array} - array of rbush nodes\n   */\n\n  get visible() {\n    let vis = [];\n    let childVisible = this.children.map(child => {\n      return child.locMap.all();\n    });\n    childVisible.forEach(item => {\n      vis = vis.concat(item);\n    });\n    return vis;\n  }\n\n  /**\n   *  Traverse children, returning hitmap\n   *  @returns {Array} - array of rbush entries\n   */\n\n  get hitMap() {\n    let hits = [];\n    let childMap = this.children.map(child => {\n      return child.hitMap;\n    });\n    childMap.forEach(item => {\n      hits = hits.concat(item);\n    });\n    return hits;\n  }\n\n  /* setters */\n\n  /**\n   * Child scene graph nodes\n   * @param {Array|*} b\n   */\n\n  set children(b) {\n    this._children = b;\n  }\n\n  /**\n   * Nodes local bounds\n   * @param b - bounds object\n   */\n\n  set bounds(b) {\n    this._bounds = b;\n  }\n\n  /**\n   * Rotation\n   * @param {number} degrees - rotation in degrees\n   */\n\n  set rotation(degrees) {\n    this._rotation = degrees;\n  }\n\n  /**\n   * Tags\n   * @param {array} tags - object's descriptive tags\n   */\n\n  set tags(tags) {\n    this._tags = tags;\n  }\n\n  /* public methods */\n\n  /**\n   * Translate coordinates to canvas space. When an element wants to draw on\n   * canvas, it requires translating into global coordinates for the canvas.\n   *\n   * @param {Object} params - object with following properties:\n   * @param {Number} x - x location\n   * @param {Number} y - y location\n   * @returns {Object} - { x, y } x,y location in global terms\n   */\n\n  translatePointToGlobal({x, y}) {\n    let gb = this.globalBounds;\n    return {x: x + gb.left, y: y + gb.top};\n  }\n\n  /**\n   * Adds a child node to the _children array\n   * and changes child node's parent to this node\n   *\n   * @param {object} node - SceneGraphNode derived item to insert as a child\n   **/\n\n  addChild(node) {\n    if (node.parent) {\n      node.parent.removeChild(node);\n    }\n    node.parent = this;\n    if (this._children.indexOf(node) === -1) this._children.push(node);\n  }\n\n  /**\n   * Removes a child node from the _children array\n   * and changes child node's parent to undefined\n   *\n   * @param {object} node - SceneGraphNode derived node to remove\n   **/\n\n  removeChild(node) {\n    //TODO: May need to use a indexOf polyfill if targeting IE < 9\n    let index = this._children.indexOf(node);\n    if (index > -1) {\n      this._children.splice(index, 1);\n    }\n    node.parent = null;\n  }\n\n  /**\n   * Traverse children and call their draw on the provided context\n   *\n   * @param {object} ctx - canvas context\n   */\n\n  draw(ctx) {\n    this.children.forEach(child => child.draw(ctx));\n  }\n}\n","/**\n * SceneGraphNodeCanvas\n * Mithril component representing a html5 canvas element.\n *\n */\n\nimport m from 'mithril';\nimport PubSub from 'pubsub-js';\nimport Hammer from 'hammerjs';\n\nimport {mix} from '../../../mixwith.js/src/mixwith';\n\nimport {DrawLazilyMixin} from '../DrawLazilyMixin';\nimport {RegisterComponentMixin} from '../../ui/RegisterComponentMixin';\nimport {selectedMap} from '../../topics';\n\nimport {Bounds} from '../../model/Bounds';\nimport {SceneGraphNodeBase} from './SceneGraphNodeBase';\n\nexport class SceneGraphNodeCanvas\n  extends mix(SceneGraphNodeBase)\n    .with(DrawLazilyMixin, RegisterComponentMixin) {\n\n  /**\n   * constructor\n   * @param model - data model for canvas\n   * @param appState - app state model\n   */\n\n  constructor({model, appState}) {\n    super({});\n    this.model = model;\n    this.appState = appState;\n    this.verticalScale = 1;\n    this.info = {\n      visible: false,\n      top: 0,\n      left: 0\n    };\n    this._gestureRegex = {\n      pan: new RegExp('^pan'),\n      pinch: new RegExp('^pinch'),\n      tap: new RegExp('^tap'),\n      wheel: new RegExp('^wheel')\n    };\n  }\n\n  /**\n   * Getter if canvas has focus\n   * @returns {boolean}\n   */\n\n  get selected() {\n    return this.appState.selection.bioMaps.indexOf(this) !== -1;\n  }\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    this.canvas = this.el = vnode.dom;\n    this.context2d = this.canvas.getContext('2d');\n    this.drawLazily(this.domBounds);\n  }\n\n  /**\n   * mithril lifecycle method\n   * @param vnode - current virtual dom node\n   */\n\n  onupdate(vnode) {\n    // TODO: remove this development assistive method\n    console.assert(this.el === vnode.dom);\n    let b = new Bounds(this.el.getBoundingClientRect());\n    console.log('BioMap.onupdate', this.el.mithrilComponent, b);\n  }\n\n  /**\n   * mithril component render method\n   */\n  view() {\n    // store these bounds, for checking in drawLazily()\n    if (this.domBounds && !this.domBounds.isEmptyArea) {\n      this.lastDrawnMithrilBounds = this.domBounds;\n    }\n    let b = this.domBounds || {};\n    let selectedClass = this.selected ? 'selected' : '';\n    return m('canvas', {\n      class: `cmap-canvas cmap-biomap ${selectedClass}`,\n      style: `left: ${b.left}px; top: ${b.top}px;\n               width: ${b.width}px; height: ${b.height}px;\n               transform: rotate(${this.rotation}deg);`,\n      width: b.width,\n      height: b.height\n    });\n  }\n\n  /**\n   * draw our scene graph children on canvas element\n   */\n\n  draw() {\n    let ctx = this.context2d;\n    if (!ctx) return;\n    if (!this.domBounds) return;\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.save();\n    //ctx.translate(0.5, 0.5); // prevent subpixel rendering of 1px lines\n    this.visible.map(child => child && child.data.draw(ctx));\n    ctx.restore();\n    // store these bounds, for checking in drawLazily()\n    this.lastDrawnCanvasBounds = this.bounds;\n    this.dirty = false;\n  }\n\n  /**\n   * custom gesture event dispatch listener; see LayoutContainer\n   * @param evt\n   * @returns {boolean} Don't stop event propagation\n   */\n\n  handleGesture(evt) {\n    if (evt.type.match(this._gestureRegex.tap)) {\n      return this._onTap(evt);\n    }\n    else if (evt.type.match(this._gestureRegex.pinch)) {\n      return this._onZoom(evt);\n    }\n    else if (evt.type.match(this._gestureRegex.wheel)) {\n      return this._onZoom(evt);\n    }\n    else if (evt.type.match(this._gestureRegex.pan)) {\n      if (evt.type === 'panend') {\n        return this._onPanEnd(evt);\n      } else if (evt.type === 'panstart') {\n        return this._onPanStart(evt);\n      } else {\n        return this._onPan(evt);\n      }\n    }\n\n    return false; // don't stop evt propagation\n  }\n\n  /**\n   * Handle zoom event\n   * @param evt - zoom event (mousewheel or gesture)\n   * @returns {boolean} don't stop event propagation\n   * @private\n   */\n\n  _onZoom(evt) {\n    // TODO: send zoom event to the scenegraph elements which compose the biomap\n    // (don't scale the canvas element itself)\n    console.warn('BioMap -> onZoom -- implement me', evt);\n    return false; // stop event propagation\n  }\n\n  /**\n   * Tap/Click event\n   * @param evt\n   * @returns {boolean} Don't stop event propagation by default\n   * @private\n   */\n\n  _onTap(evt) {\n    let sel = this.appState.selection.bioMaps;\n    let i = sel.indexOf(this);\n    if (i === -1) {\n      sel.push(this);\n    }\n    else {\n      sel.splice(i, 1);\n    }\n    m.redraw();\n    PubSub.publish(selectedMap, {\n      evt: evt,\n      data: this.appState.selection.bioMaps\n    });\n    return false;\n  }\n\n  /**\n   * Pan event that isn't first or last in sequence\n   * @param evt\n   * @returns {boolean}\n   * @private\n   */\n\n  _onPan(evt) {\n    // TODO: send pan events to the scenegraph elements which compose the biomap\n    // (don't scale the canvas element itself)\n    if (evt.direction && Hammer.DIRECTION_VERTICAL) {\n      console.warn('BioMap -> onPan -- vertically; implement me', evt);\n      return false; // stop event propagation\n    }\n    return false; // do not stop propagation\n  }\n\n  /**\n   * First pan event in sequence\n   * @param evt\n   * @returns {boolean}\n   * @private\n   */\n\n  _onPanStart(evt) {\n    // TODO: send pan events to the scenegraph elements which compose the biomap\n    // (don't scale the canvas element itself)\n    console.warn('BioMap -> onPanStart -- vertically; implement me', evt);\n    return false;\n  }\n\n  /**\n   * Final pan event in sequence\n   * @param evt\n   * @returns {boolean}\n   * @private\n   */\n\n  _onPanEnd(evt) {\n    // TODO: send pan events to the scenegraph elements which compose the biomap\n    // (don't scale the canvas element itself)\n    console.warn('BioMap -> onPanEnd -- vertically; implement me', evt);\n    return false; // do not stop propagation\n  }\n}\n","/**\n * FeatureMarker\n * A SceneGraphNode representing a feature on a Map with a line or hash mark.\n */\nimport {SceneGraphNodeBase} from './SceneGraphNodeBase';\n\nexport class SceneGraphNodeGroup extends SceneGraphNodeBase {\n\n  /**\n   * constructor\n   * @param params\n   */\n\n  constructor(params) {\n    super(params);\n  }\n\n  /**\n   * Return visible children elements\n   * @returns {Array}\n   */\n\n  get visible() {\n    let vis = [];\n    let cVis = this.children.map(child => {\n      return child.visible;\n    });\n    cVis.forEach(item => {\n      vis = vis.concat(item);\n    });\n    return vis;\n  }\n}\n","'use strict';\n\nmodule.exports = TinyQueue;\nmodule.exports.default = TinyQueue;\n\nfunction TinyQueue(data, compare) {\n    if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\n\n    this.data = data || [];\n    this.length = this.data.length;\n    this.compare = compare || defaultCompare;\n\n    if (this.length > 0) {\n        for (var i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nTinyQueue.prototype = {\n\n    push: function (item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    },\n\n    pop: function () {\n        if (this.length === 0) return undefined;\n\n        var top = this.data[0];\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = this.data[this.length];\n            this._down(0);\n        }\n        this.data.pop();\n\n        return top;\n    },\n\n    peek: function () {\n        return this.data[0];\n    },\n\n    _up: function (pos) {\n        var data = this.data;\n        var compare = this.compare;\n        var item = data[pos];\n\n        while (pos > 0) {\n            var parent = (pos - 1) >> 1;\n            var current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    },\n\n    _down: function (pos) {\n        var data = this.data;\n        var compare = this.compare;\n        var halfLength = this.length >> 1;\n        var item = data[pos];\n\n        while (pos < halfLength) {\n            var left = (pos << 1) + 1;\n            var right = left + 1;\n            var best = data[left];\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n};\n","'use strict';\n\nvar Queue = require('tinyqueue');\n\nmodule.exports = knn;\nmodule.exports.default = knn;\n\nfunction knn(tree, x, y, n, predicate, maxDistance) {\n    var node = tree.data,\n        result = [],\n        toBBox = tree.toBBox,\n        i, child, dist, candidate;\n\n    var queue = new Queue(null, compareDist);\n\n    while (node) {\n        for (i = 0; i < node.children.length; i++) {\n            child = node.children[i];\n            dist = boxDist(x, y, node.leaf ? toBBox(child) : child);\n            if (!maxDistance || dist <= maxDistance) {\n                queue.push({\n                    node: child,\n                    isItem: node.leaf,\n                    dist: dist\n                });\n            }\n        }\n\n        while (queue.length && queue.peek().isItem) {\n            candidate = queue.pop().node;\n            if (!predicate || predicate(candidate))\n                result.push(candidate);\n            if (n && result.length === n) return result;\n        }\n\n        node = queue.pop();\n        if (node) node = node.node;\n    }\n\n    return result;\n}\n\nfunction compareDist(a, b) {\n    return a.dist - b.dist;\n}\n\nfunction boxDist(x, y, box) {\n    var dx = axisDist(x, box.minX, box.maxX),\n        dy = axisDist(y, box.minY, box.maxY);\n    return dx * dx + dy * dy;\n}\n\nfunction axisDist(k, min, max) {\n    return k < min ? min - k : k <= max ? 0 : k - max;\n}\n","/**\n * Placeholder for advanced group nodes \n */\nimport {SceneGraphNodeBase} from './SceneGraphNodeBase';\n\nexport class SceneGraphNodeTrack extends SceneGraphNodeBase {\n\n  /**\n   * Constructor\n   * @param params\n   */\n  \n  constructor(params) {\n    super(params);\n  }\n}\n","/**\n * FeatureMarker\n * A SceneGraphNode representing a feature on a Map with a line or hash mark.\n *\n * @extends SceneGraphNodeBase\n */\nimport {SceneGraphNodeBase} from '../node/SceneGraphNodeBase';\nimport {Bounds} from '../../model/Bounds';\nimport {translateScale} from '../../util/CanvasUtil';\n\nexport class FeatureMark extends SceneGraphNodeBase {\n\n  /**\n   * Constructor\n   * @param parent - parent scene graph node\n   * @param bioMap - map data\n   * @param featureModel - feature data\n   */\n\n  constructor({parent, bioMap, featureModel,config}) {\n    super({parent, tags: [featureModel.name]});\n    this.model = featureModel;\n    this.featureMap = bioMap;\n    this.config = config;\n\n    this.offset = this.featureMap.view.base.start * -1;\n    this.invert = this.featureMap.view.invert;\n    this.start = this.model.coordinates.start;\n\n    this.pixelScaleFactor = this.featureMap.view.pixelScaleFactor;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: 0,\n      left: 0,\n      width: parent.bounds.width,\n      height: this.lineWeight\n    });\n  }\n\n  /**\n   * Draw the marker\n   * @param ctx - active canvas2D context\n   */\n\n  draw(ctx) {\n    let config = this.config;\n    let y = translateScale(this.start, this.featureMap.view.base, this.featureMap.view.visible, this.invert) * this.pixelScaleFactor;\n    this.bounds.top = y;\n    let gb = this.globalBounds || {};\n    ctx.beginPath();\n    ctx.strokeStyle = config.lineColor;\n    ctx.lineWidth = config.lineWeight;\n    // noinspection JSSuspiciousNameCombination\n    ctx.moveTo(Math.floor(gb.left), Math.floor(gb.top));\n    // noinspection JSSuspiciousNameCombination\n    ctx.lineTo(Math.floor(gb.right), Math.floor(gb.top));\n    ctx.stroke();\n    // reset bounding box to fit the new stroke location/width\n    // lineWidth adds equal percent of passed width above and below path\n    this.bounds.top = Math.floor(y - config.lineWeight / 2);\n    this.bounds.bottom = Math.floor(y + config.lineWeight / 2);\n  }\n}\n","/**\n * MapBackbone\n * A SceneGraphNode representing a backbone, simply a rectangle enclosing the upper and\n * lower bounds of the map of the current feature, providing a delineated region to draw\n * features of interest\n *\n * @extends SceneGraphNodeBase\n */\n\nimport {SceneGraphNodeBase} from '../node/SceneGraphNodeBase';\nimport {Bounds} from '../../model/Bounds';\n\nexport class MapBackbone extends SceneGraphNodeBase {\n\n  /**\n   * Constructor\n   * @param parent - Parent scene graph node\n   * @param bioMap - Map data\n   */\n\n  constructor({parent, bioMap,config}) {\n    super({parent});\n    this.config = config;\n    const b = parent.bounds;\n    const backboneWidth = config.width;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: 0,\n      left: b.width * 0.5 - backboneWidth * 0.5,\n      width: backboneWidth + config.lineWeight,\n      height: b.height\n    });\n    bioMap.view.backbone = this.globalBounds;\n  }\n\n  /**\n   * Draw the map backbone, then iterate through and draw its children\n   * @param ctx - currently active canvas2D context\n   */\n\n  draw(ctx) {\n    let config = this.config;\n    let gb = this.globalBounds || {};\n    ctx.fillStyle = config.fillColor;\n    // noinspection JSSuspiciousNameCombination\n    // noinspection JSSuspiciousNameCombination\n    ctx.fillRect(\n      Math.floor(gb.left),\n      Math.floor(gb.top),\n      Math.floor(gb.width),\n      Math.floor(gb.height)\n    );\n\n    if(this.lineWidth > 0) {\n      ctx.strokeStyle = config.lineColor;\n      ctx.lineWidth = config.lineWeight;\n      ctx.strokeRect(\n        Math.floor(gb.left),\n        Math.floor(gb.top),\n        Math.floor(gb.width),\n        Math.floor(gb.height)\n      );\n    }\n\n    this.children.forEach(child => child.draw(ctx));\n  }\n}\n","/**\n *\n * A SceneGraphNode representing a text label for a feature on a Map.\n *\n * @extends SceneGraphNodeBase\n */\n\nimport {SceneGraphNodeBase} from '../node/SceneGraphNodeBase';\nimport {Bounds} from '../../model/Bounds';\nimport {translateScale} from '../../util/CanvasUtil';\n\nexport class FeatureLabel extends SceneGraphNodeBase {\n  /**\n   * Constructor\n   *\n   * @param parent - parent scene graph node\n   * @param bioMap - map data\n   * @param featureModel - feature data\n   */\n\n  constructor({parent, bioMap, featureModel,config}) {\n    super({parent, tags: [featureModel.name]});\n    this.config = config;\n    this.model = featureModel;\n    this.view = bioMap.view;\n    this.pixelScaleFactor = this.view.pixelScaleFactor;\n    this.invert = bioMap.view.invert;\n    this.start = this.model.coordinates.start;\n    this.bounds = new Bounds({\n      top: 0,\n      left: 5,\n      width: 200, //this.fontSize*(this.model.name.length),\n      height: 12,\n      allowSubpixel: false\n    });\n  }\n\n  /**\n   * Draw label on cmap canvas context\n   * @param ctx\n   */\n\n  draw(ctx) {\n    let config = this.config;\n    let y = translateScale(this.start, this.view.base, this.view.visible, this.invert) * this.pixelScaleFactor;\n    this.bounds.top = y;\n    this.bounds.bottom = y + config.labelSize;\n    let gb = this.globalBounds || {};\n    ctx.font = `${config.labelSize}px ${config.labelFace}`;\n    ctx.textAlign = 'left';\n    ctx.fillStyle = config.labelColor;\n    ctx.fillText(this.model.name, gb.left, gb.top);\n    // reset bounding box to fit the new stroke location/width\n    this.bounds.width = this.bounds.left + Math.floor(ctx.measureText(this.model.name).width) + 1;\n    if (this.parent.bounds.width < this.bounds.width) this.parent.bounds.width = this.bounds.width;\n  }\n}\n","/**\n * MapTrack\n * A SceneGraphNode representing a backbone, simply a rectangle representing\n * the background.\n */\nimport knn from 'rbush-knn';\n\nimport {SceneGraphNodeTrack} from '../node/SceneGraphNodeTrack';\nimport {SceneGraphNodeGroup} from '../node/SceneGraphNodeGroup';\nimport {Bounds} from '../../model/Bounds';\nimport {FeatureMark} from '../geometry/FeatureMark';\nimport {MapBackbone} from '../geometry/MapBackbone';\nimport {FeatureLabel} from '../geometry/FeatureLabel';\n\nexport class MapTrack extends SceneGraphNodeTrack {\n\n  /**\n   *\n   * @param params\n   */\n\n  constructor(params) {\n    console.log('MapTrack-> Constructing Map');\n    super(params);\n    const b = this.parent.bounds;\n    this.model = this.parent.model;\n    //const backboneWidth = b.width * 0.2;\n    const backboneWidth = this.model.config.backbone.width;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: 0,\n      left: 0,\n      width: backboneWidth,\n      height: b.height\n    });\n    this.mC = this.parent.mapCoordinates;\n    this.backbone = new MapBackbone({parent: this, bioMap: this.model,config: this.model.config.backbone});\n    this.addChild(this.backbone);\n\n    // calculate scale factor between backbone coordinates in pixels\n    this.model.view.pixelScaleFactor = this.backbone.bounds.height / this.model.length;\n    this.model.view.backbone = this.globalBounds;\n\n    // Setup groups for markers and labels\n    let markerGroup = new SceneGraphNodeGroup({parent: this});\n    this.addChild(markerGroup);\n    this.markerGroup = markerGroup;\n    markerGroup.bounds = this.backbone.bounds;\n    this.addChild(markerGroup);\n    let labelGroup = new SceneGraphNodeGroup({parent: this});\n    this.addChild(labelGroup);\n    this.labelGroup = labelGroup;\n    labelGroup.bounds = new Bounds({\n      top: 0,\n      left: this.backbone.bounds.right + 1,\n      height: this.bounds.height,\n      width: 0\n    });\n\n    // Filter features for drawing\n    this.filteredFeatures = this.model.features.filter(model => {\n      return model.length <= 0.00001;\n    });\n\n    //Place features and their labels, prepare to add to rtree\n    let fmData = [];\n    let lmData = [];\n    this.featureMarks = this.filteredFeatures.map(model => {\n      let fm = new FeatureMark({\n        featureModel: model,\n        parent: this.backbone,\n        bioMap: this.model,\n        config: this.model.config.marker\n      });\n\n      let lm = new FeatureLabel({\n        featureModel: model,\n        parent: this.labelGroup,\n        bioMap: this.parent.model,\n        config: this.model.config.marker\n      });\n      markerGroup.addChild(fm);\n      labelGroup.addChild(lm);\n      fmData.push({\n        minY: model.coordinates.start,\n        maxY: model.coordinates.stop,\n        minX: fm.globalBounds.left,\n        maxX: fm.globalBounds.right,\n        data: fm\n      });\n      lmData.push({\n        minY: model.coordinates.start,\n        maxY: model.coordinates.stop,\n        minX: lm.globalBounds.left,\n        maxX: lm.globalBounds.left + this.labelGroup.bounds.width,\n        data: lm\n      });\n      if (lm.bounds.right > this.labelGroup.bounds.right) this.labelGroup.bounds.right = lm.bounds.right;\n      return fm;\n    });\n\n    // Load group rTrees for markers and labels\n    markerGroup.locMap.load(fmData);\n    labelGroup.locMap.load(lmData);\n    // load this rtree with markers (elements that need hit detection)\n    this.locMap.load(fmData);\n  }\n\n  /**\n   *\n   * @returns {*[]}\n   */\n\n  get visible() {\n    let coord = this.parent.model.view.base;\n    let visc = this.parent.model.view.visible;\n\n    let vis = [{\n      minX: this.bounds.left,\n      maxX: this.bounds.right,\n      minY: coord.start,\n      maxY: coord.stop,\n      data: this.backbone\n    }];\n    vis = vis.concat(this.locMap.search({\n      minX: this.bounds.left,\n      maxX: this.bounds.right,\n      minY: visc.start,\n      maxY: visc.stop\n    }));\n    let labels = [];\n    let start = visc.start;\n    let stop = visc.stop;\n    let psf = this.labelGroup.children[0].pixelScaleFactor;\n    let step = ((visc.start * (coord.stop * psf - 12) + visc.stop * (12 - coord.start * psf)) / (psf * (coord.stop - coord.start)) - start) - (coord.start * -1);\n    for (let i = start; i < stop; i += step) {\n\n      let item = knn(this.labelGroup.locMap, this.labelGroup.children[0].globalBounds.left, i, 1)[0];\n      if (labels.length === 0) {\n        labels.push(item);\n        continue;\n      }\n      let last = labels[labels.length - 1];\n      if (item !== last && (item.minY > (last.maxY + step))) {\n        labels.push(item);\n      }\n    }\n    vis = vis.concat(labels);\n    return vis;\n  }\n\n  /**\n   *\n   */\n\n  get hitMap() {\n    let bbGb = this.backbone.globalBounds;\n    return this.markerGroup.children.map(child => {\n      return {\n        minY: child.globalBounds.bottom + 1,\n        maxY: child.globalBounds.top - 1,\n        minX: bbGb.left,\n        maxX: bbGb.right,\n        data: child\n      };\n    });\n  }\n\n  /**\n   *\n   * @param ctx\n   */\n\n  draw(ctx) {\n    let gb = this.globalBounds || {};\n    ctx.fillStyle = 'blue';\n    // noinspection JSSuspiciousNameCombination\n    // noinspection JSSuspiciousNameCombination\n    ctx.fillRect(\n      Math.floor(gb.left),\n      Math.floor(gb.top),\n      Math.floor(gb.width),\n      Math.floor(gb.height)\n    );\n    ctx.fillStyle = 'green';\n    gb = this.labelGroup.globalBounds || {};\n    // noinspection JSSuspiciousNameCombination\n    // noinspection JSSuspiciousNameCombination\n    ctx.fillRect(\n      Math.floor(gb.left),\n      Math.floor(gb.top),\n      Math.floor(gb.width),\n      Math.floor(gb.height)\n    );\n  }\n\n  loadLabelMap() {\n  }\n}\n","/**\n *\n * A SceneGraphNode representing a circular mark.\n *\n * @extends SceneGraphNodeBase\n */\n\nimport {SceneGraphNodeBase} from '../node/SceneGraphNodeBase';\nimport {Bounds} from '../../model/Bounds';\nimport {translateScale} from '../../util/CanvasUtil';\n\nexport class Dot extends SceneGraphNodeBase {\n  /**\n   * Constructor\n   *\n   * @param parent - parent scene graph node\n   * @param bioMap - map data\n   * @param featureModel - feature data\n   * @param config - configuration information object\n   */\n\n  constructor({parent, bioMap, featureModel, config}) {\n    super({parent, tags: [featureModel.name]});\n    //setup config\n    this.config = config;\n    this.model = featureModel;\n    this.view = bioMap.view;\n    this.pixelScaleFactor = this.view.pixelScaleFactor;\n    this.invert = bioMap.view.invert;\n    this.start = this.model.coordinates.start;\n    this.radius = config.width;\n    this.depth = 0;\n\n    // setup initial placement\n    if (this.model.coordinates.depth) {\n      this.depth = translateScale(this.model.coordinates.depth, {\n        start: 0,\n        stop: config.displayWidth\n      }, config.view, false);\n    }\n    this.bounds = new Bounds({\n      top: 0,\n      left: 0,\n      width: 2 * this.radius, //this.fontSize*(this.model.name.length),\n      height: 2 * this.radius,\n      allowSubpixel: false\n    });\n  }\n\n  /**\n   * Draw label on cmap canvas context\n   * @param ctx\n   */\n\n  draw(ctx) {\n    //Setup a base offset based on parent track\n    if (this.start < this.view.visible.start || this.start > this.view.visible.stop) return;\n    if (!this.offset) {\n      const left = this.globalBounds.left;\n      const top = this.globalBounds.top;\n      this.offset = {top: top, left: left};\n    }\n    let config = this.config;\n    let y = translateScale(this.start, this.view.base, this.view.visible, this.invert) * this.pixelScaleFactor;\n    let x = this.depth;\n\n    // Draw dot\n    ctx.beginPath();\n    ctx.fillStyle = config.fillColor;\n    ctx.arc(x + this.offset.left, y + this.offset.top, this.radius, 0, 2 * Math.PI, false);\n    ctx.fill();\n    ctx.lineWidth = config.lineWeight;\n    ctx.strokeStyle = config.lineColor;\n    ctx.stroke();\n\n    //update bounding box\n    this.bounds.top = y - this.radius;\n    this.bounds.left = x - this.radius;\n    this.bounds.width = 2 * this.radius;\n    this.bounds.height = 2 * this.radius;\n  }\n}","/**\n * QTL - A feature with a length and width drawn as part of a group of similar\n * features\n *\n * @extends SceneGraphNodeBase\n */\n\nimport {SceneGraphNodeBase} from '../node/SceneGraphNodeBase';\nimport {Bounds} from '../../model/Bounds';\nimport {translateScale} from '../../util/CanvasUtil';\n\nexport class manhattanRuler extends SceneGraphNodeBase {\n\n  /**\n   * Construct the QTL feature\n   * @param parent - parent scene graph node\n   * @param bioMap - map data\n   * @param featureModel - feature data\n   * @param initialConfig - configuration object for display variables\n   */\n\n  constructor({parent, featureModel,config}) {\n    super({parent});\n    this.config = config;\n    this.manhattanPlot = featureModel;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top:0,\n      left:0,\n      width: config.displayWidth,\n      height: this.parent.bounds.height\n    });\n  }\n\n  /**\n   *\n   * @param ctx\n   */\n\n  draw(ctx) {\n    let config = this.config;\n    ctx.save();\n    ctx.globalAlpha = .5;\n    let cb = this.globalBounds;\n    let depth = 0;\n    if (this.manhattanPlot) {\n      //Draw \"ruler\"\n      ctx.strokeStyle = config.rulerColor;\n      ctx.lineWidth = config.rulerWeight;\n\n      //Baseline marks\n      ctx.beginPath();\n\n      ctx.moveTo(cb.left, cb.top);\n      ctx.lineTo(cb.right, cb.top);\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(cb.left, cb.bottom);\n      ctx.lineTo(cb.right, cb.bottom);\n      ctx.stroke();\n\n      //Ruler\n      for (let i = 0; i <= this.manhattanPlot.view.stop; i++) {\n        if (i % config.rulerMinorMark === 0 || i % config.rulerMajorMark === 0) {\n          depth = translateScale(i, {\n            start: 0,\n            stop: config.displayWidth\n          }, this.manhattanPlot.view, false);\n          ctx.beginPath();\n          ctx.moveTo(cb.left + depth, cb.top);\n          ctx.lineTo(cb.left + depth, cb.top - 10);\n          ctx.stroke();\n          if (i % config.rulerMajorMark === 0) {\n            ctx.font = config.labelSize;\n            ctx.fillStyle = config.labelColor;\n            ctx.textAlign = 'center';\n            ctx.fillText(String(i), cb.left + depth, cb.top - 11);\n          }\n        }\n      }\n      ctx.fillText('-log10(p)', cb.left + config.displayWidth / 2, cb.top - 25);\n\n      // Reference lines\n\n      if (this.manhattanPlot.lines) {\n        this.manhattanPlot.lines.forEach(line => {\n          depth = translateScale(line.value, {\n            start: 0,\n            stop: config.displayWidth\n          }, this.manhattanPlot.view, false);\n          ctx.strokeStyle = line.lineColor;\n          ctx.lineWidth = line.lineWeight;\n          ctx.beginPath();\n          ctx.moveTo(cb.left + depth, cb.top);\n          ctx.lineTo(cb.left + depth, cb.bottom);\n          ctx.stroke();\n        });\n      }\n    }\n    ctx.restore();\n\n    this.children.forEach(child => child.draw(ctx));\n  }\n}\n","/**\n * ManhattanPlot\n * A SceneGraphNodeTrack representing a Manhattan Plot.\n *\n * @extends SceneGraphNodeTrack\n */\nimport {Bounds} from '../../model/Bounds';\n\nimport {SceneGraphNodeTrack} from '../node/SceneGraphNodeTrack';\nimport {Dot} from '../geometry/Dot';\nimport {manhattanRuler} from '../geometry/manhattanRuler';\n\nexport class ManhattanPlot extends SceneGraphNodeTrack {\n\n  /**\n   * Constructor - sets up a track that's a group of QTL rectangles\n   * @param params\n   */\n\n  constructor(params) {\n    super(params,);\n    console.log('manhattan -> constructor', params);\n    let manhattanPlot = params.config;\n    const b = this.parent.bounds;\n    this.trackPos = params.position || 1;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: 0,\n      left: 0,\n      width: 0,\n      height: b.height\n    });\n    if (manhattanPlot !== null) {\n      let manhattanInfo = manhattanPlot;\n      //merge configuration information with default config\n      for( let key in this.parent.model.config.manhattan){\n        if(!manhattanInfo.hasOwnProperty(key)){\n          manhattanInfo[key] = this.parent.model.config.manhattan[key];\n        }\n      }\n      manhattanInfo.lines.forEach(line => {\n        if(!line.lineWeight){\n          line.lineWeigth = manhattanInfo.featureLineWeight;\n        }\n        if(!line.lineColor){\n          line.lineColor = manhattanInfo.featureLineColor;\n        }\n      });\n\n      // If data hasn't been attached to this map to plot, filter and attach it.\n      if (manhattanInfo.data === undefined) {\n        manhattanInfo.view = {\n          start: 0,\n          stop: manhattanInfo.maxValue || 0\n        };\n        let baseData = this.parent.sources.filter(model => {\n          return model.id === manhattanInfo.dataId;\n        });\n\n        let prefix = manhattanInfo.prefix || '';\n        manhattanInfo.data = baseData[0].parseResult.data.filter(mdata => {\n          if (prefix + mdata[manhattanInfo.targetField] === this.parent.model.name) {\n            if (manhattanInfo.max === undefined && -Math.log10(mdata[manhattanInfo.pField]) >= manhattanInfo.view.stop) { //determine max value while filtering data\n              manhattanInfo.view.stop = Math.ceil(-Math.log10(mdata[manhattanInfo.pField]));\n\n            }\n            return true;\n          }\n          return false;\n        });\n      }\n\n      //Draw manhattan plot\n      //let left = this.parent.bbGroup.bounds.right;\n\n     this.bounds = new Bounds({\n       allowSubpixel: false,\n        top: 0,\n        left: 0,\n        width: manhattanInfo.displayWidth || 0,\n        height: b.height\n      });\n\n      let fmData = [];\n      let locData = [];\n      this.fmData = fmData;\n\n      this.manhattanMarks = manhattanInfo.data.map(model => {\n        model.coordinates = {\n          start: model[manhattanInfo.posField],\n          depth: -Math.log10(model[manhattanInfo.pField])\n        };\n        if((model.coordinates.start > this.parent.model.view.base.stop) ||\n          (model.coordinates.start < this.parent.model.view.base.start) ){ return; }\n\n        let fm = new Dot({\n          featureModel: model,\n          parent: this,\n          bioMap: this.parent.model,\n          config: manhattanInfo\n        });\n        fmData.push(fm);\n\n        let loc = {\n          minY: model.coordinates.start,\n          maxY: model.coordinates.start,\n          minX: fm.globalBounds.left,\n          maxX: fm.globalBounds.right,\n          data: fm\n        };\n\n        locData.push(loc);\n        return fm;\n      });\n\n      this.ruler ={\n        minY: 0,\n        maxY: 100000000,\n        minX: this.globalBounds.left,\n        maxX: this.globalBounds.right,\n        data: new manhattanRuler({\n          featureModel : manhattanInfo,\n          parent: this,\n          config: manhattanInfo\n        })\n      };\n\n      this.locMap.load(locData);\n      this.tags = ['manhattan'];\n    }\n  }\n\n  /**\n   *\n   */\n\n  get visible() {\n    return this.locMap.all().concat(this.ruler);\n  }\n\n  // /**\n  //  * Debug draw to check track positioning\n  //  * @param ctx\n  //  */\n\n  draw(ctx) {\n   // ctx.save();\n   // ctx.globalAlpha = .5;\n   // ctx.fillStyle = 'green';\n   // let cb = this.globalBounds;\n   // ctx.fillRect(cb.left,cb.top,cb.width,cb.height);\n   // ctx.restore();\n\n    this.children.forEach(child => child.draw(ctx));\n  }\n\n  // /**\n  //  * Get RTree children that are visible in the canvas' current zoom bounds\n//   * @returns {Array}\n//   */\n//\n  get hitMap() {\n    //return this.locMap.all();\n    return this.children.map(child => {\n      return {\n        minY: child.globalBounds.top,\n        maxY: child.globalBounds.bottom,\n        minX: child.globalBounds.left,\n        maxX: child.globalBounds.right,\n        data: child\n      };\n    });\n\n  }\n}","/**\n * QTL - A feature with a length and width drawn as part of a group of similar\n * features\n *\n * @extends SceneGraphNodeBase\n */\n\nimport {SceneGraphNodeBase} from '../node/SceneGraphNodeBase';\nimport {Bounds} from '../../model/Bounds';\nimport {translateScale} from '../../util/CanvasUtil';\n\nexport class QTL extends SceneGraphNodeBase {\n\n  /**\n   * Construct the QTL feature\n   * @param parent - parent scene graph node\n   * @param bioMap - map data\n   * @param featureModel - feature data\n   * @param initialConfig - configuration object for display variables\n   */\n\n  constructor({parent, bioMap, featureModel, initialConfig,config}) {\n    super({parent, tags: [featureModel.name]});\n    this.model = featureModel;\n    this.featureMap = bioMap;\n    this.view = this.featureMap.view;\n    this.lineWidth = 1.0;\n    //min and max location in pixels\n    this.pixelScaleFactor = this.featureMap.view.pixelScaleFactor;\n    this.fill = config.fillColor;\n    if(initialConfig.fillColor) {\n      this.fill = initialConfig.fillColor[initialConfig.filters.indexOf(this.model.tags[0])] || initialConfig.fillColor[0];\n    }\n\n    this.width = initialConfig.width || config.width;\n    this.trackSpacing = initialConfig.internalPadding || config.internalPadding;\n    this.labelColor = initialConfig.labelColor || config.labelColor;\n    this.labelSize = initialConfig.labelSize || config.labelSize;\n    this.labelFace = initialConfig.labelFace || config.labelFace;\n    this.offset = this.trackSpacing + this.labelSize;\n    this.invert = this.view.invert;\n    this.start = this.invert ? this.model.coordinates.stop : this.model.coordinates.start;\n    this.stop = this.invert ? this.model.coordinates.start : this.model.coordinates.stop;\n\n    // Calculate start/end position, then\n    // Iterate across QTLs in group and try to place QTL region where it can\n    // minimize stack width in parent group \n    let y1 = translateScale(this.start, this.view.base, this.view.visible, this.invert) * this.pixelScaleFactor;\n    let y2 = translateScale(this.stop, this.view.base, this.view.visible, this.invert) * this.pixelScaleFactor;\n    let leftLoc = 0;\n    let leftArr;\n    leftArr = this.parent.locMap.search({\n      minY: this.model.coordinates.start,\n      maxY: this.model.coordinates.stop,\n      minX: 0,\n      maxX: 10000\n    });\n    leftArr = leftArr.sort((a, b) => {\n      return a.data.bounds.right - b.data.bounds.right;\n    });\n    let stepOffset = this.width + this.offset;\n    let stackEnd = leftArr.length;\n    for (let i = 0; i <= stackEnd; ++i) {\n      leftLoc = i * (stepOffset);\n      if (leftArr[i] && leftArr[i].data.bounds.left !== leftLoc) {\n        break;\n      }\n    }\n\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: y1,\n      left: leftLoc,\n      width: this.width,\n      height: y2 - y1\n    });\n  }\n\n  /**\n   *\n   * @param ctx\n   */\n\n  draw(ctx) {\n    // Get start and stop of QTL on current region, if it isn't located in\n    // current view, don't draw, else cutoff when it gets to end of currently\n    // visible region.\n    if (this.model.coordinates.stop < this.view.visible.start ||\n      this.model.coordinates.start > this.view.visible.stop) return;\n    let y1pos = this.model.coordinates.start > this.view.visible.start ? this.model.coordinates.start : this.view.visible.start;\n    let y2pos = this.model.coordinates.stop < this.view.visible.stop ? this.model.coordinates.stop : this.view.visible.stop;\n    this.start = y1pos;\n    this.stop = y2pos;\n    if (this.invert) {\n      this.start = y2pos;\n      this.stop = y1pos;\n    }\n\n    let y1 = translateScale(this.start, this.view.base, this.view.visible, this.invert) * this.pixelScaleFactor;\n    let y2 = translateScale(this.stop, this.view.base, this.view.visible, this.invert) * this.pixelScaleFactor;\n\n    //setup bounds and draw\n    this.bounds = new Bounds({\n      top: y1,\n      height: y2 - y1,\n      left: this.bounds.left,\n      width: this.width\n    });\n    let gb = this.globalBounds || {};\n    let qtlHeight = gb.height > 1 ? gb.height : 1;\n    let fontSize = this.labelSize;\n    let fontStyle = this.labelFace;\n    ctx.font = `${fontSize}px ${fontStyle}`;\n    ctx.fillStyle = this.fill;\n    // noinspection JSSuspiciousNameCombination\n    // noinspection JSSuspiciousNameCombination\n    ctx.fillRect(\n      Math.floor(gb.left),\n      Math.floor(gb.top),\n      Math.floor(this.width),\n      Math.floor(qtlHeight)\n    );\n    let textWidth = ctx.measureText(this.model.name).width + (ctx.measureText('M').width * 6);\n    let textStop = this.stop - (translateScale(textWidth / this.pixelScaleFactor, this.view.base, this.view.visible) + this.view.base.start);\n    let overlap = this.parent.locMap.search({\n      minY: textStop > this.view.visible.start ? textStop : this.view.visible.start,\n      maxY: this.stop,\n      minX: gb.left,\n      maxX: gb.right\n    });\n    if (overlap.length <= 1 || textWidth <= gb.height) {\n      ctx.save();\n      ctx.translate(gb.left, gb.top);\n      ctx.fillStyle = this.labelColor;\n      ctx.rotate(-Math.PI / 2);\n      ctx.fillText(this.model.name, -gb.height, this.width + fontSize + 1);\n      ctx.restore();\n    }\n\n    // Draw any children\n    this.children.forEach(child => child.draw(ctx));\n  }\n}\n","/**\n * QtlTrack\n * A SceneGraphNode representing a collection of QTLs.\n *\n * @extends SceneGraphNodeTrack\n */\nimport {SceneGraphNodeTrack} from '../node/SceneGraphNodeTrack';\nimport {Bounds} from '../../model/Bounds';\nimport {QTL} from '../geometry/QTL';\n\nexport class QtlTrack extends SceneGraphNodeTrack {\n\n  /**\n   * Constructor - sets up a track that's a group of QTL rectangles\n   * @param params\n   */\n\n  /**\n   * TODO: Allow for subtracks\n   */\n\n  constructor(params) {\n    super(params);\n\n    this.filteredFeatures = [];\n    let b = this.parent.bounds;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: 0,\n      left: 0,\n      width: this.parent.model.config.qtl.trackMinWidth,\n      height: b.height\n    });\n\n   let qtlConf = params.config;\n    for( let key in this.parent.model.config.qtl){\n      if(!qtlConf.hasOwnProperty(key)){\n        qtlConf[key] = this.parent.model.config.qtl[key];\n      }\n    }\n\n   qtlConf.filters.forEach( (filter,order) => {\n      var test = this.parent.model.features.filter( model => {\n        return model.tags[0].match(filter) !== null;\n      });\n      if(test.length === 0){\n        // get rid of any tags that don't actually get used\n        qtlConf.filters.splice(order,1);\n      } else {\n        this.filteredFeatures = this.filteredFeatures.concat(test);\n      }\n    });\n\n    this.filteredFeatures.sort((a,b)=>{return a.coordinates.start - b.coordinates.start;});\n    let fmData = [];\n\n\n    this.maxLoc = 0;\n    this.qtlMarks = this.filteredFeatures.map( model => {\n      let fm = new QTL ({\n        featureModel: model,\n        parent: this,\n        bioMap: this.parent.model,\n        initialConfig: qtlConf,\n        config: this.parent.model.config.qtl\n      });\n\n      this.addChild(fm);\n\n      let loc = {\n        minY: model.coordinates.start,\n        maxY: model.coordinates.stop,\n        minX: fm.globalBounds.left,\n        maxX: fm.globalBounds.right,\n        data:fm\n      };\n\n      this.locMap.insert(loc);\n\n      fmData.push(loc);\n\n      if(fm.globalBounds.right > this.globalBounds.right){\n        this.bounds.right = fm.globalBounds.right - this.globalBounds.left;\n      }\n\n      return fm;\n    });\n    this.locMap.clear();\n    this.locMap.load(fmData);\n  }\n\n  /**\n   *\n   */\n\n  get visible() {\n   // let visible = [];\n   // this.children.forEach(child => {\n   //   visible = visible.concat(child.locMap.all());\n   // });\n   //\n   // return visible;\n    return this.locMap.all();\n    //return this.locMap.all().concat([{data:this}]); // debugging statement to test track width bounds\n  }\n\n  /**\n   * Debug draw to check track positioning\n   * @param ctx\n   */\n\n  draw(ctx) {\n    ctx.save();\n    ctx.globalAlpha = .5;\n    ctx.fillStyle = '#ADD8E6';\n    this.children.forEach(child => {\n      let cb = child.globalBounds;\n      // noinspection JSSuspiciousNameCombination\n      // noinspection JSSuspiciousNameCombination\n      ctx.fillRect(\n        Math.floor(cb.left),\n        Math.floor(cb.top),\n        Math.floor(cb.width),\n        Math.floor(cb.height)\n      );\n    });\n    ctx.restore();\n  }\n\n  /**\n   * Get RTree children that are visible in the canvas' current zoom bounds\n   * @returns {Array}\n   */\n\n  get hitMap() {\n    //return this.locMap.all();\n    return this.children.map(child => {\n      return {\n        minY: child.globalBounds.top,\n        maxY: child.globalBounds.bottom,\n        minX: child.globalBounds.left,\n        maxX: child.globalBounds.right,\n        data: child\n      };\n    });\n  }\n}\n","/**\n * FeatureTrack\n * A SceneGraphNode representing a collection of tracks.\n *\n * @extends SceneGraphNodeTrack\n */\n\nimport {Bounds} from '../../model/Bounds';\n\nimport {SceneGraphNodeGroup} from '../node/SceneGraphNodeGroup';\nimport {SceneGraphNodeTrack} from '../node/SceneGraphNodeTrack';\nimport {ManhattanPlot} from './ManhattanPlot';\nimport {QtlTrack} from './QtlTrack';\n\nexport class FeatureTrack extends SceneGraphNodeTrack {\n\n  /**\n   * Constructor - sets up a track that's a group of QTL rectangles\n   * @param params\n   */\n\n  constructor(params) {\n    super(params);\n    this.model = this.parent.model;\n    const b = this.parent.bounds;\n    this.trackPos = params.position || 1;\n\n    let left = this.trackPos < 0 ? 10 : this.parent.bbGroup.bounds.right;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: b.top,\n      left: left,\n      width: 0,\n      height: b.height\n    });\n    if(this.parent.model.tracks) {\n      let tracks = this.trackPos === 1 ? this.parent.tracksLeft : this.parent.tracksRight;\n      tracks.forEach((track, order) => {\n        // newFeatureTrack is a group with two components, the feature data track, and the feature label track\n        //track.appState = this.parent.appState;\n        let newFeatureTrack = new SceneGraphNodeGroup({parent:this});\n        newFeatureTrack.model = this.model;\n        newFeatureTrack.config = track;\n        newFeatureTrack.order = order;\n\n        let trackLeft = order === 0 ? 0 : this.children[order-1].bounds.right;\n        trackLeft += this.model.config.qtl.padding;\n\n        newFeatureTrack.bounds = new Bounds({\n          allowSubpixel: false,\n          top: 0,\n          left: trackLeft,\n          width: this.model.config.qtl.trackMinWidth,\n          height: b.height\n        });\n\n\n        let featureData = {};\n        if(track.type === 'qtl') {\n          newFeatureTrack.title = track.title || this.model.config.qtl.title || track.filters[0];\n          featureData = new QtlTrack({parent:newFeatureTrack , config: track});\n        } else if( track.type === 'manhattan') {\n          newFeatureTrack.sources = this.parent.appState.sources;\n          newFeatureTrack.title = track.title || this.model.config.manhattan.title || 'Manhattan';\n          featureData = new ManhattanPlot({parent:newFeatureTrack, config: track});\n        }\n\n        newFeatureTrack.addChild(featureData);\n        if(featureData.globalBounds.right > newFeatureTrack.globalBounds.right){\n          newFeatureTrack.bounds.right += featureData.bounds.right;\n        }\n\n        if(newFeatureTrack.globalBounds.right > this.globalBounds.right){\n          this.bounds.right =  this.bounds.left + (newFeatureTrack.globalBounds.right - this.globalBounds.left);\n        }\n\n        this.addChild(newFeatureTrack);\n      });\n    } else {\n      this.parent.model.tracks = [];\n    }\n\n  }\n\n  /**\n   *\n   */\n\n  get visible() {\n    let visible = [];\n    this.children.forEach(child => {\n      visible = visible.concat(child.visible);\n    });\n    return visible;\n    //return visible.concat([{data:this}]); // debugging statement to test track width bounds\n  }\n\n  /**\n   * Debug draw to check track positioning\n   * @param ctx\n   */\n\n  draw(ctx) {\n    ctx.save();\n    ctx.globalAlpha = .5;\n    ctx.fillStyle = '#ADD8E6';\n    this.children.forEach(child => {\n      let cb = child.globalBounds;\n      // noinspection JSSuspiciousNameCombination\n      // noinspection JSSuspiciousNameCombination\n      ctx.fillRect(\n        Math.floor(cb.left),\n        Math.floor(cb.top),\n        Math.floor(cb.width),\n        Math.floor(cb.height)\n      );\n    });\n    //ctx.fillStyle = 'red';\n    //let cb = this.globalBounds;\n    //ctx.fillRect(\n    //  Math.floor(cb.left),\n    //  Math.floor(cb.top),\n    //  Math.floor(cb.width),\n    //  Math.floor(cb.height)\n    //);\n    ctx.restore();\n  }\n\n  /**\n   * Get RTree children that are visible in the canvas' current zoom bounds\n   * @returns {Array}\n   */\n\n  get hitMap() {\n    //return [];\n   // console.log('hits child',child);\n    let hits = [];\n    this.children.forEach(child => {\n      return child.children.map(qtlGroup => {\n        hits = hits.concat(qtlGroup.hitMap);\n      });\n    });\n    return hits;\n  }\n}\n","/**\n * ruler\n * A SceneGraphNode representing ruler and zoom position for a given backbone\n *\n * @extends SceneGraphNodeBase\n */\n\nimport {SceneGraphNodeBase} from '../node/SceneGraphNodeBase';\nimport {Bounds} from '../../model/Bounds';\nimport {translateScale} from '../../util/CanvasUtil';\n\nexport class Ruler extends SceneGraphNodeBase {\n\n  /**\n   * Constructor\n   * @param parent - parent scene graph node\n   * @param bioMap - map data\n   * @param config - ruler configuration object\n   */\n\n  constructor({parent, bioMap, config}) {\n    super({parent});\n    this.config = config;\n    this.mapCoordinates = bioMap.view;\n    this.offset = this.mapCoordinates.base.start * -1;\n    this.pixelScaleFactor = this.mapCoordinates.pixelScaleFactor;\n    this.invert = this.mapCoordinates.invert;\n    this.fillColor = config.fillColor;\n    this.textFace = config.labelFace;\n    this.textSize = config.labelSize;\n    this.textColor = config.labelColor;\n    this.rulerPrecision = config.precision;\n    this.rulerWidth = config.width;\n    this.rulerPadding = config.padding;\n    this.innerSize = config.innerLineWeight;\n    this.innerColor = config.innerLineColor;\n\n    const b = this.parent.backbone.bounds;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: 0,\n      left: b.left - config.width - config.padding - config.lineWeight, //arbitrary spacing to look goo\n      width: config.width,\n      height: b.height\n    });\n  }\n\n  /**\n   * Draw ruler and zoom bar\n   * @param ctx - linked canvas2D context\n   */\n\n  draw(ctx) {\n    let config = this.config;\n    let vStart = this.invert ? this.mapCoordinates.visible.stop : this.mapCoordinates.visible.start;\n    let vStop = this.invert ? this.mapCoordinates.visible.start : this.mapCoordinates.visible.stop;\n    let start = translateScale(vStart, this.mapCoordinates.base, this.mapCoordinates.base, this.invert) * this.pixelScaleFactor;\n    let stop = translateScale(vStop, this.mapCoordinates.base, this.mapCoordinates.base, this.invert) * this.pixelScaleFactor;\n    let text = [this.mapCoordinates.base.start.toFixed(config.precision), this.mapCoordinates.base.stop.toFixed(config.precision)];\n\n    this.textWidth = ctx.measureText(text[0]).width > ctx.measureText(text[1]).width ? ctx.measureText(text[0]).width : ctx.measureText(text[1]).width;\n\n    let gb = this.globalBounds || {};\n    // draw baseline labels\n    ctx.font = `${config.labelSize}px ${config.labelFace}`;\n    ctx.fillStyle = config.labelColor;\n    ctx.textAlign = 'left';\n    if (this.invert) {\n      ctx.fillText(text[1], gb.left - ctx.measureText(text[1]).width - (gb.width / 2), Math.floor(gb.top - config.labelSize / 2));\n      ctx.fillText(text[0], gb.left - ctx.measureText(text[0]).width - (gb.width / 2), Math.floor(gb.bottom + config.labelSize));\n    } else {\n      ctx.fillText(text[0], gb.left - ctx.measureText(text[0]).width - (gb.width / 2), Math.floor(gb.top - config.labelSize / 2));\n      ctx.fillText(text[1], gb.left - ctx.measureText(text[1]).width - (gb.width / 2), Math.floor(gb.bottom + config.labelSize));\n    }\n    // Draw zoom position labels\n    text = [this.mapCoordinates.visible.start.toFixed(config.precision), this.mapCoordinates.visible.stop.toFixed(config.precision)];\n    if (this.invert) {\n      ctx.fillText(text[1], gb.left + config.width + config.padding, Math.floor(gb.top - config.labelSize / 2));\n      ctx.fillText(text[0], gb.left + config.width + config.padding, (gb.bottom + config.labelSize));\n    } else {\n      ctx.fillText(text[0], gb.left + config.width + config.padding, Math.floor(gb.top - config.labelSize / 2));\n      ctx.fillText(text[1], gb.left + config.width + config.padding, (gb.bottom + config.labelSize));\n    }\n\n    //Draw baseline ruler\n    ctx.beginPath();\n    ctx.lineWidth = config.innerLineWeight;\n    ctx.strokeStyle = config.innerLineColor;\n    // noinspection JSSuspiciousNameCombination\n    ctx.moveTo(Math.floor(gb.left + gb.width / 2), Math.floor(gb.top));\n    // noinspection JSSuspiciousNameCombination\n    ctx.lineTo(Math.floor(gb.left + gb.width / 2), Math.floor(gb.bottom));\n    ctx.stroke();\n\n    // Draw \"zoom box\"\n    ctx.fillStyle = config.fillColor;//'aqua';\n    let height = stop - start > 1 ? stop - start : 1.0;\n    // noinspection JSSuspiciousNameCombination\n    ctx.fillRect(\n      Math.floor(gb.left),\n      Math.floor(start + gb.top),\n      Math.floor(gb.width),\n      Math.floor(height)\n    );\n    //draw border if asked for\n    if(config.lineWeight > 0) {\n      ctx.strokeStyle = config.lineColor;\n      ctx.lineWidth = config.lineWeight;\n      ctx.strokeRect(\n        Math.floor(gb.left),\n        Math.floor(start + gb.top),\n        Math.floor(gb.width),\n        Math.floor(height)\n      );\n    }\n    ////debugging rectangle to test group bounds\n    //ctx.fillStyle = 'red';\n    //ctx.fillRect(\n    //  Math.floor(gb.left),\n    //  Math.floor(gb.top),\n    //  Math.floor(gb.width),\n    //  Math.floor(gb.height)\n    //);\n\n    this.children.forEach(child => child.draw(ctx));\n  }\n\n  /**\n   * Return the ruler as data for an scenegraph visibility check. (Ruler by definition is\n   * always visible, and does own logic for the position bar)\n   * @returns {{data: Ruler}}\n   */\n\n  get visible() {\n    return {data: this};\n  }\n}\n","/**\n * Class representing a biological map and its associated tracks\n * @class BioMap\n * @extends SceneGraphNodeCanvas\n */\n\n\nimport m from 'mithril';\n//import PubSub from 'pubsub-js';\n//import {featureUpdate, dataLoaded} from '../../topics';\n\nimport {Bounds} from '../../model/Bounds';\nimport {pageToCanvas} from '../../util/CanvasUtil';\n\nimport {SceneGraphNodeCanvas} from '../node/SceneGraphNodeCanvas';\nimport {SceneGraphNodeGroup as Group} from '../node/SceneGraphNodeGroup';\nimport {MapTrack} from '../layout/MapTrack';\nimport {FeatureTrack} from '../layout/FeatureTrack';\nimport {Ruler} from '../geometry/Ruler';\n\nexport class BioMap extends SceneGraphNodeCanvas {\n\n  /**\n   * Create a new bio map\n   *\n   * @param {object} bioMapModel - Parsed model of the bio map to be drawn\n   * @param {object} appState - Application's meta state object\n   * @param {object} layoutBounds - Bounds object of position on screen\n   * @param {number} bioMapIndex - bio map's order on screen,\n   * @param {object} initialView - bio map's original layout, used for resetting view\n   */\n\n  constructor({bioMapModel, appState, layoutBounds, bioMapIndex, initialView}) {\n    super({model: bioMapModel});\n    this.initialView = initialView;\n    this.bioMapIndex = bioMapIndex;\n    this.model.visible = {\n      start: this.model.coordinates.start,\n      stop: this.model.coordinates.stop\n    };\n    this.model.view = {\n      base: {\n        start: this.model.coordinates.start,\n        stop: this.model.coordinates.stop\n      },\n      visible: {\n        start: this.model.coordinates.start,\n        stop: this.model.coordinates.stop\n      },\n      invert : this.model.config.invert\n    };\n\n    this.model.manhattanPlot = this.initialView.manhattan || null;\n    this.zoomDelta = (this.model.view.base.stop - this.model.view.base.start) / this.model.config.ruler.steps;\n    // set up coordinate bounds for view scaling\n    this.appState = appState;\n    this.verticalScale = 0;\n    this.backbone = null;\n    this.featureMarks = [];\n    this.featureLabels = [];\n    this.info = {\n      top: 0,\n      left: 0,\n      display: 'none'\n\n    };\n\n    // create some regular expressions for faster dispatching of events\n    this._gestureRegex = {\n      pan: new RegExp('^pan'),\n      pinch: new RegExp('^pinch'),\n      tap: new RegExp('^tap'),\n      wheel: new RegExp('^wheel')\n    };\n    this._layout(layoutBounds);\n    this.dirty = true;\n  }\n\n  /*\n   *  debug draw to test that the layer is positioned properly\n   */\n  /*\n    draw(ctx){\n   ctx = this.context2d;\n   this.children.forEach(child => child.draw(ctx));\n   ctx.save();\n   ctx.globalAlpha = .5;\n   ctx.fillStyle = '#f442e2';\n   this.children.forEach( child => {\n     let cb = child.globalBounds;\n     ctx.fillRect(\n       Math.floor(cb.left),\n       Math.floor(cb.top),\n       Math.floor(cb.width),\n       Math.floor(cb.height)\n     );\n   });\n   ctx.restore();\n }\n*/\n  /**\n   * Mithril lifecycle method on initial vnode creation.\n   * @param {object} vnode - node on mithril vnode representing this canvas item\n   */\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n//    PubSub.subscribe(featureUpdate, () => {\n//      this._layout(this.lb);\n//      this._redrawViewport(this.model.view.visible);\n//    });\n  }\n\n  // getters and setters\n\n  /**\n   * Culls elements to draw.\n   *\n   * @return array of elements visible in current canvas' viewport\n   *\n   */\n\n  get visible() {\n    let vis = [];\n    let cVis = this.children.map(child => {\n      return child.visible;\n    });\n    cVis.forEach(item => {\n      vis = vis.concat(item);\n    });\n    return vis;\n  }\n\n  /**\n   * getter for the R-tree of subnodes.\n   * @return rbush R-tree\n   */\n\n  get hitMap() {\n    return this.locMap;\n  }\n\n  // Private functions\n\n  // gesture components\n\n  /**\n   * Handles mouse wheel zoom\n   * @param evt - zoom event\n   * @returns {boolean} returns true to stop event propagation further down layers\n   * @private\n   */\n\n  _onZoom(evt) {\n    // TODO: send zoom event to the scenegraph elements which compose the biomap\n    // (don't scale the canvas element itself)\n    console.warn('BioMap -> onZoom', evt);\n    // normalise scroll delta\n    this.verticalScale = evt.deltaY < 0 ? -this.zoomDelta : this.zoomDelta;\n    let mcv = this.model.view.base;\n    let zStart = (this.model.view.visible.start + this.verticalScale);\n    let zStop = (this.model.view.visible.stop - this.verticalScale);\n    if (zStop - zStart < .01) {\n      this.verticalScale -= 0.5;\n      return true;\n    }\n    if (zStart < mcv.start) {\n      zStart = mcv.start;\n    } else if (zStart > zStop) {\n      zStart = zStop;\n    }\n\n    if (zStop > mcv.stop) {\n      zStop = mcv.stop;\n    } else if (zStop < zStart) {\n      zStop = zStart;\n    }\n    this._redrawViewport({start: zStart, stop: zStop});\n    return true; // stop event propagation\n  }\n\n  /**\n   * Handles tap/click event on canvas\n   * @param evt - tap event\n   * @returns {boolean} return true to stop event prorogation further down layers\n   * @private\n   */\n\n  _onTap(evt) {\n    console.log('BioMap -> onTap', evt, this);\n    let globalPos = pageToCanvas(evt, this.canvas);\n    this._loadHitMap();\n    let hits = [];\n\n    this.hitMap.search({\n      minX: globalPos.x,\n      maxX: globalPos.x,\n      minY: globalPos.y - 2,\n      maxY: globalPos.y + 2\n    }).forEach(hit => {\n      // temp fix, find why hit map stopped updating properly\n      if ((hit.data.model.coordinates.start >= this.model.view.visible.start) &&\n        (hit.data.model.coordinates.start <= this.model.view.visible.stop)) {\n        hits.push(hit.data);\n      } else if ((hit.data.model.coordinates.stop >= this.model.view.visible.start) &&\n        (hit.data.model.coordinates.stop <= this.model.view.visible.stop)) {\n        hits.push(hit.data);\n      }\n    });\n    if (hits.length > 0) {\n      hits.sort((a, b) => {\n        return a.model.coordinates.start - b.model.coordinates.start;\n      });\n      this.info.display = 'inline-block';\n      this.info.top = hits[0].globalBounds.top;\n      this.info.left = hits[0].globalBounds.right;\n      this.info.data = hits;\n      let names = hits.map(hit => {\n        return hit.model.name;\n      });\n      //@awilkey: is this obsolete?\n      //TODO: Revisit info popovers\n      this.info.innerHTML = `<p> ${names.join('\\n')} </p>`;\n      m.redraw();\n    } else if (this.info.display !== 'none') {\n      this.info.display = 'none';\n      m.redraw();\n    }\n\n    return true;\n  }\n\n  /**\n   *  Handle start of pan events on canvas, box zooms if ruler is part of selected or\n   *  mass select if not.\n   *\n   * @param evt - tap event\n   * @returns {boolean} return true to stop event prorogation further down layers\n   * @private\n   */\n\n  _onPanStart(evt) {\n    // TODO: send pan events to the scenegraph elements which compose the biomap\n    // (don't scale the canvas element itself)\n    this.zoomP = {\n      start: 0,\n      end: 0,\n      pStart: true,\n      ruler: false,\n      delta: 0,\n      corner: 0\n    };\n    this.zoomP.pStart = true;\n    console.warn('BioMap -> onPanStart -- vertically; implement me', evt);\n    let globalPos = pageToCanvas(evt, this.canvas);\n    let left = this.ruler.globalBounds.left;\n    // scroll view vs box select\n    if (left < (globalPos.x - evt.deltaX) &&\n      (globalPos.x - evt.deltaX) < (left + this.ruler.bounds.width)) {\n      this.zoomP.ruler = true;\n      this._moveRuler(evt);\n    } else {\n      this.zoomP.ruler = false;\n      this.zoomP.start = this._pixelToCoordinate(globalPos.y - this.ruler.globalBounds.top - evt.deltaY);\n      if (this.zoomP.start < this.model.view.base.start) {\n        this.zoomP.start = this.model.view.base.start;\n      }\n      let ctx = this.context2d;\n      this.zoomP.corner = {top: globalPos.y - evt.deltaY, left: globalPos.x - evt.deltaX};\n      ctx.lineWidth = 1.0;\n      ctx.strokeStyle = 'black';\n      // noinspection JSSuspiciousNameCombination\n      ctx.strokeRect(\n        Math.floor(globalPos.x - evt.deltaX),\n        Math.floor(globalPos.y - evt.deltaY),\n        Math.floor(evt.deltaX),\n        Math.floor(evt.deltaY)\n      );\n    }\n    return true;\n  }\n\n  /**\n   * Pans ruler's position box on click-and-pan\n   *\n   * @param evt - pan event\n   * @private\n   */\n\n  _moveRuler(evt) {\n    if (this.model.config.invert) {\n      evt.deltaY = -evt.deltaY;\n    }\n\n    let delta = (evt.deltaY - this.zoomP.delta) / this.model.view.pixelScaleFactor;\n    if (this.model.view.visible.start + delta < this.model.view.base.start) {\n      delta = this.model.view.base.start - this.model.view.visible.start;\n    } else if (this.model.view.visible.stop + delta > this.model.view.base.stop) {\n      delta = this.model.view.base.stop - this.model.view.visible.stop;\n    }\n    this.model.view.visible.start += delta;\n    this.model.view.visible.stop += delta;\n    this._redrawViewport({start: this.model.view.visible.start, stop: this.model.view.visible.stop});\n    this.zoomP.delta = evt.deltaY;\n  }\n\n  /**\n   * Continue pre-exiting pan event\n   *\n   * @param evt - continuation of pan event\n   * @returns {boolean} return true to stop event prorogation further down layers\n   * @private\n   */\n\n  _onPan(evt) {\n    // block propagation if pan hasn't started\n    if (!this.zoomP || !this.zoomP.pStart) return true;\n    if (this.zoomP && this.zoomP.ruler) {\n      this._moveRuler(evt);\n    } else {\n      let globalPos = pageToCanvas(evt, this.canvas);\n      this.draw();\n      let ctx = this.context2d;\n      ctx.lineWidth = 1.0;\n      ctx.strokeStyle = 'black';\n      // noinspection JSSuspiciousNameCombination\n      ctx.strokeRect(\n        Math.floor(this.zoomP.corner.left),\n        Math.floor(this.zoomP.corner.top),\n        Math.floor(globalPos.x - this.zoomP.corner.left),\n        Math.floor(globalPos.y - this.zoomP.corner.top)\n      );\n    }\n    return true;\n  }\n\n  /**\n   * Finalize pan event\n   *\n   * @param evt - tap event\n   * @returns {boolean} return true to stop event propagation further down layers\n   * @private\n   */\n\n  _onPanEnd(evt) {\n    // TODO: send pan events to the scenegraph elements which compose the biomap\n    // (don't scale the canvas element itself)\n    console.warn('BioMap -> onPanEnd -- vertically; implement me', evt, this.model.view.base);\n    // block propagation if pan hasn't started\n    if (!this.zoomP || !this.zoomP.pStart) return true;\n    if (this.zoomP && this.zoomP.ruler) {\n      this._moveRuler(evt);\n    } else {\n      let globalPos = pageToCanvas(evt, this.canvas);\n\n      // test if any part of the box select is in the ruler zone\n      let rLeft = this.ruler.globalBounds.left;\n      let rRight = this.ruler.globalBounds.right;\n      let lCorner = this.zoomP.corner.left < globalPos.x ? this.zoomP.corner.left : globalPos.x;\n      let rCorner = lCorner === this.zoomP.corner.left ? globalPos.x : this.zoomP.corner.left;\n      // if zoom rectangle contains the ruler, zoom, else populate popover\n      if (((lCorner <= rLeft) && (rCorner >= rLeft)) || ((lCorner <= rRight && rCorner >= rRight))) {\n        this.model.view.visible = this.model.view.base;\n\n        this.zoomP.start = this._pixelToCoordinate(this.zoomP.corner.top - this.ruler.globalBounds.top);\n        this.zoomP.stop = this._pixelToCoordinate(globalPos.y - this.ruler.globalBounds.top);\n        let swap = this.zoomP.start < this.zoomP.stop;\n        let zStart = swap ? this.zoomP.start : this.zoomP.stop;\n        let zStop = swap ? this.zoomP.stop : this.zoomP.start;\n\n        if (zStart < this.model.view.base.start) {\n          zStart = this.model.view.base.start;\n        }\n        if (zStop > this.model.view.base.stop) {\n          zStop = this.model.view.base.stop;\n        }\n\n        this._redrawViewport({start: zStart, stop: zStop});\n      } else {\n\n        this._loadHitMap();\n        let hits = [];\n        let swap = this.zoomP.corner.left < globalPos.x;\n        let swapV = this.zoomP.corner.top < globalPos.y;\n        this.hitMap.search({\n          minX: swap ? this.zoomP.corner.left : globalPos.x,\n          maxX: swap ? globalPos.x : this.zoomP.corner.left,\n          minY: swapV ? this.zoomP.corner.top : globalPos.y,\n          maxY: swapV ? globalPos.y : this.zoomP.corner.top\n        }).forEach(hit => {\n          // temp fix, find why hit map stopped updating properly\n          if(!hit.data.model) return;\n          if ((hit.data.model.coordinates.start >= this.model.view.visible.start) &&\n            (hit.data.model.coordinates.start <= this.model.view.visible.stop)) {\n            hits.push(hit.data);\n          } else if ((hit.data.model.coordinates.stop >= this.model.view.visible.start) &&\n            (hit.data.model.coordinates.stop <= this.model.view.visible.stop)) {\n            hits.push(hit.data);\n          }\n        });\n        if (hits.length > 0) {\n          hits.sort((a, b) => {\n            return a.model.coordinates.start - b.model.coordinates.start;\n          });\n          this.info.display = 'inline-block';\n          this.info.top = this.ruler.globalBounds.top;\n          this.info.left = 0;\n          this.info.data = hits;\n          let names = hits.map(hit => {\n            return hit.model.name;\n          });\n          //@awilkey: is this obsolete?\n          this.info.innerHTML = `<p> ${names.join('\\n')} </p>`;\n          m.redraw();\n        } else if (this.info.display !== 'none') {\n          this.info.display = 'none';\n          m.redraw();\n        }\n      }\n    }\n    this.draw();\n    this.zoomP = {\n      start: 0,\n      end: 0,\n      pStart: false,\n      ruler: false,\n      delta: 0,\n      corner: {\n        top: 0,\n        left: 0\n      }\n    };\n//    this.zoomP.ruler = false;\n//    this.zoomP.pStart = false;\n    return true; // do not stop propagation\n  }\n\n\n  /**\n   *  Converts a pixel position to the  canvas' backbone coordinate system.\n   *\n   *  @param {number} point - pixel position on screen\n   *  @return {number} backbone position\n   *\n   *  @private\n   */\n\n  _pixelToCoordinate(point) {\n    let coord = this.model.view.base;\n    let visc = this.model.view.visible;\n    let psf = this.model.view.pixelScaleFactor;\n    return ((visc.start * (coord.stop * psf - point) + visc.stop * (point - coord.start * psf)) / (psf * (coord.stop - coord.start))) - (coord.start * -1);\n  }\n\n  /**\n   * perform layout of backbone, feature markers, and feature labels.\n   *\n   * @param {object} layoutBounds - bounds object representing bounds of this canvas\n   *\n   * @private\n   */\n\n  _layout(layoutBounds) {\n    // TODO: calculate width based on # of SNPs in layout, and width of feature\n    // labels\n    // Setup Canvas\n    //const width = Math.floor(100 + Math.random() * 200);\n    this.lb = this.lb || layoutBounds;\n    console.log('BioMap -> layout');\n    const width = Math.floor(this.lb.width / this.appState.bioMaps.length);\n    this.children = [];\n    this.domBounds = this.domBounds || new Bounds({\n      left: this.lb.left,\n      top: this.lb.top,\n      width: width > 300 ? width : 300,\n      height: this.lb.height\n    });\n\n    this.bounds = this.bounds || new Bounds({\n      left: 0,\n      top: this.lb.top + 40,\n      width: this.domBounds.width,\n      height: Math.floor(this.domBounds.height - 140) // set to reasonably re-size for smaller windows\n    });\n    //Add children tracks\n    this.bbGroup = new Group({parent: this});\n    this.bbGroup.bounds = new Bounds({\n      top: this.bounds.top,\n      left: this.model.config.ruler.labelSize * 10,\n      width: 10,\n      height: this.bounds.height\n    });\n    this.bbGroup.model = this.model;\n    this.backbone = new MapTrack({parent: this});\n    this.bbGroup.addChild(this.backbone);\n    this.model.view.backbone = this.backbone.backbone.globalBounds;\n    this.ruler = new Ruler({parent: this, bioMap: this.model, config: this.model.config.ruler});\n    this.bbGroup.addChild(this.ruler);\n    this.backbone.children.forEach(child => {\n      if (child.globalBounds.left < this.bbGroup.bounds.left) {\n        this.bbGroup.bounds.left = child.globalBounds.left;\n      }\n      if (child.globalBounds.right > this.bbGroup.bounds.right) {\n        this.bbGroup.bounds.right = child.globalBounds.right;\n      }\n    });\n    this.children.push(this.bbGroup);\n\n    this.tracksRight =[];\n    this.tracksLeft = [];\n    if(this.model.tracks) {\n      this.model.tracks.forEach((track,order) => {\n        track.tracksIndex = order;\n        if (track.position === -1) {\n          this.tracksRight.push(track);\n        } else {\n          this.tracksLeft.push(track);\n        }\n      });\n    }\n\n    let qtlRight = new FeatureTrack({parent:this,position:1});\n    let qtlLeft = new FeatureTrack({parent:this,position:-1});\n    // let qtlRight = {};\n    //let qtlRight = new QtlTrack({parent: this , position: 1});\n    //let qtlLeft = new QtlTrack({parent: this, position: -1});\n    this.addChild(qtlRight);\n    this.addChild(qtlLeft);\n\n    if (qtlLeft && qtlLeft.bounds.right > this.bbGroup.bounds.left) {\n      const bbw = this.bbGroup.bounds.width;\n      this.bbGroup.bounds.left = qtlLeft.globalBounds.right + 100;\n      this.bbGroup.bounds.width = bbw;\n      const qrw = qtlRight.bounds.width;\n      qtlRight.bounds.left += qtlLeft.globalBounds.right;\n      qtlRight.bounds.right = qtlRight.bounds.left + qrw;\n    }\n\n    if (this.domBounds.width < qtlRight.globalBounds.right + 30) {\n      this.domBounds.width = qtlRight.globalBounds.right + 50;\n    }\n\n    //load local rBush tree for hit detection\n    this._loadHitMap();\n    //let layout know that width has changed on an element;\n    //m.redraw();\n    this.dirty = true;\n  }\n\n  /**\n   * Adds children nodes to the R-tree\n   *\n   * @private\n   */\n\n  _loadHitMap() {\n    let hits = [];\n    let childrenHits = this.children.map(child => {\n      return child.hitMap;\n    });\n    childrenHits.forEach(child => {\n      hits = hits.concat(child);\n    });\n    this.locMap.clear();// = rbush();\n    this.locMap.load(hits);\n  }\n\n  /**\n   * Redraw restricted view\n   *\n   * @param coordinates\n   * @private\n   */\n\n  _redrawViewport(coordinates) {\n    this.model.view.visible = {\n      start: coordinates.start,\n      stop: coordinates.stop\n    };\n    this.backbone.loadLabelMap();\n    this.draw();\n\n    let cMaps = document.getElementsByClassName('cmap-correspondence-map');\n    [].forEach.call(cMaps, el => {\n      el.mithrilComponent.draw();\n    });\n    // move top of popover if currently visible\n    if (this.info.display !== 'none') {\n      this.info.top = this.info.data[0].globalBounds.top;\n    }\n    m.redraw();\n  }\n}\n","/**\n * FeatureMarker\n * A SceneGraphNode representing a feature on a Map with a line or hash mark.\n *\n * @extends SceneGraphNodeBase\n */\n\nimport {SceneGraphNodeBase} from '../node/SceneGraphNodeBase';\nimport {Bounds} from '../../model/Bounds';\nimport {translateScale} from '../../util/CanvasUtil';\n\nexport class CorrespondenceMark extends SceneGraphNodeBase {\n\n  /**\n   * Construct the CorrespondenceMark layer\n   * @param parent - parent scene graph node\n   * @param featurePair - array of features being compared\n   * @param mapCoordinates - current zoom level of each feature maps\n   * @param bioMap - array of both sets of map data\n   */\n\n  /**\n   * TODO: Allow configuration as part of config file\n   */\n\n  constructor({parent, featurePair, mapCoordinates, bioMap}) {\n    super({parent});\n    this.model = featurePair;\n    this.mapCoordinates = mapCoordinates;\n    this.lineWidth = 1.0;\n    this.bioMap = bioMap;\n    this.invert = [bioMap[0].model.config.invert, bioMap[1].model.config.invert];\n\n    this.pixelScaleFactor = [\n      bioMap[0].model.view.pixelScaleFactor,\n      bioMap[1].model.view.pixelScaleFactor,\n    ];\n\n    let leftY = translateScale(\n      this.model[0].coordinates.start,\n      bioMap[0].model.view.base,\n      bioMap[0].model.view.visible,\n      this.invert[0]) * this.pixelScaleFactor[0];\n\n    let rightY = translateScale(\n      this.model[1].coordinates.start,\n      bioMap[1].model.view.base,\n      bioMap[1].model.view.visible,\n      this.invert[1]) * this.pixelScaleFactor[1];\n\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      top: leftY,\n      left: parent.bounds.left,\n      height: leftY - rightY,\n      width: parent.bounds.width\n    });\n  }\n\n  /**\n   * Draw the correspondence marks\n   * @param {object} ctx - canvas context 2D\n   */\n\n  draw(ctx) {\n    let bioMap = this.bioMap;\n    let leftYStart = translateScale(\n      this.model[0].coordinates.start,\n      bioMap[0].model.view.base,\n      bioMap[0].model.view.visible,\n      this.invert[0]) * this.pixelScaleFactor[0];\n\n    let rightYStart = translateScale(\n      this.model[1].coordinates.start,\n      bioMap[1].model.view.base,\n      bioMap[1].model.view.visible,\n      this.invert[1]) * this.pixelScaleFactor[1];\n\n    if (this.model[0].coordinates.start === this.model[0].coordinates.stop\n      && this.model[1].coordinates.start === this.model[1].coordinates.stop) {\n      // correspondence line\n      this.bounds.top = leftYStart;\n      this.bounds.bottom = rightYStart;\n      let gb = this.globalBounds || {};\n      ctx.beginPath();\n      ctx.lineWidth = this.lineWidth;\n      ctx.strokeStyle = '#CAA91E';\n      ctx.globalAlpha = 0.7;\n      // noinspection JSSuspiciousNameCombination\n      ctx.moveTo(Math.floor(gb.left), Math.floor(gb.top));\n      // noinspection JSSuspiciousNameCombination\n      ctx.lineTo(Math.floor(gb.right), Math.floor(gb.bottom));\n      ctx.stroke();\n    }\n    else {\n      // correspondence region \n      let leftYStop = translateScale(\n        this.model[0].coordinates.stop,\n        bioMap[0].model.view.base,\n        bioMap[0].model.view.visible,\n        this.invert[0]) * this.pixelScaleFactor[0];\n      let rightYStop = translateScale(\n        this.model[1].coordinates.stop,\n        bioMap[1].model.view.base,\n        bioMap[1].model.view.visible,\n        this.invert[1]) * this.pixelScaleFactor[1];\n\n      this.bounds.top = leftYStart;\n      this.bounds.bottom = leftYStop;\n      let gbLeft = this.globalBounds || {};\n      //let leftTop = gbLeft.top;\n      //let leftBot = gbLeft.bottom;\n      this.bounds.top = rightYStart;\n      this.bounds.bottom = rightYStop;\n      let gbRight = this.globalBounds || {};\n      //let rightTop = gbRight.top;\n      //let rightBot = gbRight.bottom;\n\n      ctx.beginPath();\n      ctx.lineWidth = this.lineWidth;\n      ctx.globalAlpha = 0.2;\n      ctx.fillStyle = '#7C6400'; //'#A4870C';\n      // noinspection JSSuspiciousNameCombination\n      ctx.moveTo(Math.floor(gbLeft.left), Math.floor(gbLeft.top));\n      // noinspection JSSuspiciousNameCombination\n      ctx.lineTo(Math.floor(gbLeft.left), Math.floor(gbLeft.bottom));\n      // noinspection JSSuspiciousNameCombination\n      ctx.lineTo(Math.floor(gbRight.right), Math.floor(gbRight.bottom));\n      // noinspection JSSuspiciousNameCombination\n      ctx.lineTo(Math.floor(gbRight.right), Math.floor(gbRight.top));\n      ctx.fill();\n    }\n  }\n}\n","/**\n * Feature\n * A base class for biological map feature\n */\nclass Feature {\n\n  /**\n   * Create a Feature\n   *\n   * @param {Object} params - having the following properties\n   * @param {String} name - name of feature\n   * @param {Object} tags - array of String, optional slugs or tags, optional\n   * @param {Object} aliases - array of alternate names, optional\n   * @returns {Object}\n   */\n\n  constructor({\n                source,\n                coordinates = {start: 0, stop: 0},\n                name,\n                tags = [],\n                aliases = [],\n              }) {\n    this.source = source;\n    this.coordinates = Object.freeze(coordinates); // object w/ start and end props\n    this.name = name;\n    this.tags = tags;\n    this.aliases = aliases;\n  }\n\n  /**\n   *\n   * @returns {number}\n   */\n\n  get length() {\n    return this.coordinates.stop - this.coordinates.start;\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n\n  get typeHasLinkouts() {\n    return this.source.linkouts.some(l => {\n      return this.typeLinkedBy(l);\n    });\n  }\n\n  /**\n   *\n   * @param linkout\n   * @returns {Array|*|boolean}\n   */\n\n  typeLinkedBy(linkout) {\n    return linkout.featuretypePattern !== undefined ?\n      this.tags.some(t => {\n        return linkout.featuretypePattern.test(t);\n      })\n      : this.tags.includes(linkout.featuretype);\n  }\n}\n\n/**\n * @param Array features1 - 1st collection of features\n * @param Array features2 - 2nd collection of features\n * @return Array - tuples of results in common [[feat1, feat2], ...]\n */\n/**\n * Find the common features based on name and aliases.\n * @param features1\n * @param features2\n * @returns {any[]}\n */\n\n// TODO: support more than two collections of features\nfunction featuresInCommon(features1, features2) {\n  const setupDict = (features) => {\n    let dict = {};\n    features.forEach(f => {\n      dict[f.name] = f;\n      f.aliases.forEach(a => {\n        if (a) dict[a] = f;\n      });\n    });\n    return dict;\n  };\n  let dict1 = setupDict(features1);\n  let dict2 = setupDict(features2);\n  let intersectedKeys = Object.keys(dict1).filter(key => dict2[key]);\n  return intersectedKeys.map(key => {\n    return [dict1[key], dict2[key]];\n  });\n}\n\nexport {Feature, featuresInCommon};\n","/**\n * Mithril component for correspondence lines between 2 or more BioMaps with an\n * html5 canvas element.\n *\n * @extends SceneGraphNodeCanvas\n *\n */\nimport m from 'mithril';\nimport {Bounds} from '../../model/Bounds';\nimport {SceneGraphNodeCanvas} from '../node/SceneGraphNodeCanvas';\nimport {SceneGraphNodeGroup} from '../node/SceneGraphNodeGroup';\nimport {CorrespondenceMark} from '../geometry/CorrespondenceMark';\nimport {featuresInCommon} from '../../model/Feature';\n\nexport class CorrespondenceMap extends SceneGraphNodeCanvas {\n  constructor({bioMapComponents, appState, layoutBounds}) {\n    super({});\n    console.log('CorrespondenceMap -> constructor');\n    this.bioMapComponents = bioMapComponents;\n    this.appState = appState;\n    this.verticalScale = 1;\n    this.correspondenceMarks = [];\n    this._layout(layoutBounds);\n  }\n\n  /**\n   * draw our scenegraph children our canvas element\n   */\n  draw() {\n    let ctx = this.context2d;\n    if (!ctx) return;\n    if (!this.domBounds) return;\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    let gb = this.globalBounds || {};\n    ctx.save();\n    ctx.globalAlpha = 0;\n    // noinspection JSSuspiciousNameCombination\n    // noinspection JSSuspiciousNameCombination\n    ctx.fillRect(\n      Math.floor(gb.left),\n      Math.floor(gb.top),\n      Math.floor(gb.width),\n      Math.floor(gb.height)\n    );\n    ctx.restore();\n    this.visible.map(child => child.data.draw(ctx));\n    // store these bounds, for checking in drawLazily()\n    this.lastDrawnCanvasBounds = this.bounds;\n  }\n\n  /**\n   * getter for common features between our bioMaps.\n   */\n  get commonFeatures() {\n    // TODO: support more than 2 sets of features (e.g. for circos layout)\n    let leftFeatures = this.bioMapComponents[0].model.features;\n    let rightFeatures = this.bioMapComponents[1].model.features;\n    //let leftFeatures = this.bioMapComponents[0].backbone.filteredFeatures;\n    //let rightFeatures = this.bioMapComponents[1].backbone.filteredFeat\n    return featuresInCommon(leftFeatures, rightFeatures);\n    //return common;\n  }\n\n  /**\n   * mithril component render callback\n   *\n   */\n\n  view() {\n    if (this.domBounds && !this.domBounds.isEmptyArea) {\n      this.lastDrawnMithrilBounds = this.domBounds;\n    }\n    let b = this.domBounds || {};\n    return m('canvas', {\n      class: 'cmap-canvas cmap-correspondence-map',\n      style: `left: ${b.left}px; top: ${b.top}px;\n      width: ${b.width}px; height: ${b.height}px;`,\n      width: b.width,\n      height: b.height\n    });\n  }\n\n  /**\n   * Lay out correspondence lines between features\n   * @param layoutBounds - bounds of the linked canvas\n   * @private\n   */\n\n  _layout(layoutBounds) {\n    this.domBounds = layoutBounds;\n    // this.bounds (scenegraph) has the same width and height, but zero the\n    // left/top because we are the root node in a canvas sceneGraphNode\n    // hierarchic.\n    let gb1 = this.bioMapComponents[0].backbone.markerGroup.globalBounds;\n    this.bounds = new Bounds({\n      allowSubpixel: false,\n      left: 1,\n      top: 0,\n      width: this.domBounds.width,\n      height: this.domBounds.height\n    });\n\n    let corrData = [];\n    let coorGroup = new SceneGraphNodeGroup({parent: this});\n    coorGroup.bounds = new Bounds({\n      allowSubpixel: false,\n      top: gb1.top,\n      left: 0,\n      width: this.domBounds.width,\n      height: gb1.height,\n    });\n    this.addChild(coorGroup);\n\n    let bioMapCoordinates = [\n      this.bioMapComponents[0].mapCoordinates,\n      this.bioMapComponents[1].mapCoordinates\n    ];\n    this.commonFeatures.forEach(feature => {\n      let corrMark = new CorrespondenceMark({\n        parent: coorGroup,\n        featurePair: feature,\n        mapCoordinates: bioMapCoordinates,\n        bioMap: this.bioMapComponents\n      });\n      coorGroup.addChild(corrMark);\n      corrData.push({\n        minX: this.bounds.left,\n        maxX: this.bounds.right,\n        minY: feature[0].coordinates.start,\n        maxY: feature[1].coordinates.start,\n        data: corrMark\n      });\n    });\n    this.locMap.load(corrData);\n  }\n\n  /**\n   * Return visible elements in R-Tree\n   */\n\n  get visible() {\n    return this.locMap.all();\n  }\n}\n","/**\n * LayoutBase\n * A Mithril component Base class for Layouts, e.g. HorizontalLayout and\n * CircosLayout.\n */\nimport {Bounds} from '../../model/Bounds';\n\nexport class Menu {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle callback\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.appState = vnode.attrs.appState;\n  }\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oncreate(vnode) {\n    // save a reference to this component's dom element\n\n    this.el = vnode.dom;\n    vnode.dom.mithrilComponent = this;\n    this.bounds = new Bounds(vnode.dom.getBoundingClientRect());\n  }\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  onupdate(vnode) {\n    this.bounds = new Bounds(vnode.dom.getBoundingClientRect());\n  }\n\n}\n","/**\n * popover\n * A mithril component for displaying feature information.\n */\nimport m from 'mithril';\n\nimport {mix} from '../../../mixwith.js/src/mixwith';\nimport {Menu} from './Menu';\nimport {RegisterComponentMixin} from '../RegisterComponentMixin';\n\nexport class Popover extends mix(Menu).with(RegisterComponentMixin) {\n\n  /**\n   *\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  /**\n   * mithril component render method\n   * @param vnode\n   * @returns {*}\n   */\n\n  view(vnode) {\n    let b = vnode.attrs.domBounds || {};\n    let info = vnode.attrs.info || {data: []};\n    return m('div', {\n      class: 'biomap-info',\n      style: `left: ${info.left + b.left}px; top: ${info.top + b.top}px;\n               display: ${info.display};`,\n    }, this._generateInner(info.data));\n  }\n\n  /**\n   *\n   * @param data\n   * @returns {*}\n   * @private\n   */\n\n  _generateInner(data) {\n    if (!data) return;\n\n    let popover = data.map(item => {\n      let start = m('div', 'start:  ' + item.model.coordinates.start);\n      let stop = m('div', 'stop:  ' + item.model.coordinates.stop);\n      let tags = item.model.tags.length > 0 && typeof item.model.tags[0] !== 'undefined' ? m('div', 'tags:  ', item.model.tags.join('\\n')) : [];\n      let aliases = item.model.aliases.length > 0 && typeof item.model.aliases[0] !== 'undefined' ? m('div', 'aliases:  ', item.model.aliases.join('\\n')) : [];\n      let links = item.model.source.linkouts.length > 0 ?\n        m('div', {id: `links-div-${item.model.name}`},\n          item.model.source.linkouts.filter(l => (!l.isLinkingService) && item.model.typeLinkedBy(l)).map(\n            l => {\n              return m('div', {}, m('a', {\n                'target': '_blank',\n                'href': l.url.replace(/\\${item.id}/, item.model.name)\n              }, l.text));\n            }\n          ).concat(\n            item.model.source.linkouts.some(l => {\n              return l.isLinkingService && item.model.typeHasLinkouts;\n            }) ?\n              (item.model.links === undefined ? m('img[src=images/ajax-loader.gif]') : item.model.links.map(l => {\n                return m('div', {}, m('a', {target: '_blank', href: l.href}, l.text));\n              }))\n              : []\n          )\n        ) : [];\n\n      return [m(this._buttonTest(item.model), {targetId: item.model.name}),\n        m('div', {\n          class: 'biomap-info-data',\n          id: `biomap-info-${item.model.name}`,\n          style: 'display: none;'\n        }, [start, stop, tags, aliases, links])\n      ];\n    });\n\n    return m('div', {}, popover);\n  }\n\n  /**\n   *\n   * @param feature\n   * @returns {{view: view}}\n   * @private\n   */\n\n  _buttonTest(feature) {\n    let Links = {\n      fetch: function () {\n        let url;\n        return feature.source.linkouts.filter(l => l.isLinkingService && feature.tags.includes(l.featuretype)).map(l => {\n          url = l.url;\n          url = url.replace(/\\${item\\.id}/, feature.name);\n          return m.request({\n            method: 'GET',\n            url: url,\n          })\n            .then(function (result) {\n              feature.links = result;\n            });\n        });\n      }\n    };\n\n    return {\n      view: function (vnode) {\n        let targetName = `biomap-info-${vnode.attrs.targetId}`;\n        return m('div', {\n          class: 'biomap-info-name',\n          onclick: function () {\n            let target = document.getElementById(targetName);\n            target.style.display = target.style.display === 'none' ? 'block' : 'none';\n            if (feature.links === undefined) {\n              if (feature.source.linkouts.some(l => {\n                  return l.isLinkingService && feature.typeHasLinkouts;\n                })) {\n                let p = Links.fetch();\n                if (p !== undefined) {\n                  p[0].then(vnode.redraw);\n                }\n              }\n              else {\n                feature.links = [];\n                vnode.redraw();\n              }\n            }\n          }\n        }, vnode.attrs.targetId);\n      }\n    };\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n\n  handleGesture() {\n    // prevent interacting with div from propagating events\n    console.log('popover gesture!');\n    return true;\n  }\n}\n","/**\n * ColorPicker.js\n * Mithril component for a colorselector tool.\n *\n */\nimport m from 'mithril';\nimport PubSub from 'pubsub-js';\n\nimport {pageToCanvas} from '../../util/CanvasUtil';\n\n/**\n *\n * @type {{oninit: ColorPicker.oninit, onupdate: ColorPicker.onupdate, view: ColorPicker.view}}\n */\nexport let ColorPicker = {\n  /**\n   *\n   * @param vnode\n   */\n\n  oninit: function (vnode) {\n    vnode.state = vnode.attrs;\n    vnode.state.colors = {\n      baseColor: vnode.attrs.settings.fillColor[vnode.attrs.order] || 'red',\n      currentColor: null,\n      hueValueColor: null\n    };\n  },\n\n  /**\n   *\n   * @param vnode\n   */\n\n  onupdate: function (vnode) {\n    vnode.attrs.settings.fillColor[vnode.attrs.order] = vnode.state.colors.baseColor;\n  },\n\n  /**\n   *\n   * @param vnode\n   * @returns {*[]}\n   */\n\n  view: function (vnode) {\n    // store these bounds, for checking in drawLazily()\n    return [m('div.color-picker', {style: `display:${vnode.state.hidden[vnode.state.order]}`}, [\n      m(BaseSelector, {info: vnode.state}),\n      m(SaturationSelector, {info: vnode.state}),\n      m(ColorPreview, {info: vnode.state}),\n      m('div#color-apply-controls', {style: 'text-align:center; margin-left:10px; display:inline-block; padding:auto'},\n        [m(ColorBox, {info: vnode.state}),//,settings:vnode.attrs.settings}),\n          m(ColorApplyButton, {info: vnode.state, settings: vnode.state.settings}),\n          m(ColorResetButton, {info: vnode.state})\n        ]\n      )\n    ])\n    ];\n  }\n};\n/**\n *\n * @type {{oncreate: BaseSelector.oncreate, onupdate: BaseSelector.onupdate, view: BaseSelector.view, draw: BaseSelector.draw, handleGesture: BaseSelector.handleGesture, _locationChange: BaseSelector._locationChange, _changeColor: BaseSelector._changeColor, _posFromHsv: BaseSelector._posFromHsv, _hsvFromPos: BaseSelector._hsvFromPos}}\n */\n\nexport let BaseSelector = {\n\n  /**\n   *\n   * @param vnode\n   */\n\n  oncreate: function (vnode) {\n    vnode.dom.mithrilComponent = this;\n    this.vnode = vnode;\n    vnode.state = vnode.attrs;\n    vnode.state.canvas = this.el = vnode.dom;\n    vnode.state.context2d = vnode.dom.getContext('2d');\n    if (!vnode.state.info.currentColor || !vnode.state.info.hueValueColor) {\n      vnode.state.context2d.fillStyle = vnode.state.info.colors.baseColor;\n      //use the context to convert the original color into a hex string\n      //avoiding needing to parse html color words\n      vnode.state.info.colors.baseColor = vnode.state.context2d.fillStyle;\n      vnode.state.info.colors.currentColor = vnode.state.context2d.fillStyle;\n      vnode.state.info.colors.hueValueColor = rgbToHsv(hexToRgb(vnode.state.context2d.fillStyle));\n    }\n    vnode.state.ptrPos = this._posFromHsv(vnode.state.info.colors.hueValueColor);\n    this._gestureRegex = {\n      pan: new RegExp('^pan'),\n      tap: new RegExp('^tap')\n    };\n    this.draw();\n  },\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  onupdate: function (vnode) {\n    vnode.state.ptrPos = vnode.dom.mithrilComponent._posFromHsv(vnode.state.info.colors.hueValueColor);\n    vnode.dom.mithrilComponent.draw();\n  },\n\n  /**\n   *\n   * @returns {*}\n   */\n\n  view: function () {\n    // store these bounds, for checking in drawLazily()\n    return m('canvas', {\n      class: 'color-canvas-main',\n      style: 'width: 200; height: 100;',\n      width: 200,\n      height: 100\n    });\n  },\n\n  /**\n   *\n   */\n\n  draw: function () {\n    let canvas = this.vnode.state.canvas;\n    let ctx = this.vnode.state.context2d;\n    let ptrPos = this.vnode.state.ptrPos;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // RGB gradient\n    let hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\n    hGrad.addColorStop(0 / 6, '#F00');\n    hGrad.addColorStop(1 / 6, '#FF0');\n    hGrad.addColorStop(2 / 6, '#0F0');\n    hGrad.addColorStop(3 / 6, '#0FF');\n    hGrad.addColorStop(4 / 6, '#00F');\n    hGrad.addColorStop(5 / 6, '#F0F');\n    hGrad.addColorStop(6 / 6, '#F00');\n    ctx.fillStyle = hGrad;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    //Fade to black gradient\n    let vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n    vGrad.addColorStop(0, 'rgba(0,0,0,0)');\n    vGrad.addColorStop(1, 'rgba(0,0,0,1)');\n    ctx.fillStyle = vGrad;\n\n    // Draw the selection pointer\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 1;\n    ctx.strokeRect(0, 0, canvas.width, canvas.height);\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(ptrPos.x - 10, ptrPos.y);\n    ctx.lineTo(ptrPos.x - 3, ptrPos.y);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.strokeStyle = 'white';\n    ctx.moveTo(ptrPos.x - 3, ptrPos.y);\n    ctx.lineTo(ptrPos.x - 1, ptrPos.y);\n    ctx.moveTo(ptrPos.x + 1, ptrPos.y);\n    ctx.lineTo(ptrPos.x + 3, ptrPos.y);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.strokeStyle = 'black';\n    ctx.moveTo(ptrPos.x + 3, ptrPos.y);\n    ctx.lineTo(ptrPos.x + 10, ptrPos.y);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(ptrPos.x, ptrPos.y - 10);\n    ctx.lineTo(ptrPos.x, ptrPos.y - 3);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.strokeStyle = 'white';\n    ctx.moveTo(ptrPos.x, ptrPos.y - 3);\n    ctx.lineTo(ptrPos.x, ptrPos.y - 1);\n    ctx.moveTo(ptrPos.x, ptrPos.y + 1);\n    ctx.lineTo(ptrPos.x, ptrPos.y + 3);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.strokeStyle = 'black';\n    ctx.moveTo(ptrPos.x, ptrPos.y + 3);\n    ctx.lineTo(ptrPos.x, ptrPos.y + 10);\n    ctx.stroke();\n  },\n\n  /**\n   *\n   * @param evt\n   * @returns {boolean}\n   */\n\n  handleGesture: function (evt) {\n    if (evt.type.match(this._gestureRegex.tap) ||\n      evt.type.match(this._gestureRegex.pan)) {\n      let point = pageToCanvas(evt, this.vnode.state.canvas);\n      this._locationChange(point);\n    }\n    return true;\n  },\n\n  /**\n   *\n   * @param evt\n   * @private\n   */\n\n  _locationChange: function (evt) {\n    let hueValue = this.vnode.state.info.colors.hueValueColor;\n    this.vnode.state.ptrPos = {\n      x: evt.x,\n      y: evt.y\n    };\n    let hsv = this._hsvFromPos(this.vnode.state.ptrPos);\n    hueValue[0] = hsv[0];\n    hueValue[2] = hsv[2];\n    if (!hueValue[1]) {\n      hueValue[1] = 100;\n    }\n    this._changeColor();\n  },\n  /**\n   *\n   * @private\n   */\n\n  _changeColor: function () {\n    //PubSub to alert the Saturation slider that the position has changed\n    //order is passed to not update *every* color selector\n    //Can be removed, but using PubSub means dynamic response from other forms\n    PubSub.publish('hueValue', {color: this.vnode.state.colors, order: this.vnode.state.info.order});\n    this.draw();\n  },\n\n  /**\n   *\n   * @param hsv\n   * @returns {{x: number, y: number}}\n   * @private\n   */\n\n  _posFromHsv: function (hsv) {\n    // Math.round to avoid annoying sub-pixel rendering\n    hsv[0] = Math.max(0, Math.min(360, hsv[0]));\n    hsv[2] = Math.max(0, Math.min(100, hsv[2]));\n    return {\n      x: parseFloat(hsv[0] / 360) * (this.vnode.state.canvas.width),\n      y: (1 - (hsv[2] / 100)) * (this.vnode.state.canvas.height)\n    };\n  },\n\n  /**\n   *\n   * @param pos\n   * @returns {*[]}\n   * @private\n   */\n\n  _hsvFromPos: function (pos) {\n    let h = Math.max(0, (pos.x * 360) / this.vnode.state.canvas.width);\n    let s = 100;\n    let l = 100 * (1 - (pos.y / this.vnode.state.canvas.height));\n    return [h, s, l];\n  }\n};\n/**\n *\n * @type {{oncreate: SaturationSelector.oncreate, onupdate: SaturationSelector.onupdate, view: SaturationSelector.view, draw: SaturationSelector.draw, handleGesture: SaturationSelector.handleGesture, _changeColor: SaturationSelector._changeColor, _hueUpdated: SaturationSelector._hueUpdated, _posFromHsv: SaturationSelector._posFromHsv, _sFromPos: SaturationSelector._sFromPos}}\n */\n\nexport let SaturationSelector = {\n  /**\n   *\n   * @param vnode\n   */\n\n  oncreate: function (vnode) {\n    vnode.dom.mithrilComponent = this;\n    this.vnode = vnode;\n    vnode.state = vnode.attrs;\n    vnode.state.canvas = this.el = vnode.dom;\n    vnode.state.context2d = vnode.dom.getContext('2d');\n    if (!vnode.state.info.colors.hueValueColor[1]) {\n      vnode.context2d.fillStyle = vnode.state.info.colors.baseColor;\n      //use the context to convert the original color into a hex string\n      //avoiding needing to parse html color words\n      vnode.state.info.colors.hueValueColor[1] = rgbToHsv(hexToRgb(vnode.state.context2d.fillStyle))[1];\n    }\n    vnode.state.ptrPos = this._posFromHsv(vnode.state.info.colors.hueValueColor);\n    this._gestureRegex = {\n      pan: new RegExp('^pan'),\n      tap: new RegExp('^tap')\n    };\n    PubSub.subscribe('hueValue', (msg, data) => {\n      if (data.order === vnode.state.info.order) this._hueUpdated(data.color);\n    });\n    this._gestureRegex = {\n      pan: new RegExp('^pan'),\n      tap: new RegExp('^tap')\n    };\n    this.draw();\n  },\n\n  /**\n   *\n   * @param vnode\n   */\n\n  onupdate: function (vnode) {\n    vnode.state.ptrPos = vnode.dom.mithrilComponent._posFromHsv(vnode.state.info.colors.hueValueColor);\n    PubSub.publish('satUpdated', {order: vnode.state.info.order, currentColors: vnode.state.info.colors}); // keeps hex value in sync\n    vnode.dom.mithrilComponent.draw();\n  },\n\n  /**\n   * mithril component render method\n   * @returns {*}\n   */\n\n  view: function () {\n    // store these bounds, for checking in drawLazily()\n    return m('canvas#color-canvas-sat', {\n      style: 'margin-left:10px; width: 20; height: 100;',\n      width: 20,\n      height: 100\n    });\n  },\n\n  /**\n   *\n   */\n\n  draw: function () {\n    let canvas = this.vnode.state.canvas;\n    let ctx = this.vnode.state.context2d;\n    let ptrPos = this.vnode.state.ptrPos;\n    // clear and redraw gradient slider for current picked HueValue color;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    let grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n    let hueValueColor = this.vnode.state.info.colors.hueValueColor;\n    let rgbStart = hsvToRgb([hueValueColor[0], 100, hueValueColor[2]]).map(color => {\n      return Math.floor(color);\n    });\n    let rgbStop = hsvToRgb([hueValueColor[0], 0, hueValueColor[2]]).map(color => {\n      return Math.floor(color);\n    });\n    grad.addColorStop(0, `rgba(${rgbStart[0]},${rgbStart[1]},${rgbStart[2]},1)`);\n    grad.addColorStop(1, `rgba(${rgbStop[0]},${rgbStop[1]},${rgbStop[2]},1)`);\n    ctx.fillStyle = grad;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // draw slider pointer\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 1;\n    ctx.strokeRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = 'black';\n    ctx.beginPath();\n    ctx.strokeStyle = 'white';\n    ctx.moveTo(canvas.width, ptrPos + 5);\n    ctx.lineTo(canvas.width / 2, ptrPos);\n    ctx.lineTo(canvas.width, ptrPos - 5);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n  },\n\n  /**\n   *\n   * @param evt\n   * @returns {boolean}\n   */\n\n  handleGesture: function (evt) {\n    if (evt.type.match(this._gestureRegex.tap) ||\n      evt.type.match(this._gestureRegex.pan)) {\n      let point = pageToCanvas(evt, this.vnode.state.canvas);\n      this._changeColor(point);\n    }\n    return true;\n  },\n\n  /**\n   *\n   * @param evt\n   * @private\n   */\n\n  _changeColor: function (evt) {\n    this.vnode.state.ptrPos = evt.y;\n    this.vnode.state.info.colors.hueValueColor[1] = this._sFromPos(this.vnode.state.ptrPos);\n    this._hueUpdated(this.vnode.state.info.colors);\n  },\n\n  /**\n   *\n   * @private\n   */\n\n  _hueUpdated: function () {\n    PubSub.publish('satUpdated', {order: this.vnode.state.info.order, currentColors: this.vnode.state.info.colors});\n    this.draw();\n  },\n\n  /**\n   *\n   * @param hsv\n   * @returns {number}\n   * @private\n   */\n\n  _posFromHsv: function (hsv) {\n    return Math.round((1 - (hsv[1] / 100)) * this.vnode.state.canvas.height);\n  },\n\n  /**\n   *\n   * @param pos\n   * @returns {number}\n   * @private\n   */\n\n  _sFromPos: function (pos) {\n    return 100 * (1 - (pos / this.vnode.state.canvas.height));\n  }\n};\n\n/**\n *\n * @type {{oncreate: ColorPreview.oncreate, onupdate: ColorPreview.onupdate, view: ColorPreview.view, draw: ColorPreview.draw}}\n */\n\nexport let ColorPreview = {\n\n  /**\n   *\n   * @param vnode\n   */\n\n  oncreate: function (vnode) {\n    this.order = vnode.attrs.info.order;\n    this.colors = vnode.attrs.info.colors;\n    this.canvas = this.el = vnode.dom;\n    this.context2d = this.canvas.getContext('2d');\n    PubSub.subscribe('satUpdated', (msg, data) => {\n      if (this.order === data.order) {\n        let fillColor = hsvToRgb(data.currentColors.hueValueColor).map(color => {\n          return Math.floor(color);\n        });\n        this.context2d.fillStyle = `rgba(${fillColor[0]},${fillColor[1]},${fillColor[2]},1)`;\n        this.colors.currentColor = this.context2d.fillStyle;\n        this.draw();\n      }\n    });\n    this.draw();\n  },\n\n  /**\n   * mithril lifecycle method\n   *\n   */\n\n  onupdate: function () {\n    this.draw();\n  },\n\n  /**\n   * mithril component render method\n   * @returns {*}\n   */\n\n  view: function () {\n    return m('canvas#color-canvas-preview', {\n      style: 'margin-left:10px; width: 20; height: 100;',\n      width: 20,\n      height: 100\n    });\n  },\n\n  /**\n   *\n   */\n\n  draw: function () {\n    let ctx = this.context2d;\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.fillStyle = this.colors.currentColor;\n    ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 1;\n    ctx.strokeRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n};\n\n/**\n * Use currently selected color\n * @type {{view: ColorApplyButton.view}}\n */\n\nexport let ColorApplyButton = {\n\n  /**\n   * mithril component render method\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    // store these bounds, for checking in drawLazily()\n    return m('button.approve-button', {\n      style: 'display:block; width:100%;',\n      onclick: () => {\n        vnode.attrs.info.colors.baseColor = vnode.attrs.info.colors.currentColor;\n        vnode.attrs.info.colors.hueValueColor = rgbToHsv(hexToRgb(vnode.attrs.info.colors.baseColor));\n        vnode.attrs.settings.nodeColor[vnode.attrs.info.order] = vnode.attrs.info.colors.baseColor;\n        PubSub.publish('satUpdated', {order: vnode.attrs.info.order, currentColors: vnode.attrs.info.colors});\n      }\n    }, 'Apply');\n  }\n};\n\n/**\n * Reset color to prior\n * @type {{view: ColorResetButton.view}}\n */\n\nexport let ColorResetButton = {\n\n  /**\n   * mithril component render method\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    // store these bounds, for checking in drawLazily()\n    return m('button.reset-button', {\n      style: 'display:block; width:100%',\n      onclick: () => {\n        vnode.attrs.info.colors.currentColor = vnode.attrs.info.colors.baseColor;\n        vnode.attrs.info.colors.hueValueColor = rgbToHsv(hexToRgb(vnode.attrs.info.colors.baseColor));\n        PubSub.publish('satUpdated', {order: vnode.attrs.info.order, currentColors: vnode.attrs.info.colors});\n      }\n    }, 'Reset');\n  }\n};\n\n/**\n * Text Box to find color\n * @type {{oninit: ColorBox.oninit, view: ColorBox.view, handleGesture: ColorBox.handleGesture}}\n */\n\nexport let ColorBox = {\n\n  /**\n   *\n   * @param vnode\n   */\n\n  oninit: function (vnode) {\n    this.canvas = this.el = vnode.dom;\n    this.order = vnode.attrs.info.order;\n    vnode.state.value = vnode.attrs.info.colors.currentColor;\n    PubSub.subscribe('satUpdated', (msg, data) => {\n      if (this.order === data.order) {\n        vnode.dom.value = vnode.attrs.info.colors.currentColor;\n      }\n    });\n  },\n\n  /**\n   * mithril component render method\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    // store these bounds, for checking in drawLazily()\n    return m('input[type=text].color-input', {\n      style: 'display:block; width:100%;',\n      oninput: m.withAttr('value', function (value) {\n        try {\n          let code = value.match(/^#?([a-f\\d]*)$/i);\n          let str = code[1];\n          if (code[1].length === 3) {\n            str = `#${str[0]}${str[0]}${str[1]}${str[1]}${str[2]}${str[2]}`;\n          }\n          vnode.attrs.info.colors.currentColor = value;\n          vnode.attrs.info.colors.hueValueColor = rgbToHsv(hexToRgb(str));\n        } catch (e) {\n          // expect this to fail silently, as most typing will not actually give\n          // a proper hex triplet/sextet\n        }\n      })\n    });\n  },\n\n  /**\n   *\n   * @returns {boolean}\n   */\n\n  handleGesture: function () {\n    return true;\n  }\n};\n\n/**\n * convert hex triplet to RGB\n * #FFFFFF ->[0-255,0-255,0-255]\n * @param hex\n * @returns {*[]}\n */\n\nexport function hexToRgb(hex) {\n  let result = hex.match(/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i);\n  return [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)];\n}\n\n/**\n *  convert RGB triplet to hex\n * [0-255,0-255,0-255] -> #FFFFFF\n * @param rgb\n * @returns {string}\n */\n\nexport function rgbToHex(rgb) {\n  return (\n    (0x100 | Math.round(rgb[0])).toString(16).substr(1) +\n    (0x100 | Math.round(rgb[1])).toString(16).substr(1) +\n    (0x100 | Math.round(rgb[2])).toString(16).substr(1)\n  );\n}\n\n/**\n * Convert RGB triplet ot HSV\n * [0-255,0-255,0-255] -> [0-360,0-100,0-100]\n * @param rgb\n * @returns {*[]}\n */\n\nexport function rgbToHsv(rgb) {\n  //make sure RGB values are within 0-255 range\n  //and convert to decimal\n  rgb = rgb.map(component => {\n    return Math.max(0, Math.min(255, component)) / 255;\n  });\n\n  // Conversion from RGB -> HSV colorspace\n\n  let cmin = Math.min(Math.min(rgb[0], rgb[1]), rgb[2]);\n  let cmax = Math.max(Math.max(rgb[0], rgb[1]), rgb[2]);\n  let delta = parseFloat(cmax - cmin);\n  let hue = 0;\n  if (delta === 0) {\n    hue = 0;\n  } else if (cmax === rgb[0]) {\n    hue = 60 * (((rgb[1] - rgb[2]) / delta));\n  } else if (cmax === rgb[1]) {\n    hue = 60 * (((rgb[2] - rgb[0]) / delta) + 2);\n  } else if (cmax === rgb[2]) {\n    hue = 60 * (((rgb[0] - rgb[1]) / delta) + 4);\n  }\n  if (hue < 0) hue += 360;\n  let sat = cmax === 0 ? 0 : (delta / cmax) * 100;\n  let value = cmax * 100;\n\n  return [hue, sat, value];\n}\n\n/**\n * Convert from HSV to RGB\n * [0-360,0-100,0-100] -> [0-255,0-255,0-255]\n * @param hsv\n * @returns {*[]}\n */\n\nexport function hsvToRgb(hsv) {\n  let u = 255 * (hsv[2] / 100);\n  let h = hsv[0] / 60;\n  let s = hsv[1] / 100;\n\n  let i = Math.floor(h);\n  if (i < 0) i = 0;\n  let f = i % 2 ? h - i : 1 - (h - i);\n  let m = u * (1 - s);\n  let n = u * (1 - s * f);\n  switch (i) {\n    case 6:\n    case 0:\n      return [u, n, m];\n    case 1:\n      return [n, u, m];\n    case 2:\n      return [m, u, n];\n    case 3:\n      return [m, n, u];\n    case 4:\n      return [n, m, u];\n    case 5:\n      return [u, m, n];\n  }\n}\n","/**\n * FeatureMenu\n * Mithril component for a modal dialog to edit track/subtrack settings\n **/\nimport m from 'mithril';\nimport PubSub from 'pubsub-js';\n\nimport {featureUpdate} from '../../topics';\nimport {ColorPicker} from './ColorPicker';\n\nexport class FeatureMenu {\n  /**\n   *\n   * @param data\n   * @param order\n   */\n\n  constructor(data, order) {\n    // Setup modal position based on current placement of the actual map\n    // layout viewport. keeps things self-contained when embedding.\n    let viewport = document.getElementById('cmap-menu-viewport');\n    let layoutBounds = document.getElementById('cmap-layout-viewport').getBoundingClientRect();\n    document.getElementById('cmap-layout-viewport').style.visibility = 'hidden';\n    viewport.style.display = 'block';\n    viewport.style.position = 'absolute';\n    viewport.style.top = `${layoutBounds.top}px`;\n    viewport.style.left = `${layoutBounds.left}px`;\n    viewport.style.width = '95%';\n    viewport.style.height = `${layoutBounds.height}px`;\n    // Setup track and subtrack data\n    let model = data.model || data.component.model;\n    let tagList = model.tags.sort();\n    let settings = model.tracks[order] ? data.config : model.config.qtl;\n    if(typeof settings.fillColor === 'string'){settings.fillColor = [settings.fillColor];}\n    let trackGroups = [];\n    let filters = settings.filters ? settings.filters.slice() : [tagList[0].slice()];\n    let fillColor = settings.fillColor ? settings.fillColor.slice() : ['aqua'];\n    if(typeof fillColor === 'string'){fillColor = [fillColor];}\n\n\n    if(!settings.filters){\n      settings.filters = filters;\n    }\n    if(!settings.fillColor){\n      settings.fillColor = fillColor;\n    }\n    if(!settings.title){\n      settings.title = filters[0];\n    }\n\n    let defaultSettings = {\n      filters : settings.filters.slice(),\n      fillColor : settings.fillColor.slice(),\n      title : settings.title.slice()\n    };\n\n    settings.position = data.position;\n\n    let selected = filters.map((item) => {\n      return {\n        name: item,\n        index: tagList.indexOf(item)\n      };\n    });\n\n    let trackConfig = {\n      model: model,\n      tagList: tagList,\n      settings: settings,\n      selected: selected,\n      trackGroups: trackGroups\n    };\n\n    //Attach components to viewport, in general these are the close button (x in top\n    //right), the actual modal contents, and the apply/close/delete button bar\n    let controls = [\n      m(_applyButton, {\n        model:model,\n        config : settings,\n        order: order,\n        bioMapIndex : model.component.bioMapIndex,\n        reset: defaultSettings,\n        newData : selected\n      }),\n      m(_cancelButton, {model: model, config: settings, order: order, reset: defaultSettings})\n    ];\n\n    if (order < model.tracks.length) {\n      controls.push(m(_removeButton, {\n        order:order,\n        model:model,\n        bioMapIndex : model.component.bioMapIndex,\n      }));\n    }\n\n    // Build menu mithril component, then mount\n    let modalDiv = {\n      oncreate: function (vnode) {\n        vnode.dom.mithrilComponent = this; // Without this and handleGesture, clicks in modal will pass through to the underlying view\n      },\n      view: function () {\n        return m('div', {style: 'height:100%; width:100%'}, [\n            m(CloseButton, {model: model, config: settings, order: order, reset: defaultSettings}),\n            m(TitleBox, {settings: settings}),\n            m(TrackMenu, {info: trackConfig, count: 0}),\n            m('div', {style: 'text-align:center'}, controls)\n          ]\n        );\n      },\n      handleGesture: function () {\n        return true;\n      }\n    };\n    m.mount(document.getElementById('cmap-menu-viewport'), modalDiv);\n  }\n}\n\n/**\n *\n * @type {{view: _removeButton.view}}\n * @private\n */\n\nexport let _removeButton = {\n\n  /**\n   *\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    return m('button', {\n      onclick:\n        () => {\n          vnode.attrs.model.tracks.splice(vnode.attrs.order, 1);\n          PubSub.publish(featureUpdate, {mapIndex: vnode.attrs.bioMapIndex});\n          m.redraw();\n          closeModal();\n        },\n      style: 'background:red'\n    }, 'Remove Track');\n  }\n};\n\nexport let TitleBox = {\n  /**\n   *\n   * @param vnode\n   * @returns {*}\n   */\n  oninit: function (vnode) {\n    vnode.state.value = vnode.attrs.settings.title;\n  },\n  view: function (vnode) {\n    return m('div',{},'Track title: ',\n      m('input[type=text].title-input', {\n        style: 'display:block; width:10%;',\n        defaultValue : vnode.attrs.settings.title,\n        oninput: m.withAttr('value', function (value) {\n          try {\n            vnode.attrs.settings.title = value;\n          } catch (e) {\n            // expect this to fail silently, as most typing will not actually give\n            // a proper hex triplet/sextet\n          }\n        })\n      })\n    );\n  }\n};\n\n\n/**\n *\n * @type {{view: _cancelButton.view}}\n * @private\n */\n\nexport let _cancelButton = {\n\n  /**\n   *\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    return m('button', {\n      onclick:\n        () => {\n          vnode.attrs.config.fillColor = vnode.attrs.reset.fillColor;\n          vnode.attrs.config.filters = vnode.attrs.reset.filters;\n          vnode.attrs.config.title = vnode.attrs.reset.title;\n          if(vnode.attrs.order < vnode.attrs.model.tracks.length) {\n            vnode.attrs.model.tracks[vnode.attrs.order] = vnode.attrs.config;\n          }\n          closeModal();\n        }\n    }, 'Cancel');\n  }\n};\n\n/**\n *\n * @type {{view: _applyButton.view}}\n * @private\n */\n\nexport let _applyButton = {\n\n  /**\n   *\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    return m('button', {\n      onclick: function () {\n        vnode.attrs.config.filters = vnode.attrs.newData.map(data => {return data.name;});\n        vnode.attrs.model.tracks[vnode.attrs.order] = vnode.attrs.config;\n        PubSub.publish(featureUpdate, {mapIndex: vnode.attrs.bioMapIndex});\n        m.redraw();\n        closeModal();\n      }\n    }, 'Apply Selection');\n  }\n};\n\n/**\n * Div with simple close X\n * @type {{view: CloseButton.view}}\n */\n\nexport let CloseButton = {\n\n  /**\n   *\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    return m('div',\n      {\n        style: 'text-align:right;',\n        onclick:\n          () => {\n            vnode.attrs.config.fillColor = vnode.attrs.reset.fillColor;\n            vnode.attrs.config.filters = vnode.attrs.reset.filters;\n            vnode.attrs.config.title = vnode.attrs.reset.title;\n            if(vnode.attrs.order < vnode.attrs.model.tracks.length) {\n              vnode.attrs.model.tracks[vnode.attrs.order] = vnode.attrs.config;\n            }\n            closeModal();\n          }\n      }, 'X');\n  }\n};\n\n/*\n * Mithril component\n * Div that contains the dropdowns and components for selecting track options\n * @type {{oninit: TrackMenu.oninit, view: TrackMenu.view}}\n */\n\nexport let TrackMenu = {\n\n  /**\n   *\n   * @param vnode\n   */\n\n  oninit: function (vnode) {\n    vnode.state = vnode.attrs;\n    vnode.state.hidden = [];\n    vnode.state.picker = [];\n  },\n\n  /**\n   *\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    let selected = vnode.state.info.selected;\n    let settings = vnode.state.info.settings;\n    this.count = 0;\n\n\n    let dropdowns = selected.map((item, order) => {\n      if (settings.fillColor[order] === undefined) {\n        settings.fillColor[order] = settings.fillColor.slice(0, 1);\n      }\n      if (!vnode.state.hidden[order]) {\n        vnode.state.hidden[order] = 'none';\n      }\n      if (!vnode.state.picker[order]) {\n        vnode.state.picker[order] = settings.fillColor[order] || 'orange';\n      }\n\n      let dropSettings = {\n        selected: selected,\n        name: settings.filters[order],\n        fillColor: settings.fillColor,\n        tags: vnode.state.info.tagList,\n        nodeColor: vnode.state.picker\n      };\n      if (selected[order].index === -1) {\n        selected[order].index = dropSettings.tags.indexOf(dropSettings.name);\n      }\n      let controls = [\n        m('button', {\n          onclick: () => {\n            selected[selected.length] = {name: vnode.state.info.tagList[0], index: 0};\n          }\n        }, '+')\n      ];\n      if (selected.length > 1) {\n        controls.push(m('button', {\n          onclick: () => {\n            selected.splice(order, 1);\n          }\n        }, '-'));\n      }\n      controls.push(m('button', {\n          onclick: () => {\n            vnode.state.hidden[order] = vnode.state.hidden[order] === 'none' ? 'block' : 'none';\n          }\n        }, m('div',\n        {style: `color:${vnode.state.picker[order]}`}\n        , '■')\n      ));\n      return [m(Dropdown, {\n        settings: dropSettings,\n        order: order,\n        parentDiv: this,\n        hidden: vnode.state.hidden\n      }), controls];\n    });\n    return m('div#track-select-div', {\n      style: 'overflow:auto;width:100%;height:80%;'\n    }, dropdowns);\n  }\n};\n\n/*\n * Mithril component\n * Actual dropdown selector\n * @type {{oninit: Dropdown.oninit, onbeforeupdate: Dropdown.onbeforeupdate, view: Dropdown.view}}\n */\n\nexport let Dropdown = {\n\n  /**\n   *\n   * @param vnode\n   */\n\n  oninit: function (vnode) {\n    vnode.state = vnode.attrs;\n  },\n  /**\n   *\n   * @param vnode\n   */\n\n  onbeforeupdate: function (vnode) {\n    if (vnode.state.count > vnode.attrs.parentDiv.count) {\n      vnode.attrs.parentDiv.count = vnode.state.count;\n    } else {\n      vnode.state.count = vnode.attrs.parentDiv.count;\n    }\n  },\n\n  /**\n   *\n   * @param vnode\n   * @returns {*}\n   */\n\n  view: function (vnode) {\n    let order = vnode.state.order;\n    let settings = vnode.state.settings;\n    return m('div', m('select', {\n      id: `selector-${order}`,\n      selectedIndex: settings.selected[order].index,\n      oninput: (e) => {\n        let selected = e.target.selectedIndex;\n        settings.selected[order].name = settings.tags[selected];\n        settings.selected[order].index = selected;\n      }\n    }, [settings.tags.map(tag => {\n      return m('option', tag);\n    })\n    ]), m(ColorPicker, {settings: vnode.state.settings, order: order, hidden: vnode.state.hidden}));\n  }\n};\n\n\n/**\n * Function to close the menu-viewport and reshow the\n * layout viewport\n *\n */\n\nexport function closeModal() {\n  //reset cmap-menu-viewport vdom tree to empty state\n  m.mount(document.getElementById('cmap-menu-viewport'), null);\n  //explicitly set visibility to avoid weird page interaction issues\n  document.getElementById('cmap-layout-viewport').style.visibility = 'visible';\n  document.getElementById('cmap-menu-viewport').style.display = 'none';\n}\n\n","/**\n *\n * Base Component, placeholder for other canvas components\n *\n */\n\nimport m from 'mithril';\nimport PubSub from 'pubsub-js';\n\nimport {mapReorder} from '../../../topics';\n\nexport let TitleComponent = {\n  oninit: function (vnode) {\n    vnode.state = vnode.attrs;\n    vnode.state.left = 0;\n    vnode.state.domOrder = vnode.state.titleOrder.indexOf(vnode.state.order);\n    vnode.state.leftBound = vnode.state.bioMaps[vnode.state.order].domBounds.left;\n    vnode.state.rightBound = vnode.state.bioMaps[vnode.state.order].domBounds.right;\n    vnode.state.leftStart = vnode.state.bioMaps[vnode.state.order].domBounds.left;\n    vnode.state._gestureRegex = {\n      pan: new RegExp('^pan')\n    };\n  },\n\n  oncreate: function (vnode) {\n    // register mithrilComponent for gesture handling\n    vnode.dom.mithrilComponent = this;\n    // register functions to state/dom for gesture handling\n    vnode.dom.mithrilComponent.handleGesture = vnode.tag.handleGesture;\n    vnode.state._onPan = vnode.tag._onPan;\n    vnode.state.zIndex = 0;\n    this.vnode = vnode;\n  },\n\n  onbeforeupdate: function (vnode) {\n    vnode.state.bioMaps = vnode.attrs.bioMaps;\n    if (this.titleOrder[this.domOrder] !== this.order) {\n      this.domOrder = this.titleOrder.indexOf(this.order);\n    }\n  },\n\n  onupdate: function (vnode) {\n    let dispOffset = vnode.state.bioMaps[vnode.state.order].domBounds.left - vnode.state.leftStart;\n    if (vnode.state.left !== dispOffset && !vnode.state.swap) {\n      this.left = dispOffset;\n      this.dirty = true;\n    }\n    if (vnode.state.swap) {\n      this.left = 0;\n      this.swap = false;\n      this.dirty = true;\n      this.left = 0;\n    }\n    if (this.dirty) { // trigger redraw on changed canvas that has possibly edited bounds in process of view layout\n      this.dirty = false;\n      m.redraw();\n    }\n  },\n\n  view: function (vnode) {\n    if (!vnode.attrs || !vnode.state.contentBounds) return;\n    let bMap = vnode.state.bioMaps[vnode.state.order];\n    vnode.state.contentBounds.left = vnode.state.contentBounds.right - vnode.state.contentBounds.width;\n    let left = vnode.state.left + vnode.state.contentBounds.left;\n    return m('div', {\n        class: 'swap-div', id: `swap-${vnode.state.domOrder}`,\n        style: `display:grid; position:relative; left:${left}px; min-width:${bMap.domBounds.width}px; z-index:${vnode.state.zIndex};`\n      },\n      [m('div', {class: 'map-title', style: 'display:inline-block;'}, [bMap.model.name, m('br'), bMap.model.source.id])\n      ]\n    );\n  },\n\n  handleGesture: function (evt) {\n    if (evt.type.match(this._gestureRegex.pan)) {\n      return this._onPan(evt);\n    }\n    return true;\n  },\n\n  _onPan: function (evt) {\n    //Start pan move zIndex up to prevent interrupting pan early\n    if (evt.type === 'panstart') {\n      this.vnode.state.zIndex = 1000;\n      this.lastPanEvent = null;\n      this.left = 0;\n    }\n    //End pan to set rearrangement\n    if (evt.type === 'panend') {\n      this.vnode.state.zIndex = 0;\n      PubSub.publish(mapReorder, null);\n      return;\n    }\n\n    //Pan the title\n    //Calculate map movement\n    let delta = {};\n    if (this.lastPanEvent) {\n      delta.x = -1 * (this.lastPanEvent.deltaX - evt.deltaX);\n    } else {\n      delta.x = Math.round(evt.deltaX);\n    }\n    this.left += delta.x;\n\n    //Setup maps and swap points\n    let selLeftEdge = this.left + this.leftStart;\n    //let selRightEdge = selLeftEdge + this.bioMaps[this.order].domBounds.width;\n    const leftMap = this.domOrder > 0 ? this.titleOrder[this.domOrder - 1] : null;\n    const rightMap = this.titleOrder[this.domOrder + 1] > -1 ? this.titleOrder[this.domOrder + 1] : null;\n    const leftSwapBound = leftMap ? this.leftBound - this.bioMaps[leftMap].domBounds.width : null;\n    const rightSwapBound = rightMap ? this.leftBound + this.bioMaps[rightMap].domBounds.width : null;\n\n    if (leftMap && selLeftEdge < leftSwapBound) { // Swap Left\n      this.leftBound -= this.bioMaps[leftMap].domBounds.width;\n      this.rightBound -= this.bioMaps[leftMap].domBounds.width;\n\n      this.titleOrder[this.domOrder] = this.titleOrder[this.domOrder - 1];//= this.titleOrder[rightMap];\n      this.titleOrder[this.domOrder - 1] = this.order;\n      this.domOrder = this.titleOrder[this.domOrder];\n\n    } else if (rightMap && selLeftEdge > rightSwapBound) { // Swap Right\n      this.leftBound += this.bioMaps[rightMap].domBounds.width;\n      this.rightBound += this.bioMaps[rightMap].domBounds.width;\n\n      this.titleOrder[this.domOrder] = this.titleOrder[this.domOrder + 1];//= this.titleOrder[rightMap];\n      this.titleOrder[this.domOrder + 1] = this.order;\n      this.domOrder = this.titleOrder[this.domOrder];\n\n    } else if (!(!leftMap && selLeftEdge <= 0) && !(!rightMap && selLeftEdge > this.leftBound)) { //Move current map and its left/right partner\n\n      let movedMap = rightMap;\n\n      if (selLeftEdge < this.leftBound || (selLeftEdge === this.leftBound && delta.x < 0)) {\n        movedMap = leftMap;\n      }\n\n      let shiftScale = this.bioMaps[this.order].domBounds.width / this.bioMaps[movedMap].domBounds.width;\n      this.bioMaps[this.order].domBounds.left += delta.x;\n      this.bioMaps[this.order].domBounds.right += delta.x;\n      const mw = this.bioMaps[movedMap].domBounds.width;\n      this.bioMaps[movedMap].domBounds.left -= delta.x * shiftScale;\n      this.bioMaps[movedMap].domBounds.right = this.bioMaps[movedMap].domBounds.left + mw;\n\n    } else { // edge case don't move map\n      this.left -= delta.x;\n    }\n\n    this.lastPanEvent = evt;\n    m.redraw();\n    return true;\n  }\n};\n\n","/**\n *\n * Base Component, placeholder for other canvas components\n *\n */\n\nimport m from 'mithril';\n//import {Bounds} from '../../../model/Bounds';\n\nexport class BioMapComponent {\n  constructor(vnode) {\n    console.log(vnode);\n  }\n\n  oncreate(vnode) {\n    //have state be tied to passed attributes\n    vnode.state = vnode.attrs;\n\n    //dom components and state\n    vnode.state.canvas = vnode.state.bioMap.canvas = vnode.dom;\n    vnode.state.domBounds = vnode.state.bioMap.domBounds;\n    vnode.state.context2d = vnode.state.bioMap.context2d = vnode.state.canvas.getContext('2d');\n    vnode.state.context2d.imageSmoothingEnabled = false;\n\n    //setup vnode.dom for ui gesture handling\n    vnode.dom.mithrilComponent = this;\n\n    //store vnode to be able to access state for non mithril lifecycle commands\n    this.vnode = vnode;\n  }\n\n  onupdate(vnode) {\n    //redraw biomap if dirty (drawing has changed, instead of just changing position)\n    if (vnode.state.bioMap.dirty === true) {\n      vnode.state.context2d.clearRect(0, 0, vnode.state.canvas.width, vnode.state.canvas.height);\n      vnode.state.bioMap.draw();\n    }\n  }\n\n  view(vnode) {\n    // store these bounds, for checking in drawLazily()\n    let domBounds = vnode.state.domBounds || null;\n    if (domBounds && !domBounds.isEmptyArea) {\n      this.lastDrawnMithrilBounds = domBounds;\n    }\n    let b = domBounds || {};\n    let selectedClass = vnode.state.selected ? 'selected' : '';\n    return m('canvas', {\n      class: `cmap-canvas cmap-biomap ${selectedClass}`,\n      style: `left: ${b.left}px; top: ${b.top}px;\n               width: ${b.width}px; height: ${b.height}px;\n               transform: rotate(${vnode.state.rotation}deg);`,\n      width: b.width,\n      height: b.height\n    });\n  }\n\n  handleGesture(evt) {\n    let state = this.vnode.state;\n    if (state.bioMap.handleGesture(evt)) {\n      state.bioMap.dirty = true;\n      return true;\n    }\n    return false;\n  }\n}\n\n","/**\n * HorizontalLayout (left to right)\n * A mithril component for horizontal layout of BioMaps.\n */\nimport m from 'mithril';\nimport {mix} from '../../../mixwith.js/src/mixwith';\nimport PubSub from 'pubsub-js';\n\nimport {dataLoaded, mapAdded, mapRemoved, mapReorder, reset, featureUpdate} from '../../topics';\nimport {LayoutBase} from './LayoutBase';\nimport {Bounds} from '../../model/Bounds';\nimport {BioMap as BioMapComponent} from '../../canvas/canvas/BioMap';\nimport {CorrespondenceMap as CorrMapComponent} from '../../canvas/canvas/CorrespondenceMap';\nimport {FeatureTrack} from '../../canvas/layout/FeatureTrack';\nimport {Popover} from '../menus/Popover';\nimport {FeatureMenu} from '../menus/FeatureMenu';\nimport {RegisterComponentMixin} from '../RegisterComponentMixin';\nimport {TitleComponent} from './components/TitleComponent';\nimport {BioMapComponent as BioMapVnode} from './components/BioMapComponent';\n\nexport class HorizontalLayout\n  extends mix(LayoutBase)\n    .with(RegisterComponentMixin) {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.contentBounds = vnode.attrs.contentBounds;\n    this.vnode = vnode;\n    this.bioMapComponents = [];\n    this.correspondenceMapComponents = [];\n    this.popoverComponents = [];\n    this.swapComponents = [];\n    this.featureControls = [];\n    this.modal = [];\n    this.bioMapOrder = [];\n    this.test = 0;\n    const handler = () => this._onDataLoaded();\n    this.subscriptions = [\n      // all of these topics have effectively the same event handler for\n      // the purposes of horizontal layout.\n      PubSub.subscribe(dataLoaded, handler),\n      PubSub.subscribe(mapRemoved, handler),\n      PubSub.subscribe(mapAdded, handler),\n      PubSub.subscribe(reset, () => {\n        this._onReset();\n      }),\n      PubSub.subscribe(featureUpdate, (msg, data) => {\n        this._onFeatureUpdate(data);\n      }),\n      PubSub.subscribe(mapReorder, () => {\n        this._onReorder();\n      })\n    ];\n  }\n\n  /**\n   *\n   * @param vnode\n   */\n\n  onupdate(vnode) {\n    this.contentBounds = vnode.attrs.contentBounds;\n  }\n\n  /**\n   * mithril lifecycle method\n   */\n\n  onremove() {\n    this.subscriptions.forEach(token => PubSub.unsubscribe(token));\n  }\n\n  /**\n   * mithril component render method\n   * @returns {*} mithril vnode\n   */\n\n  view() {\n   //m.mount(document.getElementById('cmap-layout-titles'),null);\n   // let mo = this.bioMapOrder.map(i => {\n   //   return this.bioMapComponents[i];\n   // });\n    return m('div.cmap-layout-horizontal',\n      [//this.swapComponents,\n        this.correspondenceMapComponents.map(m),\n        this.bioMapOrder.map((i) => {\n          return m(BioMapVnode, {bioMap: this.bioMapComponents[i]});\n        }), this.featureControls,\n        //this.modal.map(modal =>{ return m(modal,{info:modal.info, bounds: modal.bounds, order:modal.order}); }),\n        this.popoverComponents.map(popover => {\n          return m(popover, {info: popover.info, domBounds: popover.domBounds});\n        })]\n    );\n  }\n\n  /**\n   * pub/sub event handler\n   *\n   * @private\n   */\n\n  _onDataLoaded() {\n    this._layoutBioMaps();\n    this._layoutSwapComponents();\n    this._layoutFeatureControls();\n    this._layoutCorrespondenceMaps();\n    this._layoutPopovers();\n    m.redraw();\n  }\n\n  /**\n   *\n   * @private\n   */\n\n  _onReorder() {\n    let left = 0;\n    let bmaps = this.bioMapComponents;\n    let sc = this.bioMapOrder;\n    bmaps.forEach(comp => {\n      comp.dirty = true;\n    });\n    for (let i = 0; i < bmaps.length; i++) {\n      let map = bmaps[sc[i]];\n      //const mapC = bmaps[sc[i]].domBounds;\n      const mw = map.domBounds.width;\n      map.domBounds.left = left;\n      map.domBounds.right = left + mw;\n      left = map.domBounds.right;\n    }\n    this._layoutCorrespondenceMaps();\n    this._layoutFeatureControls();\n    m.mount(document.getElementById('cmap-layout-titles'), null);\n    m.redraw();\n    this._layoutSwapComponents();\n  }\n\n  /**\n   *\n   * @private\n   */\n\n  _layoutSwapComponents() {\n    this.swapComponents = [];\n    let sc = this.bioMapOrder;\n    let maps = this;\n    let cb = this.contentBounds;\n    //let bmaps = this.bioMapComponents;\n    let pan = [];\n    pan[0] = false;\n    m.mount(document.getElementById('cmap-layout-titles'), {\n      view: function () {\n        return sc.map((order) => {\n          return m(TitleComponent, {\n            bioMaps: maps.bioMapComponents,\n            order: order,\n            titleOrder: sc,\n            contentBounds: cb,\n            pan: pan\n          });\n        });\n      }\n    });\n\n  }\n\n  /**\n   *\n   * @private\n   */\n\n  _layoutFeatureControls() {\n    this.featureControls = [];\n    //let n = this.bioMapComponents.length;\n    //let maps = this;\n    this.bioMapComponents.forEach(component => {\n      component.children.forEach(child => {\n        if (child instanceof FeatureTrack) {\n          for (let i = 0; i < child.children.length; i++) {\n            if (child.children[i].bounds.width > 0) {\n              let featureGroup = child.children[i];\n              this.featureControls.push(\n                m('div', {\n                  class: 'feature-title',\n                  id: `feature-${component.model.name}-${i}`,\n                  style: `position:absolute; left: ${Math.floor(component.domBounds.left + featureGroup.globalBounds.left)}px; \n                      top: ${component.domBounds.top}px; width: ${featureGroup.globalBounds.width}px;`,\n                  onclick: function () {\n                    let info = child.children[i];\n                    info.position = child.trackPos;\n                    new FeatureMenu(info, child.children[i].config.tracksIndex);\n                  }\n                }, featureGroup.title)\n              );\n            }\n          }\n          // push controller to add new track\n          this.featureControls.push(\n            m('div', {\n              class: 'feature-title',\n              id: `feature-${component.model.name}-new`,\n              style: `position:absolute; left: ${Math.floor(component.domBounds.left + child.globalBounds.right + 20)}px; \n                      top: ${component.domBounds.top}px; width: 20px;`,\n              onclick: function () {\n                let info = component.model;\n                info.position = child.trackPos;\n                let order = child.model.tracks.length;\n                new FeatureMenu(info, order);\n              }\n            }, '+')\n          );\n        }\n      });\n    });\n  }\n\n  /**\n   * Horizontal (left to right) layout of BioMaps\n   *\n   * @returns {Array}\n   * @private\n   */\n\n  _layoutBioMaps() {\n    if (!this.bounds) return []; // early out if the layout bounds is unknown\n    let n = this.appState.bioMaps.length;\n    let padding = Math.floor(this.bounds.width * 0.1 / n);\n    padding = 0; // TODO: decide whether to add padding between the biomaps\n    let childHeight = Math.floor(this.bounds.height * 0.95);\n    let cursor = Math.floor(padding * 0.5);\n    this.bioMapComponents = this.appState.bioMaps.map((model, mapIndex) => {\n      this.bioMapOrder.push(mapIndex);\n      let layoutBounds = new Bounds({\n        left: cursor,\n        top: 10,\n        width: Math.floor(this.bounds.width), // will be calculated by bioMap\n        height: childHeight\n      });\n      let component = new BioMapComponent({\n        bioMapModel: model,\n        layoutBounds: layoutBounds,\n        appState: this.appState,\n        bioMapIndex: mapIndex,\n        initialView : this.appState.initialView[mapIndex]\n      });\n      model.component = component; // save a reference for mapping model -> component\n      cursor += component.domBounds.width + padding;\n      return component;\n    });\n\n  }\n\n  /**\n   *\n   * @private\n   */\n\n  _layoutPopovers() {\n    this.popoverComponents = this.bioMapComponents.map(model => {\n      let component = new Popover();\n      component.info = model.info;\n      component.domBounds = model.domBounds;\n      return component;\n    });\n  }\n\n  /**\n   * Horizontal layout of Correspondence Maps. In this layout, for N maps there\n   * are N -1 correspondence maps.\n   * @returns {Array}\n   * @private\n   */\n\n  _layoutCorrespondenceMaps() {\n    if (!this.bounds) return []; // early out if our canvas bounds is unknown\n    let childHeight = Math.floor(this.bounds.height * 0.95);\n    let n = this.bioMapComponents.length;\n    this.correspondenceMapComponents = [];\n    for (let i = 0; i < n - 1; i++) {\n      let left = this.bioMapComponents[i];\n      let right = this.bioMapComponents[i + 1];\n      let layoutBounds = new Bounds({\n        left: Math.floor(left.domBounds.left + left.backbone.globalBounds.right),\n        right: Math.floor(right.domBounds.left + right.backbone.globalBounds.left),\n        top: 10,\n        height: childHeight\n      });\n      let component = new CorrMapComponent({\n        bioMapComponents: [left, right],\n        appState: this.appState,\n        layoutBounds: layoutBounds\n      });\n      this.correspondenceMapComponents.push(component);\n    }\n  }\n\n  /**\n   * Reset local zoom here. Easier to iterate through base element\n   * and redraw components once from the base layout than deal with\n   * it through the individual components.\n   * (Difficulty in reaching the mithril component to get canvas context)\n   * @private\n   */\n\n  _onReset() {\n    this.bioMapComponents.forEach(item => {\n      item.model.view.visible = item.model.view.base;\n      item.verticalScale = 1.0;\n      item.info.visible = 'hidden';\n    });\n    [].forEach.call(document.getElementsByClassName('cmap-canvas'), el => {\n      el.mithrilComponent.draw();\n    });\n    m.redraw();\n  }\n\n  /**\n   *\n   * @param data\n   * @private\n   */\n\n  _onFeatureUpdate(data) {\n    //this._onDataLoaded();\n    this.bioMapComponents[data.mapIndex]._layout();\n    m.redraw();\n    this._onReorder();\n  }\n}\n","/*@license\n\tPapa Parse\n\tv4.4.0\n\thttps://github.com/mholt/PapaParse\n\tLicense: MIT\n*/\n(function(root, factory)\n{\n\t/* globals define */\n\tif (typeof define === 'function' && define.amd)\n\t{\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t}\n\telse if (typeof module === 'object' && typeof exports !== 'undefined')\n\t{\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t}\n\telse\n\t{\n\t\t// Browser globals (root is window)\n\t\troot.Papa = factory();\n\t}\n}(this, function()\n{\n\t'use strict';\n\n\tvar global = (function() {\n\t\t// alternative method, similar to `Function('return this')()`\n\t\t// but without using `eval` (which is disabled when\n\t\t// using Content Security Policy).\n\n\t\tif (typeof self !== 'undefined') { return self; }\n\t\tif (typeof window !== 'undefined') { return window; }\n\t\tif (typeof global !== 'undefined') { return global; }\n\n\t\t// When running tests none of the above have been defined\n\t\treturn {};\n\t})();\n\n\n\tvar IS_WORKER = !global.document && !!global.postMessage,\n\t\tIS_PAPA_WORKER = IS_WORKER && /(\\?|&)papaworker(=|&|$)/.test(global.location.search),\n\t\tLOADED_SYNC = false, AUTO_SCRIPT_PATH;\n\tvar workers = {}, workerIdCounter = 0;\n\n\tvar Papa = {};\n\n\tPapa.parse = CsvToJson;\n\tPapa.unparse = JsonToCsv;\n\n\tPapa.RECORD_SEP = String.fromCharCode(30);\n\tPapa.UNIT_SEP = String.fromCharCode(31);\n\tPapa.BYTE_ORDER_MARK = '\\ufeff';\n\tPapa.BAD_DELIMITERS = ['\\r', '\\n', '\"', Papa.BYTE_ORDER_MARK];\n\tPapa.WORKERS_SUPPORTED = !IS_WORKER && !!global.Worker;\n\tPapa.SCRIPT_PATH = null;\t// Must be set by your code if you use workers and this lib is loaded asynchronously\n\n\t// Configurable chunk sizes for local and remote files, respectively\n\tPapa.LocalChunkSize = 1024 * 1024 * 10;\t// 10 MB\n\tPapa.RemoteChunkSize = 1024 * 1024 * 5;\t// 5 MB\n\tPapa.DefaultDelimiter = ',';\t\t\t// Used if not specified and detection fails\n\n\t// Exposed for testing and development only\n\tPapa.Parser = Parser;\n\tPapa.ParserHandle = ParserHandle;\n\tPapa.NetworkStreamer = NetworkStreamer;\n\tPapa.FileStreamer = FileStreamer;\n\tPapa.StringStreamer = StringStreamer;\n\tPapa.ReadableStreamStreamer = ReadableStreamStreamer;\n\n\tif (global.jQuery)\n\t{\n\t\tvar $ = global.jQuery;\n\t\t$.fn.parse = function(options)\n\t\t{\n\t\t\tvar config = options.config || {};\n\t\t\tvar queue = [];\n\n\t\t\tthis.each(function(idx)\n\t\t\t{\n\t\t\t\tvar supported = $(this).prop('tagName').toUpperCase() === 'INPUT'\n\t\t\t\t\t\t\t\t&& $(this).attr('type').toLowerCase() === 'file'\n\t\t\t\t\t\t\t\t&& global.FileReader;\n\n\t\t\t\tif (!supported || !this.files || this.files.length === 0)\n\t\t\t\t\treturn true;\t// continue to next input element\n\n\t\t\t\tfor (var i = 0; i < this.files.length; i++)\n\t\t\t\t{\n\t\t\t\t\tqueue.push({\n\t\t\t\t\t\tfile: this.files[i],\n\t\t\t\t\t\tinputElem: this,\n\t\t\t\t\t\tinstanceConfig: $.extend({}, config)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tparseNextFile();\t// begin parsing\n\t\t\treturn this;\t\t// maintains chainability\n\n\n\t\t\tfunction parseNextFile()\n\t\t\t{\n\t\t\t\tif (queue.length === 0)\n\t\t\t\t{\n\t\t\t\t\tif (isFunction(options.complete))\n\t\t\t\t\t\toptions.complete();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar f = queue[0];\n\n\t\t\t\tif (isFunction(options.before))\n\t\t\t\t{\n\t\t\t\t\tvar returned = options.before(f.file, f.inputElem);\n\n\t\t\t\t\tif (typeof returned === 'object')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (returned.action === 'abort')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror('AbortError', f.file, f.inputElem, returned.reason);\n\t\t\t\t\t\t\treturn;\t// Aborts all queued files immediately\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (returned.action === 'skip')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfileComplete();\t// parse the next file in the queue, if any\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (typeof returned.config === 'object')\n\t\t\t\t\t\t\tf.instanceConfig = $.extend(f.instanceConfig, returned.config);\n\t\t\t\t\t}\n\t\t\t\t\telse if (returned === 'skip')\n\t\t\t\t\t{\n\t\t\t\t\t\tfileComplete();\t// parse the next file in the queue, if any\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Wrap up the user's complete callback, if any, so that ours also gets executed\n\t\t\t\tvar userCompleteFunc = f.instanceConfig.complete;\n\t\t\t\tf.instanceConfig.complete = function(results)\n\t\t\t\t{\n\t\t\t\t\tif (isFunction(userCompleteFunc))\n\t\t\t\t\t\tuserCompleteFunc(results, f.file, f.inputElem);\n\t\t\t\t\tfileComplete();\n\t\t\t\t};\n\n\t\t\t\tPapa.parse(f.file, f.instanceConfig);\n\t\t\t}\n\n\t\t\tfunction error(name, file, elem, reason)\n\t\t\t{\n\t\t\t\tif (isFunction(options.error))\n\t\t\t\t\toptions.error({name: name}, file, elem, reason);\n\t\t\t}\n\n\t\t\tfunction fileComplete()\n\t\t\t{\n\t\t\t\tqueue.splice(0, 1);\n\t\t\t\tparseNextFile();\n\t\t\t}\n\t\t};\n\t}\n\n\n\tif (IS_PAPA_WORKER)\n\t{\n\t\tglobal.onmessage = workerThreadReceivedMessage;\n\t}\n\telse if (Papa.WORKERS_SUPPORTED)\n\t{\n\t\tAUTO_SCRIPT_PATH = getScriptPath();\n\n\t\t// Check if the script was loaded synchronously\n\t\tif (!document.body)\n\t\t{\n\t\t\t// Body doesn't exist yet, must be synchronous\n\t\t\tLOADED_SYNC = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\t\t\tLOADED_SYNC = true;\n\t\t\t}, true);\n\t\t}\n\t}\n\n\n\n\n\tfunction CsvToJson(_input, _config)\n\t{\n\t\t_config = _config || {};\n\t\tvar dynamicTyping = _config.dynamicTyping || false;\n\t\tif (isFunction(dynamicTyping)) {\n\t\t\t_config.dynamicTypingFunction = dynamicTyping;\n\t\t\t// Will be filled on first row call\n\t\t\tdynamicTyping = {};\n\t\t}\n\t\t_config.dynamicTyping = dynamicTyping;\n\n\t\tif (_config.worker && Papa.WORKERS_SUPPORTED)\n\t\t{\n\t\t\tvar w = newWorker();\n\n\t\t\tw.userStep = _config.step;\n\t\t\tw.userChunk = _config.chunk;\n\t\t\tw.userComplete = _config.complete;\n\t\t\tw.userError = _config.error;\n\n\t\t\t_config.step = isFunction(_config.step);\n\t\t\t_config.chunk = isFunction(_config.chunk);\n\t\t\t_config.complete = isFunction(_config.complete);\n\t\t\t_config.error = isFunction(_config.error);\n\t\t\tdelete _config.worker;\t// prevent infinite loop\n\n\t\t\tw.postMessage({\n\t\t\t\tinput: _input,\n\t\t\t\tconfig: _config,\n\t\t\t\tworkerId: w.id\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar streamer = null;\n\t\tif (typeof _input === 'string')\n\t\t{\n\t\t\tif (_config.download)\n\t\t\t\tstreamer = new NetworkStreamer(_config);\n\t\t\telse\n\t\t\t\tstreamer = new StringStreamer(_config);\n\t\t}\n\t\telse if (_input.readable === true && isFunction(_input.read) && isFunction(_input.on))\n\t\t{\n\t\t\tstreamer = new ReadableStreamStreamer(_config);\n\t\t}\n\t\telse if ((global.File && _input instanceof File) || _input instanceof Object)\t// ...Safari. (see issue #106)\n\t\t\tstreamer = new FileStreamer(_config);\n\n\t\treturn streamer.stream(_input);\n\t}\n\n\n\n\n\n\n\tfunction JsonToCsv(_input, _config)\n\t{\n\t\t// Default configuration\n\n\t\t/** whether to surround every datum with quotes */\n\t\tvar _quotes = false;\n\n\t\t/** whether to write headers */\n\t\tvar _writeHeader = true;\n\n\t\t/** delimiting character */\n\t\tvar _delimiter = ',';\n\n\t\t/** newline character(s) */\n\t\tvar _newline = '\\r\\n';\n\n\t\t/** quote character */\n\t\tvar _quoteChar = '\"';\n\n\t\tunpackConfig();\n\n\t\tvar quoteCharRegex = new RegExp(_quoteChar, 'g');\n\n\t\tif (typeof _input === 'string')\n\t\t\t_input = JSON.parse(_input);\n\n\t\tif (_input instanceof Array)\n\t\t{\n\t\t\tif (!_input.length || _input[0] instanceof Array)\n\t\t\t\treturn serialize(null, _input);\n\t\t\telse if (typeof _input[0] === 'object')\n\t\t\t\treturn serialize(objectKeys(_input[0]), _input);\n\t\t}\n\t\telse if (typeof _input === 'object')\n\t\t{\n\t\t\tif (typeof _input.data === 'string')\n\t\t\t\t_input.data = JSON.parse(_input.data);\n\n\t\t\tif (_input.data instanceof Array)\n\t\t\t{\n\t\t\t\tif (!_input.fields)\n\t\t\t\t\t_input.fields =  _input.meta && _input.meta.fields;\n\n\t\t\t\tif (!_input.fields)\n\t\t\t\t\t_input.fields =  _input.data[0] instanceof Array\n\t\t\t\t\t\t? _input.fields\n\t\t\t\t\t\t: objectKeys(_input.data[0]);\n\n\t\t\t\tif (!(_input.data[0] instanceof Array) && typeof _input.data[0] !== 'object')\n\t\t\t\t\t_input.data = [_input.data];\t// handles input like [1,2,3] or ['asdf']\n\t\t\t}\n\n\t\t\treturn serialize(_input.fields || [], _input.data || []);\n\t\t}\n\n\t\t// Default (any valid paths should return before this)\n\t\tthrow 'exception: Unable to serialize unrecognized input';\n\n\n\t\tfunction unpackConfig()\n\t\t{\n\t\t\tif (typeof _config !== 'object')\n\t\t\t\treturn;\n\n\t\t\tif (typeof _config.delimiter === 'string'\n\t\t\t\t&& _config.delimiter.length === 1\n\t\t\t\t&& Papa.BAD_DELIMITERS.indexOf(_config.delimiter) === -1)\n\t\t\t{\n\t\t\t\t_delimiter = _config.delimiter;\n\t\t\t}\n\n\t\t\tif (typeof _config.quotes === 'boolean'\n\t\t\t\t|| _config.quotes instanceof Array)\n\t\t\t\t_quotes = _config.quotes;\n\n\t\t\tif (typeof _config.newline === 'string')\n\t\t\t\t_newline = _config.newline;\n\n\t\t\tif (typeof _config.quoteChar === 'string')\n\t\t\t\t_quoteChar = _config.quoteChar;\n\n\t\t\tif (typeof _config.header === 'boolean')\n\t\t\t\t_writeHeader = _config.header;\n\t\t}\n\n\n\t\t/** Turns an object's keys into an array */\n\t\tfunction objectKeys(obj)\n\t\t{\n\t\t\tif (typeof obj !== 'object')\n\t\t\t\treturn [];\n\t\t\tvar keys = [];\n\t\t\tfor (var key in obj)\n\t\t\t\tkeys.push(key);\n\t\t\treturn keys;\n\t\t}\n\n\t\t/** The double for loop that iterates the data and writes out a CSV string including header row */\n\t\tfunction serialize(fields, data)\n\t\t{\n\t\t\tvar csv = '';\n\n\t\t\tif (typeof fields === 'string')\n\t\t\t\tfields = JSON.parse(fields);\n\t\t\tif (typeof data === 'string')\n\t\t\t\tdata = JSON.parse(data);\n\n\t\t\tvar hasHeader = fields instanceof Array && fields.length > 0;\n\t\t\tvar dataKeyedByField = !(data[0] instanceof Array);\n\n\t\t\t// If there a header row, write it first\n\t\t\tif (hasHeader && _writeHeader)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < fields.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (i > 0)\n\t\t\t\t\t\tcsv += _delimiter;\n\t\t\t\t\tcsv += safe(fields[i], i);\n\t\t\t\t}\n\t\t\t\tif (data.length > 0)\n\t\t\t\t\tcsv += _newline;\n\t\t\t}\n\n\t\t\t// Then write out the data\n\t\t\tfor (var row = 0; row < data.length; row++)\n\t\t\t{\n\t\t\t\tvar maxCol = hasHeader ? fields.length : data[row].length;\n\n\t\t\t\tfor (var col = 0; col < maxCol; col++)\n\t\t\t\t{\n\t\t\t\t\tif (col > 0)\n\t\t\t\t\t\tcsv += _delimiter;\n\t\t\t\t\tvar colIdx = hasHeader && dataKeyedByField ? fields[col] : col;\n\t\t\t\t\tcsv += safe(data[row][colIdx], col);\n\t\t\t\t}\n\n\t\t\t\tif (row < data.length - 1)\n\t\t\t\t\tcsv += _newline;\n\t\t\t}\n\n\t\t\treturn csv;\n\t\t}\n\n\t\t/** Encloses a value around quotes if needed (makes a value safe for CSV insertion) */\n\t\tfunction safe(str, col)\n\t\t{\n\t\t\tif (typeof str === 'undefined' || str === null)\n\t\t\t\treturn '';\n\n\t\t\tstr = str.toString().replace(quoteCharRegex, _quoteChar + _quoteChar);\n\n\t\t\tvar needsQuotes = (typeof _quotes === 'boolean' && _quotes)\n\t\t\t\t\t\t\t|| (_quotes instanceof Array && _quotes[col])\n\t\t\t\t\t\t\t|| hasAny(str, Papa.BAD_DELIMITERS)\n\t\t\t\t\t\t\t|| str.indexOf(_delimiter) > -1\n\t\t\t\t\t\t\t|| str.charAt(0) === ' '\n\t\t\t\t\t\t\t|| str.charAt(str.length - 1) === ' ';\n\n\t\t\treturn needsQuotes ? _quoteChar + str + _quoteChar : str;\n\t\t}\n\n\t\tfunction hasAny(str, substrings)\n\t\t{\n\t\t\tfor (var i = 0; i < substrings.length; i++)\n\t\t\t\tif (str.indexOf(substrings[i]) > -1)\n\t\t\t\t\treturn true;\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/** ChunkStreamer is the base prototype for various streamer implementations. */\n\tfunction ChunkStreamer(config)\n\t{\n\t\tthis._handle = null;\n\t\tthis._finished = false;\n\t\tthis._completed = false;\n\t\tthis._input = null;\n\t\tthis._baseIndex = 0;\n\t\tthis._partialLine = '';\n\t\tthis._rowCount = 0;\n\t\tthis._start = 0;\n\t\tthis._nextChunk = null;\n\t\tthis.isFirstChunk = true;\n\t\tthis._completeResults = {\n\t\t\tdata: [],\n\t\t\terrors: [],\n\t\t\tmeta: {}\n\t\t};\n\t\treplaceConfig.call(this, config);\n\n\t\tthis.parseChunk = function(chunk, isFakeChunk)\n\t\t{\n\t\t\t// First chunk pre-processing\n\t\t\tif (this.isFirstChunk && isFunction(this._config.beforeFirstChunk))\n\t\t\t{\n\t\t\t\tvar modifiedChunk = this._config.beforeFirstChunk(chunk);\n\t\t\t\tif (modifiedChunk !== undefined)\n\t\t\t\t\tchunk = modifiedChunk;\n\t\t\t}\n\t\t\tthis.isFirstChunk = false;\n\n\t\t\t// Rejoin the line we likely just split in two by chunking the file\n\t\t\tvar aggregate = this._partialLine + chunk;\n\t\t\tthis._partialLine = '';\n\n\t\t\tvar results = this._handle.parse(aggregate, this._baseIndex, !this._finished);\n\n\t\t\tif (this._handle.paused() || this._handle.aborted())\n\t\t\t\treturn;\n\n\t\t\tvar lastIndex = results.meta.cursor;\n\n\t\t\tif (!this._finished)\n\t\t\t{\n\t\t\t\tthis._partialLine = aggregate.substring(lastIndex - this._baseIndex);\n\t\t\t\tthis._baseIndex = lastIndex;\n\t\t\t}\n\n\t\t\tif (results && results.data)\n\t\t\t\tthis._rowCount += results.data.length;\n\n\t\t\tvar finishedIncludingPreview = this._finished || (this._config.preview && this._rowCount >= this._config.preview);\n\n\t\t\tif (IS_PAPA_WORKER)\n\t\t\t{\n\t\t\t\tglobal.postMessage({\n\t\t\t\t\tresults: results,\n\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\tfinished: finishedIncludingPreview\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (isFunction(this._config.chunk) && !isFakeChunk)\n\t\t\t{\n\t\t\t\tthis._config.chunk(results, this._handle);\n\t\t\t\tif (this._handle.paused() || this._handle.aborted())\n\t\t\t\t\treturn;\n\t\t\t\tresults = undefined;\n\t\t\t\tthis._completeResults = undefined;\n\t\t\t}\n\n\t\t\tif (!this._config.step && !this._config.chunk) {\n\t\t\t\tthis._completeResults.data = this._completeResults.data.concat(results.data);\n\t\t\t\tthis._completeResults.errors = this._completeResults.errors.concat(results.errors);\n\t\t\t\tthis._completeResults.meta = results.meta;\n\t\t\t}\n\n\t\t\tif (!this._completed && finishedIncludingPreview && isFunction(this._config.complete) && (!results || !results.meta.aborted)) {\n\t\t\t\tthis._config.complete(this._completeResults, this._input);\n\t\t\t\tthis._completed = true;\n\t\t\t}\n\n\t\t\tif (!finishedIncludingPreview && (!results || !results.meta.paused))\n\t\t\t\tthis._nextChunk();\n\n\t\t\treturn results;\n\t\t};\n\n\t\tthis._sendError = function(error)\n\t\t{\n\t\t\tif (isFunction(this._config.error))\n\t\t\t\tthis._config.error(error);\n\t\t\telse if (IS_PAPA_WORKER && this._config.error)\n\t\t\t{\n\t\t\t\tglobal.postMessage({\n\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\terror: error,\n\t\t\t\t\tfinished: false\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tfunction replaceConfig(config)\n\t\t{\n\t\t\t// Deep-copy the config so we can edit it\n\t\t\tvar configCopy = copy(config);\n\t\t\tconfigCopy.chunkSize = parseInt(configCopy.chunkSize);\t// parseInt VERY important so we don't concatenate strings!\n\t\t\tif (!config.step && !config.chunk)\n\t\t\t\tconfigCopy.chunkSize = null;  // disable Range header if not streaming; bad values break IIS - see issue #196\n\t\t\tthis._handle = new ParserHandle(configCopy);\n\t\t\tthis._handle.streamer = this;\n\t\t\tthis._config = configCopy;\t// persist the copy to the caller\n\t\t}\n\t}\n\n\n\tfunction NetworkStreamer(config)\n\t{\n\t\tconfig = config || {};\n\t\tif (!config.chunkSize)\n\t\t\tconfig.chunkSize = Papa.RemoteChunkSize;\n\t\tChunkStreamer.call(this, config);\n\n\t\tvar xhr;\n\n\t\tif (IS_WORKER)\n\t\t{\n\t\t\tthis._nextChunk = function()\n\t\t\t{\n\t\t\t\tthis._readChunk();\n\t\t\t\tthis._chunkLoaded();\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._nextChunk = function()\n\t\t\t{\n\t\t\t\tthis._readChunk();\n\t\t\t};\n\t\t}\n\n\t\tthis.stream = function(url)\n\t\t{\n\t\t\tthis._input = url;\n\t\t\tthis._nextChunk();\t// Starts streaming\n\t\t};\n\n\t\tthis._readChunk = function()\n\t\t{\n\t\t\tif (this._finished)\n\t\t\t{\n\t\t\t\tthis._chunkLoaded();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\txhr = new XMLHttpRequest();\n\n\t\t\tif (this._config.withCredentials)\n\t\t\t{\n\t\t\t\txhr.withCredentials = this._config.withCredentials;\n\t\t\t}\n\n\t\t\tif (!IS_WORKER)\n\t\t\t{\n\t\t\t\txhr.onload = bindFunction(this._chunkLoaded, this);\n\t\t\t\txhr.onerror = bindFunction(this._chunkError, this);\n\t\t\t}\n\n\t\t\txhr.open('GET', this._input, !IS_WORKER);\n\t\t\t// Headers can only be set when once the request state is OPENED\n\t\t\tif (this._config.downloadRequestHeaders)\n\t\t\t{\n\t\t\t\tvar headers = this._config.downloadRequestHeaders;\n\n\t\t\t\tfor (var headerName in headers)\n\t\t\t\t{\n\t\t\t\t\txhr.setRequestHeader(headerName, headers[headerName]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._config.chunkSize)\n\t\t\t{\n\t\t\t\tvar end = this._start + this._config.chunkSize - 1;\t// minus one because byte range is inclusive\n\t\t\t\txhr.setRequestHeader('Range', 'bytes=' + this._start + '-' + end);\n\t\t\t\txhr.setRequestHeader('If-None-Match', 'webkit-no-cache'); // https://bugs.webkit.org/show_bug.cgi?id=82672\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\txhr.send();\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t\tthis._chunkError(err.message);\n\t\t\t}\n\n\t\t\tif (IS_WORKER && xhr.status === 0)\n\t\t\t\tthis._chunkError();\n\t\t\telse\n\t\t\t\tthis._start += this._config.chunkSize;\n\t\t};\n\n\t\tthis._chunkLoaded = function()\n\t\t{\n\t\t\tif (xhr.readyState !== 4)\n\t\t\t\treturn;\n\n\t\t\tif (xhr.status < 200 || xhr.status >= 400)\n\t\t\t{\n\t\t\t\tthis._chunkError();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._finished = !this._config.chunkSize || this._start > getFileSize(xhr);\n\t\t\tthis.parseChunk(xhr.responseText);\n\t\t};\n\n\t\tthis._chunkError = function(errorMessage)\n\t\t{\n\t\t\tvar errorText = xhr.statusText || errorMessage;\n\t\t\tthis._sendError(new Error(errorText));\n\t\t};\n\n\t\tfunction getFileSize(xhr)\n\t\t{\n\t\t\tvar contentRange = xhr.getResponseHeader('Content-Range');\n\t\t\tif (contentRange === null) { // no content range, then finish!\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn parseInt(contentRange.substr(contentRange.lastIndexOf('/') + 1));\n\t\t}\n\t}\n\tNetworkStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\tNetworkStreamer.prototype.constructor = NetworkStreamer;\n\n\n\tfunction FileStreamer(config)\n\t{\n\t\tconfig = config || {};\n\t\tif (!config.chunkSize)\n\t\t\tconfig.chunkSize = Papa.LocalChunkSize;\n\t\tChunkStreamer.call(this, config);\n\n\t\tvar reader, slice;\n\n\t\t// FileReader is better than FileReaderSync (even in worker) - see http://stackoverflow.com/q/24708649/1048862\n\t\t// But Firefox is a pill, too - see issue #76: https://github.com/mholt/PapaParse/issues/76\n\t\tvar usingAsyncReader = typeof FileReader !== 'undefined';\t// Safari doesn't consider it a function - see issue #105\n\n\t\tthis.stream = function(file)\n\t\t{\n\t\t\tthis._input = file;\n\t\t\tslice = file.slice || file.webkitSlice || file.mozSlice;\n\n\t\t\tif (usingAsyncReader)\n\t\t\t{\n\t\t\t\treader = new FileReader();\t\t// Preferred method of reading files, even in workers\n\t\t\t\treader.onload = bindFunction(this._chunkLoaded, this);\n\t\t\t\treader.onerror = bindFunction(this._chunkError, this);\n\t\t\t}\n\t\t\telse\n\t\t\t\treader = new FileReaderSync();\t// Hack for running in a web worker in Firefox\n\n\t\t\tthis._nextChunk();\t// Starts streaming\n\t\t};\n\n\t\tthis._nextChunk = function()\n\t\t{\n\t\t\tif (!this._finished && (!this._config.preview || this._rowCount < this._config.preview))\n\t\t\t\tthis._readChunk();\n\t\t};\n\n\t\tthis._readChunk = function()\n\t\t{\n\t\t\tvar input = this._input;\n\t\t\tif (this._config.chunkSize)\n\t\t\t{\n\t\t\t\tvar end = Math.min(this._start + this._config.chunkSize, this._input.size);\n\t\t\t\tinput = slice.call(input, this._start, end);\n\t\t\t}\n\t\t\tvar txt = reader.readAsText(input, this._config.encoding);\n\t\t\tif (!usingAsyncReader)\n\t\t\t\tthis._chunkLoaded({ target: { result: txt } });\t// mimic the async signature\n\t\t};\n\n\t\tthis._chunkLoaded = function(event)\n\t\t{\n\t\t\t// Very important to increment start each time before handling results\n\t\t\tthis._start += this._config.chunkSize;\n\t\t\tthis._finished = !this._config.chunkSize || this._start >= this._input.size;\n\t\t\tthis.parseChunk(event.target.result);\n\t\t};\n\n\t\tthis._chunkError = function()\n\t\t{\n\t\t\tthis._sendError(reader.error);\n\t\t};\n\n\t}\n\tFileStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\tFileStreamer.prototype.constructor = FileStreamer;\n\n\n\tfunction StringStreamer(config)\n\t{\n\t\tconfig = config || {};\n\t\tChunkStreamer.call(this, config);\n\n\t\tvar remaining;\n\t\tthis.stream = function(s)\n\t\t{\n\t\t\tremaining = s;\n\t\t\treturn this._nextChunk();\n\t\t};\n\t\tthis._nextChunk = function()\n\t\t{\n\t\t\tif (this._finished) return;\n\t\t\tvar size = this._config.chunkSize;\n\t\t\tvar chunk = size ? remaining.substr(0, size) : remaining;\n\t\t\tremaining = size ? remaining.substr(size) : '';\n\t\t\tthis._finished = !remaining;\n\t\t\treturn this.parseChunk(chunk);\n\t\t};\n\t}\n\tStringStreamer.prototype = Object.create(StringStreamer.prototype);\n\tStringStreamer.prototype.constructor = StringStreamer;\n\n\n\tfunction ReadableStreamStreamer(config)\n\t{\n\t\tconfig = config || {};\n\n\t\tChunkStreamer.call(this, config);\n\n\t\tvar queue = [];\n\t\tvar parseOnData = true;\n\t\tvar streamHasEnded = false;\n\n\t\tthis.pause = function()\n\t\t{\n\t\t\tChunkStreamer.prototype.pause.apply(this, arguments);\n\t\t\tthis._input.pause();\n\t\t};\n\n\t\tthis.resume = function()\n\t\t{\n\t\t\tChunkStreamer.prototype.resume.apply(this, arguments);\n\t\t\tthis._input.resume();\n\t\t};\n\n\t\tthis.stream = function(stream)\n\t\t{\n\t\t\tthis._input = stream;\n\n\t\t\tthis._input.on('data', this._streamData);\n\t\t\tthis._input.on('end', this._streamEnd);\n\t\t\tthis._input.on('error', this._streamError);\n\t\t};\n\n\t\tthis._checkIsFinished = function()\n\t\t{\n\t\t\tif (streamHasEnded && queue.length === 1) {\n\t\t\t\tthis._finished = true;\n\t\t\t}\n\t\t};\n\n\t\tthis._nextChunk = function()\n\t\t{\n\t\t\tthis._checkIsFinished();\n\t\t\tif (queue.length)\n\t\t\t{\n\t\t\t\tthis.parseChunk(queue.shift());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparseOnData = true;\n\t\t\t}\n\t\t};\n\n\t\tthis._streamData = bindFunction(function(chunk)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tqueue.push(typeof chunk === 'string' ? chunk : chunk.toString(this._config.encoding));\n\n\t\t\t\tif (parseOnData)\n\t\t\t\t{\n\t\t\t\t\tparseOnData = false;\n\t\t\t\t\tthis._checkIsFinished();\n\t\t\t\t\tthis.parseChunk(queue.shift());\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tthis._streamError(error);\n\t\t\t}\n\t\t}, this);\n\n\t\tthis._streamError = bindFunction(function(error)\n\t\t{\n\t\t\tthis._streamCleanUp();\n\t\t\tthis._sendError(error);\n\t\t}, this);\n\n\t\tthis._streamEnd = bindFunction(function()\n\t\t{\n\t\t\tthis._streamCleanUp();\n\t\t\tstreamHasEnded = true;\n\t\t\tthis._streamData('');\n\t\t}, this);\n\n\t\tthis._streamCleanUp = bindFunction(function()\n\t\t{\n\t\t\tthis._input.removeListener('data', this._streamData);\n\t\t\tthis._input.removeListener('end', this._streamEnd);\n\t\t\tthis._input.removeListener('error', this._streamError);\n\t\t}, this);\n\t}\n\tReadableStreamStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\tReadableStreamStreamer.prototype.constructor = ReadableStreamStreamer;\n\n\n\t// Use one ParserHandle per entire CSV file or string\n\tfunction ParserHandle(_config)\n\t{\n\t\t// One goal is to minimize the use of regular expressions...\n\t\tvar FLOAT = /^\\s*-?(\\d*\\.?\\d+|\\d+\\.?\\d*)(e[-+]?\\d+)?\\s*$/i;\n\n\t\tvar self = this;\n\t\tvar _stepCounter = 0;\t// Number of times step was called (number of rows parsed)\n\t\tvar _input;\t\t\t\t// The input being parsed\n\t\tvar _parser;\t\t\t// The core parser being used\n\t\tvar _paused = false;\t// Whether we are paused or not\n\t\tvar _aborted = false;\t// Whether the parser has aborted or not\n\t\tvar _delimiterError;\t// Temporary state between delimiter detection and processing results\n\t\tvar _fields = [];\t\t// Fields are from the header row of the input, if there is one\n\t\tvar _results = {\t\t// The last results returned from the parser\n\t\t\tdata: [],\n\t\t\terrors: [],\n\t\t\tmeta: {}\n\t\t};\n\n\t\tif (isFunction(_config.step))\n\t\t{\n\t\t\tvar userStep = _config.step;\n\t\t\t_config.step = function(results)\n\t\t\t{\n\t\t\t\t_results = results;\n\n\t\t\t\tif (needsHeaderRow())\n\t\t\t\t\tprocessResults();\n\t\t\t\telse\t// only call user's step function after header row\n\t\t\t\t{\n\t\t\t\t\tprocessResults();\n\n\t\t\t\t\t// It's possbile that this line was empty and there's no row here after all\n\t\t\t\t\tif (_results.data.length === 0)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t_stepCounter += results.data.length;\n\t\t\t\t\tif (_config.preview && _stepCounter > _config.preview)\n\t\t\t\t\t\t_parser.abort();\n\t\t\t\t\telse\n\t\t\t\t\t\tuserStep(_results, self);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses input. Most users won't need, and shouldn't mess with, the baseIndex\n\t\t * and ignoreLastRow parameters. They are used by streamers (wrapper functions)\n\t\t * when an input comes in multiple chunks, like from a file.\n\t\t */\n\t\tthis.parse = function(input, baseIndex, ignoreLastRow)\n\t\t{\n\t\t\tif (!_config.newline)\n\t\t\t\t_config.newline = guessLineEndings(input);\n\n\t\t\t_delimiterError = false;\n\t\t\tif (!_config.delimiter)\n\t\t\t{\n\t\t\t\tvar delimGuess = guessDelimiter(input, _config.newline, _config.skipEmptyLines);\n\t\t\t\tif (delimGuess.successful)\n\t\t\t\t\t_config.delimiter = delimGuess.bestDelimiter;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t_delimiterError = true;\t// add error after parsing (otherwise it would be overwritten)\n\t\t\t\t\t_config.delimiter = Papa.DefaultDelimiter;\n\t\t\t\t}\n\t\t\t\t_results.meta.delimiter = _config.delimiter;\n\t\t\t}\n\t\t\telse if(isFunction(_config.delimiter))\n\t\t\t{\n\t\t\t\t_config.delimiter = _config.delimiter(input);\n\t\t\t\t_results.meta.delimiter = _config.delimiter;\n\t\t\t}\n\n\t\t\tvar parserConfig = copy(_config);\n\t\t\tif (_config.preview && _config.header)\n\t\t\t\tparserConfig.preview++;\t// to compensate for header row\n\n\t\t\t_input = input;\n\t\t\t_parser = new Parser(parserConfig);\n\t\t\t_results = _parser.parse(_input, baseIndex, ignoreLastRow);\n\t\t\tprocessResults();\n\t\t\treturn _paused ? { meta: { paused: true } } : (_results || { meta: { paused: false } });\n\t\t};\n\n\t\tthis.paused = function()\n\t\t{\n\t\t\treturn _paused;\n\t\t};\n\n\t\tthis.pause = function()\n\t\t{\n\t\t\t_paused = true;\n\t\t\t_parser.abort();\n\t\t\t_input = _input.substr(_parser.getCharIndex());\n\t\t};\n\n\t\tthis.resume = function()\n\t\t{\n\t\t\t_paused = false;\n\t\t\tself.streamer.parseChunk(_input, true);\n\t\t};\n\n\t\tthis.aborted = function()\n\t\t{\n\t\t\treturn _aborted;\n\t\t};\n\n\t\tthis.abort = function()\n\t\t{\n\t\t\t_aborted = true;\n\t\t\t_parser.abort();\n\t\t\t_results.meta.aborted = true;\n\t\t\tif (isFunction(_config.complete))\n\t\t\t\t_config.complete(_results);\n\t\t\t_input = '';\n\t\t};\n\n\t\tfunction processResults()\n\t\t{\n\t\t\tif (_results && _delimiterError)\n\t\t\t{\n\t\t\t\taddError('Delimiter', 'UndetectableDelimiter', 'Unable to auto-detect delimiting character; defaulted to \\'' + Papa.DefaultDelimiter + '\\'');\n\t\t\t\t_delimiterError = false;\n\t\t\t}\n\n\t\t\tif (_config.skipEmptyLines)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < _results.data.length; i++)\n\t\t\t\t\tif (_results.data[i].length === 1 && _results.data[i][0] === '')\n\t\t\t\t\t\t_results.data.splice(i--, 1);\n\t\t\t}\n\n\t\t\tif (needsHeaderRow())\n\t\t\t\tfillHeaderFields();\n\n\t\t\treturn applyHeaderAndDynamicTyping();\n\t\t}\n\n\t\tfunction needsHeaderRow()\n\t\t{\n\t\t\treturn _config.header && _fields.length === 0;\n\t\t}\n\n\t\tfunction fillHeaderFields()\n\t\t{\n\t\t\tif (!_results)\n\t\t\t\treturn;\n\t\t\tfor (var i = 0; needsHeaderRow() && i < _results.data.length; i++)\n\t\t\t\tfor (var j = 0; j < _results.data[i].length; j++)\n\t\t\t\t{\n\t\t\t\t\tvar header = _results.data[i][j];\n\n\t\t\t\t\tif (_config.trimHeaders) {\n\t\t\t\t\t\theader = header.trim();\n\t\t\t\t\t}\n\n\t\t\t\t\t_fields.push(header);\n\t\t\t\t}\n\t\t\t_results.data.splice(0, 1);\n\t\t}\n\n\t\tfunction shouldApplyDynamicTyping(field) {\n\t\t\t// Cache function values to avoid calling it for each row\n\t\t\tif (_config.dynamicTypingFunction && _config.dynamicTyping[field] === undefined) {\n\t\t\t\t_config.dynamicTyping[field] = _config.dynamicTypingFunction(field);\n\t\t\t}\n\t\t\treturn (_config.dynamicTyping[field] || _config.dynamicTyping) === true;\n\t\t}\n\n\t\tfunction parseDynamic(field, value)\n\t\t{\n\t\t\tif (shouldApplyDynamicTyping(field))\n\t\t\t{\n\t\t\t\tif (value === 'true' || value === 'TRUE')\n\t\t\t\t\treturn true;\n\t\t\t\telse if (value === 'false' || value === 'FALSE')\n\t\t\t\t\treturn false;\n\t\t\t\telse if(FLOAT.test(value)) {\n\t\t\t\t\treturn parseFloat(value);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn (value === '' ? null : value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tfunction applyHeaderAndDynamicTyping()\n\t\t{\n\t\t\tif (!_results || (!_config.header && !_config.dynamicTyping))\n\t\t\t\treturn _results;\n\n\t\t\tfor (var i = 0; i < _results.data.length; i++)\n\t\t\t{\n\t\t\t\tvar row = _config.header ? {} : [];\n\n\t\t\t\tvar j;\n\t\t\t\tfor (j = 0; j < _results.data[i].length; j++)\n\t\t\t\t{\n\t\t\t\t\tvar field = j;\n\t\t\t\t\tvar value = _results.data[i][j];\n\n\t\t\t\t\tif (_config.header)\n\t\t\t\t\t\tfield = j >= _fields.length ? '__parsed_extra' : _fields[j];\n\n\t\t\t\t\tvalue = parseDynamic(field, value);\n\n\t\t\t\t\tif (field === '__parsed_extra')\n\t\t\t\t\t{\n\t\t\t\t\t\trow[field] = row[field] || [];\n\t\t\t\t\t\trow[field].push(value);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\trow[field] = value;\n\t\t\t\t}\n\n\t\t\t\t_results.data[i] = row;\n\n\t\t\t\tif (_config.header)\n\t\t\t\t{\n\t\t\t\t\tif (j > _fields.length)\n\t\t\t\t\t\taddError('FieldMismatch', 'TooManyFields', 'Too many fields: expected ' + _fields.length + ' fields but parsed ' + j, i);\n\t\t\t\t\telse if (j < _fields.length)\n\t\t\t\t\t\taddError('FieldMismatch', 'TooFewFields', 'Too few fields: expected ' + _fields.length + ' fields but parsed ' + j, i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_config.header && _results.meta)\n\t\t\t\t_results.meta.fields = _fields;\n\t\t\treturn _results;\n\t\t}\n\n\t\tfunction guessDelimiter(input, newline, skipEmptyLines)\n\t\t{\n\t\t\tvar delimChoices = [',', '\\t', '|', ';', Papa.RECORD_SEP, Papa.UNIT_SEP];\n\t\t\tvar bestDelim, bestDelta, fieldCountPrevRow;\n\n\t\t\tfor (var i = 0; i < delimChoices.length; i++)\n\t\t\t{\n\t\t\t\tvar delim = delimChoices[i];\n\t\t\t\tvar delta = 0, avgFieldCount = 0, emptyLinesCount = 0;\n\t\t\t\tfieldCountPrevRow = undefined;\n\n\t\t\t\tvar preview = new Parser({\n\t\t\t\t\tdelimiter: delim,\n\t\t\t\t\tnewline: newline,\n\t\t\t\t\tpreview: 10\n\t\t\t\t}).parse(input);\n\n\t\t\t\tfor (var j = 0; j < preview.data.length; j++)\n\t\t\t\t{\n\t\t\t\t\tif (skipEmptyLines && preview.data[j].length === 1 && preview.data[j][0].length === 0) {\n\t\t\t\t\t\temptyLinesCount++;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar fieldCount = preview.data[j].length;\n\t\t\t\t\tavgFieldCount += fieldCount;\n\n\t\t\t\t\tif (typeof fieldCountPrevRow === 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldCountPrevRow = fieldCount;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (fieldCount > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelta += Math.abs(fieldCount - fieldCountPrevRow);\n\t\t\t\t\t\tfieldCountPrevRow = fieldCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (preview.data.length > 0)\n\t\t\t\t\tavgFieldCount /= (preview.data.length - emptyLinesCount);\n\n\t\t\t\tif ((typeof bestDelta === 'undefined' || delta < bestDelta)\n\t\t\t\t\t&& avgFieldCount > 1.99)\n\t\t\t\t{\n\t\t\t\t\tbestDelta = delta;\n\t\t\t\t\tbestDelim = delim;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_config.delimiter = bestDelim;\n\n\t\t\treturn {\n\t\t\t\tsuccessful: !!bestDelim,\n\t\t\t\tbestDelimiter: bestDelim\n\t\t\t};\n\t\t}\n\n\t\tfunction guessLineEndings(input)\n\t\t{\n\t\t\tinput = input.substr(0, 1024 * 1024);\t// max length 1 MB\n\n\t\t\tvar r = input.split('\\r');\n\n\t\t\tvar n = input.split('\\n');\n\n\t\t\tvar nAppearsFirst = (n.length > 1 && n[0].length < r[0].length);\n\n\t\t\tif (r.length === 1 || nAppearsFirst)\n\t\t\t\treturn '\\n';\n\n\t\t\tvar numWithN = 0;\n\t\t\tfor (var i = 0; i < r.length; i++)\n\t\t\t{\n\t\t\t\tif (r[i][0] === '\\n')\n\t\t\t\t\tnumWithN++;\n\t\t\t}\n\n\t\t\treturn numWithN >= r.length / 2 ? '\\r\\n' : '\\r';\n\t\t}\n\n\t\tfunction addError(type, code, msg, row)\n\t\t{\n\t\t\t_results.errors.push({\n\t\t\t\ttype: type,\n\t\t\t\tcode: code,\n\t\t\t\tmessage: msg,\n\t\t\t\trow: row\n\t\t\t});\n\t\t}\n\t}\n\n\n\n\n\n\t/** The core parser implements speedy and correct CSV parsing */\n\tfunction Parser(config)\n\t{\n\t\t// Unpack the config object\n\t\tconfig = config || {};\n\t\tvar delim = config.delimiter;\n\t\tvar newline = config.newline;\n\t\tvar comments = config.comments;\n\t\tvar step = config.step;\n\t\tvar preview = config.preview;\n\t\tvar fastMode = config.fastMode;\n\t\tvar quoteChar;\n\t\t/** Allows for no quoteChar by setting quoteChar to undefined in config */\n\t\tif (config.quoteChar === undefined) {\n\t\t\tquoteChar = '\"';\n\t\t} else {\n\t\t\tquoteChar = config.quoteChar;\n\t\t}\n\t\tvar escapeChar = quoteChar;\n\t\tif (config.escapeChar !== undefined) {\n\t\t\tescapeChar = config.escapeChar;\n\t\t}\n\n\t\t// Delimiter must be valid\n\t\tif (typeof delim !== 'string'\n\t\t\t|| Papa.BAD_DELIMITERS.indexOf(delim) > -1)\n\t\t\tdelim = ',';\n\n\t\t// Comment character must be valid\n\t\tif (comments === delim)\n\t\t\tthrow 'Comment character same as delimiter';\n\t\telse if (comments === true)\n\t\t\tcomments = '#';\n\t\telse if (typeof comments !== 'string'\n\t\t\t|| Papa.BAD_DELIMITERS.indexOf(comments) > -1)\n\t\t\tcomments = false;\n\n\t\t// Newline must be valid: \\r, \\n, or \\r\\n\n\t\tif (newline !== '\\n' && newline !== '\\r' && newline !== '\\r\\n')\n\t\t\tnewline = '\\n';\n\n\t\t// We're gonna need these at the Parser scope\n\t\tvar cursor = 0;\n\t\tvar aborted = false;\n\n\t\tthis.parse = function(input, baseIndex, ignoreLastRow)\n\t\t{\n\t\t\t// For some reason, in Chrome, this speeds things up (!?)\n\t\t\tif (typeof input !== 'string')\n\t\t\t\tthrow 'Input must be a string';\n\n\t\t\t// We don't need to compute some of these every time parse() is called,\n\t\t\t// but having them in a more local scope seems to perform better\n\t\t\tvar inputLen = input.length,\n\t\t\t\tdelimLen = delim.length,\n\t\t\t\tnewlineLen = newline.length,\n\t\t\t\tcommentsLen = comments.length;\n\t\t\tvar stepIsFunction = isFunction(step);\n\n\t\t\t// Establish starting state\n\t\t\tcursor = 0;\n\t\t\tvar data = [], errors = [], row = [], lastCursor = 0;\n\n\t\t\tif (!input)\n\t\t\t\treturn returnable();\n\n\t\t\tif (fastMode || (fastMode !== false && input.indexOf(quoteChar) === -1))\n\t\t\t{\n\t\t\t\tvar rows = input.split(newline);\n\t\t\t\tfor (var i = 0; i < rows.length; i++)\n\t\t\t\t{\n\t\t\t\t\trow = rows[i];\n\t\t\t\t\tcursor += row.length;\n\t\t\t\t\tif (i !== rows.length - 1)\n\t\t\t\t\t\tcursor += newline.length;\n\t\t\t\t\telse if (ignoreLastRow)\n\t\t\t\t\t\treturn returnable();\n\t\t\t\t\tif (comments && row.substr(0, commentsLen) === comments)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tif (stepIsFunction)\n\t\t\t\t\t{\n\t\t\t\t\t\tdata = [];\n\t\t\t\t\t\tpushRow(row.split(delim));\n\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\tif (aborted)\n\t\t\t\t\t\t\treturn returnable();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tpushRow(row.split(delim));\n\t\t\t\t\tif (preview && i >= preview)\n\t\t\t\t\t{\n\t\t\t\t\t\tdata = data.slice(0, preview);\n\t\t\t\t\t\treturn returnable(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn returnable();\n\t\t\t}\n\n\t\t\tvar nextDelim = input.indexOf(delim, cursor);\n\t\t\tvar nextNewline = input.indexOf(newline, cursor);\n\t\t\tvar quoteCharRegex = new RegExp(escapeChar.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&') + quoteChar, 'g');\n\t\t\tvar quoteSearch;\n\n\t\t\t// Parser loop\n\t\t\tfor (;;)\n\t\t\t{\n\t\t\t\t// Field has opening quote\n\t\t\t\tif (input[cursor] === quoteChar)\n\t\t\t\t{\n\t\t\t\t\t// Start our search for the closing quote where the cursor is\n\t\t\t\t\tquoteSearch = cursor;\n\n\t\t\t\t\t// Skip the opening quote\n\t\t\t\t\tcursor++;\n\n\t\t\t\t\tfor (;;)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Find closing quote\n\t\t\t\t\t\tquoteSearch = input.indexOf(quoteChar, quoteSearch + 1);\n\n\t\t\t\t\t\t//No other quotes are found - no other delimiters\n\t\t\t\t\t\tif (quoteSearch === -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!ignoreLastRow) {\n\t\t\t\t\t\t\t\t// No closing quote... what a pity\n\t\t\t\t\t\t\t\terrors.push({\n\t\t\t\t\t\t\t\t\ttype: 'Quotes',\n\t\t\t\t\t\t\t\t\tcode: 'MissingQuotes',\n\t\t\t\t\t\t\t\t\tmessage: 'Quoted field unterminated',\n\t\t\t\t\t\t\t\t\trow: data.length,\t// row has yet to be inserted\n\t\t\t\t\t\t\t\t\tindex: cursor\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn finish();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Closing quote at EOF\n\t\t\t\t\t\tif (quoteSearch === inputLen - 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar value = input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar);\n\t\t\t\t\t\t\treturn finish(value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If this quote is escaped, it's part of the data; skip it\n\t\t\t\t\t\t// If the quote character is the escape character, then check if the next character is the escape character\n\t\t\t\t\t\tif (quoteChar === escapeChar &&  input[quoteSearch + 1] === escapeChar)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tquoteSearch++;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If the quote character is not the escape character, then check if the previous character was the escape character\n\t\t\t\t\t\tif (quoteChar !== escapeChar && quoteSearch !== 0 && input[quoteSearch - 1] === escapeChar)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar spacesBetweenQuoteAndDelimiter = extraSpaces(nextDelim);\n\n\t\t\t\t\t\t// Closing quote followed by delimiter or 'unnecessary steps + delimiter'\n\t\t\t\t\t\tif (input[quoteSearch + 1 + spacesBetweenQuoteAndDelimiter] === delim)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trow.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n\t\t\t\t\t\t\tcursor = quoteSearch + 1 + spacesBetweenQuoteAndDelimiter + delimLen;\n\t\t\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar spacesBetweenQuoteAndNewLine = extraSpaces(nextNewline);\n\n\t\t\t\t\t\t// Closing quote followed by newline or 'unnecessary spaces + newLine'\n\t\t\t\t\t\tif (input.substr(quoteSearch + 1 + spacesBetweenQuoteAndNewLine, newlineLen) === newline)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trow.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n\t\t\t\t\t\t\tsaveRow(quoteSearch + 1 + spacesBetweenQuoteAndNewLine + newlineLen);\n\t\t\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\t// because we may have skipped the nextDelim in the quoted field\n\n\t\t\t\t\t\t\tif (stepIsFunction)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\t\t\tif (aborted)\n\t\t\t\t\t\t\t\t\treturn returnable();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (preview && data.length >= preview)\n\t\t\t\t\t\t\t\treturn returnable(true);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t// Checks for valid closing quotes are complete (escaped quotes or quote followed by EOF/delimiter/newline) -- assume these quotes are part of an invalid text string\n\t\t\t\t\t\terrors.push({\n\t\t\t\t\t\t\ttype: 'Quotes',\n\t\t\t\t\t\t\tcode: 'InvalidQuotes',\n\t\t\t\t\t\t\tmessage: 'Trailing quote on quoted field is malformed',\n\t\t\t\t\t\t\trow: data.length,\t// row has yet to be inserted\n\t\t\t\t\t\t\tindex: cursor\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tquoteSearch++;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Comment found at start of new line\n\t\t\t\tif (comments && row.length === 0 && input.substr(cursor, commentsLen) === comments)\n\t\t\t\t{\n\t\t\t\t\tif (nextNewline === -1)\t// Comment ends at EOF\n\t\t\t\t\t\treturn returnable();\n\t\t\t\t\tcursor = nextNewline + newlineLen;\n\t\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Next delimiter comes before next newline, so we've reached end of field\n\t\t\t\tif (nextDelim !== -1 && (nextDelim < nextNewline || nextNewline === -1))\n\t\t\t\t{\n\t\t\t\t\trow.push(input.substring(cursor, nextDelim));\n\t\t\t\t\tcursor = nextDelim + delimLen;\n\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// End of row\n\t\t\t\tif (nextNewline !== -1)\n\t\t\t\t{\n\t\t\t\t\trow.push(input.substring(cursor, nextNewline));\n\t\t\t\t\tsaveRow(nextNewline + newlineLen);\n\n\t\t\t\t\tif (stepIsFunction)\n\t\t\t\t\t{\n\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\tif (aborted)\n\t\t\t\t\t\t\treturn returnable();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (preview && data.length >= preview)\n\t\t\t\t\t\treturn returnable(true);\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\n\t\t\treturn finish();\n\n\n\t\t\tfunction pushRow(row)\n\t\t\t{\n\t\t\t\tdata.push(row);\n\t\t\t\tlastCursor = cursor;\n\t\t\t}\n\n\t\t\t/**\n             * checks if there are extra spaces after closing quote and given index without any text\n             * if Yes, returns the number of spaces\n             */\n\t\t\tfunction extraSpaces(index) {\n\t\t\t\tvar spaceLength = 0;\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tvar textBetweenClosingQuoteAndIndex = input.substring(quoteSearch + 1, index);\n\t\t\t\t\tif (textBetweenClosingQuoteAndIndex && textBetweenClosingQuoteAndIndex.trim() === '') {\n\t\t\t\t\t\tspaceLength = textBetweenClosingQuoteAndIndex.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn spaceLength;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Appends the remaining input from cursor to the end into\n\t\t\t * row, saves the row, calls step, and returns the results.\n\t\t\t */\n\t\t\tfunction finish(value)\n\t\t\t{\n\t\t\t\tif (ignoreLastRow)\n\t\t\t\t\treturn returnable();\n\t\t\t\tif (typeof value === 'undefined')\n\t\t\t\t\tvalue = input.substr(cursor);\n\t\t\t\trow.push(value);\n\t\t\t\tcursor = inputLen;\t// important in case parsing is paused\n\t\t\t\tpushRow(row);\n\t\t\t\tif (stepIsFunction)\n\t\t\t\t\tdoStep();\n\t\t\t\treturn returnable();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Appends the current row to the results. It sets the cursor\n\t\t\t * to newCursor and finds the nextNewline. The caller should\n\t\t\t * take care to execute user's step function and check for\n\t\t\t * preview and end parsing if necessary.\n\t\t\t */\n\t\t\tfunction saveRow(newCursor)\n\t\t\t{\n\t\t\t\tcursor = newCursor;\n\t\t\t\tpushRow(row);\n\t\t\t\trow = [];\n\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t}\n\n\t\t\t/** Returns an object with the results, errors, and meta. */\n\t\t\tfunction returnable(stopped)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tdata: data,\n\t\t\t\t\terrors: errors,\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\tdelimiter: delim,\n\t\t\t\t\t\tlinebreak: newline,\n\t\t\t\t\t\taborted: aborted,\n\t\t\t\t\t\ttruncated: !!stopped,\n\t\t\t\t\t\tcursor: lastCursor + (baseIndex || 0)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/** Executes the user's step function and resets data & errors. */\n\t\t\tfunction doStep()\n\t\t\t{\n\t\t\t\tstep(returnable());\n\t\t\t\tdata = [];\n\t\t\t\terrors = [];\n\t\t\t}\n\t\t};\n\n\t\t/** Sets the abort flag */\n\t\tthis.abort = function()\n\t\t{\n\t\t\taborted = true;\n\t\t};\n\n\t\t/** Gets the cursor position */\n\t\tthis.getCharIndex = function()\n\t\t{\n\t\t\treturn cursor;\n\t\t};\n\t}\n\n\n\t// If you need to load Papa Parse asynchronously and you also need worker threads, hard-code\n\t// the script path here. See: https://github.com/mholt/PapaParse/issues/87#issuecomment-57885358\n\tfunction getScriptPath()\n\t{\n\t\tvar scripts = document.getElementsByTagName('script');\n\t\treturn scripts.length ? scripts[scripts.length - 1].src : '';\n\t}\n\n\tfunction newWorker()\n\t{\n\t\tif (!Papa.WORKERS_SUPPORTED)\n\t\t\treturn false;\n\t\tif (!LOADED_SYNC && Papa.SCRIPT_PATH === null)\n\t\t\tthrow new Error(\n\t\t\t\t'Script path cannot be determined automatically when Papa Parse is loaded asynchronously. ' +\n\t\t\t\t'You need to set Papa.SCRIPT_PATH manually.'\n\t\t\t);\n\t\tvar workerUrl = Papa.SCRIPT_PATH || AUTO_SCRIPT_PATH;\n\t\t// Append 'papaworker' to the search string to tell papaparse that this is our worker.\n\t\tworkerUrl += (workerUrl.indexOf('?') !== -1 ? '&' : '?') + 'papaworker';\n\t\tvar w = new global.Worker(workerUrl);\n\t\tw.onmessage = mainThreadReceivedMessage;\n\t\tw.id = workerIdCounter++;\n\t\tworkers[w.id] = w;\n\t\treturn w;\n\t}\n\n\t/** Callback when main thread receives a message */\n\tfunction mainThreadReceivedMessage(e)\n\t{\n\t\tvar msg = e.data;\n\t\tvar worker = workers[msg.workerId];\n\t\tvar aborted = false;\n\n\t\tif (msg.error)\n\t\t\tworker.userError(msg.error, msg.file);\n\t\telse if (msg.results && msg.results.data)\n\t\t{\n\t\t\tvar abort = function() {\n\t\t\t\taborted = true;\n\t\t\t\tcompleteWorker(msg.workerId, { data: [], errors: [], meta: { aborted: true } });\n\t\t\t};\n\n\t\t\tvar handle = {\n\t\t\t\tabort: abort,\n\t\t\t\tpause: notImplemented,\n\t\t\t\tresume: notImplemented\n\t\t\t};\n\n\t\t\tif (isFunction(worker.userStep))\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < msg.results.data.length; i++)\n\t\t\t\t{\n\t\t\t\t\tworker.userStep({\n\t\t\t\t\t\tdata: [msg.results.data[i]],\n\t\t\t\t\t\terrors: msg.results.errors,\n\t\t\t\t\t\tmeta: msg.results.meta\n\t\t\t\t\t}, handle);\n\t\t\t\t\tif (aborted)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdelete msg.results;\t// free memory ASAP\n\t\t\t}\n\t\t\telse if (isFunction(worker.userChunk))\n\t\t\t{\n\t\t\t\tworker.userChunk(msg.results, handle, msg.file);\n\t\t\t\tdelete msg.results;\n\t\t\t}\n\t\t}\n\n\t\tif (msg.finished && !aborted)\n\t\t\tcompleteWorker(msg.workerId, msg.results);\n\t}\n\n\tfunction completeWorker(workerId, results) {\n\t\tvar worker = workers[workerId];\n\t\tif (isFunction(worker.userComplete))\n\t\t\tworker.userComplete(results);\n\t\tworker.terminate();\n\t\tdelete workers[workerId];\n\t}\n\n\tfunction notImplemented() {\n\t\tthrow 'Not implemented.';\n\t}\n\n\t/** Callback when worker thread receives a message */\n\tfunction workerThreadReceivedMessage(e)\n\t{\n\t\tvar msg = e.data;\n\n\t\tif (typeof Papa.WORKER_ID === 'undefined' && msg)\n\t\t\tPapa.WORKER_ID = msg.workerId;\n\n\t\tif (typeof msg.input === 'string')\n\t\t{\n\t\t\tglobal.postMessage({\n\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\tresults: Papa.parse(msg.input, msg.config),\n\t\t\t\tfinished: true\n\t\t\t});\n\t\t}\n\t\telse if ((global.File && msg.input instanceof File) || msg.input instanceof Object)\t// thank you, Safari (see issue #106)\n\t\t{\n\t\t\tvar results = Papa.parse(msg.input, msg.config);\n\t\t\tif (results)\n\t\t\t\tglobal.postMessage({\n\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\tresults: results,\n\t\t\t\t\tfinished: true\n\t\t\t\t});\n\t\t}\n\t}\n\n\t/** Makes a deep copy of an array or object (mostly) */\n\tfunction copy(obj)\n\t{\n\t\tif (typeof obj !== 'object')\n\t\t\treturn obj;\n\t\tvar cpy = obj instanceof Array ? [] : {};\n\t\tfor (var key in obj)\n\t\t\tcpy[key] = copy(obj[key]);\n\t\treturn cpy;\n\t}\n\n\tfunction bindFunction(f, self)\n\t{\n\t\treturn function() { f.apply(self, arguments); };\n\t}\n\n\tfunction isFunction(func)\n\t{\n\t\treturn typeof func === 'function';\n\t}\n\n\treturn Papa;\n}));\n","/**\n * BioMap data model\n */\n\nexport class BioMapModel {\n\n  /**\n   * create a BioMapModel\n   * @param {Object} params having the following properties:\n   * @param {String} name - the map name\n   * @param {Object} source - the DataSourceModel where bioMap was loaded from\n   * @param {Object} coordinates - object w/ start and stop props\n   * @param {Array} features - an array of Feature instances.\n   */\n\n  constructor({\n                name,\n                source,\n                features,\n                tags,\n                coordinates = {start: 0, stop: 0},\n                config\n              }) {\n    this.name = name;\n    this.source = source;\n    this.features = features;\n    this.tags = tags;\n    this.coordinates = coordinates;\n    this.config = config;\n  }\n\n  /**\n   * getter for length (coordinates.stop - coordinates.start)\n   * @returns {number}\n   */\n\n  get length() {\n    return this.coordinates.stop - this.coordinates.start;\n  }\n\n  /**\n   *\n   * getter for unique name (prefix map name the id of data source)\n   * @returns {string}\n   */\n\n  get uniqueName() {\n    return `${this.source.id}/${this.name}`;\n  }\n}\n","/**\n * BioMapConfiguration data model\n */\nimport m from 'mithril';\n\nexport class BioMapConfigModel {\n\n  /**\n   * create a BioMapConfigModel\n   * @param url\n   * @param method\n   */\n\n  constructor({url, method}) {\n    this.url = url;\n    this.method = method;\n  }\n\n  /**\n   *\n   */\n  load() {\n    return m.request(this);\n  }\n}\n\n/**\n * Constant that defines the default configuration of cmap maps\n * when no other configuration information is present.\n *\n * @type {{backboneWidth: number, backboneColor: string, invert: boolean, markerColor: string, markerWeight: number, markerLabelSize: number, markerLabelFace: string, markerLabelColor: string, rulerWidth: number, rulerSpacing: number, rulerColor: string, rulerLabelFace: string, rulerLabelSize: number, rulerLabelColor: string, rulerPrecision: number, rulerSteps: number, trackWidth: number, trackSpacing: number, fillColor: string, trackLabelSize: number, trackLabelFace: string, trackLabelColor: string}}\n */\n\nexport const defaultConfig = {\n  'backbone' : {\n    'width' : 20,\n    'fillColor' : '#fff6e8',\n    'lineWeight' : 0,\n    'lineColor' : 'black'\n  },\n  'ruler' : {\n    'width' : 10,\n    'padding' : 5,\n    'fillColor' : 'aqua',\n    'lineWeight' : 0,\n    'lineColor' : 'black',\n    'labelFace' : 'Nunito',\n    'labelSize' : 12,\n    'labelColor' : 'black',\n    'innerLineWeight' : 1.0,\n    'innerLineColor' : 'black',\n    'precision' : 2,\n    'steps' : 100\n  },\n  'track' : {\n    'width' : 5,\n    'padding' : 5,\n    'fillColor' : '#636081',\n    'lineWeight' : 0,\n    'lineColor' : 'black',\n    'labelFace' : 'Nunito',\n    'labelSize' : 12,\n    'labelColor' : 'black',\n    'internalPadding' : '5'\n  },\n  'marker':{\n    'lineWeight' : 1,\n    'lineColor' : 'black',\n    'labelFace' : 'Nunito',\n    'labelSize' : 12,\n    'labelColor' : 'black'\n  },\n\n  'manhattan' :{\n    'width' : 2,\n    'fillColor':'green',\n    'lineWeight':1,\n    'lineColor':'black',\n    'labelFace' : 'Nunito',\n    'labelSize' : 10,\n    'labelColor' : 'black',\n    'displayWidth' : 50,\n    'featureLineWeight' : 3,\n    'featureLineColor' : 'red',\n    'rulerWeight' : 2,\n    'rulerColor' : 'black',\n    'rulerMajorMark':10,\n    'rulerMinorMark':2,\n    'type':'manhattan'\n  },\n  'qtl':{\n    'padding' : 20,\n    'width': 5,\n    'fillColor': ['green'],\n    'labelSize': 12,\n    'labelFace': 'Nunito',\n    'labelColor': 'black',\n    'trackMinWidth' : 50,\n    'internalPadding': 5,\n    'position' : 1,\n    'type':'qtl'\n  },\n  'invert': false,\n};\n","/**\n * Data source model\n */\n\nimport m from 'mithril';\nimport parser from 'papaparse';\n\nimport {BioMapModel} from './BioMapModel';\nimport {Feature} from './Feature';\nimport {BioMapConfigModel, defaultConfig} from './BioMapConfigModel';\n\n// TODO: implement filtering at data loading time\n\nexport class DataSourceModel {\n\n  /**\n   * create a DataSourceModel\n   * @param {Object} params having the following properties:\n   * @param {String} id - uniqueId string for the data source (required)\n   * @param {String} method - HTTP method, get or post (required)\n   * @param {String} url - HTTP URL (required)\n   * @param {Object} data - query string parameters for the request (optional)\n   */\n\n  constructor({id, method, data, url, filters, linkouts, config}) {\n    this.id = id;\n    this.method = method;\n    this.data = data;\n    this.url = url;\n    this.config = config || {};\n    this.bioConfig = {'default': defaultConfig};\n    // request bioconfig urlpage as a promise, if it is gettable, fill in all\n    // default values that aren't defined using the base config, otherwise\n    // set the default values to the base config (found in BioMapConfigModel).\n    (() => {  // promise generator\n      let cfg = new BioMapConfigModel(this.config);\n      return cfg.load();\n    })().then( // promise resolution\n      (item) => { // success\n        this.bioConfig = item;\n        for (const configGroup of Object.keys(this.bioConfig)) {\n          for (const key of Object.keys(defaultConfig)) {\n            if (this.bioConfig[configGroup][key] === undefined) {\n              this.bioConfig[configGroup][key] = this.bioConfig.default[key] || defaultConfig[key];\n            }\n            for(const subkey of Object.keys(defaultConfig[key])) {\n              if (this.bioConfig[configGroup][key][subkey] === undefined) {\n                this.bioConfig[configGroup][key][subkey] = this.bioConfig.default[key][subkey] || defaultConfig[key][subkey];\n              }\n            }\n          }\n        }\n      },\n      () => { // failure\n        this.bioConfig.default = defaultConfig;\n      }\n    );\n\n    this.filters = filters || [];\n    this.linkouts = linkouts || [];\n    this.linkouts.forEach(l => {\n      l.featuretypePattern !== undefined ? l.featuretypePattern = new RegExp(l.featuretypePattern) : undefined;\n    });\n    this.background = true; // mithril not to redraw upon completion\n  }\n\n  /**\n   *Load the data source with mithril request\n   * @returns {*}\n   */\n\n  load() {\n    return m.request(this);\n  }\n\n  /**\n   * Callback from mithril request(); instead of the default deserialization\n   * which is JSON, use the papaparse library to parse csv or tab delimited\n   * content.\n   * @param {String} data - delimited text, csv or tsv\n   */\n\n  deserialize(data) {\n    const res = parser.parse(data, {\n      header: true,\n      dynamicTyping: true,\n      skipEmptyLines: true\n    });\n    if (res.errors.length) {\n      console.error(res.errors);\n      alert(`There were parsing errors in ${this.url}, please see console.`);\n    }\n    // apply filters from config file\n    res.data = res.data.filter(d => this.includeRecord(d));\n    this.parseResult = res;\n  }\n\n  /**\n   * Check record against filters and return true for inclusion. All filters are\n   * processed sequentially and the result is all or nothing, effectively like\n   * SQL AND.\n   *\n   * @param {Object} d - key/value properties of 1 record\n   * @return {Boolean} true for include, false for exclude\n   */\n\n  includeRecord(d) {\n    let hits = 0;\n    this.filters.forEach(f => {\n      let col = f.column;\n      if (d.hasOwnProperty(col)) {\n        let testVal = d[col];\n        let match;\n        if (f.operator === 'equals') {\n          match = (testVal === f.value);\n        }\n        else if (f.operator === 'regex') {\n          match = testVal.match(f.value);\n        }\n        if (f.not) {\n          if (!match) ++hits;\n        }\n        else {\n          if (match) ++hits;\n        }\n      }\n    });\n    return (hits === this.filters.length);\n  }\n\n  /**\n   * bioMaps getter; return a mapping of the uniquified map name to\n   * an instance of BioMapModel.\n   *\n   * @return {Object} key: prefix + map_name -> val: BioMapModel instance\n   */\n\n  get bioMaps() {\n    const res = {};\n      try {\n        let typeField = this.parseResult.meta.fields.includes('feature_type') ? 'feature_type' : 'feature_type_acc';\n        this.parseResult.data.forEach( d => {\n          if(! d.map_name) return;\n          const uniqueMapName = `${this.id}/${d.map_name}`;\n          if(! res[uniqueMapName]) {\n            const model = new BioMapModel({\n              source: this,\n              name: d.map_name,\n              features: [],\n              tags: [],\n              coordinates: { start: d.map_start, stop: d.map_stop },\n              config: this.bioConfig[d.map_name] || this.bioConfig.default\n            });\n            res[uniqueMapName] = model;\n          }\n          else {\n              if (d.map_stop > res[uniqueMapName].coordinates.stop) {\n                  res[uniqueMapName].coordinates.stop = d.map_stop;\n              }\n          }\n          res[uniqueMapName].features.push(\n            new Feature({\n              source : this,\n              name: d.feature_name,\n              tags: [d[typeField] !== '' ? d[typeField] : null],\n              aliases: d.feature_aliases !== '' ?  d.feature_aliases.split(',') : [],\n              coordinates: { start: d.feature_start, stop: d.feature_stop }\n            })\n          );\n          if(d[typeField] !== '' && res[uniqueMapName].tags.indexOf(d[typeField]) === -1){\n            res[uniqueMapName].tags.push(d[typeField]);\n       }\n      });\n    } catch (e) {\n      console.trace();\n      console.error(e);\n    }\n    return res;\n  }\n}\n","/**\n * App state - a global app state (or model), which can be referenced, viewed or\n * lensed, by various UI components. UI components should have only state needed\n * for their specific function, and should not cache, synchronize or duplicate\n * data from the app state.\n */\nimport PubSub from 'pubsub-js';\n\nimport {dataLoaded, reset, mapAdded} from '../topics';\nimport {HorizontalLayout} from '../ui/layout/HorizontalLayout';\nimport {DataSourceModel} from './DataSourceModel';\n\nexport class AppModel {\n\n  /**\n   *\n   */\n\n  constructor() {\n    // sources and bioMaps arrays will be populated in load()\n    this.sources = [];\n    this.bioMaps = [];\n    this.tools = {\n      zoomFactor: 1,\n      layout: HorizontalLayout // the default layout\n    };\n    this.selection = {\n      // biomaps can be multi-selected by click or tap\n      bioMaps: []\n    };\n    PubSub.subscribe(reset, () => this._onReset());\n    // the status and busy properties are be displayed in the UI,\n    // and can be freely changed via these properties\n    this.status = '';\n    this.busy = false;\n  }\n\n  /**\n   * load the app model\n   * @param header\n   * @param attribution\n   * @param sources\n   * @param initialView\n   */\n\n  load({header, attribution, sources, initialView}) {\n    let sourceConfigs = sources;\n    this.header = header;\n    this.attribution = attribution;\n    this.initialView = initialView || [];\n    this.biomaps = [];\n    let promises = sourceConfigs.map(config => {\n      let dsm = new DataSourceModel(config);\n      this.sources.push(dsm);\n      return dsm.load();\n    });\n    // wait for all data sources are loaded, then set this.bioMaps with\n    // only the maps named in initialView\n    //\n    Promise.all(promises).then(() => {\n      this.allMaps = this.sources.map(src => Object.values(src.bioMaps)).concatAll();\n      if (!this.initialView.length) {\n        this.defaultInitialView();\n      }\n      else {\n        this.setupInitialView();\n      }\n      PubSub.publish(dataLoaded);\n    }).catch(err => {\n      // TODO: make a nice mithril component to display errors in the UI\n      const msg = `While fetching data source(s), ${err}`;\n      console.error(msg);\n      console.trace();\n      alert(msg);\n    });\n    return promises;\n  }\n\n  /**\n   * create this.bioMaps based on initialView of config file.\n   */\n\n  setupInitialView() {\n    this.bioMaps = this.initialView.map(viewConf => {\n      const res = this.allMaps.filter(map => {\n        return (viewConf.source === map.source.id &&\n          viewConf.map === map.name);\n      });\n      if (res.length === 0) {\n        // TODO: make a nice mithril component to display errors in the UI\n        const info = JSON.stringify(viewConf);\n        const msg = `failed to resolve initialView entry: ${info}`;\n        console.error(msg);\n        console.trace();\n        alert(msg);\n      }\n      if(viewConf.tracks){\n        res[0].tracks = viewConf.tracks;\n      }\n      if (viewConf.qtl) {\n        res[0].qtlGroups = viewConf.qtl;\n      }\n      return res;\n    }).concatAll();\n  }\n\n  /**\n   * create this.bioMaps based on first map from each datasource (e.g if\n   * initialView was not defined in config file).\n   */\n  defaultInitialView() {\n    this.bioMaps = this.sources.map(src => Object.values(src.bioMaps)[0]);\n  }\n\n  /**\n   * Add map at the given index (note, this is called by MapAdditionDialog)\n   * @param {Object} bioMap - a bioMap from one of the already loaded data sources.\n   * @param {Number} index - zero based index into the bioMaps array.\n   */\n\n  addMap(bioMap, index = 0) {\n    this.bioMaps.splice(index, 0, bioMap);\n    PubSub.publish(mapAdded, bioMap);\n  }\n\n  /**\n   * PubSub event handler\n   * @private\n   */\n\n  _onReset() {\n    this.tools.zoomFactor = 1;\n    this.tools.layout = HorizontalLayout;\n  }\n}\n","/*\n * Hamster.js v1.1.2\n * (c) 2013 Monospaced http://monospaced.com\n * License: MIT\n */\n\n(function(window, document){\n'use strict';\n\n/**\n * Hamster\n * use this to create instances\n * @returns {Hamster.Instance}\n * @constructor\n */\nvar Hamster = function(element) {\n  return new Hamster.Instance(element);\n};\n\n// default event name\nHamster.SUPPORT = 'wheel';\n\n// default DOM methods\nHamster.ADD_EVENT = 'addEventListener';\nHamster.REMOVE_EVENT = 'removeEventListener';\nHamster.PREFIX = '';\n\n// until browser inconsistencies have been fixed...\nHamster.READY = false;\n\nHamster.Instance = function(element){\n  if (!Hamster.READY) {\n    // fix browser inconsistencies\n    Hamster.normalise.browser();\n\n    // Hamster is ready...!\n    Hamster.READY = true;\n  }\n\n  this.element = element;\n\n  // store attached event handlers\n  this.handlers = [];\n\n  // return instance\n  return this;\n};\n\n/**\n * create new hamster instance\n * all methods should return the instance itself, so it is chainable.\n * @param   {HTMLElement}       element\n * @returns {Hamster.Instance}\n * @constructor\n */\nHamster.Instance.prototype = {\n  /**\n   * bind events to the instance\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   * @returns {Hamster.Instance}\n   */\n  wheel: function onEvent(handler, useCapture){\n    Hamster.event.add(this, Hamster.SUPPORT, handler, useCapture);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (Hamster.SUPPORT === 'DOMMouseScroll') {\n      Hamster.event.add(this, 'MozMousePixelScroll', handler, useCapture);\n    }\n\n    return this;\n  },\n\n  /**\n   * unbind events to the instance\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   * @returns {Hamster.Instance}\n   */\n  unwheel: function offEvent(handler, useCapture){\n    // if no handler argument,\n    // unbind the last bound handler (if exists)\n    if (handler === undefined && (handler = this.handlers.slice(-1)[0])) {\n      handler = handler.original;\n    }\n\n    Hamster.event.remove(this, Hamster.SUPPORT, handler, useCapture);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (Hamster.SUPPORT === 'DOMMouseScroll') {\n      Hamster.event.remove(this, 'MozMousePixelScroll', handler, useCapture);\n    }\n\n    return this;\n  }\n};\n\nHamster.event = {\n  /**\n   * cross-browser 'addWheelListener'\n   * @param   {Instance}    hamster\n   * @param   {String}      eventName\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   */\n  add: function add(hamster, eventName, handler, useCapture){\n    // store the original handler\n    var originalHandler = handler;\n\n    // redefine the handler\n    handler = function(originalEvent){\n\n      if (!originalEvent) {\n        originalEvent = window.event;\n      }\n\n      // create a normalised event object,\n      // and normalise \"deltas\" of the mouse wheel\n      var event = Hamster.normalise.event(originalEvent),\n          delta = Hamster.normalise.delta(originalEvent);\n\n      // fire the original handler with normalised arguments\n      return originalHandler(event, delta[0], delta[1], delta[2]);\n\n    };\n\n    // cross-browser addEventListener\n    hamster.element[Hamster.ADD_EVENT](Hamster.PREFIX + eventName, handler, useCapture || false);\n\n    // store original and normalised handlers on the instance\n    hamster.handlers.push({\n      original: originalHandler,\n      normalised: handler\n    });\n  },\n\n  /**\n   * removeWheelListener\n   * @param   {Instance}    hamster\n   * @param   {String}      eventName\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   */\n  remove: function remove(hamster, eventName, handler, useCapture){\n    // find the normalised handler on the instance\n    var originalHandler = handler,\n        lookup = {},\n        handlers;\n    for (var i = 0, len = hamster.handlers.length; i < len; ++i) {\n      lookup[hamster.handlers[i].original] = hamster.handlers[i];\n    }\n    handlers = lookup[originalHandler];\n    handler = handlers.normalised;\n\n    // cross-browser removeEventListener\n    hamster.element[Hamster.REMOVE_EVENT](Hamster.PREFIX + eventName, handler, useCapture || false);\n\n    // remove original and normalised handlers from the instance\n    for (var h in hamster.handlers) {\n      if (hamster.handlers[h] == handlers) {\n        hamster.handlers.splice(h, 1);\n        break;\n      }\n    }\n  }\n};\n\n/**\n * these hold the lowest deltas,\n * used to normalise the delta values\n * @type {Number}\n */\nvar lowestDelta,\n    lowestDeltaXY;\n\nHamster.normalise = {\n  /**\n   * fix browser inconsistencies\n   */\n  browser: function normaliseBrowser(){\n    // detect deprecated wheel events\n    if (!('onwheel' in document || document.documentMode >= 9)) {\n      Hamster.SUPPORT = document.onmousewheel !== undefined ?\n                        'mousewheel' : // webkit and IE < 9 support at least \"mousewheel\"\n                        'DOMMouseScroll'; // assume remaining browsers are older Firefox\n    }\n\n    // detect deprecated event model\n    if (!window.addEventListener) {\n      // assume IE < 9\n      Hamster.ADD_EVENT = 'attachEvent';\n      Hamster.REMOVE_EVENT = 'detachEvent';\n      Hamster.PREFIX = 'on';\n    }\n\n  },\n\n  /**\n   * create a normalised event object\n   * @param   {Function}    originalEvent\n   * @returns {Object}      event\n   */\n   event: function normaliseEvent(originalEvent){\n    var event = {\n          // keep a reference to the original event object\n          originalEvent: originalEvent,\n          target: originalEvent.target || originalEvent.srcElement,\n          type: 'wheel',\n          deltaMode: originalEvent.type === 'MozMousePixelScroll' ? 0 : 1,\n          deltaX: 0,\n          deltaZ: 0,\n          preventDefault: function(){\n            if (originalEvent.preventDefault) {\n              originalEvent.preventDefault();\n            } else {\n              originalEvent.returnValue = false;\n            }\n          },\n          stopPropagation: function(){\n            if (originalEvent.stopPropagation) {\n              originalEvent.stopPropagation();\n            } else {\n              originalEvent.cancelBubble = false;\n            }\n          }\n        };\n\n    // calculate deltaY (and deltaX) according to the event\n\n    // 'mousewheel'\n    if (originalEvent.wheelDelta) {\n      event.deltaY = - 1/40 * originalEvent.wheelDelta;\n    }\n    // webkit\n    if (originalEvent.wheelDeltaX) {\n      event.deltaX = - 1/40 * originalEvent.wheelDeltaX;\n    }\n\n    // 'DomMouseScroll'\n    if (originalEvent.detail) {\n      event.deltaY = originalEvent.detail;\n    }\n\n    return event;\n  },\n\n  /**\n   * normalise 'deltas' of the mouse wheel\n   * @param   {Function}    originalEvent\n   * @returns {Array}       deltas\n   */\n  delta: function normaliseDelta(originalEvent){\n    var delta = 0,\n      deltaX = 0,\n      deltaY = 0,\n      absDelta = 0,\n      absDeltaXY = 0,\n      fn;\n\n    // normalise deltas according to the event\n\n    // 'wheel' event\n    if (originalEvent.deltaY) {\n      deltaY = originalEvent.deltaY * -1;\n      delta  = deltaY;\n    }\n    if (originalEvent.deltaX) {\n      deltaX = originalEvent.deltaX;\n      delta  = deltaX * -1;\n    }\n\n    // 'mousewheel' event\n    if (originalEvent.wheelDelta) {\n      delta = originalEvent.wheelDelta;\n    }\n    // webkit\n    if (originalEvent.wheelDeltaY) {\n      deltaY = originalEvent.wheelDeltaY;\n    }\n    if (originalEvent.wheelDeltaX) {\n      deltaX = originalEvent.wheelDeltaX * -1;\n    }\n\n    // 'DomMouseScroll' event\n    if (originalEvent.detail) {\n      delta = originalEvent.detail * -1;\n    }\n\n    // Don't return NaN\n    if (delta === 0) {\n      return [0, 0, 0];\n    }\n\n    // look for lowest delta to normalize the delta values\n    absDelta = Math.abs(delta);\n    if (!lowestDelta || absDelta < lowestDelta) {\n      lowestDelta = absDelta;\n    }\n    absDeltaXY = Math.max(Math.abs(deltaY), Math.abs(deltaX));\n    if (!lowestDeltaXY || absDeltaXY < lowestDeltaXY) {\n      lowestDeltaXY = absDeltaXY;\n    }\n\n    // convert deltas to whole numbers\n    fn = delta > 0 ? 'floor' : 'ceil';\n    delta  = Math[fn](delta / lowestDelta);\n    deltaX = Math[fn](deltaX / lowestDeltaXY);\n    deltaY = Math[fn](deltaY / lowestDeltaXY);\n\n    return [delta, deltaX, deltaY];\n  }\n};\n\nif (typeof window.define === 'function' && window.define.amd) {\n  // AMD\n  window.define('hamster', [], function(){\n    return Hamster;\n  });\n} else if (typeof exports === 'object') {\n  // CommonJS\n  module.exports = Hamster;\n} else {\n  // Browser global\n  window.Hamster = Hamster;\n}\n\n})(window, window.document);\n","/**\n * Reset\n * A mithril component of a Reset button.\n */\nimport m from 'mithril';\nimport PubSub from 'pubsub-js';\nimport {reset} from '../../topics';\n\nexport class ResetButton {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril render callback\n   * @returns {*}\n   */\n\n  view() {\n    return m('button', {\n      onclick: evt => this._onClick(evt)\n    }, [\n      m('i.material-icons', 'restore'),\n      'Reset View'\n    ]);\n  }\n\n  /**\n   * reset button event handler\n   * @param evt\n   * @private\n   */\n\n  _onClick(evt) {\n    PubSub.publish(reset, null);\n    // subscribers to the reset topic may m.redraw if they need to; suppress\n    // redraw for the current event.\n    evt.redraw = false;\n  }\n}\n","/**\n * A mithril component of Remove Map button\n */\nimport m from 'mithril';\n\nexport class RemoveMapButton {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril render callback\n   * @param vnode\n   * @returns {*}\n   */\n\n  view(vnode) {\n    const attrs = {\n      onclick: vnode.attrs.onclick\n    };\n    return m('button', attrs, [\n      m('i.material-icons', 'remove_circle_outline'),\n      'Remove Map'\n    ]);\n  }\n}\n","/**\n * A mithril component of Add Map button\n */\nimport m from 'mithril';\n\nexport class AddMapButton {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril render callback\n   * @param vnode\n   * @return {*}\n   */\n\n  view(vnode) {\n    const attrs = {\n      onclick: vnode.attrs.onclick\n    };\n    return m('button', attrs, [\n      m('i.material-icons', 'add_circle_outline'),\n      'Add Map'\n    ]);\n  }\n}\n","/**\n * A mithril component of Add Map button\n */\nimport m from 'mithril';\n\nexport class ConfigurationButton {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril render callback\n   * @param vnode\n   * @returns {*}\n   */\n  view(vnode) {\n    const attrs = {\n      onclick: vnode.attrs.onclick\n    };\n    return m('button', attrs, [\n      m('i.material-icons', 'mode_edit'),\n      'Configuration'\n    ]);\n  }\n}\n","/**\n * A mithril component of Add Map button\n */\nimport m from 'mithril';\n\nexport class UploadButton {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril render callback\n   * @param vnode\n   * @returns {*}\n   */\n\n  view(vnode) {\n    const attrs = {\n      onclick: vnode.attrs.onclick\n    };\n    return m('button', attrs, [\n      m('i.material-icons', 'input'),\n      'Add Data'\n    ]);\n  }\n}\n","/**\n * A mithril component for map removal dialog\n */\nimport m from 'mithril';\nimport PubSub from 'pubsub-js';\nimport {mapRemoved} from '../../topics';\n\nexport class MapRemovalDialog {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.model = vnode.attrs.model;\n    this.onDismiss = vnode.attrs.onDismiss;\n    this.selection = [];\n  }\n\n  /**\n   * event handler for cancel button\n   * @param evt\n   * @private\n   */\n\n  _onCancel(evt) {\n    evt.preventDefault();\n    this.onDismiss(evt);\n  }\n\n  /**\n   * event handler for remove button\n   * @param evt\n   * @private\n   */\n\n  _onRemove(evt) {\n    this.model.bioMaps = this.model.bioMaps.filter(bioMap => {\n      return this.selection.indexOf(bioMap) === -1;\n    });\n    PubSub.publish(mapRemoved, this.selection);\n    evt.preventDefault();\n    this.onDismiss(evt);\n  }\n\n  /**\n   * event handler for checkbox\n   * @param bioMap\n   * @private\n   */\n\n  _onToggleSelection(bioMap) {\n    const i = this.selection.indexOf(bioMap);\n    if (i === -1) {\n      this.selection.push(bioMap);\n    }\n    else {\n      this.selection.splice(i, 1);\n    }\n  }\n\n  /**\n   * mithril render callback\n   * @returns {*}\n   */\n\n  view() {\n    const haveSelection = this.selection.length > 0;\n    const plural = this.selection.length > 1;\n    return m('div.cmap-map-removal-dialog', [\n      m('h5', plural ? 'Remove Maps' : 'Remove Map'),\n      m('form', [\n        this.model.bioMaps.map(bioMap => {\n          return m('label.cmap-map-name', [\n            m('input[type=\"checkbox\"]', {\n              checked: this.selection.indexOf(bioMap) !== -1,\n              onclick: () => this._onToggleSelection(bioMap)\n            }),\n            m('span.label-body', bioMap.uniqueName)\n          ]);\n        }),\n        m('button', {\n          class: haveSelection ? 'button-primary' : 'button',\n          disabled: !haveSelection,\n          autocomplete: 'off', // firefox workaround for disabled state\n          onclick: evt => this._onRemove(evt)\n        }, [\n          m('i.material-icons', 'remove_circle_outline'),\n          'Remove Selected'\n        ]),\n        m('button.button', {onclick: evt => this._onCancel(evt)}, [\n          m('i.material-icons', 'cancel'),\n          'Cancel'\n        ])\n      ])\n    ]);\n  }\n}\n","/**\n * A mithril component for map removal dialog\n */\nimport m from 'mithril';\n\nexport class MapAdditionDialog {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.model = vnode.attrs.model;\n    this.onDismiss = vnode.attrs.onDismiss;\n    this.selection = null;\n  }\n\n  /**\n   * event handler for cancel button.\n   * @param evt\n   * @private\n   */\n\n  _onCancel(evt) {\n    evt.preventDefault();\n    this.onDismiss(evt);\n  }\n\n  /**\n   * event handler for add-on-right button\n   * @param evt\n   * @private\n   */\n\n  _onAddRight(evt) {\n    const i = this.model.bioMaps.length;\n    this.model.addMap(this.selection, i);\n    evt.preventDefault();\n    this.onDismiss(evt);\n  }\n\n  /**\n   * event handler for add-on-left button\n   * @param evt\n   * @private\n   */\n\n  _onAddLeft(evt) {\n    this.model.addMap(this.selection, 0);\n    evt.preventDefault();\n    this.onDismiss(evt);\n  }\n\n  /**\n   * event handler for radio button change.\n   * @param evt\n   * @param map\n   * @private\n   */\n\n  _onSelection(evt, map) {\n    evt.preventDefault();\n    this.selection = map;\n  }\n\n  /**\n   * mithril component render callback.\n   * @returns {*}\n   */\n\n  view() {\n    const allMaps = this.model.allMaps || [];\n    return m('div.cmap-map-addition-dialog', [\n      m('h5', 'Add Map'),\n      m('form', [\n        m('table.u-full-width', [\n          m('thead',\n            m('tr', [m('th', 'Data Source'), m('th', 'Available Maps')])\n          ),\n          m('tbody',\n            this.model.sources.map(source => {\n              return m('tr', [\n                m('td', source.id),\n                m('td', allMaps.filter(map => {\n                    return (map.source === source &&\n                      this.model.bioMaps.indexOf(map) === -1);\n                  }).map(map => {\n                    return m('label', [\n                      m('input[type=\"radio\"]', {\n                        name: `maps4${source.id}`,\n                        checked: this.selection === map,\n                        value: map.uniqueName,\n                        onchange: (evt) => this._onSelection(evt, map)\n                      }),\n                      m('span[class=\"label-body\"]', map.name)\n                    ]);\n                  })\n                )\n              ]);\n            })\n          )\n        ])\n      ]),\n      m('button', {\n          disabled: !this.selection,\n          class: this.selection ? 'button-primary' : 'button',\n          onclick: evt => this._onAddLeft(evt)\n        }, [\n          m('i.material-icons', 'keyboard_arrow_left'),\n          'Add Map On Left'\n        ]\n      ),\n      m('button.button', {\n          disabled: !this.selection,\n          class: this.selection ? 'button-primary' : 'button',\n          onclick: evt => this._onAddRight(evt)\n        }, [\n          m('i.material-icons', 'keyboard_arrow_right'),\n          'Add Map On Right'\n        ]\n      ),\n      m('button.button', {onclick: evt => this._onCancel(evt)}, [\n        m('i.material-icons', 'cancel'),\n        'Cancel'\n      ])\n    ]);\n  }\n}\n","/**\n * A mithril component for configuration import/export\n */\nimport m from 'mithril';\nimport {featureUpdate} from '../../topics';\nimport PubSub from 'pubsub-js';\n\nexport class ConfigurationDialog {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle method\n   */\n  /**\n   *\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.model = vnode.attrs.model;\n    let cd = {};\n    this.model.bioMaps.forEach(bioMap => {\n      cd[bioMap.name] = {\n        config: bioMap.config,\n        name: bioMap.name,\n        qtlGroups: bioMap.qtlGroups,\n        source: bioMap.source.id\n      };\n    });\n\n    ConfigData.base = JSON.stringify(cd, null, 2);\n    ConfigData.updated = JSON.stringify(cd, null, 2);\n\n    this.onDismiss = vnode.attrs.onDismiss;\n    this.selection = null;\n  }\n\n  /**\n   * event handler for cancel button.\n   * @param evt\n   * @private\n   */\n\n  _onCancel(evt) {\n    evt.preventDefault();\n    this.onDismiss(evt);\n  }\n\n  /**\n   * event handler for use  new configuration button\n   * @param evt\n   * @private\n   */\n\n  _onUpdated(evt) {\n    let newConfig = JSON.parse(ConfigData.updated);\n    let finalConfig = [];\n    this.model.allMaps.forEach(map => {\n      for (let name in newConfig) {\n        if (newConfig.hasOwnProperty(name) && name === map.name && newConfig[name].source === map.source.id) {\n          console.log()\n          let item = map;\n          item.config = newConfig[name].config;\n          if(newConfig[name].config.tracks) {\n            let tracks = JSON.parse(JSON.stringify(newConfig[name].config.tracks));\n            delete newConfig[name].config.tracks;\n            item.tracks = tracks;\n          }\n          finalConfig.push(item);\n        }\n      }\n    });\n    this.model.bioMaps = finalConfig;\n    for (let i = 0; i < finalConfig.length; i++) {\n      PubSub.publish(featureUpdate, {mapIndex: i});\n    }\n    this.onDismiss(evt);\n  }\n\n  /**\n   * mithril component render callback.\n   * @returns {*}\n   */\n\n  view() {\n    //const allMaps = this.model.allMaps || [];\n    return m('div.cmap-map-addition-dialog', [\n      m('h5', 'Configuration Details'),\n      m('form', [\n        m('textarea', {\n            style: 'width:50%;height:600%',\n            value: ConfigData.updated,\n            onchange: function (e) {\n              e.preventDefault();\n              ConfigData.updated = String(e.currentTarget.value);\n            }\n          }\n        )\n      ]),\n      m('button', {\n          class: 'button',\n          onclick: evt => this._onUpdated(evt)\n        }, [\n          m('i.material-icons', 'mode_edit'),\n          'Use new configuration'\n        ]\n      ),\n      m('button.button', {onclick: evt => this._onCancel(evt)}, [\n        m('i.material-icons', 'cancel'),\n        'Cancel'\n      ])\n    ]);\n  }\n}\n\n/**\n *\n * @type {{base: string, updated: string, setBase: ConfigData.setBase, setUpdated: ConfigData.setUpdated}}\n */\n\nlet ConfigData = {\n  base: '',\n  updated: '',\n  setBase: function (value) {\n    ConfigData.base = value;\n  },\n  setUpdated: function (value) {\n    ConfigData.updated = value;\n  }\n};\n","/**\n * A mithril component for map removal dialog\n */\nimport m from 'mithril';\nimport {DataSourceModel} from '../../model/DataSourceModel';\n\nexport class UploadDialog {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.model = vnode.attrs.model;\n    this.onDismiss = vnode.attrs.onDismiss;\n    UploadData.new = false;\n    UploadData.setName('');\n    UploadData.file = '';\n    this.selection = null;\n  }\n\n  /**\n   * event handler for cancel button.\n   * @param evt\n   * @private\n   */\n\n  _onCancel(evt) {\n    evt.preventDefault();\n    this.onDismiss(evt);\n  }\n\n  /**\n   * event handler for add-on-right button\n   * @param evt\n   * @private\n   */\n\n  _onAddData(evt) {\n    let sources = [];\n    if (!this.selection) {\n      this.selection = {\n        id: UploadData.newName,\n        filters: [],\n        linkouts: [],\n        method: 'GET',\n        url: UploadData.file !== '' ? UploadData.file : UploadData.loc,\n        config: {},\n        parseResult: {data: []}\n      };\n    }\n\n    const oURL = this.selection.url;\n    this.selection.url = UploadData.file !== '' ? UploadData.file : UploadData.loc;\n    let cfg = [this.selection];\n\n    let promises = cfg.map(cfg => {\n      let dsm = new DataSourceModel(cfg);\n      sources.push(dsm);\n      return dsm.load();\n    });\n\n    Promise.all(promises).then(() => {\n      sources.forEach(src => {\n        // change names to indicate uploaded data\n        if (UploadData.new) {\n          this.model.sources.push(src);\n        }\n        src.parseResult.data.forEach(data => data.feature_type_acc = 'Uploaded_' + data.feature_type_acc);\n        // update parseResults and all maps to reflect new data\n        this.selection.parseResult.data = this.selection.parseResult.data.concat(src.parseResult.data);\n        this.model.allMaps = this.model.sources.map(src => Object.values(src.bioMaps)).concatAll();\n        // update active view models to show new data\n        this.model.bioMaps.forEach(activeMap => {\n          this.model.allMaps.filter(map => {\n            return ((map.name === activeMap.name &&\n              activeMap.source.id === map.source.id));\n          }).forEach(match => {\n            activeMap.features = match.features;\n            activeMap.tags = match.tags;\n          });\n        });\n      });\n      this.selection.url = oURL;\n    }).catch(err => {\n      const msg = `While loading data source, ${err}`;\n      console.error(msg);\n      console.trace();\n      alert(msg);\n    });\n\n    evt.preventDefault();\n    this.onDismiss(evt);\n  }\n\n  /**\n   * event handler for radio button change.\n   * @param evt\n   * @param map\n   * @private\n   */\n\n  _onSelection(evt, map) {\n    evt.preventDefault();\n    this.selection = map;\n    UploadData.toggleNew(this.selection);\n  }\n\n  /**\n   * mithril component render callback.\n   * @returns {*}\n   */\n\n  view() {\n    //const allMaps = this.model.allMaps || [];\n    return m('div.cmap-map-addition-dialog', [\n      m('h5', 'Add Map'),\n      m('p', 'Currently only one file may be added at a time. If both a URL and a local file are provided, preference will be given to the local file.'),\n      m('form', [\n        m('table.u-full-width', [\n          m('thead', [\n            m('tr', [m('th', 'URL'), m('th', m('input[type=text]', {\n              oninput: m.withAttr('value', UploadData.setLoc),\n              value: UploadData.loc,\n              style: 'width:60%;'\n            }))])\n            , m('tr', [m('th', 'Local File'), m('th', m('input[type=file]', {\n              onchange: m.withAttr('files', UploadData.setFile),\n              file: UploadData.files\n            }))])]\n          ),\n          m('tbody',\n            m('tr', [\n              m('td', 'Target Map Set'),\n              m('td', [\n                  m('label', [\n                    m('input[type=\"radio\"]', {\n                      name: 'maps4new',\n                      checked: UploadData.new,\n                      value: 'newMap',\n                      onchange: (evt) => this._onSelection(evt, null)\n                    }), m('input[type=text]', {\n                      oninput: m.withAttr('value', UploadData.setName),\n                      value: UploadData.newName\n                    })\n                  ])\n                ].concat(this.model.sources.map(map => {\n                  return m('label', [\n                    m('input[type=\"radio\"]', {\n                      name: `maps4${map.id}`,\n                      checked: this.selection === map,\n                      value: map.id,\n                      onchange: (evt) => this._onSelection(evt, map)\n                    }),\n                    m('span[class=\"label-body\"]', map.id)\n                  ]);\n                })\n                )\n              )\n            ])\n          )\n        ])\n      ]),\n      m('button', {\n          //disabled unless a selection is made, or a new set is selected *and* there is a location or file state)\n          disabled: !((this.selection || UploadData.new) && (UploadData.loc !== '' || UploadData.file !== '')),\n          class: this.selection || UploadData.new ? 'button-primary' : 'button',\n          onclick: evt => this._onAddData(evt)\n        }, [\n          m('i.material-icons', 'input'),\n          'Add Data to Map'\n        ]\n      ),\n      m('button.button', {onclick: evt => this._onCancel(evt)}, [\n        m('i.material-icons', 'cancel'),\n        'Cancel'\n      ])\n    ]);\n  }\n}\n\n/**\n *\n * @type {{loc: string, file: string, newName: string, new: boolean, setLoc: UploadData.setLoc, setName: UploadData.setName, setFile: UploadData.setFile, toggleNew: UploadData.toggleNew}}\n */\n\nlet UploadData = {\n  loc: '',\n  file: '',\n  newName: '',\n  new: false,\n  setLoc: function (value) {\n    UploadData.loc = value;\n  },\n  setName: function (value) {\n    UploadData.newName = value;\n  },\n  setFile: function (files) {\n    let reader = new FileReader();\n    reader.onload = function (e) {\n      UploadData.file = e.target.result;\n    };\n    reader.readAsDataURL(files[0]);\n  },\n  toggleNew: function (selection) {\n    UploadData.new = !selection;\n  }\n};\n\n","/**\n * A mithril component of the UI tools in a div (toolbar).\n */\nimport m from 'mithril';\n\nimport {ResetButton} from './ResetButton';\nimport {RemoveMapButton} from './RemoveMapButton';\nimport {AddMapButton} from './AddMapButton';\nimport {ConfigurationButton} from './ConfigurationButton';\nimport {UploadButton} from './UploadButton';\n//import {FilterButton} from './FilterButton';\nimport {MapRemovalDialog} from './MapRemovalDialog';\nimport {MapAdditionDialog} from './MapAdditionDialog';\nimport {ConfigurationDialog} from './ConfigurationDialog';\nimport {UploadDialog} from './UploadDialog';\n\nexport class Tools {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.appState = vnode.attrs.appState;\n    this.currentDialog = vnode.attrs.dialog;\n  }\n\n  /**\n   * mithril component render method\n   * @returns {*}\n   */\n\n  view() {\n    return m('div.cmap-tools', [\n      m('div.cmap-toolbar.cmap-hbox', [\n        m(ResetButton),\n        //m(FilterButton),\n        m(AddMapButton, {\n          onclick: () => this.currentDialog = MapAdditionDialog\n        }),\n        m(RemoveMapButton, {\n          onclick: () => this.currentDialog = MapRemovalDialog\n        }),\n        m(ConfigurationButton, {\n          onclick: () => this.currentDialog = ConfigurationDialog\n        }),\n        m(UploadButton, {\n          onclick: () => this.currentDialog = UploadDialog\n        })\n      ]),\n      this.currentDialog && m(this.currentDialog, {\n        model: this.appState,\n        onDismiss: () => this.currentDialog = null,\n      })\n    ]);\n  }\n}\n","/**\n * Header\n */\nimport m from 'mithril';\n\nexport class Header {\n  // constructor() - prefer do not use in mithril components\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.appState = vnode.attrs.appState;\n  }\n\n  /**\n   * Mithril lifecycle component\n   * @returns {*} cmap-header\n   */\n\n  view() {\n    return m('div.cmap-hbox',\n      m('h4.cmap-header', [\n        'cmap-js ',\n        m('span.cmap-header', this.appState.header)\n      ]));\n  }\n}\n","/**\n * StatusBar\n * A mithril component of a status bar and/or footer.\n */\nimport m from 'mithril';\n\nexport class StatusBar {\n\n  // constructor() - prefer do not use in mithril components\n  /**\n   *\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    this.appState = vnode.attrs.appState;\n  }\n\n  /**\n   *\n   * @returns {*}\n   */\n\n  view() {\n    return m('div', [\n      m('div.cmap-attribution', this.appState.attribution),\n      m('div', {id: 'cmap-disclaimer'}, 'cmap-js is still in alpha. As the software is still in development, the current state of the project may not reflect the final release.'),\n      m('div.cmap-footer', [\n        this.appState.busy ? m('img[src=images/ajax-loader.gif]') : '',\n        this.appState.status\n      ])\n    ]);\n  }\n}\n","/**\n * CircosLayout\n * A mithril component for circos-style layout of BioMaps.\n */\nimport m from 'mithril';\nimport {mix} from '../../../mixwith.js/src/mixwith';\n\nimport {LayoutBase} from './LayoutBase';\nimport {Bounds} from '../../model/Bounds';\nimport {RegisterComponentMixin} from '../RegisterComponentMixin';\n\nconst radians = degrees => degrees * Math.PI / 180;\n\n//const degrees = radians => radians * 180 / Math.PI; // TODO: remove if unused\n\nexport class CircosLayout\n  extends mix(LayoutBase)\n    .with(RegisterComponentMixin) {\n\n  // constructor() - prefer do not use in mithril components\n  /**\n   *\n   * @private\n   */\n\n  _layout() {\n    let domRect = this.el.getBoundingClientRect();\n    if (!domRect.width || !domRect.height) {\n      // may occur when component is created but dom element has not yet filled\n      // available space; expect onupdate() will occur.\n      console.warn('deferring layout');\n      return;\n    }\n    let newBounds = new Bounds(domRect);\n    let dirty = !Bounds.equals(this.domBounds, newBounds);\n    this.domBounds = newBounds;\n    /* update child elements with their bounds */\n    let radius = this.domBounds.width > this.domBounds.height\n      ? this.domBounds.height * 0.4 : this.domBounds.width * 0.4;\n    let n = this.bioMaps.length;\n    let center = {\n      x: Math.floor(this.domBounds.width * 0.5),\n      y: Math.floor(this.domBounds.height * 0.5)\n    };\n    let degreesPerChild = 360 / n;\n    let childWidth = Math.floor(1.1 * this.domBounds.width / n);\n    let childHeight = Math.floor(childWidth * 0.6);\n    let startDegrees = -180;\n    let degrees = startDegrees;\n    this.bioMaps.forEach(child => {\n      let rad = radians(degrees);\n      let x = center.x - Math.floor(childWidth * 0.5) + Math.floor(radius * Math.cos(rad));\n      let y = center.y - Math.floor(childHeight * 0.5) + Math.floor(radius * Math.sin(rad));\n      // noinspection JSSuspiciousNameCombination\n      // noinspection JSSuspiciousNameCombination\n      child.domBounds = new Bounds({\n        left: x,\n        top: y,\n        width: childHeight, // swap the width and height\n        height: childWidth\n      });\n      child.rotation = Math.floor(degrees) + startDegrees;\n      degrees += degreesPerChild;\n    });\n    if (dirty) m.redraw();\n  }\n\n  /* mithril render callback */\n  /**\n   *\n   * @returns {*}\n   */\n  view() {\n    return m('div.cmap-layout-circos',\n      this.children.map(m)\n    );\n  }\n}\n","/**\n * LayoutContainer\n * A mithril component to wrap the current layout component inside of a\n * scrollable div.\n */\nimport m from 'mithril';\nimport PubSub from 'pubsub-js';\nimport {mix} from '../../../mixwith.js/src/mixwith';\n\nimport {HorizontalLayout} from './HorizontalLayout';\nimport {CircosLayout} from './CircosLayout';\nimport {reset} from '../../topics';\nimport {Bounds} from '../../model/Bounds';\nimport {RegisterComponentMixin} from '../RegisterComponentMixin';\n\n// define allowed min/max range for scale (zoom operation)\nconst SCALE = Object.freeze({min: 0.05, max: 2});\n\nexport class LayoutContainer extends mix().with(RegisterComponentMixin) {\n\n  // constructor() - prefer do not use in mithril components\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.appState = vnode.attrs.appState;\n    this.vnode = vnode;\n    PubSub.subscribe(reset, () => this._onReset());\n\n    // create some regular expressions for faster dispatching of events\n    this._gestureRegex = {\n      pan: new RegExp('^pan'),\n      pinch: new RegExp('^pinch'),\n      tap: new RegExp('^tap'),\n      wheel: new RegExp('^wheel')\n    };\n  }\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    this.el = vnode.dom; // this is the outer m('div') from view()\n    //this._setupEventHandlers(this.el);\n    vnode.state.bounds = this.bounds = new Bounds(this.el.getBoundingClientRect());\n    vnode.state.contentBounds = this.contentBounds = new Bounds({\n      left: 0,\n      top: 0,\n      width: this.bounds.width,\n      height: this.bounds.height\n    });\n    // save these dimensions for 'reset' event\n    this.originalContentBounds = new Bounds(this.contentBounds);\n  }\n\n  /**\n   * mithril lifecycle method\n   * @param vnode\n   */\n\n  onupdate(vnode) {\n    this.bounds = new Bounds(vnode.dom.getBoundingClientRect());\n  }\n\n  /**\n   * mithril component render method\n   * @param vnode\n   * @returns {*}\n   */\n\n  view(vnode) {\n    let b = this.contentBounds || {}; // relative bounds of the layout-container\n    let scale = this.appState.tools.zoomFactor;\n    return m('div.cmap-layout-container', {\n      style: `left: ${b.left}px; top: ${b.top}px;\n              width: ${b.width}px; height: ${b.height}px;\n              transform: scale(${scale})`\n    }, [\n      this.appState.tools.layout === HorizontalLayout\n        ?\n        m(HorizontalLayout, {\n          appState: this.appState,\n          layoutBounds: this.bounds,\n          contentBounds: vnode.state.contentBounds\n        })\n        :\n        m(CircosLayout, {appState: this.appState, layoutBounds: this.bounds})\n    ]);\n  }\n\n  /**\n   * handle the event from _dispatchGestureEvt. Returns true or false\n   * to stop or continue event propagation.\n   * @param evt\n   * @returns {boolean}\n   */\n\n  handleGesture(evt) {\n    if (evt.type.match(this._gestureRegex.pan)) {\n      return this._onPan(evt);\n    }\n    else if (evt.type.match(this._gestureRegex.pinch)) {\n      return this._onZoom(evt);\n    }\n    else if (evt.type.match(this._gestureRegex.wheel)) {\n      return this._onZoom(evt);\n    }\n    return false; // do not stop event propagation\n  }\n\n  /**\n   *\n   * @param evt\n   * @returns {boolean}\n   * @private\n   */\n\n  _onZoom(evt) {\n    // TODO: utilize the distance of touch event for better interaction\n    const normalized = evt.deltaY / this.bounds.height;\n    const z = this.appState.tools.zoomFactor + normalized;\n    // noinspection Annotator\n    this.appState.tools.zoomFactor = Math.clamp(z, SCALE.min, SCALE.max);\n    m.redraw();\n    return true; // stop evt propagation\n  }\n\n  /**\n   *\n   * @param evt\n   * @returns {boolean}\n   * @private\n   */\n\n  _onPan(evt) {\n    console.log('LayoutContainer -> onPan', evt);\n    // hammer provides the delta x,y in a distance since the start of the\n    // gesture so need to convert it to delta x,y for this event.\n    if (evt.type === 'panend') {\n      this.lastPanEvent = null;\n      return true;\n    }\n    let delta = {};\n    if (this.lastPanEvent) {\n      delta.x = -1 * (this.lastPanEvent.deltaX - evt.deltaX);\n      delta.y = -1 * (this.lastPanEvent.deltaY - evt.deltaY);\n    }\n    else {\n      delta.x = evt.deltaX;\n      delta.y = evt.deltaY;\n    }\n    this.contentBounds.left += delta.x;\n    //this.contentBounds.top += delta.y;\n    m.redraw();\n    this.lastPanEvent = evt;\n    return true; // stop event propagation\n  }\n\n  /**\n   *\n   * @private\n   */\n\n  _onReset() {\n    this.contentBounds = new Bounds(this.originalContentBounds);\n    m.redraw();\n  }\n}\n","/**\n * UI\n * A mithril component presenting all DOM aspects of user-interface.\n */\nimport m from 'mithril';\nimport Hammer from 'hammerjs';\nimport Hamster from 'hamsterjs';\nimport {mix} from '../../mixwith.js/src/mixwith';\nimport PubSub from 'pubsub-js';\n\nimport {Tools} from './tools/Tools';\nimport {Header} from './Header';\nimport {StatusBar} from './StatusBar';\nimport {LayoutContainer} from './layout/LayoutContainer';\nimport {RegisterComponentMixin} from './RegisterComponentMixin';\nimport {reset} from '../topics';\n\nexport class UI extends mix().with(RegisterComponentMixin) {\n\n  /**\n   * Create a UI instance\n   * @param {Object} appState - instance of model/AppModel.\n   */\n\n  constructor(appState) {\n    super();\n    this.appState = appState;\n  }\n\n  /**\n   * Mithril lifecycle method\n   * @param vnode\n   */\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    this.el = vnode.dom;\n    this._setupEventHandlers(this.el);\n  }\n\n  /**\n   * mithril component render callback\n   * @returns {*} mithril vnode component\n   */\n\n  view() {\n    const childAttrs = {\n      appState: this.appState,\n    };\n    this._logRenders();\n    return m('div.cmap-layout.cmap-vbox', [\n      m(Header, childAttrs),\n      m(Tools, childAttrs),\n      m('div#cmap-layout-titles', {style: 'display:inline-flex;'}),\n      [m('div.cmap-menu-viewport#cmap-menu-viewport', {style: 'display:none;'}),\n        m('div.cmap-layout-viewport.cmap-hbox', {id: 'cmap-layout-viewport', style: 'position:relative;'},\n          m(LayoutContainer, {\n            appState: this.appState,\n            registerComponentCallback: (comp) => this._layoutContainer = comp\n          })\n        )],\n      m(StatusBar, childAttrs)\n    ]);\n  }\n\n  /**\n   *\n   * @private\n   */\n\n  _logRenders() {\n    if (!this.count) this.count = 0;\n    this.count += 1;\n    console.log(`*** mithril render #${this.count} ***`);\n  }\n\n  /**\n   *\n   * @private\n   */\n\n  _setupEventHandlers() {\n    this._setupMousewheel();\n    this._setupGestures();\n    this._setupPubSub();\n  }\n\n  /**\n   * Setup pubsub subscriptions\n   * @private\n   */\n\n  _setupPubSub() {\n    PubSub.subscribe(reset, () => {\n      // if the viewport were refactored into it's own mithril component, then\n      // doing a lookup by ID would be unnecessary.\n      const viewport = document.getElementById('cmap-layout-viewport');\n      viewport.scrollTop = 0;\n      viewport.scrollLeft = 0;\n    });\n  }\n\n  /**\n   * setup mouse wheel (hamsterjs) handlers.\n   * @private\n   */\n\n  _setupMousewheel() {\n    const hamster = Hamster(this.el);\n    const hamsterHandler = (evt, delta, deltaX, deltaY) => {\n      // hamsterjs claims to normalizing the event object, across browsers,\n      // but at least in firefox it is not because deltaY is not on the evt.\n      evt.deltaY = deltaY; // workaround\n      // add an additional property to make it similar enough to the pinch\n      // gesture so event consumers can just implement one 'zoom', if they want.\n      evt.center = {x: evt.originalEvent.x, y: evt.originalEvent.y};\n      this._dispatchGestureEvt(evt);\n    };\n    hamster.wheel(hamsterHandler);\n  }\n\n  /**\n   * setup gesture (hammerjs) handlers.\n   * @private\n   */\n\n  _setupGestures() {\n    const hammer = Hammer(this.el);\n    const hammerHandler = (evt) => this._dispatchGestureEvt(evt);\n    const hammerEvents = 'panmove panend panstart pinchmove pinchend tap';\n    hammer.get('pan').set({direction: Hammer.DIRECTION_ALL});\n    hammer.get('pinch').set({enable: true});\n    hammer.on(hammerEvents, hammerHandler);\n  }\n\n  /**\n   * Custom dispatch of ui events. Layout elements like BioMap and\n   * CorrespondenceMap are visually overlapping, and so do not fit cleanly into\n   * the js event capture or bubbling phases. Query the dom at the events\n   * coordinates, and dispatch the event to child who\n   * a) intersects with this point\n   * b) wants to handle this event (it can decide whether to based on it's\n   *    canvas own scenegraph contents, etc.)\n   *\n   * @param evt\n   * @private\n   */\n\n  _dispatchGestureEvt(evt) {\n    let hitElements = document.elementsFromPoint(evt.center.x, evt.center.y);\n    let filtered = hitElements.filter(el => {\n      return (el.mithrilComponent && el.mithrilComponent.handleGesture);\n    });\n    // dispatch event to all the mithril components, until one returns true;\n    // effectively the same as 'stopPropagation' on a normal event bubbling.\n    filtered.some(el => {\n      return el.mithrilComponent.handleGesture(evt);\n    });\n  }\n\n  /**\n   * Gesture event recapture and force upon the LayoutContainer. This is to\n   * prevent the the layout container from missing events after it has partially\n   * moved out of the viewport.\n   *\n   * @param evt\n   */\n\n  handleGesture(evt) {\n    this._layoutContainer.handleGesture(evt);\n  }\n}\n","/**\n * CMAP\n */\n\nimport m from 'mithril';\n\nimport {AppModel} from './../model/AppModel';\nimport {UI} from './UI';\n\n/* istanbul ignore next: mithril-query does not work with m.mount, and dom id is hardcoded as well */\nexport class CMAP {\n\n  /**\n   *\n   * @param configURL\n   */\n\n  load(configURL) {\n    this.rootElement = document.getElementById('cmap-ui');\n    this.appState = new AppModel({});\n    this.UI = new UI(this.appState);\n    m.mount(this.rootElement, this.UI);\n\n    if (configURL === null) {\n      configURL = 'cmap.json';\n    }\n\n    this.appState.status = 'loading configuration file...';\n    this.appState.busy = true;\n\n    m.request(configURL).then(config => {\n      let numSources = config.sources.length;\n      let plural = numSources > 1 ? 's' : '';\n      this.appState.status = `loading ${numSources} data file${plural}...`;\n      let promises = this.appState.load(config);\n      Promise.all(promises).then(() => {\n        this.appState.status = '';\n        this.appState.busy = false;\n      });\n    }).catch(err => {\n      // TODO: make a nice mithril component to display errors in the UI\n      console.error(err);\n      console.trace();\n      alert(`While fetching cmap.json config file, ${err}`);\n    });\n  }\n}\n","/**\n * @file\n * Instantiate the CMAP class, and initialize it.\n * Also the entry point for bundling of javascript and css.\n */\nimport './polyfill/index';\nimport './developmentTooling';\n\nimport '../node_modules/normalize.css/normalize.css';\nimport '../node_modules/skeleton-css/css/skeleton.css';\nimport './ui/css/cmap.css';\nimport './util/concatAll';\n\nimport {CMAP} from './ui/CMAP';\n\n/* istanbul ignore next: unable to test this module because of css imports */\n/**\n * @description Initializes CMAP window with CSS and makes sure that the initial\n * DOM events are properly handled.\n *\n */\n\nconst main = () => {\n  // FIXME: this way of exposing the cmap object seems kind of clunky. For\n  // implementing a js api, maybe using this rollup plugin would be\n  // useful: https://github.com/rollup/rollup-plugin-multi-entry\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    // support commonjs loading, if it exists.\n    module.exports = CMAP;\n  }\n  else {\n    // otherwise put cmap constructor in window global\n    window.cmap = CMAP;\n  }\n  const evtName = 'DOMContentLoaded';\n  const loadedHandler = () => {\n    let _cmap = new CMAP();\n    _cmap.load(new URLSearchParams(window.location.search).get('config'));\n    document.removeEventListener(evtName, loadedHandler);\n  };\n  document.addEventListener(evtName, loadedHandler);\n};\n\nmain();\n"],"names":["document","elementsFromPoint","x","y","parents","parent","elementFromPoint","push","style","pointerEvents","forEach","this","selectedMap","reset","layout","dataLoaded","mapRemoved","mapAdded","mapReorder","featureUpdate","monitorPubSub","logger","topic","data","log","keys","topics","subscribe","t","ENV","immediateExceptions","Array","prototype","concatAll","results","subArray","apply","global","mix","superclass","MixinBuilder","mixins","reduce","c","m","isNil","o","undefined","Bounds","top","left","bottom","right","width","height","allowSubpixel","_bottom","_left","_right","_top","_height","_width","Math","floor","otherBounds","equals","areaEquals","val","bounds1","bounds2","p","n1","n2","i","PROPS","length","area","LayoutBase","vnode","appState","attrs","el","dom","bounds","getBoundingClientRect","translateScale","point","baseScale","newScale","invert","loc","stop","start","pageToCanvas","evt","canvas","getOffset","_x","_y","isNaN","offsetLeft","offsetTop","scrollLeft","scrollTop","offsetParent","pageOffset","srcEvent","pageX","pageY","define","DrawLazilyMixin","wantedBounds","_drawLazilyTimeoutId","clearTimeout","lastDrawnMithrilBounds","tid1","setTimeout","drawLazily","tid2","lastDrawnCanvasBounds","draw","RegisterComponentMixin","babelHelpers.get","registerComponentCallback","mithrilComponent","require$$0","SceneGraphNodeBase","rotation","tags","_rotation","_tags","_children","locMap","rbush","_visble","gb","globalBounds","node","removeChild","indexOf","index","splice","ctx","children","child","b","_bounds","degrees","assert","vis","childVisible","map","all","concat","item","hits","childMap","hitMap","SceneGraphNodeCanvas","model","verticalScale","info","_gestureRegex","RegExp","context2d","getContext","domBounds","isEmptyArea","selectedClass","selected","clearRect","save","visible","restore","dirty","type","match","tap","_onTap","pinch","_onZoom","wheel","pan","_onPanEnd","_onPanStart","_onPan","warn","sel","selection","bioMaps","redraw","publish","direction","Hammer","DIRECTION_VERTICAL","with","SceneGraphNodeGroup","params","cVis","SceneGraphNodeTrack","FeatureMark","bioMap","featureModel","config","name","featureMap","offset","view","base","coordinates","pixelScaleFactor","lineWeight","beginPath","strokeStyle","lineColor","lineWidth","moveTo","lineTo","stroke","MapBackbone","backboneWidth","backbone","fillStyle","fillColor","fillRect","strokeRect","FeatureLabel","labelSize","font","labelFace","textAlign","labelColor","fillText","measureText","MapTrack","mC","mapCoordinates","addChild","markerGroup","labelGroup","filteredFeatures","features","filter","fmData","lmData","featureMarks","fm","marker","lm","load","coord","visc","search","labels","psf","step","knn","last","minY","maxY","bbGb","Dot","radius","depth","displayWidth","arc","PI","fill","manhattanRuler","manhattanPlot","globalAlpha","cb","rulerColor","rulerWeight","rulerMinorMark","rulerMajorMark","String","lines","line","value","ManhattanPlot","trackPos","position","manhattanInfo","key","manhattan","hasOwnProperty","lineWeigth","featureLineWeight","featureLineColor","maxValue","baseData","sources","id","dataId","prefix","parseResult","mdata","targetField","max","log10","pField","ceil","locData","manhattanMarks","posField","ruler","QTL","initialConfig","filters","trackSpacing","internalPadding","y1","y2","leftLoc","leftArr","sort","a","stepOffset","stackEnd","y1pos","y2pos","qtlHeight","fontSize","fontStyle","textWidth","textStop","overlap","translate","rotate","QtlTrack","qtl","trackMinWidth","qtlConf","order","test","maxLoc","qtlMarks","insert","clear","FeatureTrack","bbGroup","tracks","tracksLeft","tracksRight","track","newFeatureTrack","trackLeft","padding","featureData","title","qtlGroup","Ruler","textFace","textSize","textColor","rulerPrecision","precision","rulerWidth","rulerPadding","innerSize","innerLineWeight","innerColor","innerLineColor","vStart","vStop","text","toFixed","BioMap","bioMapModel","layoutBounds","bioMapIndex","initialView","zoomDelta","steps","featureLabels","_layout","deltaY","mcv","zStart","zStop","_redrawViewport","globalPos","_loadHitMap","hit","display","names","innerHTML","join","zoomP","pStart","deltaX","_moveRuler","_pixelToCoordinate","corner","delta","rLeft","rRight","lCorner","rCorner","swap","swapV","lb","Group","tracksIndex","qtlRight","qtlLeft","bbw","qrw","childrenHits","loadLabelMap","cMaps","getElementsByClassName","call","CorrespondenceMark","featurePair","leftY","rightY","leftYStart","rightYStart","leftYStop","rightYStop","gbLeft","gbRight","Feature","source","aliases","Object","freeze","linkout","featuretypePattern","some","includes","featuretype","linkouts","typeLinkedBy","l","featuresInCommon","features1","features2","setupDict","dict","f","dict1","dict2","intersectedKeys","CorrespondenceMap","bioMapComponents","correspondenceMarks","gb1","corrData","coorGroup","bioMapCoordinates","commonFeatures","corrMark","feature","leftFeatures","rightFeatures","Menu","Popover","_generateInner","popover","links","isLinkingService","url","replace","typeHasLinkouts","target","href","_buttonTest","targetId","Links","request","then","result","targetName","getElementById","fetch","ColorPicker","state","colors","settings","baseColor","hidden","BaseSelector","SaturationSelector","ColorPreview","ColorBox","ColorApplyButton","ColorResetButton","currentColor","hueValueColor","rgbToHsv","hexToRgb","ptrPos","_posFromHsv","hGrad","createLinearGradient","addColorStop","vGrad","_locationChange","hueValue","hsv","_hsvFromPos","_changeColor","color","min","parseFloat","pos","h","s","msg","_hueUpdated","currentColors","grad","rgbStart","hsvToRgb","rgbStop","closePath","_sFromPos","round","nodeColor","withAttr","code","str","e","hex","parseInt","rgb","component","cmin","cmax","hue","sat","u","n","FeatureMenu","viewport","visibility","tagList","trackGroups","slice","defaultSettings","trackConfig","controls","_applyButton","_cancelButton","_removeButton","modalDiv","CloseButton","TitleBox","TrackMenu","count","mount","mapIndex","newData","picker","dropdowns","dropSettings","Dropdown","parentDiv","selectedIndex","tag","closeModal","TitleComponent","domOrder","titleOrder","leftBound","rightBound","leftStart","handleGesture","zIndex","dispOffset","contentBounds","bMap","class","lastPanEvent","selLeftEdge","leftMap","rightMap","leftSwapBound","rightSwapBound","movedMap","shiftScale","mw","BioMapComponent","imageSmoothingEnabled","HorizontalLayout","correspondenceMapComponents","popoverComponents","swapComponents","featureControls","modal","bioMapOrder","handler","_onDataLoaded","subscriptions","PubSub","_onReset","_onFeatureUpdate","_onReorder","unsubscribe","token","BioMapVnode","_layoutBioMaps","_layoutSwapComponents","_layoutFeatureControls","_layoutCorrespondenceMaps","_layoutPopovers","bmaps","sc","maps","featureGroup","childHeight","cursor","CorrMapComponent","BioMapModel","BioMapConfigModel","method","defaultConfig","DataSourceModel","bioConfig","cfg","configGroup","default","subkey","background","res","parser","parse","errors","error","includeRecord","d","col","column","testVal","operator","not","typeField","meta","fields","map_name","uniqueMapName","map_start","map_stop","feature_name","feature_aliases","split","feature_start","feature_stop","trace","AppModel","tools","status","busy","header","attribution","sourceConfigs","biomaps","promises","dsm","allMaps","values","src","defaultInitialView","setupInitialView","catch","err","viewConf","JSON","stringify","qtlGroups","zoomFactor","ResetButton","_onClick","RemoveMapButton","onclick","AddMapButton","ConfigurationButton","UploadButton","MapRemovalDialog","onDismiss","preventDefault","haveSelection","plural","_onToggleSelection","uniqueName","_onRemove","_onCancel","MapAdditionDialog","addMap","_onSelection","_onAddLeft","_onAddRight","ConfigurationDialog","cd","updated","newConfig","ConfigData","finalConfig","currentTarget","_onUpdated","UploadDialog","new","setName","file","UploadData","newName","oURL","feature_type_acc","activeMap","toggleNew","setLoc","setFile","files","_onAddData","reader","FileReader","onload","readAsDataURL","Tools","currentDialog","dialog","Header","StatusBar","radians","CircosLayout","domRect","newBounds","center","degreesPerChild","childWidth","startDegrees","rad","cos","sin","SCALE","LayoutContainer","originalContentBounds","scale","normalized","z","clamp","UI","_setupEventHandlers","childAttrs","_logRenders","comp","_layoutContainer","_setupMousewheel","_setupGestures","_setupPubSub","hamster","Hamster","hamsterHandler","originalEvent","_dispatchGestureEvt","hammer","hammerHandler","hammerEvents","get","set","DIRECTION_ALL","enable","on","hitElements","filtered","CMAP","configURL","rootElement","numSources","main","module","exports","cmap","evtName","loadedHandler","_cmap","URLSearchParams","window","location","removeEventListener","addEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAEA;EACE,MAAM,UAAU,GAAG,CAAC,IAAI,EAAE,UAAU,KAAK;IACvC,IAAI,YAAY,GAAG,OAAO,UAAU,KAAK,UAAU,GAAG,IAAI,GAAG,KAAK,CAAC;IACnE,IAAI,QAAQ,GAAG,OAAO,UAAU,KAAK,UAAU,GAAG,IAAI,GAAG,KAAK,CAAC;IAC/D,IAAI,UAAU,GAAG,OAAO,UAAU,KAAK,UAAU,GAAG,IAAI,GAAG,KAAK,CAAC;;IAEjE,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,EAAE;MAChC,YAAY,EAAE,YAAY;MAC1B,UAAU,EAAE,UAAU;MACtB,QAAQ,EAAE,QAAQ;MAClB,KAAK,EAAE,UAAU;KAClB,CAAC,CAAC;GACJ,CAAC;;EAEF,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC;EACzC,UAAU,CAAC,aAAa,EAAE,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;;EAEzC,MAAM,IAAI,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;;EAEjC,UAAU,CAAC,OAAO,EAAE,SAAS,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE;IACpE,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;MAC1B,OAAO,GAAG,CAAC;KACZ;;IAED,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;QACf,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC;QACnB,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC;QACpB,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC;QACpB,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;MACzB,OAAO,GAAG,CAAC;KACZ;;IAED,IAAI,CAAC,KAAK,QAAQ;QACd,CAAC,KAAK,CAAC,QAAQ,EAAE;MACnB,OAAO,CAAC,CAAC;KACV;;IAED,OAAO,CAAC,CAAC,GAAG,KAAK,KAAK,OAAO,GAAG,MAAM,CAAC;OACpC,MAAM,GAAG,KAAK,CAAC,GAAG,MAAM,CAAC;GAC7B,CAAC,CAAC;;EAEH,UAAU,CAAC,QAAQ,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE;IACtE,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;IACxD,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;GAChB,CAAC,CAAC;;EAEH,UAAU,CAAC,OAAO,EAAE,SAAS,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE;IAClD,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;GAC5C,CAAC,CAAC;;EAEH,UAAU,CAAC,SAAS,EAAE,SAAS,OAAO,CAAC,OAAO,EAAE;IAC9C,OAAO,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;GACnC,CAAC,CAAC;;EAEH,UAAU,CAAC,SAAS,EAAE,SAAS,OAAO,CAAC,OAAO,EAAE;IAC9C,OAAO,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;GACnC,CAAC,CAAC;CACJ;;AC3DD;;;;;;;AAOA,AAEA,IAAI,CAACA,SAASC,iBAAd,EAAiC;WACtBA,iBAAT,GAA6BA,iBAA7B;;;;AAIF,SAASA,iBAAT,CAA2BC,CAA3B,EAA8BC,CAA9B,EAAiC;MAC3BC,UAAU,EAAd;MACIC,SAAS,KAAK,CAAlB;KACG;QACGA,WAAWL,SAASM,gBAAT,CAA0BJ,CAA1B,EAA6BC,CAA7B,CAAf,EAAgD;eACrCH,SAASM,gBAAT,CAA0BJ,CAA1B,EAA6BC,CAA7B,CAAT;cACQI,IAAR,CAAaF,MAAb;aACOG,KAAP,CAAaC,aAAb,GAA6B,MAA7B;KAHF,MAIO;eACI,KAAT;;GANJ,QAQSJ,MART;UASQK,OAAR,CAAgB,UAAUL,MAAV,EAAkB;WACzBA,OAAOG,KAAP,CAAaC,aAAb,GAA6B,KAApC;GADF;SAGOL,OAAP;;;AC7BF;;;;;;AAMA,AAEA,yBACA;;;;;;;;;;;;;;;;;;;ACHA,CAAC,UAAU,IAAI,EAAE,OAAO,CAAC;IACrB,YAAY,CAAC;;IAEb,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;IAErB,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;IAEzB,OAAO,CAAC,MAAM,CAAC,CAAC;;;IAGhB,IAAI,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,GAAG,CAAC;QAC3C,MAAM,CAAC,WAAW,EAAE,OAAO,MAAM,CAAC,EAAE,CAAC,CAAC;;;KAGzC,MAAM,AAAI,AAA2B,AAAC;QACnC,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,CAAC,OAAO,EAAE;YACxC,OAAO,GAAG,cAAc,GAAG,MAAM,CAAC;SACrC;QACD,cAAc,GAAG,MAAM,CAAC;QACxB,cAAc,GAAG,OAAO,GAAG,MAAM,CAAC;KACrC;;CAEJ,CAAC,EAAE,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,MAAMO,cAAI,EAAE,UAAU,MAAM,CAAC;IACjE,YAAY,CAAC;;IAEb,IAAI,QAAQ,GAAG,EAAE;QACb,OAAO,GAAG,CAAC,CAAC,CAAC;;IAEjB,SAAS,OAAO,CAAC,GAAG,CAAC;QACjB,IAAI,GAAG,CAAC;;QAER,KAAK,GAAG,IAAI,GAAG,CAAC;YACZ,KAAK,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;gBAC1B,OAAO,IAAI,CAAC;aACf;SACJ;QACD,OAAO,KAAK,CAAC;KAChB;;;;;;IAMD,SAAS,cAAc,EAAE,EAAE,EAAE;QACzB,OAAO,SAAS,gBAAgB,EAAE;YAC9B,MAAM,EAAE,CAAC;SACZ,CAAC;KACL;;IAED,SAAS,mCAAmC,EAAE,UAAU,EAAE,OAAO,EAAE,IAAI,EAAE;QACrE,IAAI;YACA,UAAU,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;SAC/B,CAAC,OAAO,EAAE,EAAE;YACT,UAAU,EAAE,cAAc,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;SACxC;KACJ;;IAED,SAAS,qCAAqC,EAAE,UAAU,EAAE,OAAO,EAAE,IAAI,EAAE;QACvE,UAAU,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;KAC/B;;IAED,SAAS,cAAc,EAAE,eAAe,EAAE,cAAc,EAAE,IAAI,EAAE,mBAAmB,EAAE;QACjF,IAAI,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC;YACtC,cAAc,GAAG,mBAAmB,GAAG,qCAAqC,GAAG,mCAAmC;YAClH,CAAC,CAAC;;QAEN,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE,cAAc,EAAE,GAAG;YAC9C,OAAO;SACV;;QAED,KAAK,CAAC,IAAI,WAAW,CAAC;YAClB,KAAK,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBAC/B,cAAc,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC;aAC3D;SACJ;KACJ;;IAED,SAAS,sBAAsB,EAAE,OAAO,EAAE,IAAI,EAAE,mBAAmB,EAAE;QACjE,OAAO,SAAS,iBAAiB,EAAE;YAC/B,IAAI,KAAK,GAAG,MAAM,EAAE,OAAO,EAAE;gBACzB,QAAQ,GAAG,KAAK,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC;;;YAGxC,cAAc,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,mBAAmB,CAAC,CAAC;;;YAG5D,OAAO,QAAQ,KAAK,CAAC,CAAC,EAAE;gBACpB,KAAK,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC;gBACpC,QAAQ,GAAG,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;gBAClC,cAAc,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;aAC/D;SACJ,CAAC;KACL;;IAED,SAAS,qBAAqB,EAAE,OAAO,EAAE;QACrC,IAAI,KAAK,GAAG,MAAM,EAAE,OAAO,EAAE;YACzB,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,cAAc,EAAE,KAAK,EAAE,IAAI,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YAC7E,QAAQ,GAAG,KAAK,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC;;QAExC,QAAQ,CAAC,KAAK,IAAI,QAAQ,KAAK,CAAC,CAAC,EAAE;YAC/B,KAAK,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC;YACpC,QAAQ,GAAG,KAAK,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC;YACpC,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,cAAc,EAAE,KAAK,EAAE,IAAI,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACjF;;QAED,OAAO,KAAK,CAAC;KAChB;;IAED,SAAS,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE;QACxD,IAAI,OAAO,GAAG,sBAAsB,EAAE,OAAO,EAAE,IAAI,EAAE,mBAAmB,EAAE;YACtE,cAAc,GAAG,qBAAqB,EAAE,OAAO,EAAE,CAAC;;QAEtD,KAAK,CAAC,cAAc,EAAE;YAClB,OAAO,KAAK,CAAC;SAChB;;QAED,KAAK,IAAI,KAAK,IAAI,EAAE;YAChB,OAAO,EAAE,CAAC;SACb,MAAM;YACH,UAAU,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;SAC5B;QACD,OAAO,IAAI,CAAC;KACf;;;;;;;;IAQD,MAAM,CAAC,OAAO,GAAG,UAAU,OAAO,EAAE,IAAI,EAAE;QACtC,OAAO,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC,mBAAmB,EAAE,CAAC;KACtE,CAAC;;;;;;;;IAQF,MAAM,CAAC,WAAW,GAAG,UAAU,OAAO,EAAE,IAAI,EAAE;QAC1C,OAAO,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,mBAAmB,EAAE,CAAC;KACrE,CAAC;;;;;;;;;IASF,MAAM,CAAC,SAAS,GAAG,UAAU,OAAO,EAAE,IAAI,EAAE;QACxC,KAAK,OAAO,IAAI,KAAK,UAAU,CAAC;YAC5B,OAAO,KAAK,CAAC;SAChB;;;QAGD,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE,OAAO,EAAE,EAAE;YACtC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;SAC1B;;;;QAID,IAAI,KAAK,GAAG,MAAM,GAAG,MAAM,CAAC,EAAE,OAAO,CAAC,CAAC;QACvC,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;;;QAGhC,OAAO,KAAK,CAAC;KAChB,CAAC;;;;;;;;IAQF,MAAM,CAAC,aAAa,GAAG,UAAU,OAAO,EAAE,IAAI,EAAE;QAC5C,IAAI,KAAK,GAAG,MAAM,CAAC,SAAS,EAAE,OAAO,EAAE,UAAU;;YAE7C,MAAM,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC;YAC5B,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;SACjC,CAAC,CAAC;QACH,OAAO,MAAM,CAAC;KACjB,CAAC;;;;IAIF,MAAM,CAAC,qBAAqB,GAAG,SAAS,qBAAqB,EAAE;QAC3D,QAAQ,GAAG,EAAE,CAAC;KACjB,CAAC;;;;IAIF,MAAM,CAAC,kBAAkB,GAAG,SAAS,kBAAkB,CAAC,KAAK,CAAC;QAC1D,IAAI,CAAC,CAAC;QACN,KAAK,CAAC,IAAI,QAAQ,CAAC;YACf,IAAI,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACrD,OAAO,QAAQ,CAAC,CAAC,CAAC,CAAC;aACtB;SACJ;KACJ,CAAC;;;;;;;;;;;;;;;;;;;;;IAqBF,MAAM,CAAC,WAAW,GAAG,SAAS,KAAK,CAAC;QAChC,IAAI,qBAAqB,GAAG,SAAS,KAAK,EAAE;gBACpC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,IAAI,QAAQ,EAAE;oBACjB,KAAK,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;;wBAEvD,OAAO,IAAI,CAAC;qBACf;iBACJ;;gBAED,OAAO,KAAK,CAAC;aAChB;YACD,OAAO,MAAM,OAAO,KAAK,KAAK,QAAQ,MAAM,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,qBAAqB,CAAC,KAAK,CAAC,EAAE;YAC5G,OAAO,MAAM,CAAC,OAAO,IAAI,OAAO,KAAK,KAAK,QAAQ;YAClD,UAAU,GAAG,OAAO,KAAK,KAAK,UAAU;YACxC,MAAM,GAAG,KAAK;YACd,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;;QAElB,IAAI,OAAO,CAAC;YACR,MAAM,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YACjC,OAAO;SACV;;QAED,MAAM,CAAC,IAAI,QAAQ,EAAE;YACjB,KAAK,QAAQ,CAAC,cAAc,EAAE,CAAC,EAAE,EAAE;gBAC/B,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;;gBAEtB,KAAK,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;oBAC5B,OAAO,OAAO,CAAC,KAAK,CAAC,CAAC;oBACtB,MAAM,GAAG,KAAK,CAAC;;oBAEf,MAAM;iBACT;;gBAED,IAAI,UAAU,EAAE;oBACZ,MAAM,CAAC,IAAI,OAAO,EAAE;wBAChB,IAAI,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC;4BAClD,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;4BAClB,MAAM,GAAG,IAAI,CAAC;yBACjB;qBACJ;iBACJ;aACJ;SACJ;;QAED,OAAO,MAAM,CAAC;KACjB,CAAC;CACL,CAAC,EAAE;;;ACnRJ;;;;;AAKA,AAAO,IAAMC,cAAc,aAApB;AACP,AAAO,IAAMC,QAAQ,OAAd;AACP,AAAO,IAAMC,SAAS,QAAf;AACP,AAAO,IAAMC,aAAa,QAAnB;;;;AAIP,AAAO,IAAMC,aAAa,YAAnB;AACP,AAAO,IAAMC,WAAW,UAAjB;AACP,AAAO,IAAMC,aAAa,YAAnB;;AAEP,AAAO,IAAMC,gBAAgB,eAAtB;;;;;;;;;;;;;AChBP;;;;;;AAMA,AAEA,AAEA;;;;AAIA,IAAMC,gBAAgB,SAAhBA,aAAgB,GAAM;MACtBC,SAAS,SAATA,MAAS,CAACC,KAAD,EAAQC,IAAR,EAAiB;;YAEpBC,GAAR,OAAgBF,KAAhB,QAA0BC,IAA1B;GAFF;SAIOE,IAAP,CAAYC,MAAZ,EAAoBhB,OAApB,CAA4B,aAAK;;WAExBiB,SAAP,CAAiBC,CAAjB,EAAoBP,MAApB;GAFF;CALF;;AAWA,AAAIQ,AAAJ,AAA0B;SACjBC,mBAAP,GAA6B,IAA7B;;;;;;;;;;AC1BF;;;;;AAKAC,MAAMC,SAAN,CAAgBC,SAAhB,GAA4B,YAAY;MAClCC,UAAU,EAAd;OACKxB,OAAL,CAAa,UAAUyB,QAAV,EAAoB;YACvB5B,IAAR,CAAa6B,KAAb,CAAmBF,OAAnB,EAA4BC,QAA5B;GADF;SAGOD,OAAP;CALF;;;ACLA,AAAC,CAAC,WAAW;AACb,YAAY,CAAA;AACZ,SAAS,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE;CACrD,OAAO,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC;CAClM;AACD,KAAK,CAAC,SAAS,GAAG,SAAS,IAAI,EAAE;CAChC,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,OAAO,KAAK,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC;CACrH,IAAI,IAAI,IAAI,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,OAAO,KAAK,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,IAAI,KAAK,KAAK,GAAG,EAAE,GAAG,IAAI,EAAE,SAAS,EAAE,SAAS,CAAC;CACvI,OAAO,IAAI;CACX,CAAA;AACD,KAAK,CAAC,iBAAiB,GAAG,SAAS,iBAAiB,CAAC,QAAQ,EAAE;CAC9D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EACzC,QAAQ,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;EAC1C;CACD,OAAO,QAAQ;CACf,CAAA;AACD,IAAI,cAAc,GAAG,8EAA8E,CAAA;AACnG,IAAI,aAAa,GAAG,EAAE,CAAA;AACtB,IAAI,MAAM,GAAG,EAAE,CAAC,cAAc,CAAA;AAC9B,SAAS,OAAO,CAAC,MAAM,EAAE;CACxB,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE,OAAO,KAAK;CAClE,OAAO,IAAI;CACX;AACD,SAAS,eAAe,CAAC,QAAQ,EAAE;CAClC,IAAI,KAAK,EAAE,GAAG,GAAG,KAAK,EAAE,OAAO,GAAG,EAAE,EAAE,KAAK,GAAG,EAAE,CAAA;CAChD,OAAO,KAAK,GAAG,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;EAC7C,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;EACrC,IAAI,IAAI,KAAK,EAAE,IAAI,KAAK,KAAK,EAAE,EAAE,GAAG,GAAG,KAAK,CAAA;OACvC,IAAI,IAAI,KAAK,GAAG,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAA;OAClC,IAAI,IAAI,KAAK,GAAG,EAAE,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;OACrC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;GAC7B,IAAI,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;GACxB,IAAI,SAAS,EAAE,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;GACtF,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QAC5C,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,KAAK,EAAE,GAAG,SAAS,GAAG,SAAS,IAAI,IAAI,CAAA;GACvE;EACD;CACD,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,KAAK,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;CAC3D,OAAO,aAAa,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC;CACzD;AACD,SAAS,YAAY,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE;CAC7C,IAAI,QAAQ,GAAG,KAAK,EAAE,SAAS,EAAE,IAAI,CAAA;CACrC,IAAI,SAAS,GAAG,KAAK,CAAC,SAAS,IAAI,KAAK,CAAC,KAAK,CAAA;CAC9C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;EAC7C,IAAI,QAAQ,GAAG,EAAE,CAAA;EACjB,IAAI,IAAI,GAAG,IAAI,KAAK,EAAE;GACrB,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE;IAC5B,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAA;IAC1B;GACD;EACD,KAAK,GAAG,QAAQ,CAAA;EAChB;CACD,KAAK,IAAI,GAAG,IAAI,KAAK,CAAC,KAAK,EAAE;EAC5B,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE;GAClC,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;GAC7B;EACD;CACD,IAAI,SAAS,KAAK,SAAS,EAAE;EAC5B,IAAI,KAAK,CAAC,KAAK,KAAK,SAAS,EAAE;GAC9B,KAAK,CAAC,KAAK,GAAG,SAAS,CAAA;GACvB,KAAK,CAAC,SAAS,GAAG,SAAS,CAAA;GAC3B;EACD,IAAI,KAAK,CAAC,KAAK,CAAC,SAAS,IAAI,IAAI,EAAE;GAClC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,SAAS,GAAG,GAAG,GAAG,SAAS,CAAA;GACzD;EACD;CACD,KAAK,IAAI,GAAG,IAAI,KAAK,EAAE;EACtB,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,GAAG,KAAK,KAAK,EAAE;GAC7C,QAAQ,GAAG,IAAI,CAAA;GACf,KAAK;GACL;EACD;CACD,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE;EACvG,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAA;EAC3B,MAAM;EACN,SAAS,GAAG,QAAQ,CAAA;EACpB;CACD,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,EAAE,QAAQ,GAAG,KAAK,GAAG,SAAS,EAAE,SAAS,EAAE,IAAI,CAAC;CACjF;AACD,SAAS,WAAW,CAAC,QAAQ,EAAE;;CAE9B,IAAI,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,QAAQ,CAAA;CAC7C,IAAI,QAAQ,IAAI,IAAI,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,OAAO,QAAQ,KAAK,UAAU,IAAI,OAAO,QAAQ,CAAC,IAAI,KAAK,UAAU,EAAE;EAC9H,MAAM,KAAK,CAAC,sDAAsD,CAAC,CAAC;EACpE;CACD,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;EACjC,IAAI,MAAM,GAAG,aAAa,CAAC,QAAQ,CAAC,IAAI,eAAe,CAAC,QAAQ,CAAC,CAAA;EACjE;CACD,IAAI,KAAK,IAAI,IAAI,EAAE;EAClB,KAAK,GAAG,EAAE,CAAA;EACV,MAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,GAAG,IAAI,IAAI,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;EAClF,KAAK,GAAG,EAAE,CAAA;EACV,KAAK,GAAG,CAAC,CAAA;EACT;CACD,IAAI,SAAS,CAAC,MAAM,KAAK,KAAK,GAAG,CAAC,EAAE;EACnC,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,CAAA;EAC3B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,QAAQ,GAAG,CAAC,QAAQ,CAAC,CAAA;EACnD,MAAM;EACN,QAAQ,GAAG,EAAE,CAAA;EACb,OAAO,KAAK,GAAG,SAAS,CAAC,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;EAClE;CACD,IAAI,UAAU,GAAG,KAAK,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAA;CAClD,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;EACjC,OAAO,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,UAAU,CAAC;EAC9C,MAAM;EACN,OAAO,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,GAAG,EAAE,KAAK,EAAE,UAAU,CAAC;EACpD;CACD;AACD,WAAW,CAAC,KAAK,GAAG,SAAS,IAAI,EAAE;CAClC,IAAI,IAAI,IAAI,IAAI,EAAE,IAAI,GAAG,EAAE,CAAA;CAC3B,OAAO,KAAK,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,CAAC;CACnE,CAAA;AACD,WAAW,CAAC,QAAQ,GAAG,SAAS,MAAM,EAAE,QAAQ,EAAE;CACjD,OAAO,KAAK,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC;CAC9F,CAAA;AACD,IAAI,CAAC,GAAG,WAAW,CAAA;;AAEnB,IAAI,eAAe,GAAG,SAAS,QAAQ,EAAE;CACxC,IAAI,EAAE,IAAI,YAAY,eAAe,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC;CAC5F,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE,MAAM,IAAI,SAAS,CAAC,6BAA6B,CAAC;CACtF,IAAI,IAAI,GAAG,IAAI,EAAE,SAAS,GAAG,EAAE,EAAE,SAAS,GAAG,EAAE,EAAE,cAAc,GAAG,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,aAAa,GAAG,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA;CACrI,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAA;CAC5E,IAAI,SAAS,GAAG,OAAO,YAAY,KAAK,UAAU,GAAG,YAAY,GAAG,UAAU,CAAA;CAC9E,SAAS,OAAO,CAAC,IAAI,EAAE,YAAY,EAAE;EACpC,OAAO,SAAS,OAAO,CAAC,KAAK,EAAE;GAC9B,IAAI,IAAI,CAAA;GACR,IAAI;IACH,IAAI,YAAY,IAAI,KAAK,IAAI,IAAI,KAAK,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,KAAK,KAAK,UAAU,CAAC,IAAI,QAAQ,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,EAAE;KAC7I,IAAI,KAAK,KAAK,IAAI,EAAE,MAAM,IAAI,SAAS,CAAC,qCAAqC,CAAC;KAC9E,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAA;KAC7B;SACI;KACJ,SAAS,CAAC,WAAW;MACpB,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC,CAAA;MACrG,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAA;MACpD,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,SAAS,CAAC,MAAM,GAAG,CAAC,CAAA;MAC1C,QAAQ,CAAC,KAAK,GAAG,YAAY,CAAA;MAC7B,QAAQ,CAAC,KAAK,GAAG,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA,CAAC,CAAA;MAC5C,CAAC,CAAA;KACF;IACD;GACD,OAAO,CAAC,EAAE;IACT,aAAa,CAAC,CAAC,CAAC,CAAA;IAChB;GACD;EACD;CACD,SAAS,WAAW,CAAC,IAAI,EAAE;EAC1B,IAAI,IAAI,GAAG,CAAC,CAAA;EACZ,SAAS,GAAG,CAAC,EAAE,EAAE;GAChB,OAAO,SAAS,KAAK,EAAE;IACtB,IAAI,IAAI,EAAE,GAAG,CAAC,EAAE,MAAM;IACtB,EAAE,CAAC,KAAK,CAAC,CAAA;IACT;GACD;EACD,IAAI,OAAO,GAAG,GAAG,CAAC,aAAa,CAAC,CAAA;EAChC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,OAAO,CAAC,CAAA,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,CAAC;EAC/D;CACD,WAAW,CAAC,QAAQ,CAAC,CAAA;CACrB,CAAA;AACD,eAAe,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,WAAW,EAAE,WAAW,EAAE;CACnE,IAAI,IAAI,GAAG,IAAI,EAAE,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAA;CAC1C,SAAS,MAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;EAC5C,IAAI,CAAC,IAAI,CAAC,SAAS,KAAK,EAAE;GACzB,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;QAC1C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAA,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,CAAA,CAAC;GACjF,CAAC,CAAA;EACF,IAAI,OAAO,QAAQ,CAAC,KAAK,KAAK,UAAU,IAAI,KAAK,KAAK,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAA;EACtF;CACD,IAAI,WAAW,EAAE,UAAU,CAAA;CAC3B,IAAI,OAAO,GAAG,IAAI,eAAe,CAAC,SAAS,OAAO,EAAE,MAAM,EAAE,CAAC,WAAW,GAAG,OAAO,EAAE,UAAU,GAAG,MAAM,CAAA,CAAC,CAAC,CAAA;CACzG,MAAM,CAAC,WAAW,EAAE,QAAQ,CAAC,SAAS,EAAE,WAAW,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,WAAW,EAAE,QAAQ,CAAC,SAAS,EAAE,UAAU,EAAE,KAAK,CAAC,CAAA;CACtH,OAAO,OAAO;CACd,CAAA;AACD,eAAe,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,WAAW,EAAE;CACvD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC;CACnC,CAAA;AACD,eAAe,CAAC,OAAO,GAAG,SAAS,KAAK,EAAE;CACzC,IAAI,KAAK,YAAY,eAAe,EAAE,OAAO,KAAK;CAClD,OAAO,IAAI,eAAe,CAAC,SAAS,OAAO,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA,CAAC,CAAC;CAC9D,CAAA;AACD,eAAe,CAAC,MAAM,GAAG,SAAS,KAAK,EAAE;CACxC,OAAO,IAAI,eAAe,CAAC,SAAS,OAAO,EAAE,MAAM,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA,CAAC,CAAC;CACrE,CAAA;AACD,eAAe,CAAC,GAAG,GAAG,SAAS,IAAI,EAAE;CACpC,OAAO,IAAI,eAAe,CAAC,SAAS,OAAO,EAAE,MAAM,EAAE;EACpD,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG,EAAE,CAAA;EAC/C,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC,EAAE,CAAC,CAAA;OAC7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;GAC1C,CAAC,SAAS,CAAC,EAAE;IACZ,SAAS,OAAO,CAAC,KAAK,EAAE;KACvB,KAAK,EAAE,CAAA;KACP,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK,CAAA;KACjB,IAAI,KAAK,KAAK,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC,CAAA;KACpC;IACD,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,KAAK,OAAO,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,OAAO,IAAI,CAAC,CAAC,CAAC,KAAK,UAAU,CAAC,IAAI,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,UAAU,EAAE;KAC5H,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;KAC7B;SACI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;IACrB,EAAE,CAAC,CAAC,CAAA;GACL;EACD,CAAC;CACF,CAAA;AACD,eAAe,CAAC,IAAI,GAAG,SAAS,IAAI,EAAE;CACrC,OAAO,IAAI,eAAe,CAAC,SAAS,OAAO,EAAE,MAAM,EAAE;EACpD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;GACrC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;GAC7B;EACD,CAAC;CACF,CAAA;AACD,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;CAClC,IAAI,OAAO,MAAM,CAAC,OAAO,KAAK,WAAW,EAAE,MAAM,CAAC,OAAO,GAAG,eAAe,CAAA;CAC3E,IAAI,eAAe,GAAG,MAAM,CAAC,OAAO,CAAA;CACpC,MAAM,IAAI,OAAOG,cAAM,KAAK,WAAW,EAAE;CACzC,IAAI,OAAOA,cAAM,CAAC,OAAO,KAAK,WAAW,EAAEA,cAAM,CAAC,OAAO,GAAG,eAAe,CAAA;CAC3E,IAAI,eAAe,GAAGA,cAAM,CAAC,OAAO,CAAA;CACpC,MAAM;CACN;AACD,IAAI,gBAAgB,GAAG,SAAS,MAAM,EAAE;CACvC,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,iBAAiB,EAAE,OAAO,EAAE;CAC3E,IAAI,IAAI,GAAG,EAAE,CAAA;CACb,KAAK,IAAI,IAAI,IAAI,MAAM,EAAE;EACxB,WAAW,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAA;EAC/B;CACD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;CACrB,SAAS,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE;EACjC,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;GACzB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IACtC,WAAW,CAAC,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IAC3C;GACD;OACI,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,iBAAiB,EAAE;GACrE,KAAK,IAAI,CAAC,IAAI,KAAK,EAAE;IACpB,WAAW,CAAC,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IAC3C;GACD;OACI,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,KAAK,EAAE,GAAG,GAAG,GAAG,kBAAkB,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;EACjH;CACD,CAAA;AACD,IAAI,mBAAmB,GAAG,IAAI,MAAM,CAAC,UAAU,EAAE,GAAG,CAAC,CAAA;AACrD,IAAI,EAAE,GAAG,SAAS,OAAO,EAAE,OAAO,EAAE;CACnC,IAAI,aAAa,GAAG,CAAC,CAAA;CACrB,IAAI,YAAY,CAAA;CAChB,SAAS,qBAAqB,CAAC,QAAQ,EAAE,CAAC,YAAY,GAAG,QAAQ,CAAA,CAAC;CAClE,SAAS,SAAS,GAAG;EACpB,IAAI,KAAK,GAAG,CAAC,CAAA;EACb,SAAS,QAAQ,GAAG,CAAC,IAAI,EAAE,KAAK,KAAK,CAAC,IAAI,OAAO,YAAY,KAAK,UAAU,EAAE,YAAY,EAAE,CAAA,CAAC;EAC7F,OAAO,SAAS,QAAQ,CAAC,QAAQ,EAAE;GAClC,IAAI,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAA;GACzB,QAAQ,CAAC,IAAI,GAAG,WAAW;IAC1B,KAAK,EAAE,CAAA;IACP,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAA;IAC3C,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE;KAC/B,QAAQ,EAAE,CAAA;KACV,IAAI,KAAK,KAAK,CAAC,EAAE,MAAM,CAAC;KACxB,CAAC,CAAA;IACF,OAAO,QAAQ,CAAC,IAAI,CAAC;IACrB,CAAA;GACD,OAAO,QAAQ;GACf;EACD;CACD,SAAS,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE;EAC/B,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;GAC7B,IAAI,GAAG,GAAG,IAAI,CAAA;GACd,IAAI,GAAG,KAAK,IAAI,EAAE,CAAA;GAClB,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;GACpC;EACD,OAAO,IAAI;EACX;CACD,SAAS,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE;EAC7B,IAAI,QAAQ,GAAG,SAAS,EAAE,CAAA;EAC1B,IAAI,GAAG,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;EAC7B,IAAI,QAAQ,GAAG,IAAI,OAAO,CAAC,SAAS,OAAO,EAAE,MAAM,EAAE;GACpD,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,EAAE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;GAC5C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAA;GACvC,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,KAAK,KAAK,IAAI,IAAI,CAAC,MAAM,KAAK,OAAO,IAAI,KAAK,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,SAAS,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,CAAA;GACpI,IAAI,OAAO,IAAI,CAAC,SAAS,KAAK,UAAU,EAAE,IAAI,CAAC,SAAS,GAAG,OAAO,QAAQ,KAAK,WAAW,IAAI,IAAI,CAAC,IAAI,YAAY,QAAQ,GAAG,SAAS,KAAK,EAAE,CAAC,OAAO,KAAK,CAAC,GAAG,IAAI,CAAC,SAAS,CAAA;GAC7K,IAAI,OAAO,IAAI,CAAC,WAAW,KAAK,UAAU,EAAE,IAAI,CAAC,WAAW,GAAG,WAAW,CAAA;GAC1E,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,UAAU,EAAE,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;GAC9D,IAAI,CAAC,GAAG,GAAG,WAAW,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;GAC3C,IAAI,OAAO,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QAC7C,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;GAC7C,IAAI,GAAG,GAAG,IAAI,OAAO,CAAC,cAAc,EAAE;IACrC,OAAO,GAAG,KAAK;IACf,MAAM,GAAG,GAAG,CAAC,KAAK,CAAA;GACnB,GAAG,CAAC,KAAK,GAAG,SAAS,KAAK,GAAG;IAC5B,OAAO,GAAG,IAAI,CAAA;IACd,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IAChB,CAAA;GACD,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,EAAE,OAAO,IAAI,CAAC,KAAK,KAAK,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,EAAE,OAAO,IAAI,CAAC,IAAI,KAAK,QAAQ,GAAG,IAAI,CAAC,IAAI,GAAG,SAAS,EAAE,OAAO,IAAI,CAAC,QAAQ,KAAK,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,CAAA;GAC1M,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,SAAS,IAAI,OAAO,IAAI,EAAE,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,EAAE;IACnH,GAAG,CAAC,gBAAgB,CAAC,cAAc,EAAE,iCAAiC,CAAC,CAAA;IACvE;GACD,IAAI,IAAI,CAAC,WAAW,KAAK,WAAW,IAAI,EAAE,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE;IACjG,GAAG,CAAC,gBAAgB,CAAC,QAAQ,EAAE,0BAA0B,CAAC,CAAA;IAC1D;GACD,IAAI,IAAI,CAAC,eAAe,EAAE,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAA;GACpE,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE;IAC5E,GAAG,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAA;IAC5C;GACD,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,UAAU,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,GAAG,CAAA;GAC1E,GAAG,CAAC,kBAAkB,GAAG,WAAW;;IAEnC,GAAG,OAAO,EAAE,MAAM;IAClB,IAAI,GAAG,CAAC,UAAU,KAAK,CAAC,EAAE;KACzB,IAAI;MACH,IAAI,QAAQ,GAAG,CAAC,IAAI,CAAC,OAAO,KAAK,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAA;MAC/G,IAAI,CAAC,GAAG,CAAC,MAAM,IAAI,GAAG,IAAI,GAAG,CAAC,MAAM,GAAG,GAAG,KAAK,GAAG,CAAC,MAAM,KAAK,GAAG,IAAI,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;OACxG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAA;OAClC;WACI;OACJ,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;OACvC,KAAK,IAAI,GAAG,IAAI,QAAQ,EAAE,KAAK,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;OACpD,MAAM,CAAC,KAAK,CAAC,CAAA;OACb;MACD;KACD,OAAO,CAAC,EAAE;MACT,MAAM,CAAC,CAAC,CAAC,CAAA;MACT;KACD;IACD,CAAA;GACD,IAAI,OAAO,KAAK,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QAClD,GAAG,CAAC,IAAI,EAAE,CAAA;GACf,CAAC,CAAA;EACF,OAAO,IAAI,CAAC,UAAU,KAAK,IAAI,GAAG,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;EAC/D;CACD,SAAS,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE;EAC3B,IAAI,QAAQ,GAAG,SAAS,EAAE,CAAA;EAC1B,IAAI,GAAG,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;EAC7B,IAAI,QAAQ,GAAG,IAAI,OAAO,CAAC,SAAS,OAAO,EAAE,MAAM,EAAE;GACpD,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,aAAa,EAAE,CAAA;GAC9G,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAA;GACrD,OAAO,CAAC,YAAY,CAAC,GAAG,SAAS,IAAI,EAAE;IACtC,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;IACrC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAA;IAC9B,OAAO,OAAO,CAAC,YAAY,CAAC,CAAA;IAC5B,CAAA;GACD,MAAM,CAAC,OAAO,GAAG,WAAW;IAC3B,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;IACrC,MAAM,CAAC,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC,CAAA;IACzC,OAAO,OAAO,CAAC,YAAY,CAAC,CAAA;IAC5B,CAAA;GACD,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,EAAE,CAAA;GACrC,IAAI,CAAC,GAAG,GAAG,WAAW,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;GAC3C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,UAAU,CAAC,GAAG,YAAY,CAAA;GACxD,MAAM,CAAC,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;GAC1C,OAAO,CAAC,QAAQ,CAAC,eAAe,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;GACpD,CAAC,CAAA;EACF,OAAO,IAAI,CAAC,UAAU,KAAK,IAAI,EAAE,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;EAC9D;CACD,SAAS,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE;EAC/B,IAAI,IAAI,IAAI,IAAI,EAAE,OAAO,GAAG;EAC5B,IAAI,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE,CAAA;EACzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;GACvC,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;GAC5B,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE;IACtB,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA;IACvC;GACD;EACD,OAAO,GAAG;EACV;CACD,SAAS,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE;EAC5B,IAAI,WAAW,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAA;EACxC,IAAI,WAAW,KAAK,EAAE,EAAE;GACvB,IAAI,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,CAAA;GAC7C,GAAG,IAAI,MAAM,GAAG,WAAW,CAAA;GAC3B;EACD,OAAO,GAAG;EACV;CACD,SAAS,WAAW,CAAC,IAAI,EAAE;EAC1B,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;EAClD,OAAO,CAAC,EAAE,CAAC,MAAM,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC;EACjC;CACD,SAAS,OAAO,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,YAAY,CAAC;CAC/C,SAAS,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE;EAC1B,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;GAChC,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KACrC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;KAC5B;IACD;QACI,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC;GAC3B;EACD,OAAO,IAAI;EACX;CACD,OAAO,CAAC,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,qBAAqB,EAAE,qBAAqB,CAAC;CACrF,CAAA;AACD,IAAI,cAAc,GAAG,EAAE,CAAC,MAAM,EAAE,eAAe,CAAC,CAAA;AAChD,IAAI,YAAY,GAAG,SAAS,OAAO,EAAE;CACpC,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAA;CAC3B,IAAI,cAAc,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAA;CAClD,IAAI,SAAS,GAAG;EACf,GAAG,EAAE,4BAA4B;EACjC,IAAI,EAAE,oCAAoC;EAC1C,CAAA;CACD,IAAI,OAAO,CAAA;CACX,SAAS,gBAAgB,CAAC,QAAQ,EAAE,CAAC,OAAO,OAAO,GAAG,QAAQ,CAAC;CAC/D,SAAS,YAAY,CAAC,KAAK,EAAE;EAC5B,OAAO,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC;EAC/D;;CAED,SAAS,WAAW,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,EAAE;EACxE,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;GACjC,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;GACrB,IAAI,KAAK,IAAI,IAAI,EAAE;IAClB,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC,CAAA;IACjD;GACD;EACD;CACD,SAAS,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,EAAE;EAC1D,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAA;EACnB,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;GAC5B,KAAK,CAAC,KAAK,GAAG,EAAE,CAAA;GAChB,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,EAAE,aAAa,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;GACjE,QAAQ,GAAG;IACV,KAAK,GAAG,EAAE,OAAO,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,CAAC;IACvD,KAAK,GAAG,EAAE,OAAO,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,CAAC;IACvD,KAAK,GAAG,EAAE,OAAO,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC;IACtE,SAAS,OAAO,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC;IACpE;GACD;OACI,OAAO,eAAe,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC;EAClE;CACD,SAAS,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE;EAC/C,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;EAC/C,UAAU,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,EAAE,WAAW,CAAC,CAAA;EAC1C,OAAO,KAAK,CAAC,GAAG;EAChB;CACD,SAAS,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE;EAC/C,IAAI,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,EAAE,CAAA;EACxD,IAAI,OAAO,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAA;EACzK,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAA;EACtC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,QAAQ,CAAA;EAC/B,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,CAAA;EAC3B,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAA;EACtC,IAAI,QAAQ,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAA;EAC5C,IAAI,KAAK,CAAA;EACT,OAAO,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE;GAC/B,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;GAC3B;EACD,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAA;EACzC,OAAO,QAAQ;EACf;CACD,SAAS,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,EAAE;EAC9D,IAAI,QAAQ,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAA;EAC5C,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAI,EAAE;GAC3B,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAA;GAC7B,WAAW,CAAC,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,CAAA;GACpE;EACD,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,UAAU,CAAA;EAC/B,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAA;EAC1C,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAA;EACzC,OAAO,QAAQ;EACf;CACD,SAAS,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,EAAE;EAC7D,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAA;EACnB,IAAI,MAAM,GAAG,KAAK,CAAC,KAAK,CAAA;EACxB,IAAI,EAAE,GAAG,MAAM,IAAI,MAAM,CAAC,EAAE,CAAA;EAC5B,EAAE,GAAG,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,CAAA;EAC9B,IAAI,OAAO,GAAG,EAAE;GACf,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,EAAE,EAAE,GAAG,CAAC;GAC5E,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAA;EACjE,KAAK,CAAC,GAAG,GAAG,OAAO,CAAA;EACnB,IAAI,MAAM,IAAI,IAAI,EAAE;GACnB,QAAQ,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,CAAA;GAC3B;EACD,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE,WAAW,CAAC,CAAA;EACxC,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,eAAe,IAAI,IAAI,EAAE;GAC/D,kBAAkB,CAAC,KAAK,CAAC,CAAA;GACzB;OACI;GACJ,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,EAAE;IACvB,IAAI,KAAK,CAAC,IAAI,KAAK,EAAE,EAAE,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAA;SAClD,KAAK,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAA;IAC1F;GACD,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAI,EAAE;IAC3B,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAA;IAC7B,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,CAAA;IACnE,YAAY,CAAC,KAAK,CAAC,CAAA;IACnB;GACD;EACD,OAAO,OAAO;EACd;CACD,SAAS,aAAa,CAAC,KAAK,EAAE,KAAK,EAAE;EACpC,IAAI,QAAQ,CAAA;EACZ,IAAI,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,KAAK,UAAU,EAAE;GACzC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;GACtC,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAA;GAC3B,IAAI,QAAQ,CAAC,iBAAiB,IAAI,IAAI,EAAE,OAAO,cAAc;GAC7D,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAA;GACjC,MAAM;GACN,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,CAAA;GACpB,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAA;GACpB,IAAI,QAAQ,CAAC,iBAAiB,IAAI,IAAI,EAAE,OAAO,cAAc;GAC7D,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAA;GACjC,KAAK,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,IAAI,IAAI,IAAI,OAAO,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;GACvI;EACD,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,KAAK,CAAA;EAC1B,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,EAAE,aAAa,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;EACjE,aAAa,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;EACzC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAA;EAC5E,IAAI,KAAK,CAAC,QAAQ,KAAK,KAAK,EAAE,MAAM,KAAK,CAAC,wDAAwD,CAAC;EACnG,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAA;EACjC;CACD,SAAS,eAAe,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,EAAE;EAC/D,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;EAC3B,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAI,EAAE;GAC3B,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,EAAE,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC,CAAA;GACxE,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAA;GAC9B,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,CAAA;GAC9D,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE,WAAW,CAAC,CAAA;GACxC,OAAO,OAAO;GACd;OACI;GACJ,KAAK,CAAC,OAAO,GAAG,CAAC,CAAA;GACjB,OAAO,cAAc;GACrB;EACD;;CAED,SAAS,WAAW,CAAC,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,EAAE;EAC5E,IAAI,GAAG,KAAK,MAAM,IAAI,GAAG,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,EAAE,MAAM;OACtD,IAAI,GAAG,IAAI,IAAI,EAAE,WAAW,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,CAAC,CAAA;OACtF,IAAI,MAAM,IAAI,IAAI,EAAE,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;OAC3D;GACJ,IAAI,GAAG,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM,EAAE;IACjC,IAAI,SAAS,GAAG,KAAK,CAAA;IACrB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KACvC,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;MACxC,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,CAAA;MACvD,KAAK;MACL;KACD;IACD,IAAI,SAAS,EAAE;KACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;MACpC,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,EAAE,QAAQ;WAC7B,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,cAAc,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,WAAW,CAAC,CAAC,CAAA;WAC1H,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAA;WACzD,UAAU,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,cAAc,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,EAAE,CAAC,CAAA;MACzG;KACD,MAAM;KACN;IACD;GACD,SAAS,GAAG,SAAS,IAAI,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC,CAAA;GAClD,IAAI,SAAS,EAAE;IACd,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAA;IACnB,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;IAC1B;GACD,IAAI,QAAQ,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,CAAA;GAClF,OAAO,MAAM,IAAI,QAAQ,IAAI,GAAG,IAAI,KAAK,EAAE;IAC1C,IAAI,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;IACxC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,CAAA;SACzC,IAAI,CAAC,IAAI,IAAI,EAAE,QAAQ,EAAE,CAAA;SACzB,IAAI,CAAC,IAAI,IAAI,EAAE,KAAK,EAAE,CAAA;SACtB,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE;KACzB,IAAI,aAAa,GAAG,CAAC,IAAI,IAAI,IAAI,IAAI,QAAQ,IAAI,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,MAAM,CAAC,IAAI,IAAI,IAAI,KAAK,SAAS,CAAC,CAAA;KAC3G,QAAQ,EAAE,EAAE,KAAK,EAAE,CAAA;KACnB,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,cAAc,CAAC,GAAG,EAAE,QAAQ,EAAE,WAAW,CAAC,EAAE,aAAa,EAAE,EAAE,CAAC,CAAA;KAC9F,IAAI,SAAS,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE,UAAU,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAA;KAChF;SACI;KACJ,IAAI,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,CAAA;KACnB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,CAAA;UACvC,IAAI,CAAC,IAAI,IAAI,EAAE,MAAM,EAAE,CAAA;UACvB,IAAI,CAAC,IAAI,IAAI,EAAE,KAAK,EAAE,CAAA;UACtB,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE;MACzB,IAAI,aAAa,GAAG,CAAC,IAAI,IAAI,IAAI,IAAI,MAAM,IAAI,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,MAAM,CAAC,IAAI,IAAI,IAAI,KAAK,SAAS,CAAC,CAAA;MACzG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,cAAc,CAAC,GAAG,EAAE,MAAM,GAAG,CAAC,EAAE,WAAW,CAAC,EAAE,aAAa,EAAE,EAAE,CAAC,CAAA;MAChG,IAAI,SAAS,IAAI,KAAK,GAAG,GAAG,EAAE,UAAU,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC,GAAG,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC,CAAA;MAC3G,MAAM,EAAE,EAAE,KAAK,EAAE,CAAA;MACjB;UACI,KAAK;KACV;IACD;GACD,OAAO,MAAM,IAAI,QAAQ,IAAI,GAAG,IAAI,KAAK,EAAE;IAC1C,IAAI,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA;IACpC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,EAAE,GAAG,EAAE,CAAA;SACrC,IAAI,CAAC,IAAI,IAAI,EAAE,MAAM,EAAE,CAAA;SACvB,IAAI,CAAC,IAAI,IAAI,EAAE,GAAG,EAAE,CAAA;SACpB,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE;KACzB,IAAI,aAAa,GAAG,CAAC,IAAI,IAAI,IAAI,IAAI,MAAM,IAAI,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,MAAM,CAAC,IAAI,IAAI,IAAI,KAAK,SAAS,CAAC,CAAA;KACzG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,cAAc,CAAC,GAAG,EAAE,MAAM,GAAG,CAAC,EAAE,WAAW,CAAC,EAAE,aAAa,EAAE,EAAE,CAAC,CAAA;KAChG,IAAI,SAAS,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE,UAAU,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAA;KAChF,IAAI,CAAC,CAAC,GAAG,IAAI,IAAI,EAAE,WAAW,GAAG,CAAC,CAAC,GAAG,CAAA;KACtC,MAAM,EAAE,EAAE,GAAG,EAAE,CAAA;KACf;SACI;KACJ,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,SAAS,CAAC,GAAG,EAAE,MAAM,CAAC,CAAA;KACtC,IAAI,CAAC,IAAI,IAAI,EAAE;MACd,IAAI,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAA;MACzB,IAAI,QAAQ,IAAI,IAAI,EAAE;OACrB,IAAI,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAA;OAC3B,IAAI,aAAa,GAAG,CAAC,IAAI,IAAI,IAAI,IAAI,QAAQ,IAAI,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,MAAM,CAAC,IAAI,IAAI,IAAI,KAAK,SAAS,CAAC,CAAA;OAC3G,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,cAAc,CAAC,GAAG,EAAE,MAAM,GAAG,CAAC,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,EAAE,CAAC,CAAA;OAClG,UAAU,CAAC,MAAM,EAAE,UAAU,CAAC,OAAO,CAAC,EAAE,WAAW,CAAC,CAAA;OACpD,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,GAAG,IAAI,CAAA;OACzB,IAAI,OAAO,CAAC,GAAG,IAAI,IAAI,EAAE,WAAW,GAAG,OAAO,CAAC,GAAG,CAAA;OAClD;WACI;OACJ,IAAI,GAAG,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC,CAAA;OACvD,WAAW,GAAG,GAAG,CAAA;OACjB;MACD;KACD,GAAG,EAAE,CAAA;KACL;IACD,IAAI,GAAG,GAAG,KAAK,EAAE,KAAK;IACtB;GACD,WAAW,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,GAAG,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,CAAC,CAAA;GACnE,WAAW,CAAC,GAAG,EAAE,QAAQ,EAAE,MAAM,GAAG,CAAC,EAAE,MAAM,CAAC,CAAA;GAC9C;EACD;CACD,SAAS,UAAU,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,EAAE,EAAE;EAC1E,IAAI,MAAM,GAAG,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,KAAK,CAAC,GAAG,CAAA;EACrC,IAAI,MAAM,KAAK,GAAG,EAAE;GACnB,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAA;GACvB,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAA;GACzB,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAA;GACzB,IAAI,CAAC,SAAS,IAAI,eAAe,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,MAAM;GACrD,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;IAC/B,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,EAAE;KACxB,IAAI,SAAS,EAAE;MACd,KAAK,CAAC,KAAK,GAAG,EAAE,CAAA;MAChB,aAAa,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;MACxC;UACI,eAAe,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;KAC/C;IACD,QAAQ,MAAM;KACb,KAAK,GAAG,EAAE,UAAU,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,KAAK;KACvC,KAAK,GAAG,EAAE,UAAU,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,WAAW,CAAC,CAAC,CAAC,KAAK;KAC5D,KAAK,GAAG,EAAE,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK;KACtF,SAAS,aAAa,CAAC,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,CAAC,CAAA;KACxD;IACD;QACI,eAAe,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,EAAE,CAAC,CAAA;GAC3E;OACI;GACJ,UAAU,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;GACrB,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC,CAAA;GACjD;EACD;CACD,SAAS,UAAU,CAAC,GAAG,EAAE,KAAK,EAAE;EAC/B,IAAI,GAAG,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,KAAK,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE;GAC1D,GAAG,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC,QAAQ,CAAA;GAClC;EACD,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAA;EACnB;CACD,SAAS,UAAU,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,WAAW,EAAE;EACpD,IAAI,GAAG,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ,EAAE;GACpC,UAAU,CAAC,GAAG,CAAC,CAAA;GACf,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,CAAC,CAAA;GACtC;OACI,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAA;EACrD;CACD,SAAS,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,EAAE;EAC9E,WAAW,CAAC,MAAM,EAAE,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,CAAC,CAAA;EACpF,IAAI,OAAO,GAAG,CAAC,EAAE,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAA;EAC1C,KAAK,CAAC,GAAG,GAAG,IAAI,CAAA;EAChB,IAAI,QAAQ,IAAI,IAAI,EAAE;GACrB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IACzC,IAAI,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA;IACvB,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,CAAC,GAAG,IAAI,IAAI,EAAE;KACvC,IAAI,KAAK,CAAC,GAAG,IAAI,IAAI,EAAE,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAA;KAC5C,OAAO,IAAI,KAAK,CAAC,OAAO,IAAI,CAAC,CAAA;KAC7B;IACD;GACD,IAAI,OAAO,KAAK,CAAC,EAAE,KAAK,CAAC,OAAO,GAAG,OAAO,CAAA;GAC1C;EACD;CACD,SAAS,aAAa,CAAC,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,EAAE;EACxD,IAAI,OAAO,GAAG,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAA;EACjC,EAAE,GAAG,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,CAAA;EAC9B,IAAI,KAAK,CAAC,GAAG,KAAK,UAAU,EAAE;GAC7B,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,EAAE,KAAK,CAAC,KAAK,GAAG,EAAE,CAAA;GACzC,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,EAAE;IACvB,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAA;IAC9B,KAAK,CAAC,IAAI,GAAG,SAAS,CAAA;IACtB;GACD;EACD,WAAW,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC,CAAA;EAC9C,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,eAAe,IAAI,IAAI,EAAE;GAC/D,kBAAkB,CAAC,KAAK,CAAC,CAAA;GACzB;OACI,IAAI,GAAG,CAAC,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,IAAI,KAAK,EAAE,EAAE;GACrE,IAAI,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,SAAS,GAAG,KAAK,CAAC,IAAI,CAAA;GAC5F;OACI;GACJ,IAAI,GAAG,CAAC,IAAI,IAAI,IAAI,EAAE,GAAG,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,CAAC,IAAI,EAAE,SAAS,EAAE,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAA;GAChH,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,EAAE,KAAK,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAA;GAC7G,WAAW,CAAC,OAAO,EAAE,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,CAAA;GAC9E;EACD;CACD,SAAS,eAAe,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,EAAE,EAAE;EAC/E,IAAI,SAAS,EAAE;GACd,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;GAC3B,MAAM;GACN,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAA;GAC5E,IAAI,KAAK,CAAC,QAAQ,KAAK,KAAK,EAAE,MAAM,KAAK,CAAC,wDAAwD,CAAC;GACnG,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,EAAE,eAAe,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;GACnE,eAAe,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;GAC3C;EACD,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAI,EAAE;GAC3B,IAAI,GAAG,CAAC,QAAQ,IAAI,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC,CAAA;QAC/E,UAAU,CAAC,MAAM,EAAE,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,EAAE,CAAC,CAAA;GACxF,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAA;GAC9B,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAA;GACtC;OACI,IAAI,GAAG,CAAC,QAAQ,IAAI,IAAI,EAAE;GAC9B,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA;GAC9B,KAAK,CAAC,GAAG,GAAG,SAAS,CAAA;GACrB,KAAK,CAAC,OAAO,GAAG,CAAC,CAAA;GACjB;OACI;GACJ,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAA;GACnB,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAA;GAC3B;EACD;CACD,SAAS,YAAY,CAAC,GAAG,EAAE,MAAM,EAAE;EAClC,IAAI,GAAG,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE;GAC1G,IAAI,iBAAiB,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,CAAA;GAChF,IAAI,kBAAkB,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,CAAA;GAChG,IAAI,oBAAoB,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,CAAA;GAC5F,IAAI,IAAI,CAAC,GAAG,CAAC,kBAAkB,GAAG,oBAAoB,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,GAAG,oBAAoB,CAAC,EAAE;IAC9G,OAAO,IAAI;IACX;GACD;EACD,OAAO,KAAK;EACZ;CACD,SAAS,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE;EAC/B,IAAI,GAAG,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAA;EACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;GAC7B,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;GACrB,IAAI,KAAK,IAAI,IAAI,EAAE;IAClB,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,CAAA;IACpB,IAAI,IAAI,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IAC/B;GACD;EACD,OAAO,GAAG;EACV;CACD,SAAS,UAAU,CAAC,KAAK,EAAE;EAC1B,IAAI,MAAM,GAAG,KAAK,CAAC,OAAO,CAAA;EAC1B,IAAI,MAAM,IAAI,IAAI,IAAI,KAAK,CAAC,GAAG,IAAI,IAAI,EAAE;GACxC,IAAI,QAAQ,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAA;GAC5C,IAAI,MAAM,GAAG,CAAC,EAAE;IACf,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAA;IACnB,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,CAAA;IACtD,QAAQ,CAAC,YAAY,CAAC,GAAG,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAA;IAC/C;GACD,OAAO,QAAQ;GACf;OACI,OAAO,KAAK,CAAC,GAAG;EACrB;CACD,SAAS,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,WAAW,EAAE;EAC/C,OAAO,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;GAC9B,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,EAAE,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG;GACpE;EACD,OAAO,WAAW;EAClB;CACD,SAAS,UAAU,CAAC,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE;EAC7C,IAAI,WAAW,IAAI,WAAW,CAAC,UAAU,EAAE,MAAM,CAAC,YAAY,CAAC,GAAG,EAAE,WAAW,CAAC,CAAA;OAC3E,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,CAAA;EAC5B;CACD,SAAS,kBAAkB,CAAC,KAAK,EAAE;EAClC,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAA;EAC7B,IAAI,QAAQ,IAAI,IAAI,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE;GACzE,IAAI,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAA;GAClC,IAAI,KAAK,CAAC,GAAG,CAAC,SAAS,KAAK,OAAO,EAAE,KAAK,CAAC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAA;GAClE;OACI,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,QAAQ,IAAI,IAAI,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC;EAC5I;;CAED,SAAS,WAAW,CAAC,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,OAAO,EAAE;EACjD,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;GACjC,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;GACrB,IAAI,KAAK,IAAI,IAAI,EAAE;IAClB,IAAI,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,GAAG,KAAK,CAAA;SAC7B,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,CAAA;IAC/B;GACD;EACD;CACD,SAAS,UAAU,CAAC,KAAK,EAAE,OAAO,EAAE;EACnC,IAAI,QAAQ,GAAG,CAAC,EAAE,MAAM,GAAG,CAAC,CAAA;EAC5B,IAAI,KAAK,CAAC,KAAK,IAAI,OAAO,KAAK,CAAC,KAAK,CAAC,cAAc,KAAK,UAAU,EAAE;GACpE,IAAI,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;GAChE,IAAI,MAAM,IAAI,IAAI,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE;IACxD,QAAQ,EAAE,CAAA;IACV,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAA;IACvC;GACD;EACD,IAAI,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,IAAI,OAAO,KAAK,CAAC,MAAM,CAAC,cAAc,KAAK,UAAU,EAAE;GACvF,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;GACjE,IAAI,MAAM,IAAI,IAAI,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE;IACxD,QAAQ,EAAE,CAAA;IACV,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAA;IACvC;GACD;EACD,YAAY,EAAE,CAAA;EACd,SAAS,YAAY,GAAG;GACvB,IAAI,EAAE,MAAM,KAAK,QAAQ,EAAE;IAC1B,QAAQ,CAAC,KAAK,CAAC,CAAA;IACf,IAAI,KAAK,CAAC,GAAG,EAAE;KACd,IAAI,MAAM,GAAG,KAAK,CAAC,OAAO,IAAI,CAAC,CAAA;KAC/B,IAAI,MAAM,GAAG,CAAC,EAAE;MACf,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAA;MACnB,OAAO,EAAE,MAAM,EAAE;OAChB,iBAAiB,CAAC,GAAG,CAAC,WAAW,CAAC,CAAA;OAClC;MACD;KACD,iBAAiB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;KAC5B,IAAI,OAAO,IAAI,IAAI,IAAI,KAAK,CAAC,OAAO,IAAI,IAAI,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE;MACrH,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,CAAA;WACpC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;MAC7B;KACD;IACD;GACD;EACD;CACD,SAAS,iBAAiB,CAAC,IAAI,EAAE;EAChC,IAAI,MAAM,GAAG,IAAI,CAAC,UAAU,CAAA;EAC5B,IAAI,MAAM,IAAI,IAAI,EAAE,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAA;EAC5C;CACD,SAAS,QAAQ,CAAC,KAAK,EAAE;EACxB,IAAI,KAAK,CAAC,KAAK,IAAI,OAAO,KAAK,CAAC,KAAK,CAAC,QAAQ,KAAK,UAAU,EAAE,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;EAC5G,IAAI,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE;GAClC,IAAI,OAAO,KAAK,CAAC,MAAM,CAAC,QAAQ,KAAK,UAAU,EAAE,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;GAC/F,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAI,EAAE,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;GACpD,MAAM;GACN,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAA;GAC7B,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;IAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KACzC,IAAI,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA;KACvB,IAAI,KAAK,IAAI,IAAI,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAA;KAClC;IACD;GACD;EACD;;CAED,SAAS,QAAQ,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE;EACpC,KAAK,IAAI,IAAI,IAAI,MAAM,EAAE;GACxB,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAA;GAC5C;EACD;CACD,SAAS,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE;EAC7C,IAAI,OAAO,GAAG,KAAK,CAAC,GAAG,CAAA;EACvB,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,CAAC,GAAG,KAAK,KAAK,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,KAAK,KAAK,WAAW,IAAI,iBAAiB,CAAC,IAAI,CAAC,EAAE,MAAM;EACvL,IAAI,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;EACnC,IAAI,WAAW,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,WAAW,CAAC,KAAK,OAAO,EAAE;GAChE,OAAO,CAAC,cAAc,CAAC,8BAA8B,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAA;GAC1F;OACI,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE,WAAW,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,CAAA;OACtG,IAAI,IAAI,KAAK,OAAO,EAAE,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE,KAAK,CAAC,CAAA;OACtD,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,SAAS,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE;GAC9F,IAAI,IAAI,KAAK,OAAO,EAAE;IACrB,IAAI,WAAW,GAAG,EAAE,GAAG,KAAK,CAAA;;IAE5B,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,OAAO,IAAI,KAAK,CAAC,GAAG,KAAK,UAAU,KAAK,KAAK,CAAC,GAAG,CAAC,KAAK,KAAK,WAAW,IAAI,KAAK,CAAC,GAAG,KAAK,IAAI,CAAC,aAAa,EAAE,MAAM;;IAEtI,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE;KAC3B,IAAI,KAAK,KAAK,IAAI,EAAE;MACnB,IAAI,KAAK,CAAC,GAAG,CAAC,aAAa,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,KAAK,IAAI,CAAC,aAAa,EAAE,MAAM;MAC9E,MAAM;MACN,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,CAAC,GAAG,CAAC,KAAK,KAAK,WAAW,IAAI,KAAK,CAAC,GAAG,KAAK,IAAI,CAAC,aAAa,EAAE,MAAM;MAC/F;KACD;;IAED,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,IAAI,GAAG,IAAI,IAAI,IAAI,KAAK,CAAC,GAAG,CAAC,KAAK,KAAK,WAAW,EAAE,MAAM;IACpF;;GAED,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,IAAI,IAAI,KAAK,MAAM,EAAE;IAC7C,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;IACjC,MAAM;IACN;GACD,OAAO,CAAC,IAAI,CAAC,GAAG,KAAK,CAAA;GACrB;OACI;GACJ,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;IAC/B,IAAI,KAAK,EAAE,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;SACpC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;IAClC;QACI,OAAO,CAAC,YAAY,CAAC,IAAI,KAAK,WAAW,GAAG,OAAO,GAAG,IAAI,EAAE,KAAK,CAAC,CAAA;GACvE;EACD;CACD,SAAS,YAAY,CAAC,KAAK,EAAE;EAC5B,IAAI,MAAM,GAAG,KAAK,CAAC,KAAK,CAAA;EACxB,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,IAAI,MAAM,IAAI,IAAI,EAAE;GAC7C,IAAI,OAAO,IAAI,MAAM,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,CAAA;GAC7E,IAAI,eAAe,IAAI,MAAM,EAAE,OAAO,CAAC,KAAK,EAAE,eAAe,EAAE,IAAI,EAAE,MAAM,CAAC,aAAa,EAAE,SAAS,CAAC,CAAA;GACrG;EACD;CACD,SAAS,WAAW,CAAC,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE;EAC5C,IAAI,MAAM,IAAI,IAAI,EAAE;GACnB,KAAK,IAAI,IAAI,IAAI,MAAM,EAAE;IACxB,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAA;IACxD;GACD;EACD,IAAI,GAAG,IAAI,IAAI,EAAE;GAChB,KAAK,IAAI,IAAI,IAAI,GAAG,EAAE;IACrB,IAAI,MAAM,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,MAAM,CAAC,EAAE;KACxC,IAAI,IAAI,KAAK,WAAW,EAAE,IAAI,GAAG,OAAO,CAAA;KACxC,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC,KAAK,EAAE,IAAI,EAAE,SAAS,CAAC,CAAA;UAClG,IAAI,IAAI,KAAK,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;KACxD;IACD;GACD;EACD;CACD,SAAS,eAAe,CAAC,KAAK,EAAE,IAAI,EAAE;EACrC,OAAO,IAAI,KAAK,OAAO,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,eAAe,IAAI,IAAI,KAAK,UAAU,IAAI,KAAK,CAAC,GAAG,KAAK,IAAI,CAAC,aAAa;EACpI;CACD,SAAS,iBAAiB,CAAC,IAAI,EAAE;EAChC,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,gBAAgB,IAAI,IAAI,KAAK,gBAAgB;EACvJ;CACD,SAAS,WAAW,CAAC,IAAI,EAAE;EAC1B,OAAO,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,OAAO,IAAI,IAAI,KAAK,QAAQ;EACrG;CACD,SAAS,eAAe,CAAC,KAAK,CAAC;EAC9B,OAAO,KAAK,CAAC,KAAK,CAAC,EAAE,IAAI,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;EACpD;CACD,SAAS,qBAAqB,CAAC,MAAM,EAAE;EACtC,OAAO,MAAM,IAAI,IAAI,KAAK,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,QAAQ,CAAC;EACzG;;CAED,SAAS,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE;EACzC,IAAI,GAAG,KAAK,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,EAAE,GAAG,GAAG,IAAI,CAAA;EACzD,IAAI,KAAK,IAAI,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAA;OACxC,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAA;OAC5D;GACJ,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAA;GACvD,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;IACvB,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA;IACjC;GACD,IAAI,GAAG,IAAI,IAAI,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;IAC3C,KAAK,IAAI,IAAI,IAAI,GAAG,EAAE;KACrB,IAAI,EAAE,IAAI,IAAI,KAAK,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAA;KAC9C;IACD;GACD;EACD;;CAED,SAAS,WAAW,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE;EACxC,IAAI,OAAO,GAAG,KAAK,CAAC,GAAG,CAAA;EACvB,IAAI,QAAQ,GAAG,OAAO,OAAO,KAAK,UAAU,GAAG,KAAK,GAAG,SAAS,CAAC,EAAE;GAClE,IAAI,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAA;GACnC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAA;GACxB,OAAO,MAAM;GACb,CAAA;EACD,IAAI,IAAI,IAAI,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,KAAK,KAAK,UAAU,GAAG,QAAQ,GAAG,IAAI,CAAA;OAC7E;GACJ,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;GAC7B,IAAI,KAAK,CAAC,MAAM,KAAK,SAAS,EAAE,KAAK,CAAC,MAAM,GAAG,EAAE,CAAA;GACjD,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,QAAQ,EAAE,MAAM;GAC3C,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,OAAO,CAAC,mBAAmB,CAAC,SAAS,EAAE,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAA;GACjG,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;IAChC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAA;IAC7B,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAA;IAC9D;GACD;EACD;;CAED,SAAS,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE;EAC5C,IAAI,OAAO,MAAM,CAAC,MAAM,KAAK,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;EAC/E,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,UAAU,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAA;EAC/F;CACD,SAAS,eAAe,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE;EAC9C,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,UAAU,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAA;EAC/F;CACD,SAAS,eAAe,CAAC,KAAK,EAAE,GAAG,EAAE;EACpC,IAAI,gBAAgB,EAAE,oBAAoB,CAAA;EAC1C,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,IAAI,OAAO,KAAK,CAAC,KAAK,CAAC,cAAc,KAAK,UAAU,EAAE,gBAAgB,GAAG,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,CAAA;EACxJ,IAAI,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,IAAI,OAAO,KAAK,CAAC,MAAM,CAAC,cAAc,KAAK,UAAU,EAAE,oBAAoB,GAAG,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,CAAA;EACxK,IAAI,EAAE,gBAAgB,KAAK,SAAS,IAAI,oBAAoB,KAAK,SAAS,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,oBAAoB,EAAE;GAC1H,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAA;GACnB,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAA;GAC3B,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAA;GAC7B,OAAO,IAAI;GACX;EACD,OAAO,KAAK;EACZ;CACD,SAAS,MAAM,CAAC,GAAG,EAAE,MAAM,EAAE;EAC5B,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,mFAAmF,CAAC;EAC9G,IAAI,KAAK,GAAG,EAAE,CAAA;EACd,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,CAAA;EAC/B,IAAI,SAAS,GAAG,GAAG,CAAC,YAAY,CAAA;;EAEhC,IAAI,GAAG,CAAC,MAAM,IAAI,IAAI,EAAE,GAAG,CAAC,WAAW,GAAG,EAAE,CAAA;EAC5C,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,MAAM,GAAG,CAAC,MAAM,CAAC,CAAA;EAC7C,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,KAAK,8BAA8B,GAAG,SAAS,GAAG,SAAS,CAAC,CAAA;EACvJ,GAAG,CAAC,MAAM,GAAG,MAAM,CAAA;;EAEnB,IAAI,MAAM,IAAI,IAAI,IAAI,IAAI,CAAC,aAAa,KAAK,MAAM,EAAE,MAAM,CAAC,KAAK,EAAE,CAAA;EACnE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAA;EACjD;CACD,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,gBAAgB,EAAE,gBAAgB,CAAC;CAC3D,CAAA;AACD,SAAS,QAAQ,CAAC,QAAQ,EAAE;;CAE3B,IAAI,IAAI,GAAG,EAAE,CAAA;CACb,IAAI,IAAI,GAAG,CAAC,EAAE,OAAO,GAAG,IAAI,CAAA;CAC5B,IAAI,OAAO,GAAG,OAAO,qBAAqB,KAAK,UAAU,GAAG,qBAAqB,GAAG,UAAU,CAAA;CAC9F,OAAO,WAAW;EACjB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAA;EACpB,IAAI,IAAI,KAAK,CAAC,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,EAAE;GACrC,IAAI,GAAG,GAAG,CAAA;GACV,QAAQ,EAAE,CAAA;GACV;OACI,IAAI,OAAO,KAAK,IAAI,EAAE;GAC1B,OAAO,GAAG,OAAO,CAAC,WAAW;IAC5B,OAAO,GAAG,IAAI,CAAA;IACd,QAAQ,EAAE,CAAA;IACV,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAA;IACjB,EAAE,IAAI,IAAI,GAAG,GAAG,IAAI,CAAC,CAAC,CAAA;GACvB;EACD;CACD;AACD,IAAI,GAAG,GAAG,SAAS,OAAO,EAAE;CAC3B,IAAI,aAAa,GAAG,YAAY,CAAC,OAAO,CAAC,CAAA;CACzC,aAAa,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;EAC1C,IAAI,CAAC,CAAC,MAAM,KAAK,KAAK,EAAE,CAAC,CAAC,MAAM,GAAG,SAAS,CAAA;OACvC,MAAM,EAAE,CAAA;EACb,CAAC,CAAA;CACF,IAAI,SAAS,GAAG,EAAE,CAAA;CAClB,SAAS,SAAS,CAAC,IAAI,EAAE,QAAQ,EAAE;EAClC,WAAW,CAAC,IAAI,CAAC,CAAA;EACjB,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAA;EACxC;CACD,SAAS,WAAW,CAAC,IAAI,EAAE;EAC1B,IAAI,KAAK,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;EACnC,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;EAC1C;CACD,SAAS,MAAM,GAAG;EACjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;GAC7C,SAAS,CAAC,CAAC,CAAC,EAAE,CAAA;GACd;EACD;CACD,OAAO,CAAC,SAAS,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,aAAa,CAAC,MAAM,CAAC;CACrG,CAAA;AACD,IAAI,aAAa,GAAG,GAAG,CAAC,MAAM,CAAC,CAAA;AAC/B,cAAc,CAAC,qBAAqB,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;AAC1D,IAAI,GAAG,GAAG,SAAS,cAAc,EAAE;CAClC,OAAO,SAAS,IAAI,EAAE,SAAS,EAAE;EAChC,IAAI,SAAS,KAAK,IAAI,EAAE;GACvB,cAAc,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;GAC/B,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,CAAA;GAChC,MAAM;GACN;;EAED,IAAI,SAAS,CAAC,IAAI,IAAI,IAAI,IAAI,OAAO,SAAS,KAAK,UAAU,EAAE,MAAM,IAAI,KAAK,CAAC,8DAA8D,CAAC;;EAE9I,IAAI,IAAI,GAAG,WAAW;GACrB,cAAc,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC,CAAA;GAC7C,CAAA;EACD,cAAc,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;EACpC,cAAc,CAAC,MAAM,EAAE,CAAA;EACvB;CACD,CAAA;AACD,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,aAAa,CAAC,CAAA;AAC5B,IAAI,OAAO,GAAG,eAAe,CAAA;AAC7B,IAAI,gBAAgB,GAAG,SAAS,MAAM,EAAE;CACvC,IAAI,MAAM,KAAK,EAAE,IAAI,MAAM,IAAI,IAAI,EAAE,OAAO,EAAE;CAC9C,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;CACtD,IAAI,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,EAAE,QAAQ,GAAG,EAAE,CAAA;CAC1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EACxC,IAAI,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;EACjC,IAAI,IAAI,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;EACvC,IAAI,KAAK,GAAG,KAAK,CAAC,MAAM,KAAK,CAAC,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAA;EAClE,IAAI,KAAK,KAAK,MAAM,EAAE,KAAK,GAAG,IAAI,CAAA;OAC7B,IAAI,KAAK,KAAK,OAAO,EAAE,KAAK,GAAG,KAAK,CAAA;EACzC,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAA;EACnC,IAAI,MAAM,GAAG,KAAK,CAAA;EAClB,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,GAAG,EAAE,CAAA;EACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;GACvC,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,SAAS,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;GAChD,IAAI,QAAQ,GAAG,SAAS,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAA;GACjE,IAAI,OAAO,GAAG,CAAC,KAAK,MAAM,CAAC,MAAM,GAAG,CAAC,CAAA;GACrC,IAAI,KAAK,KAAK,EAAE,EAAE;IACjB,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAA;IACpC,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IAC9C,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAA;IACxB;GACD,IAAI,MAAM,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE;IAC1B,MAAM,CAAC,KAAK,CAAC,GAAG,OAAO,GAAG,KAAK,GAAG,QAAQ,GAAG,EAAE,GAAG,EAAE,CAAA;IACpD;GACD,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;GACtB;EACD;CACD,OAAO,KAAK;CACZ,CAAA;AACD,IAAI,UAAU,GAAG,SAAS,OAAO,EAAE;CAClC,IAAI,iBAAiB,GAAG,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,KAAK,UAAU,CAAA;CACvE,IAAI,UAAU,GAAG,OAAO,YAAY,KAAK,UAAU,GAAG,YAAY,GAAG,UAAU,CAAA;CAC/E,SAAS,UAAU,CAAC,SAAS,EAAE;EAC9B,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,0BAA0B,EAAE,kBAAkB,CAAC,CAAA;EAC9F,IAAI,SAAS,KAAK,UAAU,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,IAAI,CAAA;EAClE,OAAO,IAAI;EACX;CACD,IAAI,OAAO,CAAA;CACX,SAAS,aAAa,CAAC,SAAS,EAAE;EACjC,OAAO,WAAW;GACjB,IAAI,OAAO,IAAI,IAAI,EAAE,MAAM;GAC3B,OAAO,GAAG,UAAU,CAAC,WAAW;IAC/B,OAAO,GAAG,IAAI,CAAA;IACd,SAAS,EAAE,CAAA;IACX,CAAC,CAAA;GACF;EACD;CACD,SAAS,SAAS,CAAC,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE;EAC7C,IAAI,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;EAClC,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;EACjC,IAAI,OAAO,GAAG,UAAU,GAAG,CAAC,CAAC,GAAG,UAAU,GAAG,SAAS,GAAG,CAAC,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC,MAAM,CAAA;EACrF,IAAI,UAAU,GAAG,CAAC,CAAC,EAAE;GACpB,IAAI,QAAQ,GAAG,SAAS,GAAG,CAAC,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC,MAAM,CAAA;GACvD,IAAI,WAAW,GAAG,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAA;GACxE,KAAK,IAAI,IAAI,IAAI,WAAW,EAAE,SAAS,CAAC,IAAI,CAAC,GAAG,WAAW,CAAC,IAAI,CAAC,CAAA;GACjE;EACD,IAAI,SAAS,GAAG,CAAC,CAAC,EAAE;GACnB,IAAI,UAAU,GAAG,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAA;GAC5D,KAAK,IAAI,IAAI,IAAI,UAAU,EAAE,QAAQ,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,IAAI,CAAC,CAAA;GAC9D;EACD,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC;EAC7B;CACD,IAAI,MAAM,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;CAC3B,MAAM,CAAC,OAAO,GAAG,WAAW;EAC3B,IAAI,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;EACnC,QAAQ,KAAK;GACZ,KAAK,GAAG,EAAE,OAAO,UAAU,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;GAC/D,KAAK,GAAG,EAAE,OAAO,UAAU,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC;GACtF,SAAS,OAAO,UAAU,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC;GAC9G;EACD,CAAA;CACD,MAAM,CAAC,OAAO,GAAG,SAAS,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE;EAC9C,IAAI,SAAS,GAAG,EAAE,EAAE,QAAQ,GAAG,EAAE,CAAA;EACjC,IAAI,GAAG,SAAS,CAAC,IAAI,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAA;EAC3C,IAAI,IAAI,IAAI,IAAI,EAAE;GACjB,KAAK,IAAI,IAAI,IAAI,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAA;GACnD,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,SAAS,MAAM,EAAE,KAAK,EAAE;IACzD,OAAO,SAAS,CAAC,KAAK,CAAC,CAAA;IACvB,OAAO,IAAI,CAAC,KAAK,CAAC;IAClB,CAAC,CAAA;GACF;EACD,IAAI,KAAK,GAAG,gBAAgB,CAAC,SAAS,CAAC,CAAA;EACvC,IAAI,KAAK,EAAE,IAAI,IAAI,GAAG,GAAG,KAAK,CAAA;EAC9B,IAAI,IAAI,GAAG,gBAAgB,CAAC,QAAQ,CAAC,CAAA;EACrC,IAAI,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,IAAI,CAAA;EAC5B,IAAI,iBAAiB,EAAE;GACtB,IAAI,KAAK,GAAG,OAAO,GAAG,OAAO,CAAC,KAAK,GAAG,IAAI,CAAA;GAC1C,IAAI,KAAK,GAAG,OAAO,GAAG,OAAO,CAAC,KAAK,GAAG,IAAI,CAAA;GAC1C,OAAO,CAAC,UAAU,EAAE,CAAA;GACpB,IAAI,OAAO,IAAI,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,CAAA;QAC3F,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,CAAA;GAClE;OACI,OAAO,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI,CAAA;EACjD,CAAA;CACD,MAAM,CAAC,YAAY,GAAG,SAAS,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE;EACvD,SAAS,YAAY,GAAG;GACvB,IAAI,IAAI,GAAG,MAAM,CAAC,OAAO,EAAE,CAAA;GAC3B,IAAI,MAAM,GAAG,EAAE,CAAA;GACf,IAAI,QAAQ,GAAG,SAAS,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,CAAA;GAC9C,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAA;GACjC,IAAI,KAAK,IAAI,IAAI,EAAE;IAClB,KAAK,IAAI,CAAC,IAAI,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;IACzC;GACD,KAAK,IAAI,MAAM,IAAI,MAAM,EAAE;IAC1B,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,WAAW,CAAC,GAAG,MAAM,CAAC,CAAA;IACnH,IAAI,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;KAC3B,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,WAAW;MACpC,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,CAAA;MACzC,IAAI,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;MAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;OACrC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,GAAG,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;OACpE;MACD,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,CAAC,CAAA;MAC7C,CAAC,CAAA;KACF,MAAM;KACN;IACD;GACD,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;GACpB;EACD,IAAI,iBAAiB,EAAE,OAAO,CAAC,UAAU,GAAG,aAAa,CAAC,YAAY,CAAC,CAAA;OAClE,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,OAAO,CAAC,YAAY,GAAG,YAAY,CAAA;EAC7E,YAAY,EAAE,CAAA;EACd,CAAA;CACD,OAAO,MAAM;CACb,CAAA;AACD,IAAI,GAAG,GAAG,SAAS,OAAO,EAAE,cAAc,EAAE;CAC3C,IAAI,YAAY,GAAG,UAAU,CAAC,OAAO,CAAC,CAAA;CACtC,IAAI,QAAQ,GAAG,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA;CACrC,IAAI,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,WAAW,EAAE,UAAU,CAAA;CACvD,IAAI,KAAK,GAAG,SAAS,IAAI,EAAE,YAAY,EAAE,MAAM,EAAE;EAChD,IAAI,IAAI,IAAI,IAAI,EAAE,MAAM,IAAI,KAAK,CAAC,sEAAsE,CAAC;EACzG,IAAI,IAAI,GAAG,WAAW;GACrB,IAAI,OAAO,IAAI,IAAI,EAAE,cAAc,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAA;GAC/F,CAAA;EACD,IAAI,IAAI,GAAG,SAAS,IAAI,EAAE;GACzB,IAAI,IAAI,KAAK,YAAY,EAAE,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAA;QAC/E,MAAM,IAAI,KAAK,CAAC,kCAAkC,GAAG,YAAY,CAAC;GACvE,CAAA;EACD,YAAY,CAAC,YAAY,CAAC,MAAM,EAAE,SAAS,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE;GACjE,IAAI,MAAM,GAAG,UAAU,GAAG,SAAS,aAAa,EAAE,IAAI,EAAE;IACvD,IAAI,MAAM,KAAK,UAAU,EAAE,MAAM;IACjC,SAAS,GAAG,IAAI,IAAI,IAAI,KAAK,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,IAAI,OAAO,IAAI,KAAK,UAAU,CAAC,EAAE,IAAI,GAAG,KAAK,CAAA;IACzG,MAAM,GAAG,MAAM,EAAE,WAAW,GAAG,IAAI,EAAE,UAAU,GAAG,IAAI,CAAA;IACtD,OAAO,GAAG,CAAC,aAAa,CAAC,MAAM,IAAI,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAA;IAChE,IAAI,EAAE,CAAA;IACN,CAAA;GACD,IAAI,OAAO,CAAC,IAAI,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAA;QACjE;IACJ,IAAI,OAAO,CAAC,OAAO,EAAE;KACpB,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,QAAQ,EAAE;MACtE,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAA;MACzB,EAAE,IAAI,CAAC,CAAA;KACR;SACI,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,CAAA;IAC3B;GACD,EAAE,IAAI,CAAC,CAAA;EACR,cAAc,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;EACpC,CAAA;CACD,KAAK,CAAC,GAAG,GAAG,SAAS,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE;EACzC,IAAI,UAAU,IAAI,IAAI,EAAE;GACvB,OAAO,GAAG,OAAO,IAAI,EAAE,CAAA;GACvB,OAAO,CAAC,OAAO,GAAG,IAAI,CAAA;GACtB;EACD,UAAU,GAAG,IAAI,CAAA;EACjB,YAAY,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAA;EACzC,CAAA;CACD,KAAK,CAAC,GAAG,GAAG,WAAW,CAAC,OAAO,WAAW,CAAC,CAAA;CAC3C,KAAK,CAAC,MAAM,GAAG,SAAS,OAAO,EAAE,CAAC,YAAY,CAAC,MAAM,GAAG,OAAO,CAAA,CAAC,CAAA;CAChE,KAAK,CAAC,IAAI,GAAG,SAAS,MAAM,EAAE;EAC7B,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,EAAE,YAAY,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;EACxE,MAAM,CAAC,GAAG,CAAC,OAAO,GAAG,SAAS,CAAC,EAAE;GAChC,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,EAAE,MAAM;GACjE,CAAC,CAAC,cAAc,EAAE,CAAA;GAClB,CAAC,CAAC,MAAM,GAAG,KAAK,CAAA;GAChB,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAA;GACpC,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;GAC1F,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,EAAE,SAAS,CAAC,CAAA;GACrC,CAAA;EACD,CAAA;CACD,KAAK,CAAC,KAAK,GAAG,SAAS,IAAI,EAAE;EAC5B,GAAG,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO,IAAI,KAAK,WAAW,EAAE,OAAO,MAAM,CAAC,IAAI,CAAC;EACpF,OAAO,MAAM;EACb,CAAA;CACD,OAAO,KAAK;CACZ,CAAA;AACD,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,MAAM,EAAE,aAAa,CAAC,CAAA;AACpC,CAAC,CAAC,QAAQ,GAAG,SAAS,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE;CACnD,OAAO,SAAS,CAAC,EAAE;EAClB,SAAS,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,EAAE,QAAQ,IAAI,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,aAAa,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAA;EACjI;CACD,CAAA;AACD,IAAI,GAAG,GAAG,YAAY,CAAC,MAAM,CAAC,CAAA;AAC9B,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAA;AACrB,CAAC,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,CAAA;AAC/B,CAAC,CAAC,OAAO,GAAG,cAAc,CAAC,OAAO,CAAA;AAClC,CAAC,CAAC,KAAK,GAAG,cAAc,CAAC,KAAK,CAAA;AAC9B,CAAC,CAAC,gBAAgB,GAAG,gBAAgB,CAAA;AACrC,CAAC,CAAC,gBAAgB,GAAG,gBAAgB,CAAA;AACrC,CAAC,CAAC,OAAO,GAAG,OAAO,CAAA;AACnB,CAAC,CAAC,KAAK,GAAG,KAAK,CAAA;AACf,AAAI,AAA6B,AAAE,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAA,AACvC;CAChB,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnuCH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,AAAO;;;;;;;;;;;;;;;AAmBP,AAAO;;;;;;;;;;;;AAaP,AAAO;;AASP,AAGA;;;;;;;;;;;;;;;;AAgBA,AAAO;;;;;;;;;;;AAiBP,AAAO;;AAEP,AAEA;;;;;;;;;;;;;;AAcA,AAAO;;;;;;;;;;AA4BP,AAAO;;;;;;;;;AAYP,AAAO;;;;;;;;;;;AAoBP,AAAO;;;;;;;;;;AAUP,AAAO;;;;;;;;;;;;;;;;;;;;;;AAsBP,AAAO,IAAMC,MAAM,SAANA,GAAM,CAACC,UAAD;SAAgB,IAAIC,YAAJ,CAAiBD,UAAjB,CAAhB;CAAZ;;IAEDC;wBAEQD,UAAZ,EAAwB;;;SACjBA,UAAL,GAAkBA;;;;;;OAAlB;;;;;;;;;;;;;4BASc;wCAARE,MAAQ;cAAA;;;aACPA,OAAOC,MAAP,CAAc,UAACC,CAAD,EAAIC,CAAJ;eAAUA,EAAED,CAAF,CAAV;OAAd,EAA8B,KAAKJ,UAAnC,CAAP;;;;;;ACtPJ;;;;AAIA,IAAMM,QAAQ,SAARA,KAAQ,CAACC,CAAD;SAAOA,MAAM,IAAN,IAAcA,MAAMC,SAA3B;CAAd,CAEA;;ACNA;;;;;;;;AAQA,AAEA,IAAaC,MAAb;;;;;;;;;;;;;wBAa+E;QAAhEC,GAAgE,QAAhEA,GAAgE;QAA3DC,IAA2D,QAA3DA,IAA2D;QAArDC,MAAqD,QAArDA,MAAqD;QAA7CC,KAA6C,QAA7CA,KAA6C;QAAtCC,KAAsC,QAAtCA,KAAsC;QAA/BC,MAA+B,QAA/BA,MAA+B;kCAAvBC,aAAuB;QAAvBA,aAAuB,sCAAP,IAAO;;;SACtEC,OAAL,GAAeL,MAAf;SACKM,KAAL,GAAaP,IAAb;SACKQ,MAAL,GAAcN,KAAd;SACKO,IAAL,GAAYV,GAAZ;SACKW,OAAL,GAAeN,MAAf;SACKO,MAAL,GAAcR,KAAd;SACKE,aAAL,GAAqBA,aAArB;;QAEIV,MAAM,KAAKQ,KAAX,CAAJ,EAAuB,KAAKQ,MAAL,GAAc,KAAKT,KAAL,GAAa,KAAKF,IAAhC;QACnBL,MAAM,KAAKS,MAAX,CAAJ,EAAwB,KAAKM,OAAL,GAAe,KAAKT,MAAL,GAAc,KAAKF,GAAlC;QACpBJ,MAAM,KAAKM,MAAX,CAAJ,EAAwB,KAAKK,OAAL,GAAe,KAAKP,GAAL,GAAW,KAAKK,MAA/B;QACpBT,MAAM,KAAKO,KAAX,CAAJ,EAAuB,KAAKM,MAAL,GAAc,KAAKR,IAAL,GAAY,KAAKG,KAA/B;;QAEnB,CAACE,aAAL,EAAoB;;WAEbC,OAAL,GAAeM,KAAKC,KAAL,CAAW,KAAKZ,MAAhB,CAAf;;WAEKQ,IAAL,GAAYG,KAAKC,KAAL,CAAW,KAAKd,GAAhB,CAAZ;WACKQ,KAAL,GAAaK,KAAKC,KAAL,CAAW,KAAKb,IAAhB,CAAb;WACKQ,MAAL,GAAcI,KAAKC,KAAL,CAAW,KAAKX,KAAhB,CAAd;WACKS,MAAL,GAAcC,KAAKC,KAAL,CAAW,KAAKV,KAAhB,CAAd;;WAEKO,OAAL,GAAeE,KAAKC,KAAL,CAAW,KAAKT,MAAhB,CAAf;UACI,KAAKpD,CAAT,EAAY,KAAKA,CAAL,GAAS4D,KAAKC,KAAL,CAAW,KAAK7D,CAAhB,CAAT;UACR,KAAKC,CAAT,EAAY;;aACLA,CAAL,GAAS2D,KAAKC,KAAL,CAAW,KAAK5D,CAAhB,CAAT;;;;;;;;;;;;;;;;;2BAqJC6D,WA5LT,EA4LsB;aACXhB,OAAOiB,MAAP,CAAc,IAAd,EAAoBD,WAApB,CAAP;;;;;;;;;+BAMSA,WAnMb,EAmM0B;aACfhB,OAAOkB,UAAP,CAAkB,IAAlB,EAAwBF,WAAxB,CAAP;;;;2BAnJW;aACJ,KAAKR,OAAZ;KAlDJ;yBAqDaW,GArDb,EAqDkB;UACV,KAAKZ,aAAT,EAAwB;aACjBC,OAAL,GAAeW,GAAf;aACKP,OAAL,GAAe,KAAKJ,OAAL,GAAe,KAAKG,IAAnC;OAFF,MAGO;aACAH,OAAL,GAAeM,KAAKC,KAAL,CAAWI,GAAX,CAAf;aACKP,OAAL,GAAeE,KAAKC,KAAL,CAAW,KAAKP,OAAL,GAAe,KAAKG,IAA/B,CAAf;;;;;2BAIM;aACD,KAAKA,IAAZ;KAhEJ;yBAmEUQ,GAnEV,EAmEe;UACP,KAAKZ,aAAT,EAAwB;aACjBI,IAAL,GAAYQ,GAAZ;aACKP,OAAL,GAAe,KAAKJ,OAAL,GAAe,KAAKG,IAAnC;OAFF,MAGO;aACAA,IAAL,GAAYG,KAAKC,KAAL,CAAWI,GAAX,CAAZ;aACKP,OAAL,GAAeE,KAAKC,KAAL,CAAW,KAAKP,OAAL,GAAe,KAAKG,IAA/B,CAAf;;;;;2BAIO;aACF,KAAKF,KAAZ;KA9EJ;yBAiFWU,GAjFX,EAiFgB;UACR,KAAKZ,aAAT,EAAwB;aACjBE,KAAL,GAAaU,GAAb;aACKN,MAAL,GAAc,KAAKH,MAAL,GAAc,KAAKD,KAAjC;OAFF,MAGO;aACAA,KAAL,GAAaK,KAAKC,KAAL,CAAWI,GAAX,CAAb;aACKN,MAAL,GAAcC,KAAKC,KAAL,CAAW,KAAKL,MAAL,GAAc,KAAKD,KAA9B,CAAd;;;;;2BAIQ;aACH,KAAKC,MAAZ;KA5FJ;yBA+FYS,GA/FZ,EA+FiB;UACT,KAAKZ,aAAT,EAAwB;aACjBG,MAAL,GAAcS,GAAd;aACKN,MAAL,GAAc,KAAKH,MAAL,GAAc,KAAKD,KAAjC;OAFF,MAGO;aACAC,MAAL,GAAcI,KAAKC,KAAL,CAAWI,GAAX,CAAd;aACKN,MAAL,GAAcC,KAAKC,KAAL,CAAW,KAAKL,MAAL,GAAc,KAAKD,KAA9B,CAAd;;;;;2BAIQ;aACH,KAAKI,MAAZ;KA1GJ;yBA6GYM,GA7GZ,EA6GiB;UACT,KAAKZ,aAAT,EAAwB;aACjBM,MAAL,GAAcM,GAAd;aACKT,MAAL,GAAc,KAAKD,KAAL,GAAa,KAAKI,MAAhC;OAFF,MAGO;aACAH,MAAL,GAAcI,KAAKC,KAAL,CAAWI,GAAX,CAAd;aACKN,MAAL,GAAcC,KAAKC,KAAL,CAAW,KAAKN,KAAL,GAAa,KAAKI,MAA7B,CAAd;;;;;2BAIS;aACJ,KAAKD,OAAZ;KAxHJ;yBA2HaO,GA3Hb,EA2HkB;UACV,KAAKZ,aAAT,EAAwB;aACjBK,OAAL,GAAeO,GAAf;aACKX,OAAL,GAAe,KAAKG,IAAL,GAAY,KAAKC,OAAhC;OAFF,MAGO;aACAA,OAAL,GAAeE,KAAKC,KAAL,CAAWI,GAAX,CAAf;aACKX,OAAL,GAAeM,KAAKC,KAAL,CAAW,KAAKJ,IAAL,GAAY,KAAKC,OAA5B,CAAf;;;;;;;;;;2BAOc;aACT,CAAC,KAAKP,KAAN,IAAe,CAAC,KAAKC,MAA5B;;;;;;;;;2BAMS;aACF,KAAKD,KAAL,GAAa,KAAKC,MAAzB;;;;;;;;;;;;;2BAUYc,OA1JhB,EA0JyBC,OA1JzB,EA0JkC;UAC1BC,UAAJ;UAAOC,WAAP;UAAWC,WAAX;UACI,CAACJ,OAAD,IAAY,CAACC,OAAjB,EACE,OAAO,KAAP,CAH4B;WAIzB,IAAII,IAAI,CAAb,EAAgBA,IAAIC,MAAMC,MAA1B,EAAkCF,GAAlC,EAAuC;YACjCC,MAAMD,CAAN,CAAJ;aACKL,QAAQE,CAAR,CAAL;aACKD,QAAQC,CAAR,CAAL;YACIC,OAAOxB,SAAP,IAAoByB,OAAOzB,SAA/B,EAA0C;;;;;YAItCe,KAAKC,KAAL,CAAWQ,EAAX,MAAmBT,KAAKC,KAAL,CAAWS,EAAX,CAAvB,EACE,OAAO,KAAP;;aAEG,IAAP;;;;;;;;;;;;;+BAUgBJ,OAnLpB,EAmL6BC,OAnL7B,EAmLsC;UAC9B,CAACD,OAAD,IAAY,CAACC,OAAjB,EACE,OAAO,KAAP,CAFgC;aAG3BP,KAAKC,KAAL,CAAWK,QAAQQ,IAAnB,MAA6Bd,KAAKC,KAAL,CAAWM,QAAQO,IAAnB,CAApC;;;;;;;AAmBJ,IAAMF,QAAQ;;AAEZ,QAFY,EAEF,MAFE,EAEM,OAFN,EAEe,KAFf,EAEsB,OAFtB,EAE+B,QAF/B,EAEyC,GAFzC,EAE8C,GAF9C,CAAd;;ACnNA;;;;;AAKA,AAEA,IAAaG,UAAb;;;;;;;;;;;;;;;;2BASSC,KATT,EASgB;WACPC,QAAL,GAAgBD,MAAME,KAAN,CAAYD,QAA5B;;;;;;;;;;6BAQOD,KAlBX,EAkBkB;;WAETG,EAAL,GAAUH,MAAMI,GAAhB;WACKC,MAAL,GAAc,IAAInC,MAAJ,CAAW8B,MAAMI,GAAN,CAAUE,qBAAV,EAAX,CAAd;;;;;;;;;;6BAQON,KA7BX,EA6BkB;WACTK,MAAL,GAAc,IAAInC,MAAJ,CAAW8B,MAAMI,GAAN,CAAUE,qBAAV,EAAX,CAAd;;;;;;ACrCJ;;;;;;;;;;;;;AAaA,AAAO,SAASC,cAAT,CAAwBC,KAAxB,EAA+BC,SAA/B,EAA0CC,QAA1C,EAAoDC,MAApD,EAA4D;MAC7DC,MAAO,CAACH,UAAUI,IAAV,GAAiBJ,UAAUK,KAA5B,KAAsCN,QAAQE,SAASI,KAAvD,KAAiEJ,SAASG,IAAT,GAAgBH,SAASI,KAA1F,IAAmGL,UAAUK,KAA9G,GAAuHL,UAAUK,KAA3I;MACIH,MAAJ,EAAY;UACHF,UAAUK,KAAV,GAAkBL,UAAUI,IAA7B,GAAqCD,GAA3C;;SAEKA,GAAP;;;;;;;;;;;;;AAaF,AAAO,SAASG,YAAT,CAAsBC,GAAtB,EAA2BC,MAA3B,EAAmC;WAC/BC,SAAT,CAAmBf,EAAnB,EAAuB;QACjBgB,KAAK,CAAT;QACIC,KAAK,CAAT;WACOjB,MAAM,CAACkB,MAAMlB,GAAGmB,UAAT,CAAP,IAA+B,CAACD,MAAMlB,GAAGoB,SAAT,CAAvC,EAA4D;YACpDpB,GAAGmB,UAAH,GAAgBnB,GAAGqB,UAAzB;YACMrB,GAAGoB,SAAH,GAAepB,GAAGsB,SAAxB;WACKtB,GAAGuB,YAAR;;WAEK,EAACvD,KAAKiD,EAAN,EAAUhD,MAAM+C,EAAhB,EAAP;;;MAGEQ,aAAaT,UAAUD,MAAV,CAAjB;SACO;SACAD,IAAIY,QAAJ,CAAaC,KAAb,GAAqBF,WAAWvD,IADhC;SAEA4C,IAAIY,QAAJ,CAAaE,KAAb,GAAqBH,WAAWxD;GAFvC;;;;;;;;;ACvCF,CAAC,SAAS,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE;EACjD,YAAY,CAAC;;AAEf,IAAI,eAAe,GAAG,CAAC,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;AAC7D,IAAI,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;;AAEjD,IAAI,aAAa,GAAG,UAAU,CAAC;;AAE/B,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACvB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;AACnB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;;;;;;;;;AASnB,SAAS,iBAAiB,CAAC,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE;IAC7C,OAAO,UAAU,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,CAAC;CACnD;;;;;;;;;;;AAWD,SAAS,cAAc,CAAC,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE;IACtC,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;QACpB,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;QAChC,OAAO,IAAI,CAAC;KACf;IACD,OAAO,KAAK,CAAC;CAChB;;;;;;;;AAQD,SAAS,IAAI,CAAC,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE;IAClC,IAAI,CAAC,CAAC;;IAEN,IAAI,CAAC,GAAG,EAAE;QACN,OAAO;KACV;;IAED,IAAI,GAAG,CAAC,OAAO,EAAE;QACb,GAAG,CAAC,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;KAClC,MAAM,IAAI,GAAG,CAAC,MAAM,KAAK,SAAS,EAAE;QACjC,CAAC,GAAG,CAAC,CAAC;QACN,OAAO,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE;YACnB,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;YACvC,CAAC,EAAE,CAAC;SACP;KACJ,MAAM;QACH,KAAK,CAAC,IAAI,GAAG,EAAE;YACX,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;SACnE;KACJ;CACJ;;;;;;;;;AASD,SAAS,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE;IACtC,IAAI,kBAAkB,GAAG,qBAAqB,GAAG,IAAI,GAAG,IAAI,GAAG,OAAO,GAAG,QAAQ,CAAC;IAClF,OAAO,WAAW;QACd,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACrC,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,EAAE,CAAC;aAC5D,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;aAC1B,OAAO,CAAC,4BAA4B,EAAE,gBAAgB,CAAC,GAAG,qBAAqB,CAAC;;QAErF,IAAI,GAAG,GAAG,MAAM,CAAC,OAAO,KAAK,MAAM,CAAC,OAAO,CAAC,IAAI,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACxE,IAAI,GAAG,EAAE;YACL,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,kBAAkB,EAAE,KAAK,CAAC,CAAC;SACvD;QACD,OAAO,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;KACxC,CAAC;CACL;;;;;;;;;AASD,IAAI,MAAM,CAAC;AACX,IAAI,OAAO,MAAM,CAAC,MAAM,KAAK,UAAU,EAAE;IACrC,MAAM,GAAG,SAAS,MAAM,CAAC,MAAM,EAAE;QAC7B,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,EAAE;YACzC,MAAM,IAAI,SAAS,CAAC,4CAA4C,CAAC,CAAC;SACrE;;QAED,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QAC5B,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACnD,IAAI,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;YAC9B,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,EAAE;gBACzC,KAAK,IAAI,OAAO,IAAI,MAAM,EAAE;oBACxB,IAAI,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;wBAChC,MAAM,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;qBACrC;iBACJ;aACJ;SACJ;QACD,OAAO,MAAM,CAAC;KACjB,CAAC;CACL,MAAM;IACH,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;CAC1B;;;;;;;;;;AAUD,IAAI,MAAM,GAAG,SAAS,CAAC,SAAS,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE;IACrD,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC5B,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE;QACpB,IAAI,CAAC,KAAK,KAAK,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,EAAE;YAClD,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SAChC;QACD,CAAC,EAAE,CAAC;KACP;IACD,OAAO,IAAI,CAAC;CACf,EAAE,QAAQ,EAAE,eAAe,CAAC,CAAC;;;;;;;;;AAS9B,IAAI,KAAK,GAAG,SAAS,CAAC,SAAS,KAAK,CAAC,IAAI,EAAE,GAAG,EAAE;IAC5C,OAAO,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;CAClC,EAAE,OAAO,EAAE,eAAe,CAAC,CAAC;;;;;;;;AAQ7B,SAAS,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE;IACtC,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS;QACtB,MAAM,CAAC;;IAEX,MAAM,GAAG,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAChD,MAAM,CAAC,WAAW,GAAG,KAAK,CAAC;IAC3B,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;;IAEtB,IAAI,UAAU,EAAE;QACZ,MAAM,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;KAC9B;CACJ;;;;;;;;AAQD,SAAS,MAAM,CAAC,EAAE,EAAE,OAAO,EAAE;IACzB,OAAO,SAAS,OAAO,GAAG;QACtB,OAAO,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;KACvC,CAAC;CACL;;;;;;;;;AASD,SAAS,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE;IACzB,IAAI,OAAO,GAAG,IAAI,aAAa,EAAE;QAC7B,OAAO,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,SAAS,GAAG,SAAS,EAAE,IAAI,CAAC,CAAC;KACnE;IACD,OAAO,GAAG,CAAC;CACd;;;;;;;;AAQD,SAAS,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE;IAC7B,OAAO,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,GAAG,IAAI,CAAC;CAC7C;;;;;;;;AAQD,SAAS,iBAAiB,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE;IAC/C,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,SAAS,IAAI,EAAE;QACjC,MAAM,CAAC,gBAAgB,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;KACjD,CAAC,CAAC;CACN;;;;;;;;AAQD,SAAS,oBAAoB,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE;IAClD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,SAAS,IAAI,EAAE;QACjC,MAAM,CAAC,mBAAmB,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;KACpD,CAAC,CAAC;CACN;;;;;;;;;AASD,SAAS,SAAS,CAAC,IAAI,EAAE,MAAM,EAAE;IAC7B,OAAO,IAAI,EAAE;QACT,IAAI,IAAI,IAAI,MAAM,EAAE;YAChB,OAAO,IAAI,CAAC;SACf;QACD,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC;KAC1B;IACD,OAAO,KAAK,CAAC;CAChB;;;;;;;;AAQD,SAAS,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE;IACtB,OAAO,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;CACjC;;;;;;;AAOD,SAAS,QAAQ,CAAC,GAAG,EAAE;IACnB,OAAO,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;CACnC;;;;;;;;;AASD,SAAS,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,SAAS,EAAE;IACnC,IAAI,GAAG,CAAC,OAAO,IAAI,CAAC,SAAS,EAAE;QAC3B,OAAO,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KAC5B,MAAM;QACH,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE;YACnB,IAAI,CAAC,SAAS,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,IAAI,MAAM,CAAC,SAAS,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,EAAE;gBAC7E,OAAO,CAAC,CAAC;aACZ;YACD,CAAC,EAAE,CAAC;SACP;QACD,OAAO,CAAC,CAAC,CAAC;KACb;CACJ;;;;;;;AAOD,SAAS,OAAO,CAAC,GAAG,EAAE;IAClB,OAAO,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;CAC7C;;;;;;;;;AASD,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;IACjC,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,CAAC,GAAG,CAAC,CAAC;;IAEV,OAAO,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE;QACnB,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACrC,IAAI,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,EAAE;YAC1B,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SACxB;QACD,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;QAChB,CAAC,EAAE,CAAC;KACP;;IAED,IAAI,IAAI,EAAE;QACN,IAAI,CAAC,GAAG,EAAE;YACN,OAAO,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;SAC5B,MAAM;YACH,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,SAAS,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE;gBAClD,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;aAC1B,CAAC,CAAC;SACN;KACJ;;IAED,OAAO,OAAO,CAAC;CAClB;;;;;;;;AAQD,SAAS,QAAQ,CAAC,GAAG,EAAE,QAAQ,EAAE;IAC7B,IAAI,MAAM,EAAE,IAAI,CAAC;IACjB,IAAI,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;IAE9D,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,OAAO,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE;QAC/B,MAAM,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,GAAG,CAAC,MAAM,IAAI,MAAM,GAAG,SAAS,GAAG,QAAQ,CAAC;;QAEhD,IAAI,IAAI,IAAI,GAAG,EAAE;YACb,OAAO,IAAI,CAAC;SACf;QACD,CAAC,EAAE,CAAC;KACP;IACD,OAAO,SAAS,CAAC;CACpB;;;;;;AAMD,IAAI,SAAS,GAAG,CAAC,CAAC;AAClB,SAAS,QAAQ,GAAG;IAChB,OAAO,SAAS,EAAE,CAAC;CACtB;;;;;;;AAOD,SAAS,mBAAmB,CAAC,OAAO,EAAE;IAClC,IAAI,GAAG,GAAG,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC;IAC3C,QAAQ,GAAG,CAAC,WAAW,IAAI,GAAG,CAAC,YAAY,IAAI,MAAM,EAAE;CAC1D;;AAED,IAAI,YAAY,GAAG,uCAAuC,CAAC;;AAE3D,IAAI,aAAa,IAAI,cAAc,IAAI,MAAM,CAAC,CAAC;AAC/C,IAAI,sBAAsB,GAAG,QAAQ,CAAC,MAAM,EAAE,cAAc,CAAC,KAAK,SAAS,CAAC;AAC5E,IAAI,kBAAkB,GAAG,aAAa,IAAI,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;;AAEjF,IAAI,gBAAgB,GAAG,OAAO,CAAC;AAC/B,IAAI,cAAc,GAAG,KAAK,CAAC;AAC3B,IAAI,gBAAgB,GAAG,OAAO,CAAC;AAC/B,IAAI,iBAAiB,GAAG,QAAQ,CAAC;;AAEjC,IAAI,gBAAgB,GAAG,EAAE,CAAC;;AAE1B,IAAI,WAAW,GAAG,CAAC,CAAC;AACpB,IAAI,UAAU,GAAG,CAAC,CAAC;AACnB,IAAI,SAAS,GAAG,CAAC,CAAC;AAClB,IAAI,YAAY,GAAG,CAAC,CAAC;;AAErB,IAAI,cAAc,GAAG,CAAC,CAAC;AACvB,IAAI,cAAc,GAAG,CAAC,CAAC;AACvB,IAAI,eAAe,GAAG,CAAC,CAAC;AACxB,IAAI,YAAY,GAAG,CAAC,CAAC;AACrB,IAAI,cAAc,GAAG,EAAE,CAAC;;AAExB,IAAI,oBAAoB,GAAG,cAAc,GAAG,eAAe,CAAC;AAC5D,IAAI,kBAAkB,GAAG,YAAY,GAAG,cAAc,CAAC;AACvD,IAAI,aAAa,GAAG,oBAAoB,GAAG,kBAAkB,CAAC;;AAE9D,IAAI,QAAQ,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC1B,IAAI,eAAe,GAAG,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;;;;;;;;;AAS7C,SAAS,KAAK,CAAC,OAAO,EAAE,QAAQ,EAAE;IAC9B,IAAI,IAAI,GAAG,IAAI,CAAC;IAChB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACvB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;IAC/B,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC;;;;IAI1C,IAAI,CAAC,UAAU,GAAG,SAAS,EAAE,EAAE;QAC3B,IAAI,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,CAAC,EAAE;YAC7C,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;SACpB;KACJ,CAAC;;IAEF,IAAI,CAAC,IAAI,EAAE,CAAC;;CAEf;;AAED,KAAK,CAAC,SAAS,GAAG;;;;;IAKd,OAAO,EAAE,WAAW,GAAG;;;;;IAKvB,IAAI,EAAE,WAAW;QACb,IAAI,CAAC,IAAI,IAAI,iBAAiB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACzE,IAAI,CAAC,QAAQ,IAAI,iBAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAChF,IAAI,CAAC,KAAK,IAAI,iBAAiB,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KACnG;;;;;IAKD,OAAO,EAAE,WAAW;QAChB,IAAI,CAAC,IAAI,IAAI,oBAAoB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC5E,IAAI,CAAC,QAAQ,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACnF,IAAI,CAAC,KAAK,IAAI,oBAAoB,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KACtG;CACJ,CAAC;;;;;;;;AAQF,SAAS,mBAAmB,CAAC,OAAO,EAAE;IAClC,IAAI,IAAI,CAAC;IACT,IAAI,UAAU,GAAG,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;;IAE5C,IAAI,UAAU,EAAE;QACZ,IAAI,GAAG,UAAU,CAAC;KACrB,MAAM,IAAI,sBAAsB,EAAE;QAC/B,IAAI,GAAG,iBAAiB,CAAC;KAC5B,MAAM,IAAI,kBAAkB,EAAE;QAC3B,IAAI,GAAG,UAAU,CAAC;KACrB,MAAM,IAAI,CAAC,aAAa,EAAE;QACvB,IAAI,GAAG,UAAU,CAAC;KACrB,MAAM;QACH,IAAI,GAAG,eAAe,CAAC;KAC1B;IACD,OAAO,KAAK,IAAI,EAAE,OAAO,EAAE,YAAY,CAAC,CAAC;CAC5C;;;;;;;;AAQD,SAAS,YAAY,CAAC,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE;IAC7C,IAAI,WAAW,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC;IACxC,IAAI,kBAAkB,GAAG,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC;IACtD,IAAI,OAAO,IAAI,SAAS,GAAG,WAAW,KAAK,WAAW,GAAG,kBAAkB,KAAK,CAAC,CAAC,CAAC,CAAC;IACpF,IAAI,OAAO,IAAI,SAAS,IAAI,SAAS,GAAG,YAAY,CAAC,KAAK,WAAW,GAAG,kBAAkB,KAAK,CAAC,CAAC,CAAC,CAAC;;IAEnG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC;IAC1B,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC;;IAE1B,IAAI,OAAO,EAAE;QACT,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC;KACxB;;;;IAID,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;;;IAG5B,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;;;IAGjC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;;IAEpC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IACzB,OAAO,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC;CACrC;;;;;;;AAOD,SAAS,gBAAgB,CAAC,OAAO,EAAE,KAAK,EAAE;IACtC,IAAI,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;IAC9B,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;IAC9B,IAAI,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC;;;IAGrC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;QACrB,OAAO,CAAC,UAAU,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAC;KACpD;;;IAGD,IAAI,cAAc,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE;QAC9C,OAAO,CAAC,aAAa,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAC;KACvD,MAAM,IAAI,cAAc,KAAK,CAAC,EAAE;QAC7B,OAAO,CAAC,aAAa,GAAG,KAAK,CAAC;KACjC;;IAED,IAAI,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;IACpC,IAAI,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;IAC1C,IAAI,YAAY,GAAG,aAAa,GAAG,aAAa,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;;IAE5E,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC;IAChD,KAAK,CAAC,SAAS,GAAG,GAAG,EAAE,CAAC;IACxB,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,GAAG,UAAU,CAAC,SAAS,CAAC;;IAEzD,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;IAC7C,KAAK,CAAC,QAAQ,GAAG,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;;IAEnD,cAAc,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC/B,KAAK,CAAC,eAAe,GAAG,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;;IAEjE,IAAI,eAAe,GAAG,WAAW,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;IAC/E,KAAK,CAAC,gBAAgB,GAAG,eAAe,CAAC,CAAC,CAAC;IAC3C,KAAK,CAAC,gBAAgB,GAAG,eAAe,CAAC,CAAC,CAAC;IAC3C,KAAK,CAAC,eAAe,GAAG,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,GAAG,eAAe,CAAC,CAAC,CAAC;;IAElH,KAAK,CAAC,KAAK,GAAG,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC;IAC7E,KAAK,CAAC,QAAQ,GAAG,aAAa,GAAG,WAAW,CAAC,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC;;IAEnF,KAAK,CAAC,WAAW,GAAG,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM;QACpF,OAAO,CAAC,SAAS,CAAC,WAAW,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;;IAE5F,wBAAwB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;;;IAGzC,IAAI,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC;IAC7B,IAAI,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;QAC1C,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC;KAClC;IACD,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;CACzB;;AAED,SAAS,cAAc,CAAC,OAAO,EAAE,KAAK,EAAE;IACpC,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;IAC1B,IAAI,MAAM,GAAG,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC;IACvC,IAAI,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,EAAE,CAAC;IACxC,IAAI,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,EAAE,CAAC;;IAExC,IAAI,KAAK,CAAC,SAAS,KAAK,WAAW,IAAI,SAAS,CAAC,SAAS,KAAK,SAAS,EAAE;QACtE,SAAS,GAAG,OAAO,CAAC,SAAS,GAAG;YAC5B,CAAC,EAAE,SAAS,CAAC,MAAM,IAAI,CAAC;YACxB,CAAC,EAAE,SAAS,CAAC,MAAM,IAAI,CAAC;SAC3B,CAAC;;QAEF,MAAM,GAAG,OAAO,CAAC,WAAW,GAAG;YAC3B,CAAC,EAAE,MAAM,CAAC,CAAC;YACX,CAAC,EAAE,MAAM,CAAC,CAAC;SACd,CAAC;KACL;;IAED,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;IACnD,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;CACtD;;;;;;;AAOD,SAAS,wBAAwB,CAAC,OAAO,EAAE,KAAK,EAAE;IAC9C,IAAI,IAAI,GAAG,OAAO,CAAC,YAAY,IAAI,KAAK;QACpC,SAAS,GAAG,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS;QAC5C,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;;IAE9C,IAAI,KAAK,CAAC,SAAS,IAAI,YAAY,KAAK,SAAS,GAAG,gBAAgB,IAAI,IAAI,CAAC,QAAQ,KAAK,SAAS,CAAC,EAAE;QAClG,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QACxC,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;QAExC,IAAI,CAAC,GAAG,WAAW,CAAC,SAAS,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QAC/C,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC7C,SAAS,GAAG,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;;QAEzC,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC;KAChC,MAAM;;QAEH,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzB,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAC3B,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAC3B,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;KAC9B;;IAED,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC1B,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;IAC5B,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;IAC5B,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;CAC/B;;;;;;;AAOD,SAAS,oBAAoB,CAAC,KAAK,EAAE;;;IAGjC,IAAI,QAAQ,GAAG,EAAE,CAAC;IAClB,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,OAAO,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE;QAC9B,QAAQ,CAAC,CAAC,CAAC,GAAG;YACV,OAAO,EAAE,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YACzC,OAAO,EAAE,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;SAC5C,CAAC;QACF,CAAC,EAAE,CAAC;KACP;;IAED,OAAO;QACH,SAAS,EAAE,GAAG,EAAE;QAChB,QAAQ,EAAE,QAAQ;QAClB,MAAM,EAAE,SAAS,CAAC,QAAQ,CAAC;QAC3B,MAAM,EAAE,KAAK,CAAC,MAAM;QACpB,MAAM,EAAE,KAAK,CAAC,MAAM;KACvB,CAAC;CACL;;;;;;;AAOD,SAAS,SAAS,CAAC,QAAQ,EAAE;IACzB,IAAI,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC;;;IAGrC,IAAI,cAAc,KAAK,CAAC,EAAE;QACtB,OAAO;YACH,CAAC,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YAC7B,CAAC,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;SAChC,CAAC;KACL;;IAED,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;IACxB,OAAO,CAAC,GAAG,cAAc,EAAE;QACvB,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;QACzB,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;QACzB,CAAC,EAAE,CAAC;KACP;;IAED,OAAO;QACH,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,cAAc,CAAC;QAC5B,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,cAAc,CAAC;KAC/B,CAAC;CACL;;;;;;;;;AASD,SAAS,WAAW,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE;IAClC,OAAO;QACH,CAAC,EAAE,CAAC,GAAG,SAAS,IAAI,CAAC;QACrB,CAAC,EAAE,CAAC,GAAG,SAAS,IAAI,CAAC;KACxB,CAAC;CACL;;;;;;;;AAQD,SAAS,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE;IACxB,IAAI,CAAC,KAAK,CAAC,EAAE;QACT,OAAO,cAAc,CAAC;KACzB;;IAED,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO,CAAC,GAAG,CAAC,GAAG,cAAc,GAAG,eAAe,CAAC;KACnD;IACD,OAAO,CAAC,GAAG,CAAC,GAAG,YAAY,GAAG,cAAc,CAAC;CAChD;;;;;;;;;AASD,SAAS,WAAW,CAAC,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE;IAChC,IAAI,CAAC,KAAK,EAAE;QACR,KAAK,GAAG,QAAQ,CAAC;KACpB;IACD,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEpC,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;CACvC;;;;;;;;;AASD,SAAS,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE;IAC7B,IAAI,CAAC,KAAK,EAAE;QACR,KAAK,GAAG,QAAQ,CAAC;KACpB;IACD,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACpC,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;CAC3C;;;;;;;;AAQD,SAAS,WAAW,CAAC,KAAK,EAAE,GAAG,EAAE;IAC7B,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;CACpG;;;;;;;;;AASD,SAAS,QAAQ,CAAC,KAAK,EAAE,GAAG,EAAE;IAC1B,OAAO,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;CAC1G;;AAED,IAAI,eAAe,GAAG;IAClB,SAAS,EAAE,WAAW;IACtB,SAAS,EAAE,UAAU;IACrB,OAAO,EAAE,SAAS;CACrB,CAAC;;AAEF,IAAI,oBAAoB,GAAG,WAAW,CAAC;AACvC,IAAI,mBAAmB,GAAG,mBAAmB,CAAC;;;;;;;AAO9C,SAAS,UAAU,GAAG;IAClB,IAAI,CAAC,IAAI,GAAG,oBAAoB,CAAC;IACjC,IAAI,CAAC,KAAK,GAAG,mBAAmB,CAAC;;IAEjC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;;IAErB,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CAChC;;AAED,OAAO,CAAC,UAAU,EAAE,KAAK,EAAE;;;;;IAKvB,OAAO,EAAE,SAAS,SAAS,CAAC,EAAE,EAAE;QAC5B,IAAI,SAAS,GAAG,eAAe,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;;QAGzC,IAAI,SAAS,GAAG,WAAW,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;;QAED,IAAI,SAAS,GAAG,UAAU,IAAI,EAAE,CAAC,KAAK,KAAK,CAAC,EAAE;YAC1C,SAAS,GAAG,SAAS,CAAC;SACzB;;;QAGD,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACf,OAAO;SACV;;QAED,IAAI,SAAS,GAAG,SAAS,EAAE;YACvB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;SACxB;;QAED,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE;YACnC,QAAQ,EAAE,CAAC,EAAE,CAAC;YACd,eAAe,EAAE,CAAC,EAAE,CAAC;YACrB,WAAW,EAAE,gBAAgB;YAC7B,QAAQ,EAAE,EAAE;SACf,CAAC,CAAC;KACN;CACJ,CAAC,CAAC;;AAEH,IAAI,iBAAiB,GAAG;IACpB,WAAW,EAAE,WAAW;IACxB,WAAW,EAAE,UAAU;IACvB,SAAS,EAAE,SAAS;IACpB,aAAa,EAAE,YAAY;IAC3B,UAAU,EAAE,YAAY;CAC3B,CAAC;;;AAGF,IAAI,sBAAsB,GAAG;IACzB,CAAC,EAAE,gBAAgB;IACnB,CAAC,EAAE,cAAc;IACjB,CAAC,EAAE,gBAAgB;IACnB,CAAC,EAAE,iBAAiB;CACvB,CAAC;;AAEF,IAAI,sBAAsB,GAAG,aAAa,CAAC;AAC3C,IAAI,qBAAqB,GAAG,qCAAqC,CAAC;;;AAGlE,IAAI,MAAM,CAAC,cAAc,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE;IAC/C,sBAAsB,GAAG,eAAe,CAAC;IACzC,qBAAqB,GAAG,2CAA2C,CAAC;CACvE;;;;;;;AAOD,SAAS,iBAAiB,GAAG;IACzB,IAAI,CAAC,IAAI,GAAG,sBAAsB,CAAC;IACnC,IAAI,CAAC,KAAK,GAAG,qBAAqB,CAAC;;IAEnC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;IAE7B,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC;CAC1D;;AAED,OAAO,CAAC,iBAAiB,EAAE,KAAK,EAAE;;;;;IAK9B,OAAO,EAAE,SAAS,SAAS,CAAC,EAAE,EAAE;QAC5B,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACvB,IAAI,aAAa,GAAG,KAAK,CAAC;;QAE1B,IAAI,mBAAmB,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QAClE,IAAI,SAAS,GAAG,iBAAiB,CAAC,mBAAmB,CAAC,CAAC;QACvD,IAAI,WAAW,GAAG,sBAAsB,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC;;QAE3E,IAAI,OAAO,IAAI,WAAW,IAAI,gBAAgB,CAAC,CAAC;;;QAGhD,IAAI,UAAU,GAAG,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;;;QAG3D,IAAI,SAAS,GAAG,WAAW,KAAK,EAAE,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,CAAC,EAAE;YACzD,IAAI,UAAU,GAAG,CAAC,EAAE;gBAChB,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACf,UAAU,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;aACjC;SACJ,MAAM,IAAI,SAAS,IAAI,SAAS,GAAG,YAAY,CAAC,EAAE;YAC/C,aAAa,GAAG,IAAI,CAAC;SACxB;;;QAGD,IAAI,UAAU,GAAG,CAAC,EAAE;YAChB,OAAO;SACV;;;QAGD,KAAK,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;;QAEvB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE;YACnC,QAAQ,EAAE,KAAK;YACf,eAAe,EAAE,CAAC,EAAE,CAAC;YACrB,WAAW,EAAE,WAAW;YACxB,QAAQ,EAAE,EAAE;SACf,CAAC,CAAC;;QAEH,IAAI,aAAa,EAAE;;YAEf,KAAK,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;SAC/B;KACJ;CACJ,CAAC,CAAC;;AAEH,IAAI,sBAAsB,GAAG;IACzB,UAAU,EAAE,WAAW;IACvB,SAAS,EAAE,UAAU;IACrB,QAAQ,EAAE,SAAS;IACnB,WAAW,EAAE,YAAY;CAC5B,CAAC;;AAEF,IAAI,0BAA0B,GAAG,YAAY,CAAC;AAC9C,IAAI,0BAA0B,GAAG,2CAA2C,CAAC;;;;;;;AAO7E,SAAS,gBAAgB,GAAG;IACxB,IAAI,CAAC,QAAQ,GAAG,0BAA0B,CAAC;IAC3C,IAAI,CAAC,KAAK,GAAG,0BAA0B,CAAC;IACxC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;;IAErB,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CAChC;;AAED,OAAO,CAAC,gBAAgB,EAAE,KAAK,EAAE;IAC7B,OAAO,EAAE,SAAS,SAAS,CAAC,EAAE,EAAE;QAC5B,IAAI,IAAI,GAAG,sBAAsB,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;;QAG3C,IAAI,IAAI,KAAK,WAAW,EAAE;YACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;;QAED,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACf,OAAO;SACV;;QAED,IAAI,OAAO,GAAG,sBAAsB,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;;;QAG1D,IAAI,IAAI,IAAI,SAAS,GAAG,YAAY,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;YAClF,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;SACxB;;QAED,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE;YAC9B,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC;YACpB,eAAe,EAAE,OAAO,CAAC,CAAC,CAAC;YAC3B,WAAW,EAAE,gBAAgB;YAC7B,QAAQ,EAAE,EAAE;SACf,CAAC,CAAC;KACN;CACJ,CAAC,CAAC;;;;;;;;AAQH,SAAS,sBAAsB,CAAC,EAAE,EAAE,IAAI,EAAE;IACtC,IAAI,GAAG,GAAG,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;IAC9B,IAAI,OAAO,GAAG,OAAO,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;;IAEzC,IAAI,IAAI,IAAI,SAAS,GAAG,YAAY,CAAC,EAAE;QACnC,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;KAC9D;;IAED,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;CACzB;;AAED,IAAI,eAAe,GAAG;IAClB,UAAU,EAAE,WAAW;IACvB,SAAS,EAAE,UAAU;IACrB,QAAQ,EAAE,SAAS;IACnB,WAAW,EAAE,YAAY;CAC5B,CAAC;;AAEF,IAAI,mBAAmB,GAAG,2CAA2C,CAAC;;;;;;;AAOtE,SAAS,UAAU,GAAG;IAClB,IAAI,CAAC,QAAQ,GAAG,mBAAmB,CAAC;IACpC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;;IAEpB,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CAChC;;AAED,OAAO,CAAC,UAAU,EAAE,KAAK,EAAE;IACvB,OAAO,EAAE,SAAS,UAAU,CAAC,EAAE,EAAE;QAC7B,IAAI,IAAI,GAAG,eAAe,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,OAAO,EAAE;YACV,OAAO;SACV;;QAED,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE;YAC9B,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC;YACpB,eAAe,EAAE,OAAO,CAAC,CAAC,CAAC;YAC3B,WAAW,EAAE,gBAAgB;YAC7B,QAAQ,EAAE,EAAE;SACf,CAAC,CAAC;KACN;CACJ,CAAC,CAAC;;;;;;;;AAQH,SAAS,UAAU,CAAC,EAAE,EAAE,IAAI,EAAE;IAC1B,IAAI,UAAU,GAAG,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;IACrC,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;;;IAG/B,IAAI,IAAI,IAAI,WAAW,GAAG,UAAU,CAAC,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;QAC9D,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC;QAC3C,OAAO,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;KACnC;;IAED,IAAI,CAAC;QACD,aAAa;QACb,cAAc,GAAG,OAAO,CAAC,EAAE,CAAC,cAAc,CAAC;QAC3C,oBAAoB,GAAG,EAAE;QACzB,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;;IAGzB,aAAa,GAAG,UAAU,CAAC,MAAM,CAAC,SAAS,KAAK,EAAE;QAC9C,OAAO,SAAS,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;KAC1C,CAAC,CAAC;;;IAGH,IAAI,IAAI,KAAK,WAAW,EAAE;QACtB,CAAC,GAAG,CAAC,CAAC;QACN,OAAO,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE;YAC7B,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC;YAC9C,CAAC,EAAE,CAAC;SACP;KACJ;;;IAGD,CAAC,GAAG,CAAC,CAAC;IACN,OAAO,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE;QAC9B,IAAI,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE;YACzC,oBAAoB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;SAChD;;;QAGD,IAAI,IAAI,IAAI,SAAS,GAAG,YAAY,CAAC,EAAE;YACnC,OAAO,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;SAClD;QACD,CAAC,EAAE,CAAC;KACP;;IAED,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE;QAC9B,OAAO;KACV;;IAED,OAAO;;QAEH,WAAW,CAAC,aAAa,CAAC,MAAM,CAAC,oBAAoB,CAAC,EAAE,YAAY,EAAE,IAAI,CAAC;QAC3E,oBAAoB;KACvB,CAAC;CACL;;;;;;;;;;;;AAYD,IAAI,aAAa,GAAG,IAAI,CAAC;AACzB,IAAI,cAAc,GAAG,EAAE,CAAC;;AAExB,SAAS,eAAe,GAAG;IACvB,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;IAE7B,IAAI,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACzC,IAAI,CAAC,KAAK,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IACnD,IAAI,CAAC,KAAK,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;;IAEnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;IACzB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;CACzB;;AAED,OAAO,CAAC,eAAe,EAAE,KAAK,EAAE;;;;;;;IAO5B,OAAO,EAAE,SAAS,UAAU,CAAC,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE;QACzD,IAAI,OAAO,IAAI,SAAS,CAAC,WAAW,IAAI,gBAAgB,CAAC;YACrD,OAAO,IAAI,SAAS,CAAC,WAAW,IAAI,gBAAgB,CAAC,CAAC;;QAE1D,IAAI,OAAO,IAAI,SAAS,CAAC,kBAAkB,IAAI,SAAS,CAAC,kBAAkB,CAAC,gBAAgB,EAAE;YAC1F,OAAO;SACV;;;QAGD,IAAI,OAAO,EAAE;YACT,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;SACnD,MAAM,IAAI,OAAO,IAAI,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE;YAC1D,OAAO;SACV;;QAED,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;KACjD;;;;;IAKD,OAAO,EAAE,SAAS,OAAO,GAAG;QACxB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;QACrB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;KACxB;CACJ,CAAC,CAAC;;AAEH,SAAS,aAAa,CAAC,SAAS,EAAE,SAAS,EAAE;IACzC,IAAI,SAAS,GAAG,WAAW,EAAE;QACzB,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;QAC5D,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;KACtC,MAAM,IAAI,SAAS,IAAI,SAAS,GAAG,YAAY,CAAC,EAAE;QAC/C,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;KACtC;CACJ;;AAED,SAAS,YAAY,CAAC,SAAS,EAAE;IAC7B,IAAI,KAAK,GAAG,SAAS,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;;IAEzC,IAAI,KAAK,CAAC,UAAU,KAAK,IAAI,CAAC,YAAY,EAAE;QACxC,IAAI,SAAS,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;QACrD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACjC,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC;QAC3B,IAAI,eAAe,GAAG,WAAW;YAC7B,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YAC/B,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;gBACR,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACpB;SACJ,CAAC;QACF,UAAU,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC;KAC9C;CACJ;;AAED,SAAS,gBAAgB,CAAC,SAAS,EAAE;IACjC,IAAI,CAAC,GAAG,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,GAAG,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC;IACnE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC9C,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACnD,IAAI,EAAE,IAAI,cAAc,IAAI,EAAE,IAAI,cAAc,EAAE;YAC9C,OAAO,IAAI,CAAC;SACf;KACJ;IACD,OAAO,KAAK,CAAC;CAChB;;AAED,IAAI,qBAAqB,GAAG,QAAQ,CAAC,YAAY,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;AACxE,IAAI,mBAAmB,GAAG,qBAAqB,KAAK,SAAS,CAAC;;;AAG9D,IAAI,oBAAoB,GAAG,SAAS,CAAC;AACrC,IAAI,iBAAiB,GAAG,MAAM,CAAC;AAC/B,IAAI,yBAAyB,GAAG,cAAc,CAAC;AAC/C,IAAI,iBAAiB,GAAG,MAAM,CAAC;AAC/B,IAAI,kBAAkB,GAAG,OAAO,CAAC;AACjC,IAAI,kBAAkB,GAAG,OAAO,CAAC;AACjC,IAAI,gBAAgB,GAAG,mBAAmB,EAAE,CAAC;;;;;;;;;AAS7C,SAAS,WAAW,CAAC,OAAO,EAAE,KAAK,EAAE;IACjC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACvB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;CACnB;;AAED,WAAW,CAAC,SAAS,GAAG;;;;;IAKpB,GAAG,EAAE,SAAS,KAAK,EAAE;;QAEjB,IAAI,KAAK,IAAI,oBAAoB,EAAE;YAC/B,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;SAC1B;;QAED,IAAI,mBAAmB,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,IAAI,gBAAgB,CAAC,KAAK,CAAC,EAAE;YAC9E,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,qBAAqB,CAAC,GAAG,KAAK,CAAC;SAC7D;QACD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC;KAC7C;;;;;IAKD,MAAM,EAAE,WAAW;QACf,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;KAC9C;;;;;;IAMD,OAAO,EAAE,WAAW;QAChB,IAAI,OAAO,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,SAAS,UAAU,EAAE;YAChD,IAAI,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE;gBACnD,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC,CAAC;aACzD;SACJ,CAAC,CAAC;QACH,OAAO,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;KAC/C;;;;;;IAMD,eAAe,EAAE,SAAS,KAAK,EAAE;QAC7B,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;QAC9B,IAAI,SAAS,GAAG,KAAK,CAAC,eAAe,CAAC;;;QAGtC,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE;YAChC,QAAQ,CAAC,cAAc,EAAE,CAAC;YAC1B,OAAO;SACV;;QAED,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,OAAO,GAAG,KAAK,CAAC,OAAO,EAAE,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,OAAO,GAAG,KAAK,CAAC,OAAO,EAAE,kBAAkB,CAAC,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC;QAC1F,IAAI,OAAO,GAAG,KAAK,CAAC,OAAO,EAAE,kBAAkB,CAAC,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC;;QAE1F,IAAI,OAAO,EAAE;;;YAGT,IAAI,YAAY,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC;YAC/C,IAAI,aAAa,GAAG,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC;YACvC,IAAI,cAAc,GAAG,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC;;YAE3C,IAAI,YAAY,IAAI,aAAa,IAAI,cAAc,EAAE;gBACjD,OAAO;aACV;SACJ;;QAED,IAAI,OAAO,IAAI,OAAO,EAAE;;YAEpB,OAAO;SACV;;QAED,IAAI,OAAO;aACN,OAAO,IAAI,SAAS,GAAG,oBAAoB,CAAC;aAC5C,OAAO,IAAI,SAAS,GAAG,kBAAkB,CAAC,EAAE;YAC7C,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;SACpC;KACJ;;;;;;IAMD,UAAU,EAAE,SAAS,QAAQ,EAAE;QAC3B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QACtC,QAAQ,CAAC,cAAc,EAAE,CAAC;KAC7B;CACJ,CAAC;;;;;;;AAOF,SAAS,iBAAiB,CAAC,OAAO,EAAE;;IAEhC,IAAI,KAAK,CAAC,OAAO,EAAE,iBAAiB,CAAC,EAAE;QACnC,OAAO,iBAAiB,CAAC;KAC5B;;IAED,IAAI,OAAO,GAAG,KAAK,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;IACjD,IAAI,OAAO,GAAG,KAAK,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;;;;;;IAMjD,IAAI,OAAO,IAAI,OAAO,EAAE;QACpB,OAAO,iBAAiB,CAAC;KAC5B;;;IAGD,IAAI,OAAO,IAAI,OAAO,EAAE;QACpB,OAAO,OAAO,GAAG,kBAAkB,GAAG,kBAAkB,CAAC;KAC5D;;;IAGD,IAAI,KAAK,CAAC,OAAO,EAAE,yBAAyB,CAAC,EAAE;QAC3C,OAAO,yBAAyB,CAAC;KACpC;;IAED,OAAO,iBAAiB,CAAC;CAC5B;;AAED,SAAS,mBAAmB,GAAG;IAC3B,IAAI,CAAC,mBAAmB,EAAE;QACtB,OAAO,KAAK,CAAC;KAChB;IACD,IAAI,QAAQ,GAAG,EAAE,CAAC;IAClB,IAAI,WAAW,GAAG,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC;IACpD,CAAC,MAAM,EAAE,cAAc,EAAE,OAAO,EAAE,OAAO,EAAE,aAAa,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,SAAS,GAAG,EAAE;;;;QAIpF,QAAQ,CAAC,GAAG,CAAC,GAAG,WAAW,GAAG,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,cAAc,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC;KACjF,CAAC,CAAC;IACH,OAAO,QAAQ,CAAC;CACnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BD,IAAI,cAAc,GAAG,CAAC,CAAC;AACvB,IAAI,WAAW,GAAG,CAAC,CAAC;AACpB,IAAI,aAAa,GAAG,CAAC,CAAC;AACtB,IAAI,WAAW,GAAG,CAAC,CAAC;AACpB,IAAI,gBAAgB,GAAG,WAAW,CAAC;AACnC,IAAI,eAAe,GAAG,EAAE,CAAC;AACzB,IAAI,YAAY,GAAG,EAAE,CAAC;;;;;;;;AAQtB,SAAS,UAAU,CAAC,OAAO,EAAE;IACzB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,IAAI,EAAE,CAAC,CAAC;;IAExD,IAAI,CAAC,EAAE,GAAG,QAAQ,EAAE,CAAC;;IAErB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;;IAGpB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;;IAE7D,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC;;IAE5B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IACvB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;CACzB;;AAED,UAAU,CAAC,SAAS,GAAG;;;;;IAKnB,QAAQ,EAAE,EAAE;;;;;;;IAOZ,GAAG,EAAE,SAAS,OAAO,EAAE;QACnB,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;;;QAG9B,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;QAClD,OAAO,IAAI,CAAC;KACf;;;;;;;IAOD,aAAa,EAAE,SAAS,eAAe,EAAE;QACrC,IAAI,cAAc,CAAC,eAAe,EAAE,eAAe,EAAE,IAAI,CAAC,EAAE;YACxD,OAAO,IAAI,CAAC;SACf;;QAED,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACrC,eAAe,GAAG,4BAA4B,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACtE,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,EAAE,CAAC,EAAE;YACnC,YAAY,CAAC,eAAe,CAAC,EAAE,CAAC,GAAG,eAAe,CAAC;YACnD,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SACvC;QACD,OAAO,IAAI,CAAC;KACf;;;;;;;IAOD,iBAAiB,EAAE,SAAS,eAAe,EAAE;QACzC,IAAI,cAAc,CAAC,eAAe,EAAE,mBAAmB,EAAE,IAAI,CAAC,EAAE;YAC5D,OAAO,IAAI,CAAC;SACf;;QAED,eAAe,GAAG,4BAA4B,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACtE,OAAO,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;QAC7C,OAAO,IAAI,CAAC;KACf;;;;;;;IAOD,cAAc,EAAE,SAAS,eAAe,EAAE;QACtC,IAAI,cAAc,CAAC,eAAe,EAAE,gBAAgB,EAAE,IAAI,CAAC,EAAE;YACzD,OAAO,IAAI,CAAC;SACf;;QAED,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACnC,eAAe,GAAG,4BAA4B,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACtE,IAAI,OAAO,CAAC,WAAW,EAAE,eAAe,CAAC,KAAK,CAAC,CAAC,EAAE;YAC9C,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAClC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;SACxC;QACD,OAAO,IAAI,CAAC;KACf;;;;;;;IAOD,kBAAkB,EAAE,SAAS,eAAe,EAAE;QAC1C,IAAI,cAAc,CAAC,eAAe,EAAE,oBAAoB,EAAE,IAAI,CAAC,EAAE;YAC7D,OAAO,IAAI,CAAC;SACf;;QAED,eAAe,GAAG,4BAA4B,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACtE,IAAI,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;QACvD,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;YACZ,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;SACrC;QACD,OAAO,IAAI,CAAC;KACf;;;;;;IAMD,kBAAkB,EAAE,WAAW;QAC3B,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;KACtC;;;;;;;IAOD,gBAAgB,EAAE,SAAS,eAAe,EAAE;QACxC,OAAO,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;KAClD;;;;;;;IAOD,IAAI,EAAE,SAAS,KAAK,EAAE;QAClB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;;QAEvB,SAAS,IAAI,CAAC,KAAK,EAAE;YACjB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SACnC;;;QAGD,IAAI,KAAK,GAAG,WAAW,EAAE;YACrB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;SAC9C;;QAED,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;;QAEzB,IAAI,KAAK,CAAC,eAAe,EAAE;YACvB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;SAC/B;;;QAGD,IAAI,KAAK,IAAI,WAAW,EAAE;YACtB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;SAC9C;KACJ;;;;;;;;IAQD,OAAO,EAAE,SAAS,KAAK,EAAE;QACrB,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAChB,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC3B;;QAED,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC;KAC7B;;;;;;IAMD,OAAO,EAAE,WAAW;QAChB,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YAChC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,YAAY,GAAG,cAAc,CAAC,CAAC,EAAE;gBAChE,OAAO,KAAK,CAAC;aAChB;YACD,CAAC,EAAE,CAAC;SACP;QACD,OAAO,IAAI,CAAC;KACf;;;;;;IAMD,SAAS,EAAE,SAAS,SAAS,EAAE;;;QAG3B,IAAI,cAAc,GAAG,MAAM,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;;;QAG3C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC,EAAE;YACxD,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC;YAC1B,OAAO;SACV;;;QAGD,IAAI,IAAI,CAAC,KAAK,IAAI,gBAAgB,GAAG,eAAe,GAAG,YAAY,CAAC,EAAE;YAClE,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC;SAC/B;;QAED,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;;;;QAI1C,IAAI,IAAI,CAAC,KAAK,IAAI,WAAW,GAAG,aAAa,GAAG,WAAW,GAAG,eAAe,CAAC,EAAE;YAC5E,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;SAChC;KACJ;;;;;;;;;IASD,OAAO,EAAE,SAAS,SAAS,EAAE,GAAG;;;;;;;IAOhC,cAAc,EAAE,WAAW,GAAG;;;;;;;IAO9B,KAAK,EAAE,WAAW,GAAG;CACxB,CAAC;;;;;;;AAOF,SAAS,QAAQ,CAAC,KAAK,EAAE;IACrB,IAAI,KAAK,GAAG,eAAe,EAAE;QACzB,OAAO,QAAQ,CAAC;KACnB,MAAM,IAAI,KAAK,GAAG,WAAW,EAAE;QAC5B,OAAO,KAAK,CAAC;KAChB,MAAM,IAAI,KAAK,GAAG,aAAa,EAAE;QAC9B,OAAO,MAAM,CAAC;KACjB,MAAM,IAAI,KAAK,GAAG,WAAW,EAAE;QAC5B,OAAO,OAAO,CAAC;KAClB;IACD,OAAO,EAAE,CAAC;CACb;;;;;;;AAOD,SAAS,YAAY,CAAC,SAAS,EAAE;IAC7B,IAAI,SAAS,IAAI,cAAc,EAAE;QAC7B,OAAO,MAAM,CAAC;KACjB,MAAM,IAAI,SAAS,IAAI,YAAY,EAAE;QAClC,OAAO,IAAI,CAAC;KACf,MAAM,IAAI,SAAS,IAAI,cAAc,EAAE;QACpC,OAAO,MAAM,CAAC;KACjB,MAAM,IAAI,SAAS,IAAI,eAAe,EAAE;QACrC,OAAO,OAAO,CAAC;KAClB;IACD,OAAO,EAAE,CAAC;CACb;;;;;;;;AAQD,SAAS,4BAA4B,CAAC,eAAe,EAAE,UAAU,EAAE;IAC/D,IAAI,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;IACjC,IAAI,OAAO,EAAE;QACT,OAAO,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;KACvC;IACD,OAAO,eAAe,CAAC;CAC1B;;;;;;;AAOD,SAAS,cAAc,GAAG;IACtB,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CACrC;;AAED,OAAO,CAAC,cAAc,EAAE,UAAU,EAAE;;;;;IAKhC,QAAQ,EAAE;;;;;QAKN,QAAQ,EAAE,CAAC;KACd;;;;;;;;IAQD,QAAQ,EAAE,SAAS,KAAK,EAAE;QACtB,IAAI,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;QAC3C,OAAO,cAAc,KAAK,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,cAAc,CAAC;KAC3E;;;;;;;;IAQD,OAAO,EAAE,SAAS,KAAK,EAAE;QACrB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACvB,IAAI,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;;QAEhC,IAAI,YAAY,GAAG,KAAK,IAAI,WAAW,GAAG,aAAa,CAAC,CAAC;QACzD,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;;;QAGnC,IAAI,YAAY,KAAK,SAAS,GAAG,YAAY,IAAI,CAAC,OAAO,CAAC,EAAE;YACxD,OAAO,KAAK,GAAG,eAAe,CAAC;SAClC,MAAM,IAAI,YAAY,IAAI,OAAO,EAAE;YAChC,IAAI,SAAS,GAAG,SAAS,EAAE;gBACvB,OAAO,KAAK,GAAG,WAAW,CAAC;aAC9B,MAAM,IAAI,EAAE,KAAK,GAAG,WAAW,CAAC,EAAE;gBAC/B,OAAO,WAAW,CAAC;aACtB;YACD,OAAO,KAAK,GAAG,aAAa,CAAC;SAChC;QACD,OAAO,YAAY,CAAC;KACvB;CACJ,CAAC,CAAC;;;;;;;;AAQH,SAAS,aAAa,GAAG;IACrB,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;IAEtC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;IACf,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;CAClB;;AAED,OAAO,CAAC,aAAa,EAAE,cAAc,EAAE;;;;;IAKnC,QAAQ,EAAE;QACN,KAAK,EAAE,KAAK;QACZ,SAAS,EAAE,EAAE;QACb,QAAQ,EAAE,CAAC;QACX,SAAS,EAAE,aAAa;KAC3B;;IAED,cAAc,EAAE,WAAW;QACvB,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;QACvC,IAAI,OAAO,GAAG,EAAE,CAAC;QACjB,IAAI,SAAS,GAAG,oBAAoB,EAAE;YAClC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;SACpC;QACD,IAAI,SAAS,GAAG,kBAAkB,EAAE;YAChC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;SACpC;QACD,OAAO,OAAO,CAAC;KAClB;;IAED,aAAa,EAAE,SAAS,KAAK,EAAE;QAC3B,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,QAAQ,GAAG,IAAI,CAAC;QACpB,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;QAC9B,IAAI,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;QAChC,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;QACrB,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;;;QAGrB,IAAI,EAAE,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,EAAE;YAClC,IAAI,OAAO,CAAC,SAAS,GAAG,oBAAoB,EAAE;gBAC1C,SAAS,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,cAAc,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,cAAc,GAAG,eAAe,CAAC;gBACpF,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC;gBACxB,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;aACrC,MAAM;gBACH,SAAS,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,cAAc,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,YAAY,GAAG,cAAc,CAAC;gBACjF,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC;gBACxB,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;aACrC;SACJ;QACD,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;QAC5B,OAAO,QAAQ,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,IAAI,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;KACpF;;IAED,QAAQ,EAAE,SAAS,KAAK,EAAE;QACtB,OAAO,cAAc,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;aACrD,IAAI,CAAC,KAAK,GAAG,WAAW,KAAK,EAAE,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;KAChG;;IAED,IAAI,EAAE,SAAS,KAAK,EAAE;;QAElB,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;QACvB,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;;QAEvB,IAAI,SAAS,GAAG,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;;QAE9C,IAAI,SAAS,EAAE;YACX,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,SAAS,CAAC;SAC1D;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;KACtC;CACJ,CAAC,CAAC;;;;;;;;AAQH,SAAS,eAAe,GAAG;IACvB,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CACzC;;AAED,OAAO,CAAC,eAAe,EAAE,cAAc,EAAE;;;;;IAKrC,QAAQ,EAAE;QACN,KAAK,EAAE,OAAO;QACd,SAAS,EAAE,CAAC;QACZ,QAAQ,EAAE,CAAC;KACd;;IAED,cAAc,EAAE,WAAW;QACvB,OAAO,CAAC,iBAAiB,CAAC,CAAC;KAC9B;;IAED,QAAQ,EAAE,SAAS,KAAK,EAAE;QACtB,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;aACxC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC;KACxF;;IAED,IAAI,EAAE,SAAS,KAAK,EAAE;QAClB,IAAI,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE;YACnB,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC;YAC3C,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;SACtD;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;KACtC;CACJ,CAAC,CAAC;;;;;;;;AAQH,SAAS,eAAe,GAAG;IACvB,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;IAElC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;CACtB;;AAED,OAAO,CAAC,eAAe,EAAE,UAAU,EAAE;;;;;IAKjC,QAAQ,EAAE;QACN,KAAK,EAAE,OAAO;QACd,QAAQ,EAAE,CAAC;QACX,IAAI,EAAE,GAAG;QACT,SAAS,EAAE,CAAC;KACf;;IAED,cAAc,EAAE,WAAW;QACvB,OAAO,CAAC,iBAAiB,CAAC,CAAC;KAC9B;;IAED,OAAO,EAAE,SAAS,KAAK,EAAE;QACrB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,aAAa,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,OAAO,CAAC,QAAQ,CAAC;QAC/D,IAAI,aAAa,GAAG,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC;QACvD,IAAI,SAAS,GAAG,KAAK,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;;QAE/C,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;;;QAIpB,IAAI,CAAC,aAAa,IAAI,CAAC,aAAa,KAAK,KAAK,CAAC,SAAS,IAAI,SAAS,GAAG,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YAClG,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB,MAAM,IAAI,KAAK,CAAC,SAAS,GAAG,WAAW,EAAE;YACtC,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,MAAM,GAAG,iBAAiB,CAAC,WAAW;gBACvC,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC;gBAC9B,IAAI,CAAC,OAAO,EAAE,CAAC;aAClB,EAAE,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC1B,MAAM,IAAI,KAAK,CAAC,SAAS,GAAG,SAAS,EAAE;YACpC,OAAO,gBAAgB,CAAC;SAC3B;QACD,OAAO,YAAY,CAAC;KACvB;;IAED,KAAK,EAAE,WAAW;QACd,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC7B;;IAED,IAAI,EAAE,SAAS,KAAK,EAAE;QAClB,IAAI,IAAI,CAAC,KAAK,KAAK,gBAAgB,EAAE;YACjC,OAAO;SACV;;QAED,IAAI,KAAK,KAAK,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC,EAAE;YACxC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,EAAE,KAAK,CAAC,CAAC;SACvD,MAAM;YACH,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,GAAG,EAAE,CAAC;YAC9B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACtD;KACJ;CACJ,CAAC,CAAC;;;;;;;;AAQH,SAAS,gBAAgB,GAAG;IACxB,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CACzC;;AAED,OAAO,CAAC,gBAAgB,EAAE,cAAc,EAAE;;;;;IAKtC,QAAQ,EAAE;QACN,KAAK,EAAE,QAAQ;QACf,SAAS,EAAE,CAAC;QACZ,QAAQ,EAAE,CAAC;KACd;;IAED,cAAc,EAAE,WAAW;QACvB,OAAO,CAAC,iBAAiB,CAAC,CAAC;KAC9B;;IAED,QAAQ,EAAE,SAAS,KAAK,EAAE;QACtB,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;aACxC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC;KACvF;CACJ,CAAC,CAAC;;;;;;;;AAQH,SAAS,eAAe,GAAG;IACvB,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CACzC;;AAED,OAAO,CAAC,eAAe,EAAE,cAAc,EAAE;;;;;IAKrC,QAAQ,EAAE;QACN,KAAK,EAAE,OAAO;QACd,SAAS,EAAE,EAAE;QACb,QAAQ,EAAE,GAAG;QACb,SAAS,EAAE,oBAAoB,GAAG,kBAAkB;QACpD,QAAQ,EAAE,CAAC;KACd;;IAED,cAAc,EAAE,WAAW;QACvB,OAAO,aAAa,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC5D;;IAED,QAAQ,EAAE,SAAS,KAAK,EAAE;QACtB,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;QACvC,IAAI,QAAQ,CAAC;;QAEb,IAAI,SAAS,IAAI,oBAAoB,GAAG,kBAAkB,CAAC,EAAE;YACzD,QAAQ,GAAG,KAAK,CAAC,eAAe,CAAC;SACpC,MAAM,IAAI,SAAS,GAAG,oBAAoB,EAAE;YACzC,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC;SACrC,MAAM,IAAI,SAAS,GAAG,kBAAkB,EAAE;YACvC,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC;SACrC;;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;YACzC,SAAS,GAAG,KAAK,CAAC,eAAe;YACjC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS;YACvC,KAAK,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ;YAC1C,GAAG,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;KAC5E;;IAED,IAAI,EAAE,SAAS,KAAK,EAAE;QAClB,IAAI,SAAS,GAAG,YAAY,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;QACpD,IAAI,SAAS,EAAE;YACX,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,SAAS,EAAE,KAAK,CAAC,CAAC;SAC5D;;QAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;KAChD;CACJ,CAAC,CAAC;;;;;;;;;;;;AAYH,SAAS,aAAa,GAAG;IACrB,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;;;IAIlC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACnB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;;IAErB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACnB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;CAClB;;AAED,OAAO,CAAC,aAAa,EAAE,UAAU,EAAE;;;;;IAK/B,QAAQ,EAAE;QACN,KAAK,EAAE,KAAK;QACZ,QAAQ,EAAE,CAAC;QACX,IAAI,EAAE,CAAC;QACP,QAAQ,EAAE,GAAG;QACb,IAAI,EAAE,GAAG;QACT,SAAS,EAAE,CAAC;QACZ,YAAY,EAAE,EAAE;KACnB;;IAED,cAAc,EAAE,WAAW;QACvB,OAAO,CAAC,yBAAyB,CAAC,CAAC;KACtC;;IAED,OAAO,EAAE,SAAS,KAAK,EAAE;QACrB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;;QAE3B,IAAI,aAAa,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,OAAO,CAAC,QAAQ,CAAC;QAC/D,IAAI,aAAa,GAAG,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC;QACvD,IAAI,cAAc,GAAG,KAAK,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;;QAEpD,IAAI,CAAC,KAAK,EAAE,CAAC;;QAEb,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,WAAW,MAAM,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,EAAE;YACvD,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;SAC7B;;;;QAID,IAAI,aAAa,IAAI,cAAc,IAAI,aAAa,EAAE;YAClD,IAAI,KAAK,CAAC,SAAS,IAAI,SAAS,EAAE;gBAC9B,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;aAC7B;;YAED,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC;YAC1F,IAAI,aAAa,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;;YAEpG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC;YAC7B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC;;YAE5B,IAAI,CAAC,aAAa,IAAI,CAAC,aAAa,EAAE;gBAClC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;aAClB,MAAM;gBACH,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;aACnB;;YAED,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;;;YAIpB,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC;YACzC,IAAI,QAAQ,KAAK,CAAC,EAAE;;;gBAGhB,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAE;oBAC5B,OAAO,gBAAgB,CAAC;iBAC3B,MAAM;oBACH,IAAI,CAAC,MAAM,GAAG,iBAAiB,CAAC,WAAW;wBACvC,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC;wBAC9B,IAAI,CAAC,OAAO,EAAE,CAAC;qBAClB,EAAE,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;oBAC3B,OAAO,WAAW,CAAC;iBACtB;aACJ;SACJ;QACD,OAAO,YAAY,CAAC;KACvB;;IAED,WAAW,EAAE,WAAW;QACpB,IAAI,CAAC,MAAM,GAAG,iBAAiB,CAAC,WAAW;YACvC,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC;SAC7B,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAChC,OAAO,YAAY,CAAC;KACvB;;IAED,KAAK,EAAE,WAAW;QACd,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC7B;;IAED,IAAI,EAAE,WAAW;QACb,IAAI,IAAI,CAAC,KAAK,IAAI,gBAAgB,EAAE;YAChC,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;YAClC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACtD;KACJ;CACJ,CAAC,CAAC;;;;;;;;AAQH,SAAS,MAAM,CAAC,OAAO,EAAE,OAAO,EAAE;IAC9B,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;IACxB,OAAO,CAAC,WAAW,GAAG,WAAW,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC/E,OAAO,IAAI,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;CACxC;;;;;AAKD,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;;;;;;AAMzB,MAAM,CAAC,QAAQ,GAAG;;;;;;;IAOd,SAAS,EAAE,KAAK;;;;;;;;IAQhB,WAAW,EAAE,oBAAoB;;;;;;IAMjC,MAAM,EAAE,IAAI;;;;;;;;;IASZ,WAAW,EAAE,IAAI;;;;;;;IAOjB,UAAU,EAAE,IAAI;;;;;;;IAOhB,MAAM,EAAE;;QAEJ,CAAC,gBAAgB,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACnC,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC9C,CAAC,eAAe,EAAE,CAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC;QACpD,CAAC,aAAa,EAAE,CAAC,SAAS,EAAE,oBAAoB,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAC7D,CAAC,aAAa,CAAC;QACf,CAAC,aAAa,EAAE,CAAC,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QACvD,CAAC,eAAe,CAAC;KACpB;;;;;;;IAOD,QAAQ,EAAE;;;;;;QAMN,UAAU,EAAE,MAAM;;;;;;;QAOlB,WAAW,EAAE,MAAM;;;;;;;;;QASnB,YAAY,EAAE,MAAM;;;;;;;QAOpB,cAAc,EAAE,MAAM;;;;;;;QAOtB,QAAQ,EAAE,MAAM;;;;;;;;QAQhB,iBAAiB,EAAE,eAAe;KACrC;CACJ,CAAC;;AAEF,IAAI,IAAI,GAAG,CAAC,CAAC;AACb,IAAI,WAAW,GAAG,CAAC,CAAC;;;;;;;;AAQpB,SAAS,OAAO,CAAC,OAAO,EAAE,OAAO,EAAE;IAC/B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,QAAQ,EAAE,OAAO,IAAI,EAAE,CAAC,CAAC;;IAE1D,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,IAAI,OAAO,CAAC;;IAE/D,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACnB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IAClB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IACtB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;;IAEtB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACvB,IAAI,CAAC,KAAK,GAAG,mBAAmB,CAAC,IAAI,CAAC,CAAC;IACvC,IAAI,CAAC,WAAW,GAAG,IAAI,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;;IAEnE,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;IAE3B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,SAAS,IAAI,EAAE;QAC1C,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7C,IAAI,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KACjD,EAAE,IAAI,CAAC,CAAC;CACZ;;AAED,OAAO,CAAC,SAAS,GAAG;;;;;;IAMhB,GAAG,EAAE,SAAS,OAAO,EAAE;QACnB,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;;;QAG9B,IAAI,OAAO,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;SAC7B;QACD,IAAI,OAAO,CAAC,WAAW,EAAE;;YAErB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;YACrB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC;YACxC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;SACrB;QACD,OAAO,IAAI,CAAC;KACf;;;;;;;;IAQD,IAAI,EAAE,SAAS,KAAK,EAAE;QAClB,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,KAAK,GAAG,WAAW,GAAG,IAAI,CAAC;KACrD;;;;;;;;IAQD,SAAS,EAAE,SAAS,SAAS,EAAE;QAC3B,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,OAAO,CAAC,OAAO,EAAE;YACjB,OAAO;SACV;;;QAGD,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;;QAE5C,IAAI,UAAU,CAAC;QACf,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;;;;;QAKnC,IAAI,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;;;;QAI1C,IAAI,CAAC,aAAa,KAAK,aAAa,IAAI,aAAa,CAAC,KAAK,GAAG,gBAAgB,CAAC,EAAE;YAC7E,aAAa,GAAG,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC;SAChD;;QAED,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE;YAC3B,UAAU,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;;;;;;;;YAQ5B,IAAI,OAAO,CAAC,OAAO,KAAK,WAAW;oBAC3B,CAAC,aAAa,IAAI,UAAU,IAAI,aAAa;oBAC7C,UAAU,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,EAAE;gBACjD,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;aACnC,MAAM;gBACH,UAAU,CAAC,KAAK,EAAE,CAAC;aACtB;;;;YAID,IAAI,CAAC,aAAa,IAAI,UAAU,CAAC,KAAK,IAAI,WAAW,GAAG,aAAa,GAAG,WAAW,CAAC,EAAE;gBAClF,aAAa,GAAG,OAAO,CAAC,aAAa,GAAG,UAAU,CAAC;aACtD;YACD,CAAC,EAAE,CAAC;SACP;KACJ;;;;;;;IAOD,GAAG,EAAE,SAAS,UAAU,EAAE;QACtB,IAAI,UAAU,YAAY,UAAU,EAAE;YAClC,OAAO,UAAU,CAAC;SACrB;;QAED,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzC,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,UAAU,EAAE;gBAC5C,OAAO,WAAW,CAAC,CAAC,CAAC,CAAC;aACzB;SACJ;QACD,OAAO,IAAI,CAAC;KACf;;;;;;;;IAQD,GAAG,EAAE,SAAS,UAAU,EAAE;QACtB,IAAI,cAAc,CAAC,UAAU,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE;YACzC,OAAO,IAAI,CAAC;SACf;;;QAGD,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAClD,IAAI,QAAQ,EAAE;YACV,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;SACzB;;QAED,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClC,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;;QAE1B,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;QAC1B,OAAO,UAAU,CAAC;KACrB;;;;;;;IAOD,MAAM,EAAE,SAAS,UAAU,EAAE;QACzB,IAAI,cAAc,CAAC,UAAU,EAAE,QAAQ,EAAE,IAAI,CAAC,EAAE;YAC5C,OAAO,IAAI,CAAC;SACf;;QAED,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;;;QAGlC,IAAI,UAAU,EAAE;YACZ,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;YACnC,IAAI,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;;YAE7C,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;gBACd,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;aAC7B;SACJ;;QAED,OAAO,IAAI,CAAC;KACf;;;;;;;;IAQD,EAAE,EAAE,SAAS,MAAM,EAAE,OAAO,EAAE;QAC1B,IAAI,MAAM,KAAK,SAAS,EAAE;YACtB,OAAO;SACV;QACD,IAAI,OAAO,KAAK,SAAS,EAAE;YACvB,OAAO;SACV;;QAED,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,SAAS,KAAK,EAAE;YACnC,QAAQ,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YACxC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACjC,CAAC,CAAC;QACH,OAAO,IAAI,CAAC;KACf;;;;;;;;IAQD,GAAG,EAAE,SAAS,MAAM,EAAE,OAAO,EAAE;QAC3B,IAAI,MAAM,KAAK,SAAS,EAAE;YACtB,OAAO;SACV;;QAED,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,SAAS,KAAK,EAAE;YACnC,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,QAAQ,CAAC,KAAK,CAAC,CAAC;aAC1B,MAAM;gBACH,QAAQ,CAAC,KAAK,CAAC,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;aACnF;SACJ,CAAC,CAAC;QACH,OAAO,IAAI,CAAC;KACf;;;;;;;IAOD,IAAI,EAAE,SAAS,KAAK,EAAE,IAAI,EAAE;;QAExB,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;YACxB,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SAChC;;;QAGD,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC;QACpE,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;YAC/B,OAAO;SACV;;QAED,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,cAAc,GAAG,WAAW;YAC7B,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;SAClC,CAAC;;QAEF,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE;YACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YAClB,CAAC,EAAE,CAAC;SACP;KACJ;;;;;;IAMD,OAAO,EAAE,WAAW;QAChB,IAAI,CAAC,OAAO,IAAI,cAAc,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;;QAE5C,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACvB;CACJ,CAAC;;;;;;;AAOF,SAAS,cAAc,CAAC,OAAO,EAAE,GAAG,EAAE;IAClC,IAAI,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;IAC9B,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;QAChB,OAAO;KACV;IACD,IAAI,IAAI,CAAC;IACT,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,KAAK,EAAE,IAAI,EAAE;QACjD,IAAI,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QACrC,IAAI,GAAG,EAAE;YACL,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAChD,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;SAC/B,MAAM;YACH,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;SACzD;KACJ,CAAC,CAAC;IACH,IAAI,CAAC,GAAG,EAAE;QACN,OAAO,CAAC,WAAW,GAAG,EAAE,CAAC;KAC5B;CACJ;;;;;;;AAOD,SAAS,eAAe,CAAC,KAAK,EAAE,IAAI,EAAE;IAClC,IAAI,YAAY,GAAG,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IACjD,YAAY,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IAC1C,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC;IAC5B,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;CAC3C;;AAED,MAAM,CAAC,MAAM,EAAE;IACX,WAAW,EAAE,WAAW;IACxB,UAAU,EAAE,UAAU;IACtB,SAAS,EAAE,SAAS;IACpB,YAAY,EAAE,YAAY;;IAE1B,cAAc,EAAE,cAAc;IAC9B,WAAW,EAAE,WAAW;IACxB,aAAa,EAAE,aAAa;IAC5B,WAAW,EAAE,WAAW;IACxB,gBAAgB,EAAE,gBAAgB;IAClC,eAAe,EAAE,eAAe;IAChC,YAAY,EAAE,YAAY;;IAE1B,cAAc,EAAE,cAAc;IAC9B,cAAc,EAAE,cAAc;IAC9B,eAAe,EAAE,eAAe;IAChC,YAAY,EAAE,YAAY;IAC1B,cAAc,EAAE,cAAc;IAC9B,oBAAoB,EAAE,oBAAoB;IAC1C,kBAAkB,EAAE,kBAAkB;IACtC,aAAa,EAAE,aAAa;;IAE5B,OAAO,EAAE,OAAO;IAChB,KAAK,EAAE,KAAK;IACZ,WAAW,EAAE,WAAW;;IAExB,UAAU,EAAE,UAAU;IACtB,UAAU,EAAE,UAAU;IACtB,iBAAiB,EAAE,iBAAiB;IACpC,eAAe,EAAE,eAAe;IAChC,gBAAgB,EAAE,gBAAgB;;IAElC,UAAU,EAAE,UAAU;IACtB,cAAc,EAAE,cAAc;IAC9B,GAAG,EAAE,aAAa;IAClB,GAAG,EAAE,aAAa;IAClB,KAAK,EAAE,eAAe;IACtB,KAAK,EAAE,eAAe;IACtB,MAAM,EAAE,gBAAgB;IACxB,KAAK,EAAE,eAAe;;IAEtB,EAAE,EAAE,iBAAiB;IACrB,GAAG,EAAE,oBAAoB;IACzB,IAAI,EAAE,IAAI;IACV,KAAK,EAAE,KAAK;IACZ,MAAM,EAAE,MAAM;IACd,MAAM,EAAE,MAAM;IACd,OAAO,EAAE,OAAO;IAChB,MAAM,EAAE,MAAM;IACd,QAAQ,EAAE,QAAQ;CACrB,CAAC,CAAC;;;;AAIH,IAAI,UAAU,IAAI,OAAO,MAAM,KAAK,WAAW,GAAG,MAAM,IAAI,OAAO,IAAI,KAAK,WAAW,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;AACtG,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC;;AAE3B,IAAI,OAAO4D,SAAM,KAAK,UAAU,IAAIA,SAAM,CAAC,GAAG,EAAE;IAC5CA,SAAM,CAAC,WAAW;QACd,OAAO,MAAM,CAAC;KACjB,CAAC,CAAC;CACN,MAAM,IAAI,QAAa,IAAI,WAAW,IAAI,MAAM,CAAC,OAAO,EAAE;IACvD,cAAc,GAAG,MAAM,CAAC;CAC3B,MAAM;IACH,MAAM,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC;CAC/B;;CAEA,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;;;ACllF/B;;;;;AAKA,AAEA,AAAO,IAAIC,kBAAkB,SAAlBA,eAAkB,CAACvE,UAAD;;;;;;;;;;;;;;;;;;iCAOhBwE,YAPgB,EAOF;;;YACnBA,aAAanC,IAAb,KAAsB,CAA1B,EAA6B;YACzB,KAAKoC,oBAAT,EAA+BC,aAAa,KAAKD,oBAAlB;YAC3B,CAAChE,OAAOkB,UAAP,CAAkB,KAAKgD,sBAAvB,EAA+CH,YAA/C,CAAL,EAAmE;kBACzDvF,GAAR,CAAY,yCAAZ,EACEuF,aAAa1D,KADf,EACsB0D,aAAazD,MADnC;cAEI6D,OAAO,KAAKH,oBAAL,GAA4BI,WAAW,YAAM;gBAClDD,SAAS,OAAKH,oBAAlB,EAAwC;mBACnCK,UAAL,CAAgBN,YAAhB;WAFqC,CAAvC;SAHF,MAQK;kBACKvF,GAAR,CAAY,4BAAZ,EACEuF,aAAa1D,KADf,EACsB0D,aAAazD,MADnC;cAEIgE,OAAO,KAAKN,oBAAL,GAA4BI,WAAW,YAAM;gBAClDE,SAAS,OAAKN,oBAAlB,EAAwC;gBACpC,CAAChE,OAAOkB,UAAP,CAAkB,OAAKqD,qBAAvB,EAA8CR,YAA9C,CAAL,EAAkE;qBAC3DS,IAAL;;WAHmC,CAAvC;;;;;IArBqDjF,UAA9B;CAAtB;;ACPP;;;;;AAKA,AAAO,IAAIkF,yBAAyB,SAAzBA,sBAAyB,CAAClF,UAAD;;;;;;;;;;;;;;;;;;6BAO3BuC,KAP2B,EAOpB;wGACM4C,sGAAa5C,KAAb;YACdA,MAAME,KAAN,IAAeF,MAAME,KAAN,CAAY2C,yBAA/B,EAA0D;gBAClD3C,KAAN,CAAY2C,yBAAZ,CAAsC,IAAtC;;;;;;;;;;;+BASK7C,KAnByB,EAmBlB;0GACM4C,wGAAe5C,KAAf;cACdI,GAAN,CAAU0C,gBAAV,GAA6B,IAA7B;;;;;;;;;;qCAQa9C,KA7BmB,EA6BZ;gHACM4C,8GAAqB5C,KAArB;eACnBA,MAAMI,GAAN,CAAU0C,gBAAjB;;;;IA/B8DrF,UAA9B;CAA7B;;;ACLP,CAAC,UAAU,MAAM,EAAE,OAAO,EAAE;CAC3B,AAA+D,cAAc,GAAG,OAAO,EAAE,AAEzD,CAAC;CACjC,CAAC5B,cAAI,GAAG,YAAY,EAAE,YAAY,CAAC;;AAEpC,SAAS,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;IAC/C,eAAe,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,KAAK,KAAK,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,OAAO,IAAI,cAAc,CAAC,CAAC;CAC5F;;AAED,SAAS,eAAe,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;;IAEnD,OAAO,KAAK,GAAG,IAAI,EAAE;QACjB,IAAI,KAAK,GAAG,IAAI,GAAG,GAAG,EAAE;YACpB,IAAI,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,CAAC,CAAC;YACzB,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAClC,IAAI,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACzE,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC7D,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACrE,eAAe,CAAC,GAAG,EAAE,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;SACvD;;QAED,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACf,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,IAAI,CAAC,GAAG,KAAK,CAAC;;QAEd,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QACnB,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;;QAEvD,OAAO,CAAC,GAAG,CAAC,EAAE;YACV,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAChB,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;YACJ,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC;YACnC,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC;SACtC;;QAED,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;aAC/C;YACD,CAAC,EAAE,CAAC;YACJ,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;SACvB;;QAED,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;KAC7B;CACJ;;AAED,SAAS,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;IACrB,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;IACjB,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;IAChB,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;CAChB;;AAED,SAAS,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE;IAC1B,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;CACrC;;AAED,OAAO,WAAW,CAAC;;CAElB,EAAE,EAAE;;;AC5DL,SAAc,GAAG,KAAK,CAAC;AACvB,aAAsB,GAAG,KAAK,CAAC;;AAE/B,IAAI,WAAW,GAAGkH,aAAsB,CAAC;;AAEzC,SAAS,KAAK,CAAC,UAAU,EAAE,MAAM,EAAE;IAC/B,IAAI,EAAE,IAAI,YAAY,KAAK,CAAC,EAAE,OAAO,IAAI,KAAK,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;;;IAGnE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,IAAI,CAAC,CAAC,CAAC;IAChD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC,CAAC,CAAC;;IAElE,IAAI,MAAM,EAAE;QACR,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KAC5B;;IAED,IAAI,CAAC,KAAK,EAAE,CAAC;CAChB;;AAED,KAAK,CAAC,SAAS,GAAG;;IAEd,GAAG,EAAE,YAAY;QACb,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;KACnC;;IAED,MAAM,EAAE,UAAU,IAAI,EAAE;;QAEpB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI;YAChB,MAAM,GAAG,EAAE;YACX,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;QAEzB,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,OAAO,MAAM,CAAC;;QAE3C,IAAI,aAAa,GAAG,EAAE;YAClB,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,CAAC;;QAE7B,OAAO,IAAI,EAAE;YACT,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;;gBAElD,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACzB,SAAS,GAAG,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;;gBAE9C,IAAI,UAAU,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE;oBAC7B,IAAI,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;yBAC7B,IAAI,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;yBACxD,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBAClC;aACJ;YACD,IAAI,GAAG,aAAa,CAAC,GAAG,EAAE,CAAC;SAC9B;;QAED,OAAO,MAAM,CAAC;KACjB;;IAED,QAAQ,EAAE,UAAU,IAAI,EAAE;;QAEtB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI;YAChB,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;QAEzB,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,OAAO,KAAK,CAAC;;QAE1C,IAAI,aAAa,GAAG,EAAE;YAClB,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,CAAC;;QAE7B,OAAO,IAAI,EAAE;YACT,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;;gBAElD,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACzB,SAAS,GAAG,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;;gBAE9C,IAAI,UAAU,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE;oBAC7B,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE,OAAO,IAAI,CAAC;oBACxD,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBAC7B;aACJ;YACD,IAAI,GAAG,aAAa,CAAC,GAAG,EAAE,CAAC;SAC9B;;QAED,OAAO,KAAK,CAAC;KAChB;;IAED,IAAI,EAAE,UAAU,IAAI,EAAE;QAClB,IAAI,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,EAAE,OAAO,IAAI,CAAC;;QAExC,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,EAAE;YAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC7C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aACxB;YACD,OAAO,IAAI,CAAC;SACf;;;QAGD,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;;QAE5D,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;;YAE5B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;SAEpB,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE;;YAEzC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;SAEpC,MAAM;YACH,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE;;gBAEhC,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;gBACxB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;gBACjB,IAAI,GAAG,OAAO,CAAC;aAClB;;;YAGD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;SAChE;;QAED,OAAO,IAAI,CAAC;KACf;;IAED,MAAM,EAAE,UAAU,IAAI,EAAE;QACpB,IAAI,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACnD,OAAO,IAAI,CAAC;KACf;;IAED,KAAK,EAAE,YAAY;QACf,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,IAAI,CAAC;KACf;;IAED,MAAM,EAAE,UAAU,IAAI,EAAE,QAAQ,EAAE;QAC9B,IAAI,CAAC,IAAI,EAAE,OAAO,IAAI,CAAC;;QAEvB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI;YAChB,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACxB,IAAI,GAAG,EAAE;YACT,OAAO,GAAG,EAAE;YACZ,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC;;;QAG9B,OAAO,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;;YAExB,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBAClB,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAC/B,CAAC,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC;gBAClB,OAAO,GAAG,IAAI,CAAC;aAClB;;YAED,IAAI,IAAI,CAAC,IAAI,EAAE;gBACX,KAAK,GAAG,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;;gBAEhD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;;oBAEd,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAChB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;oBACrB,OAAO,IAAI,CAAC;iBACf;aACJ;;YAED,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE;gBAChD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAChB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAChB,CAAC,GAAG,CAAC,CAAC;gBACN,MAAM,GAAG,IAAI,CAAC;gBACd,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;;aAE3B,MAAM,IAAI,MAAM,EAAE;gBACf,CAAC,EAAE,CAAC;gBACJ,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC1B,OAAO,GAAG,KAAK,CAAC;;aAEnB,MAAM,IAAI,GAAG,IAAI,CAAC;SACtB;;QAED,OAAO,IAAI,CAAC;KACf;;IAED,MAAM,EAAE,UAAU,IAAI,EAAE,EAAE,OAAO,IAAI,CAAC,EAAE;;IAExC,WAAW,EAAE,eAAe;IAC5B,WAAW,EAAE,eAAe;;IAE5B,MAAM,EAAE,YAAY,EAAE,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE;;IAEzC,QAAQ,EAAE,UAAU,IAAI,EAAE;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,OAAO,IAAI,CAAC;KACf;;IAED,IAAI,EAAE,UAAU,IAAI,EAAE,MAAM,EAAE;QAC1B,IAAI,aAAa,GAAG,EAAE,CAAC;QACvB,OAAO,IAAI,EAAE;YACT,IAAI,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;iBACnD,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;;YAE5D,IAAI,GAAG,aAAa,CAAC,GAAG,EAAE,CAAC;SAC9B;QACD,OAAO,MAAM,CAAC;KACjB;;IAED,MAAM,EAAE,UAAU,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE;;QAE1C,IAAI,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,CAAC;YACpB,CAAC,GAAG,IAAI,CAAC,WAAW;YACpB,IAAI,CAAC;;QAET,IAAI,CAAC,IAAI,CAAC,EAAE;;YAER,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;YAChD,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YAC5B,OAAO,IAAI,CAAC;SACf;;QAED,IAAI,CAAC,MAAM,EAAE;;YAET,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;;YAG9C,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;SAC9C;;QAED,IAAI,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;QACtB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;;;QAIrB,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;YACrB,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACjC,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC;;QAEzB,WAAW,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;;QAEtD,KAAK,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,EAAE,EAAE;;YAEhC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;;YAErC,WAAW,CAAC,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;;YAEpD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE;;gBAE9B,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC;;;gBAGtC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;aACjE;SACJ;;QAED,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;;QAE5B,OAAO,IAAI,CAAC;KACf;;IAED,cAAc,EAAE,UAAU,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;;QAE/C,IAAI,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,cAAc,CAAC;;QAE1E,OAAO,IAAI,EAAE;YACT,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;YAEhB,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,KAAK,EAAE,MAAM;;YAElD,OAAO,GAAG,cAAc,GAAG,QAAQ,CAAC;;YAEpC,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAClD,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACzB,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACvB,WAAW,GAAG,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,GAAG,IAAI,CAAC;;;gBAG/C,IAAI,WAAW,GAAG,cAAc,EAAE;oBAC9B,cAAc,GAAG,WAAW,CAAC;oBAC7B,OAAO,GAAG,IAAI,GAAG,OAAO,GAAG,IAAI,GAAG,OAAO,CAAC;oBAC1C,UAAU,GAAG,KAAK,CAAC;;iBAEtB,MAAM,IAAI,WAAW,KAAK,cAAc,EAAE;;oBAEvC,IAAI,IAAI,GAAG,OAAO,EAAE;wBAChB,OAAO,GAAG,IAAI,CAAC;wBACf,UAAU,GAAG,KAAK,CAAC;qBACtB;iBACJ;aACJ;;YAED,IAAI,GAAG,UAAU,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SACzC;;QAED,OAAO,IAAI,CAAC;KACf;;IAED,OAAO,EAAE,UAAU,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE;;QAEpC,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM;YACpB,IAAI,GAAG,MAAM,GAAG,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;YACnC,UAAU,GAAG,EAAE,CAAC;;;QAGpB,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;;;QAGnE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzB,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;;QAGnB,OAAO,KAAK,IAAI,CAAC,EAAE;YACf,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,EAAE;gBACtD,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;gBAC/B,KAAK,EAAE,CAAC;aACX,MAAM,MAAM;SAChB;;;QAGD,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;KACrD;;;IAGD,MAAM,EAAE,UAAU,UAAU,EAAE,KAAK,EAAE;;QAEjC,IAAI,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC;YACxB,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM;YACxB,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;;QAEzB,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;QAElC,IAAI,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;QAEpD,IAAI,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC;QAC9F,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC7B,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;;QAEzB,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAC5B,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;;QAE/B,IAAI,KAAK,EAAE,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACnD,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;KACvC;;IAED,UAAU,EAAE,UAAU,IAAI,EAAE,OAAO,EAAE;;QAEjC,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QACxC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QACvB,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;KACpC;;IAED,iBAAiB,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;;QAErC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,KAAK,CAAC;;QAE/D,UAAU,GAAG,OAAO,GAAG,QAAQ,CAAC;;QAEhC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACzB,KAAK,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1C,KAAK,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;;YAE1C,OAAO,GAAG,gBAAgB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YACzC,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;;;YAGzC,IAAI,OAAO,GAAG,UAAU,EAAE;gBACtB,UAAU,GAAG,OAAO,CAAC;gBACrB,KAAK,GAAG,CAAC,CAAC;;gBAEV,OAAO,GAAG,IAAI,GAAG,OAAO,GAAG,IAAI,GAAG,OAAO,CAAC;;aAE7C,MAAM,IAAI,OAAO,KAAK,UAAU,EAAE;;gBAE/B,IAAI,IAAI,GAAG,OAAO,EAAE;oBAChB,OAAO,GAAG,IAAI,CAAC;oBACf,KAAK,GAAG,CAAC,CAAC;iBACb;aACJ;SACJ;;QAED,OAAO,KAAK,CAAC;KAChB;;;IAGD,gBAAgB,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE;;QAEpC,IAAI,WAAW,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,GAAG,eAAe;YAC5D,WAAW,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,GAAG,eAAe;YAC5D,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC;YACtD,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;;;;QAI3D,IAAI,OAAO,GAAG,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;KAC1D;;;IAGD,cAAc,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE;;QAE3C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;QAE5B,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM;YACpB,QAAQ,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC;YACvC,SAAS,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC;YAC5C,MAAM,GAAG,UAAU,CAAC,QAAQ,CAAC,GAAG,UAAU,CAAC,SAAS,CAAC;YACrD,CAAC,EAAE,KAAK,CAAC;;QAEb,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACxB,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;YACpD,MAAM,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC;SAClC;;QAED,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAC7B,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;YACrD,MAAM,IAAI,UAAU,CAAC,SAAS,CAAC,CAAC;SACnC;;QAED,OAAO,MAAM,CAAC;KACjB;;IAED,mBAAmB,EAAE,UAAU,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;;QAE9C,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAC7B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACzB;KACJ;;IAED,SAAS,EAAE,UAAU,IAAI,EAAE;;QAEvB,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YACjD,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC/B,IAAI,CAAC,GAAG,CAAC,EAAE;oBACP,QAAQ,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC;oBAChC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;iBAEjD,MAAM,IAAI,CAAC,KAAK,EAAE,CAAC;;aAEvB,MAAM,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACzC;KACJ;;IAED,WAAW,EAAE,UAAU,MAAM,EAAE;;;;;;;QAO3B,IAAI,UAAU,GAAG,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC;;QAE3C,IAAI,CAAC,WAAW,GAAG,IAAI,QAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,WAAW,GAAG,IAAI,QAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEtE,IAAI,CAAC,MAAM,GAAG,IAAI,QAAQ,CAAC,GAAG;YAC1B,iBAAiB,GAAG,MAAM,CAAC,CAAC,CAAC;YAC7B,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC;YACvB,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC;YACvB,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;KACvC;CACJ,CAAC;;AAEF,SAAS,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE;IACrC,IAAI,CAAC,QAAQ,EAAE,OAAO,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;IAE1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACnC,IAAI,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;KAC1C;IACD,OAAO,CAAC,CAAC,CAAC;CACb;;;AAGD,SAAS,QAAQ,CAAC,IAAI,EAAE,MAAM,EAAE;IAC5B,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;CACzD;;;AAGD,SAAS,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE;IAC5C,IAAI,CAAC,QAAQ,EAAE,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;IAC3C,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC;IACzB,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC;IACzB,QAAQ,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC;IAC1B,QAAQ,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC;;IAE1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;QAC/B,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACzB,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;KACvD;;IAED,OAAO,QAAQ,CAAC;CACnB;;AAED,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;IAClB,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;IAClC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;IAClC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;IAClC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;IAClC,OAAO,CAAC,CAAC;CACZ;;AAED,SAAS,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE;AAC1D,SAAS,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE;;AAE1D,SAAS,QAAQ,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;AACxE,SAAS,UAAU,CAAC,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;;AAExE,SAAS,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE;IACxB,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC;YACnD,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;CAChE;;AAED,SAAS,gBAAgB,CAAC,CAAC,EAAE,CAAC,EAAE;IAC5B,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC;QAC/B,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC;QAC/B,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC;QAC/B,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;;IAEpC,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC;WACxB,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;CACnC;;AAED,SAAS,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE;IACpB,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI;WAChB,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI;WAChB,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI;WAChB,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC;CAC3B;;AAED,SAAS,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE;IACtB,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI;WAChB,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI;WAChB,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI;WAChB,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC;CAC3B;;AAED,SAAS,UAAU,CAAC,QAAQ,EAAE;IAC1B,OAAO;QACH,QAAQ,EAAE,QAAQ;QAClB,MAAM,EAAE,CAAC;QACT,IAAI,EAAE,IAAI;QACV,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,CAAC,QAAQ;QACf,IAAI,EAAE,CAAC,QAAQ;KAClB,CAAC;CACL;;;;;AAKD,SAAS,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,OAAO,EAAE;IAC/C,IAAI,KAAK,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC;QACrB,GAAG,CAAC;;IAER,OAAO,KAAK,CAAC,MAAM,EAAE;QACjB,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QACpB,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;;QAEnB,IAAI,KAAK,GAAG,IAAI,IAAI,CAAC,EAAE,SAAS;;QAEhC,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACnD,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;;QAE5C,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;KACrC;CACJ;;;;ACjjBD;;;;;AAKA,AAEA,AAEA,IAAaC,kBAAb;;;;;;;;;;;;;;;oCAeyD;QAA1CzH,MAA0C,QAA1CA,MAA0C;QAAlC8E,MAAkC,QAAlCA,MAAkC;6BAA1B4C,QAA0B;QAA1BA,QAA0B,iCAAf,CAAe;yBAAZC,IAAY;QAAZA,IAAY,6BAAL,EAAK;;;SAChD3H,MAAL,GAAcA,MAAd;SACK4H,SAAL,GAAiBF,QAAjB;SACKG,KAAL,GAAaF,IAAb;SACK7C,MAAL,GAAcA,MAAd;SACKgD,SAAL,GAAiB,EAAjB,CALqD;SAMhDC,MAAL,GAAcC,OAAd;SACKC,OAAL,GAAe,EAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kDAqJ6B;UAAPpI,CAAO,SAAPA,CAAO;UAAJC,CAAI,SAAJA,CAAI;;UACzBoI,KAAK,KAAKC,YAAd;aACO,EAACtI,GAAGA,IAAIqI,GAAGrF,IAAX,EAAiB/C,GAAGA,IAAIoI,GAAGtF,GAA3B,EAAP;;;;;;;;;;;;6BAUOwF,IAvLX,EAuLiB;UACTA,KAAKpI,MAAT,EAAiB;aACVA,MAAL,CAAYqI,WAAZ,CAAwBD,IAAxB;;WAEGpI,MAAL,GAAc,IAAd;UACI,KAAK8H,SAAL,CAAeQ,OAAf,CAAuBF,IAAvB,MAAiC,CAAC,CAAtC,EAAyC,KAAKN,SAAL,CAAe5H,IAAf,CAAoBkI,IAApB;;;;;;;;;;;;gCAU/BA,IAtMd,EAsMoB;;UAEZG,WAAQ,KAAKT,SAAL,CAAeQ,OAAf,CAAuBF,IAAvB,CAAZ;UACIG,WAAQ,CAAC,CAAb,EAAgB;aACTT,SAAL,CAAeU,MAAf,CAAsBD,QAAtB,EAA6B,CAA7B;;WAEGvI,MAAL,GAAc,IAAd;;;;;;;;;;;yBASGyI,GArNP,EAqNY;WACHC,QAAL,CAAcrI,OAAd,CAAsB;eAASsI,MAAMxB,IAAN,CAAWsB,GAAX,CAAT;OAAtB;;;;2BAlLa;aACN,KAAKX,SAAZ;;;;;;;;;;;;;;;;;;yBA2FWc,CAhIf,EAgIkB;WACTd,SAAL,GAAiBc,CAAjB;;;;;;;;;;2BApFW;aACJ,KAAKC,OAAZ;;;;;;;;;yBA2FSD,CAzIb,EAyIgB;WACPC,OAAL,GAAeD,CAAf;;;;;;;;;;2BApFa;aACN,KAAKhB,SAAZ;;;;;;;;;yBA2FWkB,OAlJf,EAkJwB;WACflB,SAAL,GAAiBkB,OAAjB;;;;;;;;;;2BApFS;aACF,KAAKjB,KAAZ;;;;;;;;;yBA2FOF,IA3JX,EA2JiB;WACRE,KAAL,GAAaF,IAAb;;;;2BApFiB;cACToB,MAAR,CAAe,KAAKjE,MAApB,EAA4B,gBAA5B;UACI,CAAC,KAAK9E,MAAV,EAAkB,OAAO,KAAK8E,MAAZ;UACdoD,KAAK,KAAKlI,MAAL,CAAYmI,YAArB;aACO,IAAIxF,MAAJ,CAAW;aACX,KAAKmC,MAAL,CAAYlC,GAAZ,GAAkBsF,GAAGtF,GADV;gBAER,KAAKkC,MAAL,CAAYhC,MAAZ,GAAqBoF,GAAGtF,GAFhB;cAGV,KAAKkC,MAAL,CAAYjC,IAAZ,GAAmBqF,GAAGrF,IAHZ;eAIT,KAAKiC,MAAL,CAAY/B,KAAZ,GAAoBmF,GAAGrF,IAJd;eAKT,KAAKiC,MAAL,CAAY9B,KALH;gBAMR,KAAK8B,MAAL,CAAY7B;OANf,CAAP;;;;;;;;;;;;;2BAkBY;UACR+F,MAAM,EAAV;UACIC,eAAe,KAAKP,QAAL,CAAcQ,GAAd,CAAkB,iBAAS;eACrCP,MAAMZ,MAAN,CAAaoB,GAAb,EAAP;OADiB,CAAnB;mBAGa9I,OAAb,CAAqB,gBAAQ;cACrB2I,IAAII,MAAJ,CAAWC,IAAX,CAAN;OADF;aAGOL,GAAP;;;;;;;;;;2BAQW;UACPM,OAAO,EAAX;UACIC,WAAW,KAAKb,QAAL,CAAcQ,GAAd,CAAkB,iBAAS;eACjCP,MAAMa,MAAb;OADa,CAAf;eAGSnJ,OAAT,CAAiB,gBAAQ;eAChBiJ,KAAKF,MAAL,CAAYC,IAAZ,CAAP;OADF;aAGOC,IAAP;;;;;;AC/HJ;;;;;;AAMA,AACA,AACA,AAEA,AAEA,AACA,AACA,AAEA,AACA,AAEA,IAAaG,oBAAb;;;;;;;;;sCAUiC;QAAlBC,KAAkB,QAAlBA,KAAkB;QAAXhF,QAAW,QAAXA,QAAW;;;2IACvB,EADuB;;UAExBgF,KAAL,GAAaA,KAAb;UACKhF,QAAL,GAAgBA,QAAhB;UACKiF,aAAL,GAAqB,CAArB;UACKC,IAAL,GAAY;eACD,KADC;WAEL,CAFK;YAGJ;KAHR;UAKKC,aAAL,GAAqB;WACd,IAAIC,MAAJ,CAAW,MAAX,CADc;aAEZ,IAAIA,MAAJ,CAAW,QAAX,CAFY;WAGd,IAAIA,MAAJ,CAAW,MAAX,CAHc;aAIZ,IAAIA,MAAJ,CAAW,QAAX;KAJT;;;;;;;;;;;;;;;;;;6BAsBOrF,KA1CX,EA0CkB;0IACCA,KAAf;WACKiB,MAAL,GAAc,KAAKd,EAAL,GAAUH,MAAMI,GAA9B;WACKkF,SAAL,GAAiB,KAAKrE,MAAL,CAAYsE,UAAZ,CAAuB,IAAvB,CAAjB;WACKhD,UAAL,CAAgB,KAAKiD,SAArB;;;;;;;;;;6BAQOxF,KAtDX,EAsDkB;;cAENsE,MAAR,CAAe,KAAKnE,EAAL,KAAYH,MAAMI,GAAjC;UACI+D,IAAI,IAAIjG,MAAJ,CAAW,KAAKiC,EAAL,CAAQG,qBAAR,EAAX,CAAR;cACQ5D,GAAR,CAAY,iBAAZ,EAA+B,KAAKyD,EAAL,CAAQ2C,gBAAvC,EAAyDqB,CAAzD;;;;;;;;;2BAMK;;UAED,KAAKqB,SAAL,IAAkB,CAAC,KAAKA,SAAL,CAAeC,WAAtC,EAAmD;aAC5CrD,sBAAL,GAA8B,KAAKoD,SAAnC;;UAEErB,IAAI,KAAKqB,SAAL,IAAkB,EAA1B;UACIE,gBAAgB,KAAKC,QAAL,GAAgB,UAAhB,GAA6B,EAAjD;aACO7H,QAAE,QAAF,EAAY;4CACiB4H,aADjB;0BAEDvB,EAAE/F,IAAlB,iBAAkC+F,EAAEhG,GAApC,mCACkBgG,EAAE5F,KADpB,oBACwC4F,EAAE3F,MAD1C,8CAE6B,KAAKyE,QAFlC,UAFiB;eAKVkB,EAAE5F,KALQ;gBAMT4F,EAAE3F;OANL,CAAP;;;;;;;;;2BAcK;UACDwF,MAAM,KAAKsB,SAAf;UACI,CAACtB,GAAL,EAAU;UACN,CAAC,KAAKwB,SAAV,EAAqB;UACjBI,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,KAAK3E,MAAL,CAAY1C,KAAhC,EAAuC,KAAK0C,MAAL,CAAYzC,MAAnD;UACIqH,IAAJ;;WAEKC,OAAL,CAAarB,GAAb,CAAiB;eAASP,SAASA,MAAMzH,IAAN,CAAWiG,IAAX,CAAgBsB,GAAhB,CAAlB;OAAjB;UACI+B,OAAJ;;WAEKtD,qBAAL,GAA6B,KAAKpC,MAAlC;WACK2F,KAAL,GAAa,KAAb;;;;;;;;;;;kCASYhF,GAzGhB,EAyGqB;UACbA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBe,GAAlC,CAAJ,EAA4C;eACnC,KAAKC,MAAL,CAAYpF,GAAZ,CAAP;OADF,MAGK,IAAIA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBiB,KAAlC,CAAJ,EAA8C;eAC1C,KAAKC,OAAL,CAAatF,GAAb,CAAP;OADG,MAGA,IAAIA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBmB,KAAlC,CAAJ,EAA8C;eAC1C,KAAKD,OAAL,CAAatF,GAAb,CAAP;OADG,MAGA,IAAIA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBoB,GAAlC,CAAJ,EAA4C;YAC3CxF,IAAIiF,IAAJ,KAAa,QAAjB,EAA2B;iBAClB,KAAKQ,SAAL,CAAezF,GAAf,CAAP;SADF,MAEO,IAAIA,IAAIiF,IAAJ,KAAa,UAAjB,EAA6B;iBAC3B,KAAKS,WAAL,CAAiB1F,GAAjB,CAAP;SADK,MAEA;iBACE,KAAK2F,MAAL,CAAY3F,GAAZ,CAAP;;;;aAIG,KAAP,CApBiB;;;;;;;;;;;;4BA8BXA,GAvIV,EAuIe;;;cAGH4F,IAAR,CAAa,kCAAb,EAAiD5F,GAAjD;aACO,KAAP,CAJW;;;;;;;;;;;;2BAcNA,GArJT,EAqJc;UACN6F,MAAM,KAAK5G,QAAL,CAAc6G,SAAd,CAAwBC,OAAlC;UACIpH,IAAIkH,IAAIhD,OAAJ,CAAY,IAAZ,CAAR;UACIlE,MAAM,CAAC,CAAX,EAAc;YACRlE,IAAJ,CAAS,IAAT;OADF,MAGK;YACCsI,MAAJ,CAAWpE,CAAX,EAAc,CAAd;;cAEAqH,MAAF;aACOC,OAAP,CAAenL,WAAf,EAA4B;aACrBkF,GADqB;cAEpB,KAAKf,QAAL,CAAc6G,SAAd,CAAwBC;OAFhC;aAIO,KAAP;;;;;;;;;;;;2BAUK/F,GA7KT,EA6Kc;;;UAGNA,IAAIkG,SAAJ,IAAiBC,OAAOC,kBAA5B,EAAgD;gBACtCR,IAAR,CAAa,6CAAb,EAA4D5F,GAA5D;eACO,KAAP,CAF8C;;aAIzC,KAAP,CAPU;;;;;;;;;;;;gCAiBAA,GA9Ld,EA8LmB;;;cAGP4F,IAAR,CAAa,kDAAb,EAAiE5F,GAAjE;aACO,KAAP;;;;;;;;;;;;8BAUQA,GA5MZ,EA4MiB;;;cAGL4F,IAAR,CAAa,gDAAb,EAA+D5F,GAA/D;aACO,KAAP,CAJa;;;;2BA3KA;aACN,KAAKf,QAAL,CAAc6G,SAAd,CAAwBC,OAAxB,CAAgClD,OAAhC,CAAwC,IAAxC,MAAkD,CAAC,CAA1D;;;;EAjCMrG,IAAIwF,kBAAJ,EACLqE,IADK,CACArF,eADA,EACiBW,sBADjB,CADV;;ACnBA;;;;AAIA,AAEA,IAAa2E,mBAAb;;;;;;;;+BAOcC,MAAZ,EAAoB;;oIACZA,MADY;;;;;;;;;;2BASN;UACRhD,MAAM,EAAV;UACIiD,OAAO,KAAKvD,QAAL,CAAcQ,GAAd,CAAkB,iBAAS;eAC7BP,MAAM4B,OAAb;OADS,CAAX;WAGKlK,OAAL,CAAa,gBAAQ;cACb2I,IAAII,MAAJ,CAAWC,IAAX,CAAN;OADF;aAGOL,GAAP;;;;EAxBqCvB,kBAAzC;;ACJA,WAAc,GAAG,SAAS,CAAC;AAC3B,eAAsB,GAAG,SAAS,CAAC;;AAEnC,SAAS,SAAS,CAAC,IAAI,EAAE,OAAO,EAAE;IAC9B,IAAI,EAAE,IAAI,YAAY,SAAS,CAAC,EAAE,OAAO,IAAI,SAAS,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;;IAEtE,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;IACvB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;IAC/B,IAAI,CAAC,OAAO,GAAG,OAAO,IAAI,cAAc,CAAC;;IAEzC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;QACjB,KAAK,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;KACnE;CACJ;;AAED,SAAS,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE;IAC1B,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;CACrC;;AAED,SAAS,CAAC,SAAS,GAAG;;IAElB,IAAI,EAAE,UAAU,IAAI,EAAE;QAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrB,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC7B;;IAED,GAAG,EAAE,YAAY;QACb,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,SAAS,CAAC;;QAExC,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACvB,IAAI,CAAC,MAAM,EAAE,CAAC;;QAEd,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YACjB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACtC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACjB;QACD,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;;QAEhB,OAAO,GAAG,CAAC;KACd;;IAED,IAAI,EAAE,YAAY;QACd,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACvB;;IAED,GAAG,EAAE,UAAU,GAAG,EAAE;QAChB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACrB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;;QAErB,OAAO,GAAG,GAAG,CAAC,EAAE;YACZ,IAAI,MAAM,GAAG,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;YAC3B,IAAI,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM;YACvC,IAAI,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;YACpB,GAAG,GAAG,MAAM,CAAC;SAChB;;QAED,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;KACpB;;IAED,KAAK,EAAE,UAAU,GAAG,EAAE;QAClB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACrB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;QAClC,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;;QAErB,OAAO,GAAG,GAAG,UAAU,EAAE;YACrB,IAAI,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1B,IAAI,KAAK,GAAG,IAAI,GAAG,CAAC,CAAC;YACrB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;;YAEtB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE;gBACvD,IAAI,GAAG,KAAK,CAAC;gBACb,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;aACtB;YACD,IAAI,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,MAAM;;YAEpC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;YACjB,GAAG,GAAG,IAAI,CAAC;SACd;;QAED,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;KACpB;CACJ,CAAC;;;;ACrFF,IAAI,KAAK,GAAGD,OAAoB,CAAC;;AAEjC,WAAc,GAAG,GAAG,CAAC;AACrB,eAAsB,GAAG,GAAG,CAAC;;AAE7B,SAAS,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,EAAE,WAAW,EAAE;IAChD,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI;QAChB,MAAM,GAAG,EAAE;QACX,MAAM,GAAG,IAAI,CAAC,MAAM;QACpB,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,CAAC;;IAE9B,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;;IAEzC,OAAO,IAAI,EAAE;QACT,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACvC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzB,IAAI,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;YACxD,IAAI,CAAC,WAAW,IAAI,IAAI,IAAI,WAAW,EAAE;gBACrC,KAAK,CAAC,IAAI,CAAC;oBACP,IAAI,EAAE,KAAK;oBACX,MAAM,EAAE,IAAI,CAAC,IAAI;oBACjB,IAAI,EAAE,IAAI;iBACb,CAAC,CAAC;aACN;SACJ;;QAED,OAAO,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE;YACxC,SAAS,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC7B,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,SAAS,CAAC;gBAClC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC3B,IAAI,CAAC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,MAAM,CAAC;SAC/C;;QAED,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QACnB,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;KAC9B;;IAED,OAAO,MAAM,CAAC;CACjB;;AAED,SAAS,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE;IACvB,OAAO,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;CAC1B;;AAED,SAAS,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE;IACxB,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC;QACpC,EAAE,GAAG,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;IACzC,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;CAC5B;;AAED,SAAS,QAAQ,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE;IAC3B,OAAO,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;CACrD;;;;ACtDD;;;AAGA,AAEA,IAAa0E,mBAAb;;;;;;;;+BAOcF,MAAZ,EAAoB;;oIACZA,MADY;;;;EAPmBvE,kBAAzC;;ACLA;;;;;;AAMA,AACA,AACA,AAEA,IAAa0E,WAAb;;;;;;;;;;6BASqD;QAAtCnM,MAAsC,QAAtCA,MAAsC;QAA9BoM,MAA8B,QAA9BA,MAA8B;QAAtBC,YAAsB,QAAtBA,YAAsB;QAATC,MAAS,QAATA,MAAS;;;yHAC3C,EAACtM,cAAD,EAAS2H,MAAM,CAAC0E,aAAaE,IAAd,CAAf,EAD2C;;UAE5C7C,KAAL,GAAa2C,YAAb;UACKG,UAAL,GAAkBJ,MAAlB;UACKE,MAAL,GAAcA,MAAd;;UAEKG,MAAL,GAAc,MAAKD,UAAL,CAAgBE,IAAhB,CAAqBC,IAArB,CAA0BpH,KAA1B,GAAkC,CAAC,CAAjD;UACKH,MAAL,GAAc,MAAKoH,UAAL,CAAgBE,IAAhB,CAAqBtH,MAAnC;UACKG,KAAL,GAAa,MAAKmE,KAAL,CAAWkD,WAAX,CAAuBrH,KAApC;;UAEKsH,gBAAL,GAAwB,MAAKL,UAAL,CAAgBE,IAAhB,CAAqBG,gBAA7C;UACK/H,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElB,CAFkB;YAGjB,CAHiB;aAIhB3C,OAAO8E,MAAP,CAAc9B,KAJE;cAKf,MAAK8J;KALD,CAAd;;;;;;;;;;;yBAcGrE,GAlCP,EAkCY;UACJ6D,SAAS,KAAKA,MAAlB;UACIxM,IAAIkF,eAAe,KAAKO,KAApB,EAA2B,KAAKiH,UAAL,CAAgBE,IAAhB,CAAqBC,IAAhD,EAAsD,KAAKH,UAAL,CAAgBE,IAAhB,CAAqBnC,OAA3E,EAAoF,KAAKnF,MAAzF,IAAmG,KAAKyH,gBAAhH;WACK/H,MAAL,CAAYlC,GAAZ,GAAkB9C,CAAlB;UACIoI,KAAK,KAAKC,YAAL,IAAqB,EAA9B;UACI4E,SAAJ;UACIC,WAAJ,GAAkBV,OAAOW,SAAzB;UACIC,SAAJ,GAAgBZ,OAAOQ,UAAvB;;UAEIK,MAAJ,CAAW1J,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CAAX,EAAgCY,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAAhC;;UAEIwK,MAAJ,CAAW3J,KAAKC,KAAL,CAAWwE,GAAGnF,KAAd,CAAX,EAAiCU,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAAjC;UACIyK,MAAJ;;;WAGKvI,MAAL,CAAYlC,GAAZ,GAAkBa,KAAKC,KAAL,CAAW5D,IAAIwM,OAAOQ,UAAP,GAAoB,CAAnC,CAAlB;WACKhI,MAAL,CAAYhC,MAAZ,GAAqBW,KAAKC,KAAL,CAAW5D,IAAIwM,OAAOQ,UAAP,GAAoB,CAAnC,CAArB;;;;EAlD6BrF,kBAAjC;;ACVA;;;;;;;;;AASA,AACA,AAEA,IAAa6F,WAAb;;;;;;;;;6BAQuC;QAAxBtN,MAAwB,QAAxBA,MAAwB;QAAhBoM,MAAgB,QAAhBA,MAAgB;QAATE,MAAS,QAATA,MAAS;;;yHAC7B,EAACtM,cAAD,EAD6B;;UAE9BsM,MAAL,GAAcA,MAAd;QACM1D,IAAI5I,OAAO8E,MAAjB;QACMyI,gBAAgBjB,OAAOtJ,KAA7B;UACK8B,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElB,CAFkB;YAGjBiG,EAAE5F,KAAF,GAAU,GAAV,GAAgBuK,gBAAgB,GAHf;aAIhBA,gBAAgBjB,OAAOQ,UAJP;cAKflE,EAAE3F;KALE,CAAd;WAOOyJ,IAAP,CAAYc,QAAZ,GAAuB,MAAKrF,YAA5B;;;;;;;;;;;yBAQGM,GA5BP,EA4BY;UACJ6D,SAAS,KAAKA,MAAlB;UACIpE,KAAK,KAAKC,YAAL,IAAqB,EAA9B;UACIsF,SAAJ,GAAgBnB,OAAOoB,SAAvB;;;UAGIC,QAAJ,CACElK,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAFF,EAGEa,KAAKC,KAAL,CAAWwE,GAAGlF,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWwE,GAAGjF,MAAd,CAJF;;UAOG,KAAKiK,SAAL,GAAiB,CAApB,EAAuB;YACjBF,WAAJ,GAAkBV,OAAOW,SAAzB;YACIC,SAAJ,GAAgBZ,OAAOQ,UAAvB;YACIc,UAAJ,CACEnK,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAFF,EAGEa,KAAKC,KAAL,CAAWwE,GAAGlF,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWwE,GAAGjF,MAAd,CAJF;;;WAQGyF,QAAL,CAAcrI,OAAd,CAAsB;eAASsI,MAAMxB,IAAN,CAAWsB,GAAX,CAAT;OAAtB;;;;EApD6BhB,kBAAjC;;ACZA;;;;;;;AAOA,AACA,AACA,AAEA,IAAaoG,YAAb;;;;;;;;;;;8BASqD;QAAtC7N,MAAsC,QAAtCA,MAAsC;QAA9BoM,MAA8B,QAA9BA,MAA8B;QAAtBC,YAAsB,QAAtBA,YAAsB;QAATC,MAAS,QAATA,MAAS;;;2HAC3C,EAACtM,cAAD,EAAS2H,MAAM,CAAC0E,aAAaE,IAAd,CAAf,EAD2C;;UAE5CD,MAAL,GAAcA,MAAd;UACK5C,KAAL,GAAa2C,YAAb;UACKK,IAAL,GAAYN,OAAOM,IAAnB;UACKG,gBAAL,GAAwB,MAAKH,IAAL,CAAUG,gBAAlC;UACKzH,MAAL,GAAcgH,OAAOM,IAAP,CAAYtH,MAA1B;UACKG,KAAL,GAAa,MAAKmE,KAAL,CAAWkD,WAAX,CAAuBrH,KAApC;UACKT,MAAL,GAAc,IAAInC,MAAJ,CAAW;WAClB,CADkB;YAEjB,CAFiB;aAGhB,GAHgB;cAIf,EAJe;qBAKR;KALH,CAAd;;;;;;;;;;;yBAcG8F,GA/BP,EA+BY;UACJ6D,SAAS,KAAKA,MAAlB;UACIxM,IAAIkF,eAAe,KAAKO,KAApB,EAA2B,KAAKmH,IAAL,CAAUC,IAArC,EAA2C,KAAKD,IAAL,CAAUnC,OAArD,EAA8D,KAAKnF,MAAnE,IAA6E,KAAKyH,gBAA1F;WACK/H,MAAL,CAAYlC,GAAZ,GAAkB9C,CAAlB;WACKgF,MAAL,CAAYhC,MAAZ,GAAqBhD,IAAIwM,OAAOwB,SAAhC;UACI5F,KAAK,KAAKC,YAAL,IAAqB,EAA9B;UACI4F,IAAJ,GAAczB,OAAOwB,SAArB,WAAoCxB,OAAO0B,SAA3C;UACIC,SAAJ,GAAgB,MAAhB;UACIR,SAAJ,GAAgBnB,OAAO4B,UAAvB;UACIC,QAAJ,CAAa,KAAKzE,KAAL,CAAW6C,IAAxB,EAA8BrE,GAAGrF,IAAjC,EAAuCqF,GAAGtF,GAA1C;;WAEKkC,MAAL,CAAY9B,KAAZ,GAAoB,KAAK8B,MAAL,CAAYjC,IAAZ,GAAmBY,KAAKC,KAAL,CAAW+E,IAAI2F,WAAJ,CAAgB,KAAK1E,KAAL,CAAW6C,IAA3B,EAAiCvJ,KAA5C,CAAnB,GAAwE,CAA5F;UACI,KAAKhD,MAAL,CAAY8E,MAAZ,CAAmB9B,KAAnB,GAA2B,KAAK8B,MAAL,CAAY9B,KAA3C,EAAkD,KAAKhD,MAAL,CAAY8E,MAAZ,CAAmB9B,KAAnB,GAA2B,KAAK8B,MAAL,CAAY9B,KAAvC;;;;EA3CpByE,kBAAlC;;ACXA;;;;;AAKA,AAEA,AACA,AACA,AACA,AACA,AACA,AAEA,IAAa4G,QAAb;;;;;;;;oBAOcrC,MAAZ,EAAoB;;;YACV7K,GAAR,CAAY,6BAAZ;;mHACM6K,MAFY;;QAGZpD,IAAI,MAAK5I,MAAL,CAAY8E,MAAtB;UACK4E,KAAL,GAAa,MAAK1J,MAAL,CAAY0J,KAAzB;;QAEM6D,gBAAgB,MAAK7D,KAAL,CAAW4C,MAAX,CAAkBkB,QAAlB,CAA2BxK,KAAjD;UACK8B,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElB,CAFkB;YAGjB,CAHiB;aAIhB4K,aAJgB;cAKf3E,EAAE3F;KALE,CAAd;UAOKqL,EAAL,GAAU,MAAKtO,MAAL,CAAYuO,cAAtB;UACKf,QAAL,GAAgB,IAAIF,WAAJ,CAAgB,EAACtN,aAAD,EAAeoM,QAAQ,MAAK1C,KAA5B,EAAkC4C,QAAQ,MAAK5C,KAAL,CAAW4C,MAAX,CAAkBkB,QAA5D,EAAhB,CAAhB;UACKgB,QAAL,CAAc,MAAKhB,QAAnB;;;UAGK9D,KAAL,CAAWgD,IAAX,CAAgBG,gBAAhB,GAAmC,MAAKW,QAAL,CAAc1I,MAAd,CAAqB7B,MAArB,GAA8B,MAAKyG,KAAL,CAAWpF,MAA5E;UACKoF,KAAL,CAAWgD,IAAX,CAAgBc,QAAhB,GAA2B,MAAKrF,YAAhC;;;QAGIsG,cAAc,IAAI1C,mBAAJ,CAAwB,EAAC/L,aAAD,EAAxB,CAAlB;UACKwO,QAAL,CAAcC,WAAd;UACKA,WAAL,GAAmBA,WAAnB;gBACY3J,MAAZ,GAAqB,MAAK0I,QAAL,CAAc1I,MAAnC;UACK0J,QAAL,CAAcC,WAAd;QACIC,aAAa,IAAI3C,mBAAJ,CAAwB,EAAC/L,aAAD,EAAxB,CAAjB;UACKwO,QAAL,CAAcE,UAAd;UACKA,UAAL,GAAkBA,UAAlB;eACW5J,MAAX,GAAoB,IAAInC,MAAJ,CAAW;WACxB,CADwB;YAEvB,MAAK6K,QAAL,CAAc1I,MAAd,CAAqB/B,KAArB,GAA6B,CAFN;cAGrB,MAAK+B,MAAL,CAAY7B,MAHS;aAItB;KAJW,CAApB;;;UAQK0L,gBAAL,GAAwB,MAAKjF,KAAL,CAAWkF,QAAX,CAAoBC,MAApB,CAA2B,iBAAS;aACnDnF,MAAMpF,MAAN,IAAgB,OAAvB;KADsB,CAAxB;;;QAKIwK,SAAS,EAAb;QACIC,SAAS,EAAb;UACKC,YAAL,GAAoB,MAAKL,gBAAL,CAAsBzF,GAAtB,CAA0B,iBAAS;UACjD+F,KAAK,IAAI9C,WAAJ,CAAgB;sBACTzC,KADS;gBAEf,MAAK8D,QAFU;gBAGf,MAAK9D,KAHU;gBAIf,MAAKA,KAAL,CAAW4C,MAAX,CAAkB4C;OAJnB,CAAT;;UAOIC,KAAK,IAAItB,YAAJ,CAAiB;sBACVnE,KADU;gBAEhB,MAAKgF,UAFW;gBAGhB,MAAK1O,MAAL,CAAY0J,KAHI;gBAIhB,MAAKA,KAAL,CAAW4C,MAAX,CAAkB4C;OAJnB,CAAT;kBAMYV,QAAZ,CAAqBS,EAArB;iBACWT,QAAX,CAAoBW,EAApB;aACOjP,IAAP,CAAY;cACJwJ,MAAMkD,WAAN,CAAkBrH,KADd;cAEJmE,MAAMkD,WAAN,CAAkBtH,IAFd;cAGJ2J,GAAG9G,YAAH,CAAgBtF,IAHZ;cAIJoM,GAAG9G,YAAH,CAAgBpF,KAJZ;cAKJkM;OALR;aAOO/O,IAAP,CAAY;cACJwJ,MAAMkD,WAAN,CAAkBrH,KADd;cAEJmE,MAAMkD,WAAN,CAAkBtH,IAFd;cAGJ6J,GAAGhH,YAAH,CAAgBtF,IAHZ;cAIJsM,GAAGhH,YAAH,CAAgBtF,IAAhB,GAAuB,MAAK6L,UAAL,CAAgB5J,MAAhB,CAAuB9B,KAJ1C;cAKJmM;OALR;UAOIA,GAAGrK,MAAH,CAAU/B,KAAV,GAAkB,MAAK2L,UAAL,CAAgB5J,MAAhB,CAAuB/B,KAA7C,EAAoD,MAAK2L,UAAL,CAAgB5J,MAAhB,CAAuB/B,KAAvB,GAA+BoM,GAAGrK,MAAH,CAAU/B,KAAzC;aAC7CkM,EAAP;KA/BkB,CAApB;;;gBAmCYlH,MAAZ,CAAmBqH,IAAnB,CAAwBN,MAAxB;eACW/G,MAAX,CAAkBqH,IAAlB,CAAuBL,MAAvB;;UAEKhH,MAAL,CAAYqH,IAAZ,CAAiBN,MAAjB;;;;;;;;;;;;;;;;;;yBAoEGrG,GA/JP,EA+JY;UACJP,KAAK,KAAKC,YAAL,IAAqB,EAA9B;UACIsF,SAAJ,GAAgB,MAAhB;;;UAGIE,QAAJ,CACElK,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAFF,EAGEa,KAAKC,KAAL,CAAWwE,GAAGlF,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWwE,GAAGjF,MAAd,CAJF;UAMIwK,SAAJ,GAAgB,OAAhB;WACK,KAAKiB,UAAL,CAAgBvG,YAAhB,IAAgC,EAArC;;;UAGIwF,QAAJ,CACElK,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAFF,EAGEa,KAAKC,KAAL,CAAWwE,GAAGlF,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWwE,GAAGjF,MAAd,CAJF;;;;mCAQa;;;2BAnFD;UACRoM,QAAQ,KAAKrP,MAAL,CAAY0J,KAAZ,CAAkBgD,IAAlB,CAAuBC,IAAnC;UACI2C,OAAO,KAAKtP,MAAL,CAAY0J,KAAZ,CAAkBgD,IAAlB,CAAuBnC,OAAlC;;UAEIvB,MAAM,CAAC;cACH,KAAKlE,MAAL,CAAYjC,IADT;cAEH,KAAKiC,MAAL,CAAY/B,KAFT;cAGHsM,MAAM9J,KAHH;cAIH8J,MAAM/J,IAJH;cAKH,KAAKkI;OALH,CAAV;YAOMxE,IAAII,MAAJ,CAAW,KAAKrB,MAAL,CAAYwH,MAAZ,CAAmB;cAC5B,KAAKzK,MAAL,CAAYjC,IADgB;cAE5B,KAAKiC,MAAL,CAAY/B,KAFgB;cAG5BuM,KAAK/J,KAHuB;cAI5B+J,KAAKhK;OAJI,CAAX,CAAN;UAMIkK,SAAS,EAAb;UACIjK,QAAQ+J,KAAK/J,KAAjB;UACID,OAAOgK,KAAKhK,IAAhB;UACImK,MAAM,KAAKf,UAAL,CAAgBhG,QAAhB,CAAyB,CAAzB,EAA4BmE,gBAAtC;UACI6C,OAAQ,CAACJ,KAAK/J,KAAL,IAAc8J,MAAM/J,IAAN,GAAamK,GAAb,GAAmB,EAAjC,IAAuCH,KAAKhK,IAAL,IAAa,KAAK+J,MAAM9J,KAAN,GAAckK,GAAhC,CAAxC,KAAiFA,OAAOJ,MAAM/J,IAAN,GAAa+J,MAAM9J,KAA1B,CAAjF,IAAqHA,KAAtH,GAAgI8J,MAAM9J,KAAN,GAAc,CAAC,CAA1J;WACK,IAAInB,IAAImB,KAAb,EAAoBnB,IAAIkB,IAAxB,EAA8BlB,KAAKsL,IAAnC,EAAyC;;YAEnCrG,OAAOsG,QAAI,KAAKjB,UAAL,CAAgB3G,MAApB,EAA4B,KAAK2G,UAAL,CAAgBhG,QAAhB,CAAyB,CAAzB,EAA4BP,YAA5B,CAAyCtF,IAArE,EAA2EuB,CAA3E,EAA8E,CAA9E,EAAiF,CAAjF,CAAX;YACIoL,OAAOlL,MAAP,KAAkB,CAAtB,EAAyB;iBAChBpE,IAAP,CAAYmJ,IAAZ;;;YAGEuG,OAAOJ,OAAOA,OAAOlL,MAAP,GAAgB,CAAvB,CAAX;YACI+E,SAASuG,IAAT,IAAkBvG,KAAKwG,IAAL,GAAaD,KAAKE,IAAL,GAAYJ,IAA/C,EAAuD;iBAC9CxP,IAAP,CAAYmJ,IAAZ;;;YAGEL,IAAII,MAAJ,CAAWoG,MAAX,CAAN;aACOxG,GAAP;;;;;;;;;2BAOW;UACP+G,OAAO,KAAKvC,QAAL,CAAcrF,YAAzB;aACO,KAAKsG,WAAL,CAAiB/F,QAAjB,CAA0BQ,GAA1B,CAA8B,iBAAS;eACrC;gBACCP,MAAMR,YAAN,CAAmBrF,MAAnB,GAA4B,CAD7B;gBAEC6F,MAAMR,YAAN,CAAmBvF,GAAnB,GAAyB,CAF1B;gBAGCmN,KAAKlN,IAHN;gBAICkN,KAAKhN,KAJN;gBAKC4F;SALR;OADK,CAAP;;;;EA/I0BuD,mBAA9B;;ACdA;;;;;;;AAOA,AACA,AACA,AAEA,IAAa8D,GAAb;;;;;;;;;;;;qBAUsD;QAAvChQ,MAAuC,QAAvCA,MAAuC;QAA/BoM,MAA+B,QAA/BA,MAA+B;QAAvBC,YAAuB,QAAvBA,YAAuB;QAATC,MAAS,QAATA,MAAS;;;;yGAC5C,EAACtM,cAAD,EAAS2H,MAAM,CAAC0E,aAAaE,IAAd,CAAf,EAD4C;;UAG7CD,MAAL,GAAcA,MAAd;UACK5C,KAAL,GAAa2C,YAAb;UACKK,IAAL,GAAYN,OAAOM,IAAnB;UACKG,gBAAL,GAAwB,MAAKH,IAAL,CAAUG,gBAAlC;UACKzH,MAAL,GAAcgH,OAAOM,IAAP,CAAYtH,MAA1B;UACKG,KAAL,GAAa,MAAKmE,KAAL,CAAWkD,WAAX,CAAuBrH,KAApC;UACK0K,MAAL,GAAc3D,OAAOtJ,KAArB;UACKkN,KAAL,GAAa,CAAb;;;QAGI,MAAKxG,KAAL,CAAWkD,WAAX,CAAuBsD,KAA3B,EAAkC;YAC3BA,KAAL,GAAalL,eAAe,MAAK0E,KAAL,CAAWkD,WAAX,CAAuBsD,KAAtC,EAA6C;eACjD,CADiD;cAElD5D,OAAO6D;OAFF,EAGV7D,OAAOI,IAHG,EAGG,KAHH,CAAb;;UAKG5H,MAAL,GAAc,IAAInC,MAAJ,CAAW;WAClB,CADkB;YAEjB,CAFiB;aAGhB,IAAI,MAAKsN,MAHO;cAIf,IAAI,MAAKA,MAJM;qBAKR;KALH,CAAd;;;;;;;;;;;yBAcGxH,GA3CP,EA2CY;;UAEJ,KAAKlD,KAAL,GAAa,KAAKmH,IAAL,CAAUnC,OAAV,CAAkBhF,KAA/B,IAAwC,KAAKA,KAAL,GAAa,KAAKmH,IAAL,CAAUnC,OAAV,CAAkBjF,IAA3E,EAAiF;UAC7E,CAAC,KAAKmH,MAAV,EAAkB;YACV5J,OAAO,KAAKsF,YAAL,CAAkBtF,IAA/B;YACMD,MAAM,KAAKuF,YAAL,CAAkBvF,GAA9B;aACK6J,MAAL,GAAc,EAAC7J,KAAKA,GAAN,EAAWC,MAAMA,IAAjB,EAAd;;UAEEyJ,SAAS,KAAKA,MAAlB;UACIxM,IAAIkF,eAAe,KAAKO,KAApB,EAA2B,KAAKmH,IAAL,CAAUC,IAArC,EAA2C,KAAKD,IAAL,CAAUnC,OAArD,EAA8D,KAAKnF,MAAnE,IAA6E,KAAKyH,gBAA1F;UACIhN,IAAI,KAAKqQ,KAAb;;;UAGInD,SAAJ;UACIU,SAAJ,GAAgBnB,OAAOoB,SAAvB;UACI0C,GAAJ,CAAQvQ,IAAI,KAAK4M,MAAL,CAAY5J,IAAxB,EAA8B/C,IAAI,KAAK2M,MAAL,CAAY7J,GAA9C,EAAmD,KAAKqN,MAAxD,EAAgE,CAAhE,EAAmE,IAAIxM,KAAK4M,EAA5E,EAAgF,KAAhF;UACIC,IAAJ;UACIpD,SAAJ,GAAgBZ,OAAOQ,UAAvB;UACIE,WAAJ,GAAkBV,OAAOW,SAAzB;UACII,MAAJ;;;WAGKvI,MAAL,CAAYlC,GAAZ,GAAkB9C,IAAI,KAAKmQ,MAA3B;WACKnL,MAAL,CAAYjC,IAAZ,GAAmBhD,IAAI,KAAKoQ,MAA5B;WACKnL,MAAL,CAAY9B,KAAZ,GAAoB,IAAI,KAAKiN,MAA7B;WACKnL,MAAL,CAAY7B,MAAZ,GAAqB,IAAI,KAAKgN,MAA9B;;;;EApEqBxI,kBAAzB;;ACXA;;;;;;;AAOA,AACA,AACA,AAEA,IAAa8I,cAAb;;;;;;;;;;;gCAU6C;QAA9BvQ,MAA8B,QAA9BA,MAA8B;QAAtBqM,YAAsB,QAAtBA,YAAsB;QAATC,MAAS,QAATA,MAAS;;;+HACnC,EAACtM,cAAD,EADmC;;UAEpCsM,MAAL,GAAcA,MAAd;UACKkE,aAAL,GAAqBnE,YAArB;UACKvH,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAEnB,CAFmB;YAGlB,CAHkB;aAIhB2J,OAAO6D,YAJS;cAKf,MAAKnQ,MAAL,CAAY8E,MAAZ,CAAmB7B;KALf,CAAd;;;;;;;;;;;yBAcGwF,GA5BP,EA4BY;;;UACJ6D,SAAS,KAAKA,MAAlB;UACIhC,IAAJ;UACImG,WAAJ,GAAkB,EAAlB;UACIC,KAAK,KAAKvI,YAAd;UACI+H,QAAQ,CAAZ;UACI,KAAKM,aAAT,EAAwB;;YAElBxD,WAAJ,GAAkBV,OAAOqE,UAAzB;YACIzD,SAAJ,GAAgBZ,OAAOsE,WAAvB;;;YAGI7D,SAAJ;;YAEII,MAAJ,CAAWuD,GAAG7N,IAAd,EAAoB6N,GAAG9N,GAAvB;YACIwK,MAAJ,CAAWsD,GAAG3N,KAAd,EAAqB2N,GAAG9N,GAAxB;YACIyK,MAAJ;YACIN,SAAJ;YACII,MAAJ,CAAWuD,GAAG7N,IAAd,EAAoB6N,GAAG5N,MAAvB;YACIsK,MAAJ,CAAWsD,GAAG3N,KAAd,EAAqB2N,GAAG5N,MAAxB;YACIuK,MAAJ;;;aAGK,IAAIjJ,IAAI,CAAb,EAAgBA,KAAK,KAAKoM,aAAL,CAAmB9D,IAAnB,CAAwBpH,IAA7C,EAAmDlB,GAAnD,EAAwD;cAClDA,IAAIkI,OAAOuE,cAAX,KAA8B,CAA9B,IAAmCzM,IAAIkI,OAAOwE,cAAX,KAA8B,CAArE,EAAwE;oBAC9D9L,eAAeZ,CAAf,EAAkB;qBACjB,CADiB;oBAElBkI,OAAO6D;aAFP,EAGL,KAAKK,aAAL,CAAmB9D,IAHd,EAGoB,KAHpB,CAAR;gBAIIK,SAAJ;gBACII,MAAJ,CAAWuD,GAAG7N,IAAH,GAAUqN,KAArB,EAA4BQ,GAAG9N,GAA/B;gBACIwK,MAAJ,CAAWsD,GAAG7N,IAAH,GAAUqN,KAArB,EAA4BQ,GAAG9N,GAAH,GAAS,EAArC;gBACIyK,MAAJ;gBACIjJ,IAAIkI,OAAOwE,cAAX,KAA8B,CAAlC,EAAqC;kBAC/B/C,IAAJ,GAAWzB,OAAOwB,SAAlB;kBACIL,SAAJ,GAAgBnB,OAAO4B,UAAvB;kBACID,SAAJ,GAAgB,QAAhB;kBACIE,QAAJ,CAAa4C,OAAO3M,CAAP,CAAb,EAAwBsM,GAAG7N,IAAH,GAAUqN,KAAlC,EAAyCQ,GAAG9N,GAAH,GAAS,EAAlD;;;;YAIFuL,QAAJ,CAAa,WAAb,EAA0BuC,GAAG7N,IAAH,GAAUyJ,OAAO6D,YAAP,GAAsB,CAA1D,EAA6DO,GAAG9N,GAAH,GAAS,EAAtE;;;;YAII,KAAK4N,aAAL,CAAmBQ,KAAvB,EAA8B;eACvBR,aAAL,CAAmBQ,KAAnB,CAAyB3Q,OAAzB,CAAiC,gBAAQ;oBAC/B2E,eAAeiM,KAAKC,KAApB,EAA2B;qBAC1B,CAD0B;oBAE3B5E,OAAO6D;aAFP,EAGL,OAAKK,aAAL,CAAmB9D,IAHd,EAGoB,KAHpB,CAAR;gBAIIM,WAAJ,GAAkBiE,KAAKhE,SAAvB;gBACIC,SAAJ,GAAgB+D,KAAKnE,UAArB;gBACIC,SAAJ;gBACII,MAAJ,CAAWuD,GAAG7N,IAAH,GAAUqN,KAArB,EAA4BQ,GAAG9N,GAA/B;gBACIwK,MAAJ,CAAWsD,GAAG7N,IAAH,GAAUqN,KAArB,EAA4BQ,GAAG5N,MAA/B;gBACIuK,MAAJ;WAVF;;;UAcA7C,OAAJ;;WAEK9B,QAAL,CAAcrI,OAAd,CAAsB;eAASsI,MAAMxB,IAAN,CAAWsB,GAAX,CAAT;OAAtB;;;;EA1FgChB,kBAApC;;ACXA;;;;;;AAMA,AAEA,AACA,AACA,AAEA,IAAa0J,aAAb;;;;;;;;yBAOcnF,MAAZ,EAAoB;;;6HACZA,MADY;;YAEV7K,GAAR,CAAY,0BAAZ,EAAwC6K,MAAxC;QACIwE,gBAAgBxE,OAAOM,MAA3B;QACM1D,IAAI,MAAK5I,MAAL,CAAY8E,MAAtB;UACKsM,QAAL,GAAgBpF,OAAOqF,QAAP,IAAmB,CAAnC;UACKvM,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElB,CAFkB;YAGjB,CAHiB;aAIhB,CAJgB;cAKfiG,EAAE3F;KALE,CAAd;QAOIuN,kBAAkB,IAAtB,EAA4B;UACtBc,gBAAgBd,aAApB;;WAEK,IAAIe,GAAT,IAAgB,MAAKvR,MAAL,CAAY0J,KAAZ,CAAkB4C,MAAlB,CAAyBkF,SAAzC,EAAmD;YAC9C,CAACF,cAAcG,cAAd,CAA6BF,GAA7B,CAAJ,EAAsC;wBACtBA,GAAd,IAAqB,MAAKvR,MAAL,CAAY0J,KAAZ,CAAkB4C,MAAlB,CAAyBkF,SAAzB,CAAmCD,GAAnC,CAArB;;;oBAGUP,KAAd,CAAoB3Q,OAApB,CAA4B,gBAAQ;YAC/B,CAAC4Q,KAAKnE,UAAT,EAAoB;eACb4E,UAAL,GAAkBJ,cAAcK,iBAAhC;;YAEC,CAACV,KAAKhE,SAAT,EAAmB;eACZA,SAAL,GAAiBqE,cAAcM,gBAA/B;;OALJ;;;UAUIN,cAAcpQ,IAAd,KAAuBwB,SAA3B,EAAsC;sBACtBgK,IAAd,GAAqB;iBACZ,CADY;gBAEb4E,cAAcO,QAAd,IAA0B;SAFlC;YAIIC,WAAW,MAAK9R,MAAL,CAAY+R,OAAZ,CAAoBlD,MAApB,CAA2B,iBAAS;iBAC1CnF,MAAMsI,EAAN,KAAaV,cAAcW,MAAlC;SADa,CAAf;;YAIIC,SAASZ,cAAcY,MAAd,IAAwB,EAArC;sBACchR,IAAd,GAAqB4Q,SAAS,CAAT,EAAYK,WAAZ,CAAwBjR,IAAxB,CAA6B2N,MAA7B,CAAoC,iBAAS;cAC5DqD,SAASE,MAAMd,cAAce,WAApB,CAAT,KAA8C,MAAKrS,MAAL,CAAY0J,KAAZ,CAAkB6C,IAApE,EAA0E;gBACpE+E,cAAcgB,GAAd,KAAsB5P,SAAtB,IAAmC,CAACe,KAAK8O,KAAL,CAAWH,MAAMd,cAAckB,MAApB,CAAX,CAAD,IAA4ClB,cAAc5E,IAAd,CAAmBpH,IAAtG,EAA4G;;4BAC5FoH,IAAd,CAAmBpH,IAAnB,GAA0B7B,KAAKgP,IAAL,CAAU,CAAChP,KAAK8O,KAAL,CAAWH,MAAMd,cAAckB,MAApB,CAAX,CAAX,CAA1B;;mBAGK,IAAP;;iBAEK,KAAP;SARmB,CAArB;;;;;;YAeE1N,MAAL,GAAc,IAAInC,MAAJ,CAAW;uBACR,KADQ;aAEjB,CAFiB;cAGhB,CAHgB;eAIf2O,cAAcnB,YAAd,IAA8B,CAJf;gBAKdvH,EAAE3F;OALC,CAAd;;UAQK6L,SAAS,EAAb;UACI4D,UAAU,EAAd;YACK5D,MAAL,GAAcA,MAAd;;YAEK6D,cAAL,GAAsBrB,cAAcpQ,IAAd,CAAmBgI,GAAnB,CAAuB,iBAAS;cAC9C0D,WAAN,GAAoB;iBACXlD,MAAM4H,cAAcsB,QAApB,CADW;iBAEX,CAACnP,KAAK8O,KAAL,CAAW7I,MAAM4H,cAAckB,MAApB,CAAX;SAFV;YAII9I,MAAMkD,WAAN,CAAkBrH,KAAlB,GAA0B,MAAKvF,MAAL,CAAY0J,KAAZ,CAAkBgD,IAAlB,CAAuBC,IAAvB,CAA4BrH,IAAvD,IACAoE,MAAMkD,WAAN,CAAkBrH,KAAlB,GAA0B,MAAKvF,MAAL,CAAY0J,KAAZ,CAAkBgD,IAAlB,CAAuBC,IAAvB,CAA4BpH,KADzD,EACiE;;;;YAE7D0J,KAAK,IAAIe,GAAJ,CAAQ;wBACDtG,KADC;uBAAA;kBAGP,MAAK1J,MAAL,CAAY0J,KAHL;kBAIP4H;SAJD,CAAT;eAMOpR,IAAP,CAAY+O,EAAZ;;YAEI5J,MAAM;gBACFqE,MAAMkD,WAAN,CAAkBrH,KADhB;gBAEFmE,MAAMkD,WAAN,CAAkBrH,KAFhB;gBAGF0J,GAAG9G,YAAH,CAAgBtF,IAHd;gBAIFoM,GAAG9G,YAAH,CAAgBpF,KAJd;gBAKFkM;SALR;;gBAQQ/O,IAAR,CAAamF,GAAb;eACO4J,EAAP;OAzBoB,CAAtB;;YA4BK4D,KAAL,GAAY;cACJ,CADI;cAEJ,SAFI;cAGJ,MAAK1K,YAAL,CAAkBtF,IAHd;cAIJ,MAAKsF,YAAL,CAAkBpF,KAJd;cAKJ,IAAIwN,cAAJ,CAAmB;wBACRe,aADQ;uBAAA;kBAGfA;SAHJ;OALR;;YAYKvJ,MAAL,CAAYqH,IAAZ,CAAiBsD,OAAjB;YACK/K,IAAL,GAAY,CAAC,WAAD,CAAZ;;;;;;;;;;;;;;;;;;yBAiBCc,GArIP,EAqIY;;;;;;;;WAQHC,QAAL,CAAcrI,OAAd,CAAsB;eAASsI,MAAMxB,IAAN,CAAWsB,GAAX,CAAT;OAAtB;;;;;;;;;;;2BAjBY;aACL,KAAKV,MAAL,CAAYoB,GAAZ,GAAkBC,MAAlB,CAAyB,KAAKyJ,KAA9B,CAAP;;;;2BAwBW;;aAEJ,KAAKnK,QAAL,CAAcQ,GAAd,CAAkB,iBAAS;eACzB;gBACCP,MAAMR,YAAN,CAAmBvF,GADpB;gBAEC+F,MAAMR,YAAN,CAAmBrF,MAFpB;gBAGC6F,MAAMR,YAAN,CAAmBtF,IAHpB;gBAIC8F,MAAMR,YAAN,CAAmBpF,KAJpB;gBAKC4F;SALR;OADK,CAAP;;;;EAvJ+BuD,mBAAnC;;ACZA;;;;;;;AAOA,AACA,AACA,AAEA,IAAa4G,GAAb;;;;;;;;;;;qBAUoE;QAArD9S,MAAqD,QAArDA,MAAqD;QAA7CoM,MAA6C,QAA7CA,MAA6C;QAArCC,YAAqC,QAArCA,YAAqC;QAAvB0G,aAAuB,QAAvBA,aAAuB;QAATzG,MAAS,QAATA,MAAS;;;yGAC1D,EAACtM,cAAD,EAAS2H,MAAM,CAAC0E,aAAaE,IAAd,CAAf,EAD0D;;UAE3D7C,KAAL,GAAa2C,YAAb;UACKG,UAAL,GAAkBJ,MAAlB;UACKM,IAAL,GAAY,MAAKF,UAAL,CAAgBE,IAA5B;UACKQ,SAAL,GAAiB,GAAjB;;UAEKL,gBAAL,GAAwB,MAAKL,UAAL,CAAgBE,IAAhB,CAAqBG,gBAA7C;UACKyD,IAAL,GAAYhE,OAAOoB,SAAnB;QACGqF,cAAcrF,SAAjB,EAA4B;YACrB4C,IAAL,GAAYyC,cAAcrF,SAAd,CAAwBqF,cAAcC,OAAd,CAAsB1K,OAAtB,CAA8B,MAAKoB,KAAL,CAAW/B,IAAX,CAAgB,CAAhB,CAA9B,CAAxB,KAA8EoL,cAAcrF,SAAd,CAAwB,CAAxB,CAA1F;;;UAGG1K,KAAL,GAAa+P,cAAc/P,KAAd,IAAuBsJ,OAAOtJ,KAA3C;UACKiQ,YAAL,GAAoBF,cAAcG,eAAd,IAAiC5G,OAAO4G,eAA5D;UACKhF,UAAL,GAAkB6E,cAAc7E,UAAd,IAA4B5B,OAAO4B,UAArD;UACKJ,SAAL,GAAiBiF,cAAcjF,SAAd,IAA2BxB,OAAOwB,SAAnD;UACKE,SAAL,GAAiB+E,cAAc/E,SAAd,IAA2B1B,OAAO0B,SAAnD;UACKvB,MAAL,GAAc,MAAKwG,YAAL,GAAoB,MAAKnF,SAAvC;UACK1I,MAAL,GAAc,MAAKsH,IAAL,CAAUtH,MAAxB;UACKG,KAAL,GAAa,MAAKH,MAAL,GAAc,MAAKsE,KAAL,CAAWkD,WAAX,CAAuBtH,IAArC,GAA4C,MAAKoE,KAAL,CAAWkD,WAAX,CAAuBrH,KAAhF;UACKD,IAAL,GAAY,MAAKF,MAAL,GAAc,MAAKsE,KAAL,CAAWkD,WAAX,CAAuBrH,KAArC,GAA6C,MAAKmE,KAAL,CAAWkD,WAAX,CAAuBtH,IAAhF;;;;;QAKI6N,KAAKnO,eAAe,MAAKO,KAApB,EAA2B,MAAKmH,IAAL,CAAUC,IAArC,EAA2C,MAAKD,IAAL,CAAUnC,OAArD,EAA8D,MAAKnF,MAAnE,IAA6E,MAAKyH,gBAA3F;QACIuG,KAAKpO,eAAe,MAAKM,IAApB,EAA0B,MAAKoH,IAAL,CAAUC,IAApC,EAA0C,MAAKD,IAAL,CAAUnC,OAApD,EAA6D,MAAKnF,MAAlE,IAA4E,MAAKyH,gBAA1F;QACIwG,UAAU,CAAd;QACIC,gBAAJ;cACU,MAAKtT,MAAL,CAAY+H,MAAZ,CAAmBwH,MAAnB,CAA0B;YAC5B,MAAK7F,KAAL,CAAWkD,WAAX,CAAuBrH,KADK;YAE5B,MAAKmE,KAAL,CAAWkD,WAAX,CAAuBtH,IAFK;YAG5B,CAH4B;YAI5B;KAJE,CAAV;cAMUgO,QAAQC,IAAR,CAAa,UAACC,CAAD,EAAI5K,CAAJ,EAAU;aACxB4K,EAAEtS,IAAF,CAAO4D,MAAP,CAAc/B,KAAd,GAAsB6F,EAAE1H,IAAF,CAAO4D,MAAP,CAAc/B,KAA3C;KADQ,CAAV;QAGI0Q,aAAa,MAAKzQ,KAAL,GAAa,MAAKyJ,MAAnC;QACIiH,WAAWJ,QAAQhP,MAAvB;SACK,IAAIF,IAAI,CAAb,EAAgBA,KAAKsP,QAArB,EAA+B,EAAEtP,CAAjC,EAAoC;gBACxBA,IAAKqP,UAAf;UACIH,QAAQlP,CAAR,KAAckP,QAAQlP,CAAR,EAAWlD,IAAX,CAAgB4D,MAAhB,CAAuBjC,IAAvB,KAAgCwQ,OAAlD,EAA2D;;;;;UAKxDvO,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElBwQ,EAFkB;YAGjBE,OAHiB;aAIhB,MAAKrQ,KAJW;cAKfoQ,KAAKD;KALD,CAAd;;;;;;;;;;;yBAcG1K,GAxEP,EAwEY;;;;UAIJ,KAAKiB,KAAL,CAAWkD,WAAX,CAAuBtH,IAAvB,GAA8B,KAAKoH,IAAL,CAAUnC,OAAV,CAAkBhF,KAAhD,IACF,KAAKmE,KAAL,CAAWkD,WAAX,CAAuBrH,KAAvB,GAA+B,KAAKmH,IAAL,CAAUnC,OAAV,CAAkBjF,IADnD,EACyD;UACrDqO,QAAQ,KAAKjK,KAAL,CAAWkD,WAAX,CAAuBrH,KAAvB,GAA+B,KAAKmH,IAAL,CAAUnC,OAAV,CAAkBhF,KAAjD,GAAyD,KAAKmE,KAAL,CAAWkD,WAAX,CAAuBrH,KAAhF,GAAwF,KAAKmH,IAAL,CAAUnC,OAAV,CAAkBhF,KAAtH;UACIqO,QAAQ,KAAKlK,KAAL,CAAWkD,WAAX,CAAuBtH,IAAvB,GAA8B,KAAKoH,IAAL,CAAUnC,OAAV,CAAkBjF,IAAhD,GAAuD,KAAKoE,KAAL,CAAWkD,WAAX,CAAuBtH,IAA9E,GAAqF,KAAKoH,IAAL,CAAUnC,OAAV,CAAkBjF,IAAnH;WACKC,KAAL,GAAaoO,KAAb;WACKrO,IAAL,GAAYsO,KAAZ;UACI,KAAKxO,MAAT,EAAiB;aACVG,KAAL,GAAaqO,KAAb;aACKtO,IAAL,GAAYqO,KAAZ;;;UAGER,KAAKnO,eAAe,KAAKO,KAApB,EAA2B,KAAKmH,IAAL,CAAUC,IAArC,EAA2C,KAAKD,IAAL,CAAUnC,OAArD,EAA8D,KAAKnF,MAAnE,IAA6E,KAAKyH,gBAA3F;UACIuG,KAAKpO,eAAe,KAAKM,IAApB,EAA0B,KAAKoH,IAAL,CAAUC,IAApC,EAA0C,KAAKD,IAAL,CAAUnC,OAApD,EAA6D,KAAKnF,MAAlE,IAA4E,KAAKyH,gBAA1F;;;WAGK/H,MAAL,GAAc,IAAInC,MAAJ,CAAW;aAClBwQ,EADkB;gBAEfC,KAAKD,EAFU;cAGjB,KAAKrO,MAAL,CAAYjC,IAHK;eAIhB,KAAKG;OAJA,CAAd;UAMIkF,KAAK,KAAKC,YAAL,IAAqB,EAA9B;UACI0L,YAAY3L,GAAGjF,MAAH,GAAY,CAAZ,GAAgBiF,GAAGjF,MAAnB,GAA4B,CAA5C;UACI6Q,WAAW,KAAKhG,SAApB;UACIiG,YAAY,KAAK/F,SAArB;UACID,IAAJ,GAAc+F,QAAd,WAA4BC,SAA5B;UACItG,SAAJ,GAAgB,KAAK6C,IAArB;;;UAGI3C,QAAJ,CACElK,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAFF,EAGEa,KAAKC,KAAL,CAAW,KAAKV,KAAhB,CAHF,EAIES,KAAKC,KAAL,CAAWmQ,SAAX,CAJF;UAMIG,YAAYvL,IAAI2F,WAAJ,CAAgB,KAAK1E,KAAL,CAAW6C,IAA3B,EAAiCvJ,KAAjC,GAA0CyF,IAAI2F,WAAJ,CAAgB,GAAhB,EAAqBpL,KAArB,GAA6B,CAAvF;UACIiR,WAAW,KAAK3O,IAAL,IAAaN,eAAegP,YAAY,KAAKnH,gBAAhC,EAAkD,KAAKH,IAAL,CAAUC,IAA5D,EAAkE,KAAKD,IAAL,CAAUnC,OAA5E,IAAuF,KAAKmC,IAAL,CAAUC,IAAV,CAAepH,KAAnH,CAAf;UACI2O,UAAU,KAAKlU,MAAL,CAAY+H,MAAZ,CAAmBwH,MAAnB,CAA0B;cAChC0E,WAAW,KAAKvH,IAAL,CAAUnC,OAAV,CAAkBhF,KAA7B,GAAqC0O,QAArC,GAAgD,KAAKvH,IAAL,CAAUnC,OAAV,CAAkBhF,KADlC;cAEhC,KAAKD,IAF2B;cAGhC4C,GAAGrF,IAH6B;cAIhCqF,GAAGnF;OAJG,CAAd;UAMImR,QAAQ5P,MAAR,IAAkB,CAAlB,IAAuB0P,aAAa9L,GAAGjF,MAA3C,EAAmD;YAC7CqH,IAAJ;YACI6J,SAAJ,CAAcjM,GAAGrF,IAAjB,EAAuBqF,GAAGtF,GAA1B;YACI6K,SAAJ,GAAgB,KAAKS,UAArB;YACIkG,MAAJ,CAAW,CAAC3Q,KAAK4M,EAAN,GAAW,CAAtB;YACIlC,QAAJ,CAAa,KAAKzE,KAAL,CAAW6C,IAAxB,EAA8B,CAACrE,GAAGjF,MAAlC,EAA0C,KAAKD,KAAL,GAAa8Q,QAAb,GAAwB,CAAlE;YACItJ,OAAJ;;;;WAIG9B,QAAL,CAAcrI,OAAd,CAAsB;eAASsI,MAAMxB,IAAN,CAAWsB,GAAX,CAAT;OAAtB;;;;EAjIqBhB,kBAAzB;;ACXA;;;;;;AAMA,AACA,AACA,AAEA,IAAa4M,QAAb;;;;;;;;;;;;oBAWcrI,MAAZ,EAAoB;;;mHACZA,MADY;;UAGb2C,gBAAL,GAAwB,EAAxB;QACI/F,IAAI,MAAK5I,MAAL,CAAY8E,MAApB;UACKA,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElB,CAFkB;YAGjB,CAHiB;aAIhB,MAAK3C,MAAL,CAAY0J,KAAZ,CAAkB4C,MAAlB,CAAyBgI,GAAzB,CAA6BC,aAJb;cAKf3L,EAAE3F;KALE,CAAd;;QAQGuR,UAAUxI,OAAOM,MAArB;SACM,IAAIiF,GAAT,IAAgB,MAAKvR,MAAL,CAAY0J,KAAZ,CAAkB4C,MAAlB,CAAyBgI,GAAzC,EAA6C;UACxC,CAACE,QAAQ/C,cAAR,CAAuBF,GAAvB,CAAJ,EAAgC;gBACtBA,GAAR,IAAe,MAAKvR,MAAL,CAAY0J,KAAZ,CAAkB4C,MAAlB,CAAyBgI,GAAzB,CAA6B/C,GAA7B,CAAf;;;;YAIGyB,OAAR,CAAgB3S,OAAhB,CAAyB,UAACwO,MAAD,EAAQ4F,KAAR,EAAkB;UACpCC,OAAO,MAAK1U,MAAL,CAAY0J,KAAZ,CAAkBkF,QAAlB,CAA2BC,MAA3B,CAAmC,iBAAS;eAC9CnF,MAAM/B,IAAN,CAAW,CAAX,EAAcgD,KAAd,CAAoBkE,MAApB,MAAgC,IAAvC;OADS,CAAX;UAGG6F,KAAKpQ,MAAL,KAAgB,CAAnB,EAAqB;;gBAEX0O,OAAR,CAAgBxK,MAAhB,CAAuBiM,KAAvB,EAA6B,CAA7B;OAFF,MAGO;cACA9F,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBvF,MAAtB,CAA6BsL,IAA7B,CAAxB;;KARL;;UAYM/F,gBAAL,CAAsB4E,IAAtB,CAA2B,UAACC,CAAD,EAAG5K,CAAH,EAAO;aAAQ4K,EAAE5G,WAAF,CAAcrH,KAAd,GAAsBqD,EAAEgE,WAAF,CAAcrH,KAA3C;KAAnC;QACIuJ,SAAS,EAAb;;UAGK6F,MAAL,GAAc,CAAd;UACKC,QAAL,GAAgB,MAAKjG,gBAAL,CAAsBzF,GAAtB,CAA2B,iBAAS;UAC9C+F,KAAK,IAAI6D,GAAJ,CAAS;sBACFpJ,KADE;qBAAA;gBAGR,MAAK1J,MAAL,CAAY0J,KAHJ;uBAID8K,OAJC;gBAKR,MAAKxU,MAAL,CAAY0J,KAAZ,CAAkB4C,MAAlB,CAAyBgI;OAL1B,CAAT;;YAQK9F,QAAL,CAAcS,EAAd;;UAEI5J,MAAM;cACFqE,MAAMkD,WAAN,CAAkBrH,KADhB;cAEFmE,MAAMkD,WAAN,CAAkBtH,IAFhB;cAGF2J,GAAG9G,YAAH,CAAgBtF,IAHd;cAIFoM,GAAG9G,YAAH,CAAgBpF,KAJd;cAKHkM;OALP;;YAQKlH,MAAL,CAAY8M,MAAZ,CAAmBxP,GAAnB;;aAEOnF,IAAP,CAAYmF,GAAZ;;UAEG4J,GAAG9G,YAAH,CAAgBpF,KAAhB,GAAwB,MAAKoF,YAAL,CAAkBpF,KAA7C,EAAmD;cAC5C+B,MAAL,CAAY/B,KAAZ,GAAoBkM,GAAG9G,YAAH,CAAgBpF,KAAhB,GAAwB,MAAKoF,YAAL,CAAkBtF,IAA9D;;;aAGKoM,EAAP;KA3Bc,CAAhB;UA6BKlH,MAAL,CAAY+M,KAAZ;UACK/M,MAAL,CAAYqH,IAAZ,CAAiBN,MAAjB;;;;;;;;;;;;;;;;;yBAuBGrG,GArGP,EAqGY;UACJ6B,IAAJ;UACImG,WAAJ,GAAkB,EAAlB;UACIhD,SAAJ,GAAgB,SAAhB;WACK/E,QAAL,CAAcrI,OAAd,CAAsB,iBAAS;YACzBqQ,KAAK/H,MAAMR,YAAf;;;YAGIwF,QAAJ,CACElK,KAAKC,KAAL,CAAWgN,GAAG7N,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAWgN,GAAG9N,GAAd,CAFF,EAGEa,KAAKC,KAAL,CAAWgN,GAAG1N,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWgN,GAAGzN,MAAd,CAJF;OAJF;UAWIuH,OAAJ;;;;;;;;;;2BA/BY;;;;;;;aAOL,KAAKzC,MAAL,CAAYoB,GAAZ,EAAP;;;;;2BAgCW;;aAEJ,KAAKT,QAAL,CAAcQ,GAAd,CAAkB,iBAAS;eACzB;gBACCP,MAAMR,YAAN,CAAmBvF,GADpB;gBAEC+F,MAAMR,YAAN,CAAmBrF,MAFpB;gBAGC6F,MAAMR,YAAN,CAAmBtF,IAHpB;gBAIC8F,MAAMR,YAAN,CAAmBpF,KAJpB;gBAKC4F;SALR;OADK,CAAP;;;;EA9H0BuD,mBAA9B;;ACVA;;;;;;;AAOA,AAEA,AACA,AACA,AACA,AAEA,IAAa6I,YAAb;;;;;;;;wBAOc/I,MAAZ,EAAoB;;;2HACZA,MADY;;UAEbtC,KAAL,GAAa,MAAK1J,MAAL,CAAY0J,KAAzB;QACMd,IAAI,MAAK5I,MAAL,CAAY8E,MAAtB;UACKsM,QAAL,GAAgBpF,OAAOqF,QAAP,IAAmB,CAAnC;;QAEIxO,OAAO,MAAKuO,QAAL,GAAgB,CAAhB,GAAoB,EAApB,GAAyB,MAAKpR,MAAL,CAAYgV,OAAZ,CAAoBlQ,MAApB,CAA2B/B,KAA/D;UACK+B,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElBiG,EAAEhG,GAFgB;YAGjBC,IAHiB;aAIhB,CAJgB;cAKf+F,EAAE3F;KALE,CAAd;QAOG,MAAKjD,MAAL,CAAY0J,KAAZ,CAAkBuL,MAArB,EAA6B;UACvBA,SAAS,MAAK7D,QAAL,KAAkB,CAAlB,GAAsB,MAAKpR,MAAL,CAAYkV,UAAlC,GAA+C,MAAKlV,MAAL,CAAYmV,WAAxE;aACO9U,OAAP,CAAe,UAAC+U,KAAD,EAAQX,KAAR,EAAkB;;;YAG3BY,kBAAkB,IAAItJ,mBAAJ,CAAwB,EAAC/L,aAAD,EAAxB,CAAtB;wBACgB0J,KAAhB,GAAwB,MAAKA,KAA7B;wBACgB4C,MAAhB,GAAyB8I,KAAzB;wBACgBX,KAAhB,GAAwBA,KAAxB;;YAEIa,YAAYb,UAAU,CAAV,GAAc,CAAd,GAAkB,MAAK/L,QAAL,CAAc+L,QAAM,CAApB,EAAuB3P,MAAvB,CAA8B/B,KAAhE;qBACa,MAAK2G,KAAL,CAAW4C,MAAX,CAAkBgI,GAAlB,CAAsBiB,OAAnC;;wBAEgBzQ,MAAhB,GAAyB,IAAInC,MAAJ,CAAW;yBACnB,KADmB;eAE7B,CAF6B;gBAG5B2S,SAH4B;iBAI3B,MAAK5L,KAAL,CAAW4C,MAAX,CAAkBgI,GAAlB,CAAsBC,aAJK;kBAK1B3L,EAAE3F;SALa,CAAzB;;YASIuS,cAAc,EAAlB;YACGJ,MAAM1K,IAAN,KAAe,KAAlB,EAAyB;0BACP+K,KAAhB,GAAwBL,MAAMK,KAAN,IAAe,MAAK/L,KAAL,CAAW4C,MAAX,CAAkBgI,GAAlB,CAAsBmB,KAArC,IAA8CL,MAAMpC,OAAN,CAAc,CAAd,CAAtE;wBACc,IAAIqB,QAAJ,CAAa,EAACrU,QAAOqV,eAAR,EAA0B/I,QAAQ8I,KAAlC,EAAb,CAAd;SAFF,MAGO,IAAIA,MAAM1K,IAAN,KAAe,WAAnB,EAAgC;0BACrBqH,OAAhB,GAA0B,MAAK/R,MAAL,CAAY0E,QAAZ,CAAqBqN,OAA/C;0BACgB0D,KAAhB,GAAwBL,MAAMK,KAAN,IAAe,MAAK/L,KAAL,CAAW4C,MAAX,CAAkBkF,SAAlB,CAA4BiE,KAA3C,IAAoD,WAA5E;wBACc,IAAItE,aAAJ,CAAkB,EAACnR,QAAOqV,eAAR,EAAyB/I,QAAQ8I,KAAjC,EAAlB,CAAd;;;wBAGc5G,QAAhB,CAAyBgH,WAAzB;YACGA,YAAYrN,YAAZ,CAAyBpF,KAAzB,GAAiCsS,gBAAgBlN,YAAhB,CAA6BpF,KAAjE,EAAuE;0BACrD+B,MAAhB,CAAuB/B,KAAvB,IAAgCyS,YAAY1Q,MAAZ,CAAmB/B,KAAnD;;;YAGCsS,gBAAgBlN,YAAhB,CAA6BpF,KAA7B,GAAqC,MAAKoF,YAAL,CAAkBpF,KAA1D,EAAgE;gBACzD+B,MAAL,CAAY/B,KAAZ,GAAqB,MAAK+B,MAAL,CAAYjC,IAAZ,IAAoBwS,gBAAgBlN,YAAhB,CAA6BpF,KAA7B,GAAqC,MAAKoF,YAAL,CAAkBtF,IAA3E,CAArB;;;cAGG2L,QAAL,CAAc6G,eAAd;OAvCF;KAFF,MA2CO;YACArV,MAAL,CAAY0J,KAAZ,CAAkBuL,MAAlB,GAA2B,EAA3B;;;;;;;;;;;;;;;;;;;yBAuBCxM,GAxFP,EAwFY;UACJ6B,IAAJ;UACImG,WAAJ,GAAkB,EAAlB;UACIhD,SAAJ,GAAgB,SAAhB;WACK/E,QAAL,CAAcrI,OAAd,CAAsB,iBAAS;YACzBqQ,KAAK/H,MAAMR,YAAf;;;YAGIwF,QAAJ,CACElK,KAAKC,KAAL,CAAWgN,GAAG7N,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAWgN,GAAG9N,GAAd,CAFF,EAGEa,KAAKC,KAAL,CAAWgN,GAAG1N,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWgN,GAAGzN,MAAd,CAJF;OAJF;;;;;;;;;UAmBIuH,OAAJ;;;;;;;;;;2BArCY;UACRD,UAAU,EAAd;WACK7B,QAAL,CAAcrI,OAAd,CAAsB,iBAAS;kBACnBkK,QAAQnB,MAAR,CAAeT,MAAM4B,OAArB,CAAV;OADF;aAGOA,OAAP;;;;;2BAwCW;;;UAGPjB,OAAO,EAAX;WACKZ,QAAL,CAAcrI,OAAd,CAAsB,iBAAS;eACtBsI,MAAMD,QAAN,CAAeQ,GAAf,CAAmB,oBAAY;iBAC7BI,KAAKF,MAAL,CAAYsM,SAASlM,MAArB,CAAP;SADK,CAAP;OADF;aAKOF,IAAP;;;;EAhI8B4C,mBAAlC;;ACdA;;;;;;;AAOA,AACA,AACA,AAEA,IAAayJ,KAAb;;;;;;;;;;uBASwC;QAAzB3V,MAAyB,QAAzBA,MAAyB;QAAjBoM,MAAiB,QAAjBA,MAAiB;QAATE,MAAS,QAATA,MAAS;;;6GAC9B,EAACtM,cAAD,EAD8B;;UAE/BsM,MAAL,GAAcA,MAAd;UACKiC,cAAL,GAAsBnC,OAAOM,IAA7B;UACKD,MAAL,GAAc,MAAK8B,cAAL,CAAoB5B,IAApB,CAAyBpH,KAAzB,GAAiC,CAAC,CAAhD;UACKsH,gBAAL,GAAwB,MAAK0B,cAAL,CAAoB1B,gBAA5C;UACKzH,MAAL,GAAc,MAAKmJ,cAAL,CAAoBnJ,MAAlC;UACKsI,SAAL,GAAiBpB,OAAOoB,SAAxB;UACKkI,QAAL,GAAgBtJ,OAAO0B,SAAvB;UACK6H,QAAL,GAAgBvJ,OAAOwB,SAAvB;UACKgI,SAAL,GAAiBxJ,OAAO4B,UAAxB;UACK6H,cAAL,GAAsBzJ,OAAO0J,SAA7B;UACKC,UAAL,GAAkB3J,OAAOtJ,KAAzB;UACKkT,YAAL,GAAoB5J,OAAOiJ,OAA3B;UACKY,SAAL,GAAiB7J,OAAO8J,eAAxB;UACKC,UAAL,GAAkB/J,OAAOgK,cAAzB;;QAEM1N,IAAI,MAAK5I,MAAL,CAAYwN,QAAZ,CAAqB1I,MAA/B;UACKA,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElB,CAFkB;YAGjBiG,EAAE/F,IAAF,GAASyJ,OAAOtJ,KAAhB,GAAwBsJ,OAAOiJ,OAA/B,GAAyCjJ,OAAOQ,UAH/B;aAIhBR,OAAOtJ,KAJS;cAKf4F,EAAE3F;KALE,CAAd;;;;;;;;;;;yBAcGwF,GAzCP,EAyCY;UACJ6D,SAAS,KAAKA,MAAlB;UACIiK,SAAS,KAAKnR,MAAL,GAAc,KAAKmJ,cAAL,CAAoBhE,OAApB,CAA4BjF,IAA1C,GAAiD,KAAKiJ,cAAL,CAAoBhE,OAApB,CAA4BhF,KAA1F;UACIiR,QAAQ,KAAKpR,MAAL,GAAc,KAAKmJ,cAAL,CAAoBhE,OAApB,CAA4BhF,KAA1C,GAAkD,KAAKgJ,cAAL,CAAoBhE,OAApB,CAA4BjF,IAA1F;UACIC,QAAQP,eAAeuR,MAAf,EAAuB,KAAKhI,cAAL,CAAoB5B,IAA3C,EAAiD,KAAK4B,cAAL,CAAoB5B,IAArE,EAA2E,KAAKvH,MAAhF,IAA0F,KAAKyH,gBAA3G;UACIvH,OAAON,eAAewR,KAAf,EAAsB,KAAKjI,cAAL,CAAoB5B,IAA1C,EAAgD,KAAK4B,cAAL,CAAoB5B,IAApE,EAA0E,KAAKvH,MAA/E,IAAyF,KAAKyH,gBAAzG;UACI4J,OAAO,CAAC,KAAKlI,cAAL,CAAoB5B,IAApB,CAAyBpH,KAAzB,CAA+BmR,OAA/B,CAAuCpK,OAAO0J,SAA9C,CAAD,EAA2D,KAAKzH,cAAL,CAAoB5B,IAApB,CAAyBrH,IAAzB,CAA8BoR,OAA9B,CAAsCpK,OAAO0J,SAA7C,CAA3D,CAAX;;WAEKhC,SAAL,GAAiBvL,IAAI2F,WAAJ,CAAgBqI,KAAK,CAAL,CAAhB,EAAyBzT,KAAzB,GAAiCyF,IAAI2F,WAAJ,CAAgBqI,KAAK,CAAL,CAAhB,EAAyBzT,KAA1D,GAAkEyF,IAAI2F,WAAJ,CAAgBqI,KAAK,CAAL,CAAhB,EAAyBzT,KAA3F,GAAmGyF,IAAI2F,WAAJ,CAAgBqI,KAAK,CAAL,CAAhB,EAAyBzT,KAA7I;;UAEIkF,KAAK,KAAKC,YAAL,IAAqB,EAA9B;;UAEI4F,IAAJ,GAAczB,OAAOwB,SAArB,WAAoCxB,OAAO0B,SAA3C;UACIP,SAAJ,GAAgBnB,OAAO4B,UAAvB;UACID,SAAJ,GAAgB,MAAhB;UACI,KAAK7I,MAAT,EAAiB;YACX+I,QAAJ,CAAasI,KAAK,CAAL,CAAb,EAAsBvO,GAAGrF,IAAH,GAAU4F,IAAI2F,WAAJ,CAAgBqI,KAAK,CAAL,CAAhB,EAAyBzT,KAAnC,GAA4CkF,GAAGlF,KAAH,GAAW,CAA7E,EAAiFS,KAAKC,KAAL,CAAWwE,GAAGtF,GAAH,GAAS0J,OAAOwB,SAAP,GAAmB,CAAvC,CAAjF;YACIK,QAAJ,CAAasI,KAAK,CAAL,CAAb,EAAsBvO,GAAGrF,IAAH,GAAU4F,IAAI2F,WAAJ,CAAgBqI,KAAK,CAAL,CAAhB,EAAyBzT,KAAnC,GAA4CkF,GAAGlF,KAAH,GAAW,CAA7E,EAAiFS,KAAKC,KAAL,CAAWwE,GAAGpF,MAAH,GAAYwJ,OAAOwB,SAA9B,CAAjF;OAFF,MAGO;YACDK,QAAJ,CAAasI,KAAK,CAAL,CAAb,EAAsBvO,GAAGrF,IAAH,GAAU4F,IAAI2F,WAAJ,CAAgBqI,KAAK,CAAL,CAAhB,EAAyBzT,KAAnC,GAA4CkF,GAAGlF,KAAH,GAAW,CAA7E,EAAiFS,KAAKC,KAAL,CAAWwE,GAAGtF,GAAH,GAAS0J,OAAOwB,SAAP,GAAmB,CAAvC,CAAjF;YACIK,QAAJ,CAAasI,KAAK,CAAL,CAAb,EAAsBvO,GAAGrF,IAAH,GAAU4F,IAAI2F,WAAJ,CAAgBqI,KAAK,CAAL,CAAhB,EAAyBzT,KAAnC,GAA4CkF,GAAGlF,KAAH,GAAW,CAA7E,EAAiFS,KAAKC,KAAL,CAAWwE,GAAGpF,MAAH,GAAYwJ,OAAOwB,SAA9B,CAAjF;;;aAGK,CAAC,KAAKS,cAAL,CAAoBhE,OAApB,CAA4BhF,KAA5B,CAAkCmR,OAAlC,CAA0CpK,OAAO0J,SAAjD,CAAD,EAA8D,KAAKzH,cAAL,CAAoBhE,OAApB,CAA4BjF,IAA5B,CAAiCoR,OAAjC,CAAyCpK,OAAO0J,SAAhD,CAA9D,CAAP;UACI,KAAK5Q,MAAT,EAAiB;YACX+I,QAAJ,CAAasI,KAAK,CAAL,CAAb,EAAsBvO,GAAGrF,IAAH,GAAUyJ,OAAOtJ,KAAjB,GAAyBsJ,OAAOiJ,OAAtD,EAA+D9R,KAAKC,KAAL,CAAWwE,GAAGtF,GAAH,GAAS0J,OAAOwB,SAAP,GAAmB,CAAvC,CAA/D;YACIK,QAAJ,CAAasI,KAAK,CAAL,CAAb,EAAsBvO,GAAGrF,IAAH,GAAUyJ,OAAOtJ,KAAjB,GAAyBsJ,OAAOiJ,OAAtD,EAAgErN,GAAGpF,MAAH,GAAYwJ,OAAOwB,SAAnF;OAFF,MAGO;YACDK,QAAJ,CAAasI,KAAK,CAAL,CAAb,EAAsBvO,GAAGrF,IAAH,GAAUyJ,OAAOtJ,KAAjB,GAAyBsJ,OAAOiJ,OAAtD,EAA+D9R,KAAKC,KAAL,CAAWwE,GAAGtF,GAAH,GAAS0J,OAAOwB,SAAP,GAAmB,CAAvC,CAA/D;YACIK,QAAJ,CAAasI,KAAK,CAAL,CAAb,EAAsBvO,GAAGrF,IAAH,GAAUyJ,OAAOtJ,KAAjB,GAAyBsJ,OAAOiJ,OAAtD,EAAgErN,GAAGpF,MAAH,GAAYwJ,OAAOwB,SAAnF;;;;UAIEf,SAAJ;UACIG,SAAJ,GAAgBZ,OAAO8J,eAAvB;UACIpJ,WAAJ,GAAkBV,OAAOgK,cAAzB;;UAEInJ,MAAJ,CAAW1J,KAAKC,KAAL,CAAWwE,GAAGrF,IAAH,GAAUqF,GAAGlF,KAAH,GAAW,CAAhC,CAAX,EAA+CS,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAA/C;;UAEIwK,MAAJ,CAAW3J,KAAKC,KAAL,CAAWwE,GAAGrF,IAAH,GAAUqF,GAAGlF,KAAH,GAAW,CAAhC,CAAX,EAA+CS,KAAKC,KAAL,CAAWwE,GAAGpF,MAAd,CAA/C;UACIuK,MAAJ;;;UAGII,SAAJ,GAAgBnB,OAAOoB,SAAvB,CA3CQ;UA4CJzK,SAASqC,OAAOC,KAAP,GAAe,CAAf,GAAmBD,OAAOC,KAA1B,GAAkC,GAA/C;;UAEIoI,QAAJ,CACElK,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAW6B,QAAQ2C,GAAGtF,GAAtB,CAFF,EAGEa,KAAKC,KAAL,CAAWwE,GAAGlF,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWT,MAAX,CAJF;;UAOGqJ,OAAOQ,UAAP,GAAoB,CAAvB,EAA0B;YACpBE,WAAJ,GAAkBV,OAAOW,SAAzB;YACIC,SAAJ,GAAgBZ,OAAOQ,UAAvB;YACIc,UAAJ,CACEnK,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAW6B,QAAQ2C,GAAGtF,GAAtB,CAFF,EAGEa,KAAKC,KAAL,CAAWwE,GAAGlF,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWT,MAAX,CAJF;;;;;;;;;;;WAgBGyF,QAAL,CAAcrI,OAAd,CAAsB;eAASsI,MAAMxB,IAAN,CAAWsB,GAAX,CAAT;OAAtB;;;;;;;;;;;2BASY;aACL,EAACvH,MAAM,IAAP,EAAP;;;;EA3HuBuG,kBAA3B;;ACXA;;;;;;AAOA,AACA;;;AAGA,AACA,AAEA,AACA,AACA,AACA,AACA,AAEA,IAAakP,MAAb;;;;;;;;;;;;;wBAY+E;QAAhEC,WAAgE,QAAhEA,WAAgE;QAAnDlS,QAAmD,QAAnDA,QAAmD;QAAzCmS,YAAyC,QAAzCA,YAAyC;QAA3BC,WAA2B,QAA3BA,WAA2B;QAAdC,WAAc,QAAdA,WAAc;;;+GACrE,EAACrN,OAAOkN,WAAR,EADqE;;UAEtEG,WAAL,GAAmBA,WAAnB;UACKD,WAAL,GAAmBA,WAAnB;UACKpN,KAAL,CAAWa,OAAX,GAAqB;aACZ,MAAKb,KAAL,CAAWkD,WAAX,CAAuBrH,KADX;YAEb,MAAKmE,KAAL,CAAWkD,WAAX,CAAuBtH;KAF/B;UAIKoE,KAAL,CAAWgD,IAAX,GAAkB;YACV;eACG,MAAKhD,KAAL,CAAWkD,WAAX,CAAuBrH,KAD1B;cAEE,MAAKmE,KAAL,CAAWkD,WAAX,CAAuBtH;OAHf;eAKP;eACA,MAAKoE,KAAL,CAAWkD,WAAX,CAAuBrH,KADvB;cAED,MAAKmE,KAAL,CAAWkD,WAAX,CAAuBtH;OAPf;cASP,MAAKoE,KAAL,CAAW4C,MAAX,CAAkBlH;KAT7B;;UAYKsE,KAAL,CAAW8G,aAAX,GAA2B,MAAKuG,WAAL,CAAiBvF,SAAjB,IAA8B,IAAzD;UACKwF,SAAL,GAAiB,CAAC,MAAKtN,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBrH,IAArB,GAA4B,MAAKoE,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBpH,KAAlD,IAA2D,MAAKmE,KAAL,CAAW4C,MAAX,CAAkBuG,KAAlB,CAAwBoE,KAApG;;UAEKvS,QAAL,GAAgBA,QAAhB;UACKiF,aAAL,GAAqB,CAArB;UACK6D,QAAL,GAAgB,IAAhB;UACKwB,YAAL,GAAoB,EAApB;UACKkI,aAAL,GAAqB,EAArB;UACKtN,IAAL,GAAY;WACL,CADK;YAEJ,CAFI;eAGD;;KAHX;;;UAQKC,aAAL,GAAqB;WACd,IAAIC,MAAJ,CAAW,MAAX,CADc;aAEZ,IAAIA,MAAJ,CAAW,QAAX,CAFY;WAGd,IAAIA,MAAJ,CAAW,MAAX,CAHc;aAIZ,IAAIA,MAAJ,CAAW,QAAX;KAJT;UAMKqN,OAAL,CAAaN,YAAb;UACKpM,KAAL,GAAa,IAAb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6BA8BOhG,KArFX,EAqFkB;8GACCA,KAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BA+CMgB,GArIV,EAqIe;;;cAGH4F,IAAR,CAAa,kBAAb,EAAiC5F,GAAjC;;WAEKkE,aAAL,GAAqBlE,IAAI2R,MAAJ,GAAa,CAAb,GAAiB,CAAC,KAAKJ,SAAvB,GAAmC,KAAKA,SAA7D;UACIK,MAAM,KAAK3N,KAAL,CAAWgD,IAAX,CAAgBC,IAA1B;UACI2K,SAAU,KAAK5N,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAAxB,GAAgC,KAAKoE,aAAnD;UACI4N,QAAS,KAAK7N,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IAAxB,GAA+B,KAAKqE,aAAjD;UACI4N,QAAQD,MAAR,GAAiB,GAArB,EAA0B;aACnB3N,aAAL,IAAsB,GAAtB;eACO,IAAP;;UAEE2N,SAASD,IAAI9R,KAAjB,EAAwB;iBACb8R,IAAI9R,KAAb;OADF,MAEO,IAAI+R,SAASC,KAAb,EAAoB;iBAChBA,KAAT;;;UAGEA,QAAQF,IAAI/R,IAAhB,EAAsB;gBACZ+R,IAAI/R,IAAZ;OADF,MAEO,IAAIiS,QAAQD,MAAZ,EAAoB;gBACjBA,MAAR;;WAEGE,eAAL,CAAqB,EAACjS,OAAO+R,MAAR,EAAgBhS,MAAMiS,KAAtB,EAArB;aACO,IAAP,CAzBW;;;;;;;;;;;;2BAmCN9R,GAxKT,EAwKc;;;cACFtE,GAAR,CAAY,iBAAZ,EAA+BsE,GAA/B,EAAoC,IAApC;UACIgS,YAAYjS,aAAaC,GAAb,EAAkB,KAAKC,MAAvB,CAAhB;WACKgS,WAAL;UACIpO,OAAO,EAAX;;WAEKE,MAAL,CAAY+F,MAAZ,CAAmB;cACXkI,UAAU5X,CADC;cAEX4X,UAAU5X,CAFC;cAGX4X,UAAU3X,CAAV,GAAc,CAHH;cAIX2X,UAAU3X,CAAV,GAAc;OAJtB,EAKGO,OALH,CAKW,eAAO;;YAEXsX,IAAIzW,IAAJ,CAASwI,KAAT,CAAekD,WAAf,CAA2BrH,KAA3B,IAAoC,OAAKmE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAA7D,IACDoS,IAAIzW,IAAJ,CAASwI,KAAT,CAAekD,WAAf,CAA2BrH,KAA3B,IAAoC,OAAKmE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IAD/D,EACsE;eAC/DpF,IAAL,CAAUyX,IAAIzW,IAAd;SAFF,MAGO,IAAKyW,IAAIzW,IAAJ,CAASwI,KAAT,CAAekD,WAAf,CAA2BtH,IAA3B,IAAmC,OAAKoE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAA5D,IACRoS,IAAIzW,IAAJ,CAASwI,KAAT,CAAekD,WAAf,CAA2BtH,IAA3B,IAAmC,OAAKoE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IADvD,EAC8D;eAC9DpF,IAAL,CAAUyX,IAAIzW,IAAd;;OAZJ;UAeIoI,KAAKhF,MAAL,GAAc,CAAlB,EAAqB;aACdiP,IAAL,CAAU,UAACC,CAAD,EAAI5K,CAAJ,EAAU;iBACX4K,EAAE9J,KAAF,CAAQkD,WAAR,CAAoBrH,KAApB,GAA4BqD,EAAEc,KAAF,CAAQkD,WAAR,CAAoBrH,KAAvD;SADF;aAGKqE,IAAL,CAAUgO,OAAV,GAAoB,cAApB;aACKhO,IAAL,CAAUhH,GAAV,GAAgB0G,KAAK,CAAL,EAAQnB,YAAR,CAAqBvF,GAArC;aACKgH,IAAL,CAAU/G,IAAV,GAAiByG,KAAK,CAAL,EAAQnB,YAAR,CAAqBpF,KAAtC;aACK6G,IAAL,CAAU1I,IAAV,GAAiBoI,IAAjB;YACIuO,QAAQvO,KAAKJ,GAAL,CAAS,eAAO;iBACnByO,IAAIjO,KAAJ,CAAU6C,IAAjB;SADU,CAAZ;;;aAKK3C,IAAL,CAAUkO,SAAV,YAA6BD,MAAME,IAAN,CAAW,IAAX,CAA7B;gBACEtM,MAAF;OAdF,MAeO,IAAI,KAAK7B,IAAL,CAAUgO,OAAV,KAAsB,MAA1B,EAAkC;aAClChO,IAAL,CAAUgO,OAAV,GAAoB,MAApB;gBACEnM,MAAF;;;aAGK,IAAP;;;;;;;;;;;;;;gCAYUhG,GA7Nd,EA6NmB;;;WAGVuS,KAAL,GAAa;eACJ,CADI;aAEN,CAFM;gBAGH,IAHG;eAIJ,KAJI;eAKJ,CALI;gBAMH;OANV;WAQKA,KAAL,CAAWC,MAAX,GAAoB,IAApB;cACQ5M,IAAR,CAAa,kDAAb,EAAiE5F,GAAjE;UACIgS,YAAYjS,aAAaC,GAAb,EAAkB,KAAKC,MAAvB,CAAhB;UACI7C,OAAO,KAAKgQ,KAAL,CAAW1K,YAAX,CAAwBtF,IAAnC;;UAEIA,OAAQ4U,UAAU5X,CAAV,GAAc4F,IAAIyS,MAA1B,IACDT,UAAU5X,CAAV,GAAc4F,IAAIyS,MAAnB,GAA8BrV,OAAO,KAAKgQ,KAAL,CAAW/N,MAAX,CAAkB9B,KADzD,EACiE;aAC1DgV,KAAL,CAAWnF,KAAX,GAAmB,IAAnB;aACKsF,UAAL,CAAgB1S,GAAhB;OAHF,MAIO;aACAuS,KAAL,CAAWnF,KAAX,GAAmB,KAAnB;aACKmF,KAAL,CAAWzS,KAAX,GAAmB,KAAK6S,kBAAL,CAAwBX,UAAU3X,CAAV,GAAc,KAAK+S,KAAL,CAAW1K,YAAX,CAAwBvF,GAAtC,GAA4C6C,IAAI2R,MAAxE,CAAnB;YACI,KAAKY,KAAL,CAAWzS,KAAX,GAAmB,KAAKmE,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBpH,KAA5C,EAAmD;eAC5CyS,KAAL,CAAWzS,KAAX,GAAmB,KAAKmE,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBpH,KAAxC;;YAEEkD,MAAM,KAAKsB,SAAf;aACKiO,KAAL,CAAWK,MAAX,GAAoB,EAACzV,KAAK6U,UAAU3X,CAAV,GAAc2F,IAAI2R,MAAxB,EAAgCvU,MAAM4U,UAAU5X,CAAV,GAAc4F,IAAIyS,MAAxD,EAApB;YACIhL,SAAJ,GAAgB,GAAhB;YACIF,WAAJ,GAAkB,OAAlB;;YAEIY,UAAJ,CACEnK,KAAKC,KAAL,CAAW+T,UAAU5X,CAAV,GAAc4F,IAAIyS,MAA7B,CADF,EAEEzU,KAAKC,KAAL,CAAW+T,UAAU3X,CAAV,GAAc2F,IAAI2R,MAA7B,CAFF,EAGE3T,KAAKC,KAAL,CAAW+B,IAAIyS,MAAf,CAHF,EAIEzU,KAAKC,KAAL,CAAW+B,IAAI2R,MAAf,CAJF;;aAOK,IAAP;;;;;;;;;;;;+BAUS3R,GA7Qb,EA6QkB;UACV,KAAKiE,KAAL,CAAW4C,MAAX,CAAkBlH,MAAtB,EAA8B;YACxBgS,MAAJ,GAAa,CAAC3R,IAAI2R,MAAlB;;;UAGEkB,QAAQ,CAAC7S,IAAI2R,MAAJ,GAAa,KAAKY,KAAL,CAAWM,KAAzB,IAAkC,KAAK5O,KAAL,CAAWgD,IAAX,CAAgBG,gBAA9D;UACI,KAAKnD,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAAxB,GAAgC+S,KAAhC,GAAwC,KAAK5O,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBpH,KAAjE,EAAwE;gBAC9D,KAAKmE,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBpH,KAArB,GAA6B,KAAKmE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAA7D;OADF,MAEO,IAAI,KAAKmE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IAAxB,GAA+BgT,KAA/B,GAAuC,KAAK5O,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBrH,IAAhE,EAAsE;gBACnE,KAAKoE,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBrH,IAArB,GAA4B,KAAKoE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IAA5D;;WAEGoE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAAxB,IAAiC+S,KAAjC;WACK5O,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IAAxB,IAAgCgT,KAAhC;WACKd,eAAL,CAAqB,EAACjS,OAAO,KAAKmE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAAhC,EAAuCD,MAAM,KAAKoE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IAArE,EAArB;WACK0S,KAAL,CAAWM,KAAX,GAAmB7S,IAAI2R,MAAvB;;;;;;;;;;;;;2BAWK3R,GAtST,EAsSc;;UAEN,CAAC,KAAKuS,KAAN,IAAe,CAAC,KAAKA,KAAL,CAAWC,MAA/B,EAAuC,OAAO,IAAP;UACnC,KAAKD,KAAL,IAAc,KAAKA,KAAL,CAAWnF,KAA7B,EAAoC;aAC7BsF,UAAL,CAAgB1S,GAAhB;OADF,MAEO;YACDgS,YAAYjS,aAAaC,GAAb,EAAkB,KAAKC,MAAvB,CAAhB;aACKyB,IAAL;YACIsB,MAAM,KAAKsB,SAAf;YACImD,SAAJ,GAAgB,GAAhB;YACIF,WAAJ,GAAkB,OAAlB;;YAEIY,UAAJ,CACEnK,KAAKC,KAAL,CAAW,KAAKsU,KAAL,CAAWK,MAAX,CAAkBxV,IAA7B,CADF,EAEEY,KAAKC,KAAL,CAAW,KAAKsU,KAAL,CAAWK,MAAX,CAAkBzV,GAA7B,CAFF,EAGEa,KAAKC,KAAL,CAAW+T,UAAU5X,CAAV,GAAc,KAAKmY,KAAL,CAAWK,MAAX,CAAkBxV,IAA3C,CAHF,EAIEY,KAAKC,KAAL,CAAW+T,UAAU3X,CAAV,GAAc,KAAKkY,KAAL,CAAWK,MAAX,CAAkBzV,GAA3C,CAJF;;aAOK,IAAP;;;;;;;;;;;;;8BAWQ6C,GApUZ,EAoUiB;;;;;cAGL4F,IAAR,CAAa,gDAAb,EAA+D5F,GAA/D,EAAoE,KAAKiE,KAAL,CAAWgD,IAAX,CAAgBC,IAApF;;UAEI,CAAC,KAAKqL,KAAN,IAAe,CAAC,KAAKA,KAAL,CAAWC,MAA/B,EAAuC,OAAO,IAAP;UACnC,KAAKD,KAAL,IAAc,KAAKA,KAAL,CAAWnF,KAA7B,EAAoC;aAC7BsF,UAAL,CAAgB1S,GAAhB;OADF,MAEO;YACDgS,YAAYjS,aAAaC,GAAb,EAAkB,KAAKC,MAAvB,CAAhB;;;YAGI6S,QAAQ,KAAK1F,KAAL,CAAW1K,YAAX,CAAwBtF,IAApC;YACI2V,SAAS,KAAK3F,KAAL,CAAW1K,YAAX,CAAwBpF,KAArC;YACI0V,UAAU,KAAKT,KAAL,CAAWK,MAAX,CAAkBxV,IAAlB,GAAyB4U,UAAU5X,CAAnC,GAAuC,KAAKmY,KAAL,CAAWK,MAAX,CAAkBxV,IAAzD,GAAgE4U,UAAU5X,CAAxF;YACI6Y,UAAUD,YAAY,KAAKT,KAAL,CAAWK,MAAX,CAAkBxV,IAA9B,GAAqC4U,UAAU5X,CAA/C,GAAmD,KAAKmY,KAAL,CAAWK,MAAX,CAAkBxV,IAAnF;;YAEM4V,WAAWF,KAAZ,IAAuBG,WAAWH,KAAnC,IAAgDE,WAAWD,MAAX,IAAqBE,WAAWF,MAApF,EAA8F;eACvF9O,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,GAA0B,KAAKb,KAAL,CAAWgD,IAAX,CAAgBC,IAA1C;;eAEKqL,KAAL,CAAWzS,KAAX,GAAmB,KAAK6S,kBAAL,CAAwB,KAAKJ,KAAL,CAAWK,MAAX,CAAkBzV,GAAlB,GAAwB,KAAKiQ,KAAL,CAAW1K,YAAX,CAAwBvF,GAAxE,CAAnB;eACKoV,KAAL,CAAW1S,IAAX,GAAkB,KAAK8S,kBAAL,CAAwBX,UAAU3X,CAAV,GAAc,KAAK+S,KAAL,CAAW1K,YAAX,CAAwBvF,GAA9D,CAAlB;cACI+V,OAAO,KAAKX,KAAL,CAAWzS,KAAX,GAAmB,KAAKyS,KAAL,CAAW1S,IAAzC;cACIgS,SAASqB,OAAO,KAAKX,KAAL,CAAWzS,KAAlB,GAA0B,KAAKyS,KAAL,CAAW1S,IAAlD;cACIiS,QAAQoB,OAAO,KAAKX,KAAL,CAAW1S,IAAlB,GAAyB,KAAK0S,KAAL,CAAWzS,KAAhD;;cAEI+R,SAAS,KAAK5N,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBpH,KAAlC,EAAyC;qBAC9B,KAAKmE,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBpH,KAA9B;;cAEEgS,QAAQ,KAAK7N,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBrH,IAAjC,EAAuC;oBAC7B,KAAKoE,KAAL,CAAWgD,IAAX,CAAgBC,IAAhB,CAAqBrH,IAA7B;;;eAGGkS,eAAL,CAAqB,EAACjS,OAAO+R,MAAR,EAAgBhS,MAAMiS,KAAtB,EAArB;SAhBF,MAiBO;;eAEAG,WAAL;cACIpO,OAAO,EAAX;cACIqP,QAAO,KAAKX,KAAL,CAAWK,MAAX,CAAkBxV,IAAlB,GAAyB4U,UAAU5X,CAA9C;cACI+Y,QAAQ,KAAKZ,KAAL,CAAWK,MAAX,CAAkBzV,GAAlB,GAAwB6U,UAAU3X,CAA9C;eACK0J,MAAL,CAAY+F,MAAZ,CAAmB;kBACXoJ,QAAO,KAAKX,KAAL,CAAWK,MAAX,CAAkBxV,IAAzB,GAAgC4U,UAAU5X,CAD/B;kBAEX8Y,QAAOlB,UAAU5X,CAAjB,GAAqB,KAAKmY,KAAL,CAAWK,MAAX,CAAkBxV,IAF5B;kBAGX+V,QAAQ,KAAKZ,KAAL,CAAWK,MAAX,CAAkBzV,GAA1B,GAAgC6U,UAAU3X,CAH/B;kBAIX8Y,QAAQnB,UAAU3X,CAAlB,GAAsB,KAAKkY,KAAL,CAAWK,MAAX,CAAkBzV;WAJhD,EAKGvC,OALH,CAKW,eAAO;;gBAEb,CAACsX,IAAIzW,IAAJ,CAASwI,KAAb,EAAoB;gBACfiO,IAAIzW,IAAJ,CAASwI,KAAT,CAAekD,WAAf,CAA2BrH,KAA3B,IAAoC,OAAKmE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAA7D,IACDoS,IAAIzW,IAAJ,CAASwI,KAAT,CAAekD,WAAf,CAA2BrH,KAA3B,IAAoC,OAAKmE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IAD/D,EACsE;mBAC/DpF,IAAL,CAAUyX,IAAIzW,IAAd;aAFF,MAGO,IAAKyW,IAAIzW,IAAJ,CAASwI,KAAT,CAAekD,WAAf,CAA2BtH,IAA3B,IAAmC,OAAKoE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBhF,KAA5D,IACRoS,IAAIzW,IAAJ,CAASwI,KAAT,CAAekD,WAAf,CAA2BtH,IAA3B,IAAmC,OAAKoE,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,CAAwBjF,IADvD,EAC8D;mBAC9DpF,IAAL,CAAUyX,IAAIzW,IAAd;;WAbJ;cAgBIoI,KAAKhF,MAAL,GAAc,CAAlB,EAAqB;iBACdiP,IAAL,CAAU,UAACC,CAAD,EAAI5K,CAAJ,EAAU;qBACX4K,EAAE9J,KAAF,CAAQkD,WAAR,CAAoBrH,KAApB,GAA4BqD,EAAEc,KAAF,CAAQkD,WAAR,CAAoBrH,KAAvD;aADF;iBAGKqE,IAAL,CAAUgO,OAAV,GAAoB,cAApB;iBACKhO,IAAL,CAAUhH,GAAV,GAAgB,KAAKiQ,KAAL,CAAW1K,YAAX,CAAwBvF,GAAxC;iBACKgH,IAAL,CAAU/G,IAAV,GAAiB,CAAjB;iBACK+G,IAAL,CAAU1I,IAAV,GAAiBoI,IAAjB;gBACIuO,QAAQvO,KAAKJ,GAAL,CAAS,eAAO;qBACnByO,IAAIjO,KAAJ,CAAU6C,IAAjB;aADU,CAAZ;;iBAIK3C,IAAL,CAAUkO,SAAV,YAA6BD,MAAME,IAAN,CAAW,IAAX,CAA7B;oBACEtM,MAAF;WAbF,MAcO,IAAI,KAAK7B,IAAL,CAAUgO,OAAV,KAAsB,MAA1B,EAAkC;iBAClChO,IAAL,CAAUgO,OAAV,GAAoB,MAApB;oBACEnM,MAAF;;;;WAIDtE,IAAL;WACK6Q,KAAL,GAAa;eACJ,CADI;aAEN,CAFM;gBAGH,KAHG;eAIJ,KAJI;eAKJ,CALI;gBAMH;eACD,CADC;gBAEA;;OARV;;;aAaO,IAAP,CA1Fa;;;;;;;;;;;;;;uCAuGI/S,KA3arB,EA2a4B;UACpBoK,QAAQ,KAAK3F,KAAL,CAAWgD,IAAX,CAAgBC,IAA5B;UACI2C,OAAO,KAAK5F,KAAL,CAAWgD,IAAX,CAAgBnC,OAA3B;UACIkF,MAAM,KAAK/F,KAAL,CAAWgD,IAAX,CAAgBG,gBAA1B;aACQ,CAACyC,KAAK/J,KAAL,IAAc8J,MAAM/J,IAAN,GAAamK,GAAb,GAAmBxK,KAAjC,IAA0CqK,KAAKhK,IAAL,IAAaL,QAAQoK,MAAM9J,KAAN,GAAckK,GAAnC,CAA3C,KAAuFA,OAAOJ,MAAM/J,IAAN,GAAa+J,MAAM9J,KAA1B,CAAvF,CAAD,GAA8H8J,MAAM9J,KAAN,GAAc,CAAC,CAApJ;;;;;;;;;;;;;4BAWMsR,YA1bV,EA0bwB;;;;;;;WAKfgC,EAAL,GAAU,KAAKA,EAAL,IAAWhC,YAArB;cACQ1V,GAAR,CAAY,kBAAZ;UACM6B,QAAQS,KAAKC,KAAL,CAAW,KAAKmV,EAAL,CAAQ7V,KAAR,GAAgB,KAAK0B,QAAL,CAAc8G,OAAd,CAAsBlH,MAAjD,CAAd;WACKoE,QAAL,GAAgB,EAAhB;WACKuB,SAAL,GAAiB,KAAKA,SAAL,IAAkB,IAAItH,MAAJ,CAAW;cACtC,KAAKkW,EAAL,CAAQhW,IAD8B;aAEvC,KAAKgW,EAAL,CAAQjW,GAF+B;eAGrCI,QAAQ,GAAR,GAAcA,KAAd,GAAsB,GAHe;gBAIpC,KAAK6V,EAAL,CAAQ5V;OAJiB,CAAnC;;WAOK6B,MAAL,GAAc,KAAKA,MAAL,IAAe,IAAInC,MAAJ,CAAW;cAChC,CADgC;aAEjC,KAAKkW,EAAL,CAAQjW,GAAR,GAAc,EAFmB;eAG/B,KAAKqH,SAAL,CAAejH,KAHgB;gBAI9BS,KAAKC,KAAL,CAAW,KAAKuG,SAAL,CAAehH,MAAf,GAAwB,GAAnC,CAJ8B;OAAX,CAA7B;;WAOK+R,OAAL,GAAe,IAAI8D,mBAAJ,CAAU,EAAC9Y,QAAQ,IAAT,EAAV,CAAf;WACKgV,OAAL,CAAalQ,MAAb,GAAsB,IAAInC,MAAJ,CAAW;aAC1B,KAAKmC,MAAL,CAAYlC,GADc;cAEzB,KAAK8G,KAAL,CAAW4C,MAAX,CAAkBuG,KAAlB,CAAwB/E,SAAxB,GAAoC,EAFX;eAGxB,EAHwB;gBAIvB,KAAKhJ,MAAL,CAAY7B;OAJA,CAAtB;WAMK+R,OAAL,CAAatL,KAAb,GAAqB,KAAKA,KAA1B;WACK8D,QAAL,GAAgB,IAAIa,QAAJ,CAAa,EAACrO,QAAQ,IAAT,EAAb,CAAhB;WACKgV,OAAL,CAAaxG,QAAb,CAAsB,KAAKhB,QAA3B;WACK9D,KAAL,CAAWgD,IAAX,CAAgBc,QAAhB,GAA2B,KAAKA,QAAL,CAAcA,QAAd,CAAuBrF,YAAlD;WACK0K,KAAL,GAAa,IAAI8C,KAAJ,CAAU,EAAC3V,QAAQ,IAAT,EAAeoM,QAAQ,KAAK1C,KAA5B,EAAmC4C,QAAQ,KAAK5C,KAAL,CAAW4C,MAAX,CAAkBuG,KAA7D,EAAV,CAAb;WACKmC,OAAL,CAAaxG,QAAb,CAAsB,KAAKqE,KAA3B;WACKrF,QAAL,CAAc9E,QAAd,CAAuBrI,OAAvB,CAA+B,iBAAS;YAClCsI,MAAMR,YAAN,CAAmBtF,IAAnB,GAA0B,OAAKmS,OAAL,CAAalQ,MAAb,CAAoBjC,IAAlD,EAAwD;iBACjDmS,OAAL,CAAalQ,MAAb,CAAoBjC,IAApB,GAA2B8F,MAAMR,YAAN,CAAmBtF,IAA9C;;YAEE8F,MAAMR,YAAN,CAAmBpF,KAAnB,GAA2B,OAAKiS,OAAL,CAAalQ,MAAb,CAAoB/B,KAAnD,EAA0D;iBACnDiS,OAAL,CAAalQ,MAAb,CAAoB/B,KAApB,GAA4B4F,MAAMR,YAAN,CAAmBpF,KAA/C;;OALJ;WAQK2F,QAAL,CAAcxI,IAAd,CAAmB,KAAK8U,OAAxB;;WAEKG,WAAL,GAAkB,EAAlB;WACKD,UAAL,GAAkB,EAAlB;UACG,KAAKxL,KAAL,CAAWuL,MAAd,EAAsB;aACfvL,KAAL,CAAWuL,MAAX,CAAkB5U,OAAlB,CAA0B,UAAC+U,KAAD,EAAOX,KAAP,EAAiB;gBACnCsE,WAAN,GAAoBtE,KAApB;cACIW,MAAM/D,QAAN,KAAmB,CAAC,CAAxB,EAA2B;mBACpB8D,WAAL,CAAiBjV,IAAjB,CAAsBkV,KAAtB;WADF,MAEO;mBACAF,UAAL,CAAgBhV,IAAhB,CAAqBkV,KAArB;;SALJ;;;UAUE4D,WAAW,IAAIjE,YAAJ,CAAiB,EAAC/U,QAAO,IAAR,EAAaqR,UAAS,CAAtB,EAAjB,CAAf;UACI4H,UAAU,IAAIlE,YAAJ,CAAiB,EAAC/U,QAAO,IAAR,EAAaqR,UAAS,CAAC,CAAvB,EAAjB,CAAd;;;;WAIK7C,QAAL,CAAcwK,QAAd;WACKxK,QAAL,CAAcyK,OAAd;;UAEIA,WAAWA,QAAQnU,MAAR,CAAe/B,KAAf,GAAuB,KAAKiS,OAAL,CAAalQ,MAAb,CAAoBjC,IAA1D,EAAgE;YACxDqW,MAAM,KAAKlE,OAAL,CAAalQ,MAAb,CAAoB9B,KAAhC;aACKgS,OAAL,CAAalQ,MAAb,CAAoBjC,IAApB,GAA2BoW,QAAQ9Q,YAAR,CAAqBpF,KAArB,GAA6B,GAAxD;aACKiS,OAAL,CAAalQ,MAAb,CAAoB9B,KAApB,GAA4BkW,GAA5B;YACMC,MAAMH,SAASlU,MAAT,CAAgB9B,KAA5B;iBACS8B,MAAT,CAAgBjC,IAAhB,IAAwBoW,QAAQ9Q,YAAR,CAAqBpF,KAA7C;iBACS+B,MAAT,CAAgB/B,KAAhB,GAAwBiW,SAASlU,MAAT,CAAgBjC,IAAhB,GAAuBsW,GAA/C;;;UAGE,KAAKlP,SAAL,CAAejH,KAAf,GAAuBgW,SAAS7Q,YAAT,CAAsBpF,KAAtB,GAA8B,EAAzD,EAA6D;aACtDkH,SAAL,CAAejH,KAAf,GAAuBgW,SAAS7Q,YAAT,CAAsBpF,KAAtB,GAA8B,EAArD;;;;WAIG2U,WAAL;;;WAGKjN,KAAL,GAAa,IAAb;;;;;;;;;;;kCASY;UACRnB,OAAO,EAAX;UACI8P,eAAe,KAAK1Q,QAAL,CAAcQ,GAAd,CAAkB,iBAAS;eACrCP,MAAMa,MAAb;OADiB,CAAnB;mBAGanJ,OAAb,CAAqB,iBAAS;eACrBiJ,KAAKF,MAAL,CAAYT,KAAZ,CAAP;OADF;WAGKZ,MAAL,CAAY+M,KAAZ,GARY;WASP/M,MAAL,CAAYqH,IAAZ,CAAiB9F,IAAjB;;;;;;;;;;;;oCAUcsD,WA1iBlB,EA0iB+B;WACtBlD,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,GAA0B;eACjBqC,YAAYrH,KADK;cAElBqH,YAAYtH;OAFpB;WAIKkI,QAAL,CAAc6L,YAAd;WACKlS,IAAL;;UAEImS,QAAQ3Z,SAAS4Z,sBAAT,CAAgC,yBAAhC,CAAZ;SACGlZ,OAAH,CAAWmZ,IAAX,CAAgBF,KAAhB,EAAuB,cAAM;WACxB/R,gBAAH,CAAoBJ,IAApB;OADF;;UAII,KAAKyC,IAAL,CAAUgO,OAAV,KAAsB,MAA1B,EAAkC;aAC3BhO,IAAL,CAAUhH,GAAV,GAAgB,KAAKgH,IAAL,CAAU1I,IAAV,CAAe,CAAf,EAAkBiH,YAAlB,CAA+BvF,GAA/C;;cAEA6I,MAAF;;;;2BApdY;UACRzC,MAAM,EAAV;UACIiD,OAAO,KAAKvD,QAAL,CAAcQ,GAAd,CAAkB,iBAAS;eAC7BP,MAAM4B,OAAb;OADS,CAAX;WAGKlK,OAAL,CAAa,gBAAQ;cACb2I,IAAII,MAAJ,CAAWC,IAAX,CAAN;OADF;aAGOL,GAAP;;;;;;;;;;2BAQW;aACJ,KAAKjB,MAAZ;;;;EAvHwB0B,oBAA5B;;ACpBA;;;;;;;AAOA,AACA,AACA,AAEA,IAAagQ,kBAAb;;;;;;;;;;;;;;;oCAc6D;QAA9CzZ,MAA8C,QAA9CA,MAA8C;QAAtC0Z,WAAsC,QAAtCA,WAAsC;QAAzBnL,cAAyB,QAAzBA,cAAyB;QAATnC,MAAS,QAATA,MAAS;;;uIACnD,EAACpM,cAAD,EADmD;;UAEpD0J,KAAL,GAAagQ,WAAb;UACKnL,cAAL,GAAsBA,cAAtB;UACKrB,SAAL,GAAiB,GAAjB;UACKd,MAAL,GAAcA,MAAd;UACKhH,MAAL,GAAc,CAACgH,OAAO,CAAP,EAAU1C,KAAV,CAAgB4C,MAAhB,CAAuBlH,MAAxB,EAAgCgH,OAAO,CAAP,EAAU1C,KAAV,CAAgB4C,MAAhB,CAAuBlH,MAAvD,CAAd;;UAEKyH,gBAAL,GAAwB,CACtBT,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBG,gBADC,EAEtBT,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBG,gBAFC,CAAxB;;QAKI8M,QAAQ3U,eACV,MAAK0E,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BrH,KADhB,EAEV6G,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBC,IAFX,EAGVP,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBnC,OAHX,EAIV,MAAKnF,MAAL,CAAY,CAAZ,CAJU,IAIQ,MAAKyH,gBAAL,CAAsB,CAAtB,CAJpB;;QAMI+M,SAAS5U,eACX,MAAK0E,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BrH,KADf,EAEX6G,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBC,IAFV,EAGXP,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBnC,OAHV,EAIX,MAAKnF,MAAL,CAAY,CAAZ,CAJW,IAIO,MAAKyH,gBAAL,CAAsB,CAAtB,CAJpB;;UAMK/H,MAAL,GAAc,IAAInC,MAAJ,CAAW;qBACR,KADQ;WAElBgX,KAFkB;YAGjB3Z,OAAO8E,MAAP,CAAcjC,IAHG;cAIf8W,QAAQC,MAJO;aAKhB5Z,OAAO8E,MAAP,CAAc9B;KALT,CAAd;;;;;;;;;;;yBAcGyF,GArDP,EAqDY;UACJ2D,SAAS,KAAKA,MAAlB;UACIyN,aAAa7U,eACf,KAAK0E,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BrH,KADX,EAEf6G,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBC,IAFN,EAGfP,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBnC,OAHN,EAIf,KAAKnF,MAAL,CAAY,CAAZ,CAJe,IAIG,KAAKyH,gBAAL,CAAsB,CAAtB,CAJpB;;UAMIiN,cAAc9U,eAChB,KAAK0E,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BrH,KADV,EAEhB6G,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBC,IAFL,EAGhBP,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBnC,OAHL,EAIhB,KAAKnF,MAAL,CAAY,CAAZ,CAJgB,IAIE,KAAKyH,gBAAL,CAAsB,CAAtB,CAJpB;;UAMI,KAAKnD,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BrH,KAA1B,KAAoC,KAAKmE,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BtH,IAA9D,IACC,KAAKoE,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BrH,KAA1B,KAAoC,KAAKmE,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BtH,IADnE,EACyE;;aAElER,MAAL,CAAYlC,GAAZ,GAAkBiX,UAAlB;aACK/U,MAAL,CAAYhC,MAAZ,GAAqBgX,WAArB;YACI5R,KAAK,KAAKC,YAAL,IAAqB,EAA9B;YACI4E,SAAJ;YACIG,SAAJ,GAAgB,KAAKA,SAArB;YACIF,WAAJ,GAAkB,SAAlB;YACIyD,WAAJ,GAAkB,GAAlB;;YAEItD,MAAJ,CAAW1J,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CAAX,EAAgCY,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAAhC;;YAEIwK,MAAJ,CAAW3J,KAAKC,KAAL,CAAWwE,GAAGnF,KAAd,CAAX,EAAiCU,KAAKC,KAAL,CAAWwE,GAAGpF,MAAd,CAAjC;YACIuK,MAAJ;OAdF,MAgBK;;YAEC0M,YAAY/U,eACd,KAAK0E,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BtH,IADZ,EAEd8G,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBC,IAFP,EAGdP,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBnC,OAHP,EAId,KAAKnF,MAAL,CAAY,CAAZ,CAJc,IAII,KAAKyH,gBAAL,CAAsB,CAAtB,CAJpB;YAKImN,aAAahV,eACf,KAAK0E,KAAL,CAAW,CAAX,EAAckD,WAAd,CAA0BtH,IADX,EAEf8G,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBC,IAFN,EAGfP,OAAO,CAAP,EAAU1C,KAAV,CAAgBgD,IAAhB,CAAqBnC,OAHN,EAIf,KAAKnF,MAAL,CAAY,CAAZ,CAJe,IAIG,KAAKyH,gBAAL,CAAsB,CAAtB,CAJpB;;aAMK/H,MAAL,CAAYlC,GAAZ,GAAkBiX,UAAlB;aACK/U,MAAL,CAAYhC,MAAZ,GAAqBiX,SAArB;YACIE,SAAS,KAAK9R,YAAL,IAAqB,EAAlC;;;aAGKrD,MAAL,CAAYlC,GAAZ,GAAkBkX,WAAlB;aACKhV,MAAL,CAAYhC,MAAZ,GAAqBkX,UAArB;YACIE,UAAU,KAAK/R,YAAL,IAAqB,EAAnC;;;;YAII4E,SAAJ;YACIG,SAAJ,GAAgB,KAAKA,SAArB;YACIuD,WAAJ,GAAkB,GAAlB;YACIhD,SAAJ,GAAgB,SAAhB,CA3BG;;YA6BCN,MAAJ,CAAW1J,KAAKC,KAAL,CAAWuW,OAAOpX,IAAlB,CAAX,EAAoCY,KAAKC,KAAL,CAAWuW,OAAOrX,GAAlB,CAApC;;YAEIwK,MAAJ,CAAW3J,KAAKC,KAAL,CAAWuW,OAAOpX,IAAlB,CAAX,EAAoCY,KAAKC,KAAL,CAAWuW,OAAOnX,MAAlB,CAApC;;YAEIsK,MAAJ,CAAW3J,KAAKC,KAAL,CAAWwW,QAAQnX,KAAnB,CAAX,EAAsCU,KAAKC,KAAL,CAAWwW,QAAQpX,MAAnB,CAAtC;;YAEIsK,MAAJ,CAAW3J,KAAKC,KAAL,CAAWwW,QAAQnX,KAAnB,CAAX,EAAsCU,KAAKC,KAAL,CAAWwW,QAAQtX,GAAnB,CAAtC;YACI0N,IAAJ;;;;;EAvHkC7I,kBAAxC;;ACXA;;;;IAIM0S;;;;;;;;;;;;yBAkBW;QALDC,MAKC,QALDA,MAKC;gCAJDxN,WAIC;QAJDA,WAIC,oCAJa,EAACrH,OAAO,CAAR,EAAWD,MAAM,CAAjB,EAIb;QAHDiH,IAGC,QAHDA,IAGC;yBAFD5E,IAEC;QAFDA,IAEC,6BAFM,EAEN;4BADD0S,OACC;QADDA,OACC,gCADS,EACT;;;SACRD,MAAL,GAAcA,MAAd;SACKxN,WAAL,GAAmB0N,OAAOC,MAAP,CAAc3N,WAAd,CAAnB,CAFa;SAGRL,IAAL,GAAYA,IAAZ;SACK5E,IAAL,GAAYA,IAAZ;SACK0S,OAAL,GAAeA,OAAf;;;;;;;;;;;;;;;;;;iCA6BWG,SAAS;aACbA,QAAQC,kBAAR,KAA+B/X,SAA/B,GACL,KAAKiF,IAAL,CAAU+S,IAAV,CAAe,aAAK;eACXF,QAAQC,kBAAR,CAA2B/F,IAA3B,CAAgCnT,CAAhC,CAAP;OADF,CADK,GAIH,KAAKoG,IAAL,CAAUgT,QAAV,CAAmBH,QAAQI,WAA3B,CAJJ;;;;2BAtBW;aACJ,KAAKhO,WAAL,CAAiBtH,IAAjB,GAAwB,KAAKsH,WAAL,CAAiBrH,KAAhD;;;;;;;;;;2BAQoB;;;aACb,KAAK6U,MAAL,CAAYS,QAAZ,CAAqBH,IAArB,CAA0B,aAAK;eAC7B,MAAKI,YAAL,CAAkBC,CAAlB,CAAP;OADK,CAAP;;;;;;;;;;;;;;;;;;;;;AAiCJ,SAASC,gBAAT,CAA0BC,SAA1B,EAAqCC,SAArC,EAAgD;MACxCC,YAAY,SAAZA,SAAY,CAACvM,QAAD,EAAc;QAC1BwM,OAAO,EAAX;aACS/a,OAAT,CAAiB,aAAK;WACfgb,EAAE9O,IAAP,IAAe8O,CAAf;QACEhB,OAAF,CAAUha,OAAV,CAAkB,aAAK;YACjBmT,CAAJ,EAAO4H,KAAK5H,CAAL,IAAU6H,CAAV;OADT;KAFF;WAMOD,IAAP;GARF;MAUIE,QAAQH,UAAUF,SAAV,CAAZ;MACIM,QAAQJ,UAAUD,SAAV,CAAZ;MACIM,kBAAkBlB,OAAOlZ,IAAP,CAAYka,KAAZ,EAAmBzM,MAAnB,CAA0B;WAAO0M,MAAMhK,GAAN,CAAP;GAA1B,CAAtB;SACOiK,gBAAgBtS,GAAhB,CAAoB,eAAO;WACzB,CAACoS,MAAM/J,GAAN,CAAD,EAAagK,MAAMhK,GAAN,CAAb,CAAP;GADK,CAAP;CAKF;;ACjGA;;;;;;;AAOA,AACA,AACA,AACA,AACA,AACA,AAEA,IAAakK,iBAAb;;;mCAC0D;QAA3CC,gBAA2C,QAA3CA,gBAA2C;QAAzBhX,QAAyB,QAAzBA,QAAyB;QAAfmS,YAAe,QAAfA,YAAe;;;qIAChD,EADgD;;YAE9C1V,GAAR,CAAY,kCAAZ;UACKua,gBAAL,GAAwBA,gBAAxB;UACKhX,QAAL,GAAgBA,QAAhB;UACKiF,aAAL,GAAqB,CAArB;UACKgS,mBAAL,GAA2B,EAA3B;UACKxE,OAAL,CAAaN,YAAb;;;;;;;;;;;2BAMK;UACDpO,MAAM,KAAKsB,SAAf;UACI,CAACtB,GAAL,EAAU;UACN,CAAC,KAAKwB,SAAV,EAAqB;UACjBI,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,KAAK3E,MAAL,CAAY1C,KAAhC,EAAuC,KAAK0C,MAAL,CAAYzC,MAAnD;UACIiF,KAAK,KAAKC,YAAL,IAAqB,EAA9B;UACImC,IAAJ;UACImG,WAAJ,GAAkB,CAAlB;;;UAGI9C,QAAJ,CACElK,KAAKC,KAAL,CAAWwE,GAAGrF,IAAd,CADF,EAEEY,KAAKC,KAAL,CAAWwE,GAAGtF,GAAd,CAFF,EAGEa,KAAKC,KAAL,CAAWwE,GAAGlF,KAAd,CAHF,EAIES,KAAKC,KAAL,CAAWwE,GAAGjF,MAAd,CAJF;UAMIuH,OAAJ;WACKD,OAAL,CAAarB,GAAb,CAAiB;eAASP,MAAMzH,IAAN,CAAWiG,IAAX,CAAgBsB,GAAhB,CAAT;OAAjB;;WAEKvB,qBAAL,GAA6B,KAAKpC,MAAlC;;;;;;;;;;;;;;;;2BAqBK;UACD,KAAKmF,SAAL,IAAkB,CAAC,KAAKA,SAAL,CAAeC,WAAtC,EAAmD;aAC5CrD,sBAAL,GAA8B,KAAKoD,SAAnC;;UAEErB,IAAI,KAAKqB,SAAL,IAAkB,EAA1B;aACO1H,QAAE,QAAF,EAAY;eACV,qCADU;0BAEDqG,EAAE/F,IAAlB,iBAAkC+F,EAAEhG,GAApC,0BACSgG,EAAE5F,KADX,oBAC+B4F,EAAE3F,MADjC,QAFiB;eAIV2F,EAAE5F,KAJQ;gBAKT4F,EAAE3F;OALL,CAAP;;;;;;;;;;;4BAeM4T,YA1EV,EA0EwB;;;WACf5M,SAAL,GAAiB4M,YAAjB;;;;UAII+E,MAAM,KAAKF,gBAAL,CAAsB,CAAtB,EAAyBlO,QAAzB,CAAkCiB,WAAlC,CAA8CtG,YAAxD;WACKrD,MAAL,GAAc,IAAInC,MAAJ,CAAW;uBACR,KADQ;cAEjB,CAFiB;aAGlB,CAHkB;eAIhB,KAAKsH,SAAL,CAAejH,KAJC;gBAKf,KAAKiH,SAAL,CAAehH;OALX,CAAd;;UAQI4Y,WAAW,EAAf;UACIC,YAAY,IAAI/P,mBAAJ,CAAwB,EAAC/L,QAAQ,IAAT,EAAxB,CAAhB;gBACU8E,MAAV,GAAmB,IAAInC,MAAJ,CAAW;uBACb,KADa;aAEvBiZ,IAAIhZ,GAFmB;cAGtB,CAHsB;eAIrB,KAAKqH,SAAL,CAAejH,KAJM;gBAKpB4Y,IAAI3Y;OALK,CAAnB;WAOKuL,QAAL,CAAcsN,SAAd;;UAEIC,oBAAoB,CACtB,KAAKL,gBAAL,CAAsB,CAAtB,EAAyBnN,cADH,EAEtB,KAAKmN,gBAAL,CAAsB,CAAtB,EAAyBnN,cAFH,CAAxB;WAIKyN,cAAL,CAAoB3b,OAApB,CAA4B,mBAAW;YACjC4b,WAAW,IAAIxC,kBAAJ,CAAuB;kBAC5BqC,SAD4B;uBAEvBI,OAFuB;0BAGpBH,iBAHoB;kBAI5B,OAAKL;SAJA,CAAf;kBAMUlN,QAAV,CAAmByN,QAAnB;iBACS/b,IAAT,CAAc;gBACN,OAAK4E,MAAL,CAAYjC,IADN;gBAEN,OAAKiC,MAAL,CAAY/B,KAFN;gBAGNmZ,QAAQ,CAAR,EAAWtP,WAAX,CAAuBrH,KAHjB;gBAIN2W,QAAQ,CAAR,EAAWtP,WAAX,CAAuBrH,KAJjB;gBAKN0W;SALR;OARF;WAgBKlU,MAAL,CAAYqH,IAAZ,CAAiByM,QAAjB;;;;;;;;;2BAhFmB;;UAEfM,eAAe,KAAKT,gBAAL,CAAsB,CAAtB,EAAyBhS,KAAzB,CAA+BkF,QAAlD;UACIwN,gBAAgB,KAAKV,gBAAL,CAAsB,CAAtB,EAAyBhS,KAAzB,CAA+BkF,QAAnD;;;aAGOoM,iBAAiBmB,YAAjB,EAA+BC,aAA/B,CAAP;;;;;2BAiFY;aACL,KAAKrU,MAAL,CAAYoB,GAAZ,EAAP;;;;EA/HmCM,oBAAvC;;ACdA;;;;;AAKA,AAEA,IAAa4S,IAAb;;;;;;;;;;;;;;;;2BASS5X,KATT,EASgB;WACPC,QAAL,GAAgBD,MAAME,KAAN,CAAYD,QAA5B;;;;;;;;;;6BAQOD,KAlBX,EAkBkB;;;WAGTG,EAAL,GAAUH,MAAMI,GAAhB;YACMA,GAAN,CAAU0C,gBAAV,GAA6B,IAA7B;WACKzC,MAAL,GAAc,IAAInC,MAAJ,CAAW8B,MAAMI,GAAN,CAAUE,qBAAV,EAAX,CAAd;;;;;;;;;;6BAQON,KA/BX,EA+BkB;WACTK,MAAL,GAAc,IAAInC,MAAJ,CAAW8B,MAAMI,GAAN,CAAUE,qBAAV,EAAX,CAAd;;;;;;ACvCJ;;;;AAIA,AAEA,AACA,AACA,AAEA,IAAauX,OAAb;;;;;;;;;;;;;;;;;2BAOS7X,KAPT,EAOgB;8GACCA,KAAb;;;;;;;;;;;yBASGA,KAjBP,EAiBc;UACNmE,IAAInE,MAAME,KAAN,CAAYsF,SAAZ,IAAyB,EAAjC;UACIL,OAAOnF,MAAME,KAAN,CAAYiF,IAAZ,IAAoB,EAAC1I,MAAM,EAAP,EAA/B;aACOqB,QAAE,KAAF,EAAS;eACP,aADO;2BAEEqH,KAAK/G,IAAL,GAAY+F,EAAE/F,IAA9B,mBAA8C+G,KAAKhH,GAAL,GAAWgG,EAAEhG,GAA3D,sCACoBgH,KAAKgO,OADzB;OAFK,EAIJ,KAAK2E,cAAL,CAAoB3S,KAAK1I,IAAzB,CAJI,CAAP;;;;;;;;;;;;mCAcaA,IAlCjB,EAkCuB;;;UACf,CAACA,IAAL,EAAW;;UAEPsb,UAAUtb,KAAKgI,GAAL,CAAS,gBAAQ;YACzB3D,QAAQhD,QAAE,KAAF,EAAS,aAAa8G,KAAKK,KAAL,CAAWkD,WAAX,CAAuBrH,KAA7C,CAAZ;YACID,OAAO/C,QAAE,KAAF,EAAS,YAAY8G,KAAKK,KAAL,CAAWkD,WAAX,CAAuBtH,IAA5C,CAAX;YACIqC,OAAO0B,KAAKK,KAAL,CAAW/B,IAAX,CAAgBrD,MAAhB,GAAyB,CAAzB,IAA8B,OAAO+E,KAAKK,KAAL,CAAW/B,IAAX,CAAgB,CAAhB,CAAP,KAA8B,WAA5D,GAA0EpF,QAAE,KAAF,EAAS,SAAT,EAAoB8G,KAAKK,KAAL,CAAW/B,IAAX,CAAgBoQ,IAAhB,CAAqB,IAArB,CAApB,CAA1E,GAA4H,EAAvI;YACIsC,UAAUhR,KAAKK,KAAL,CAAW2Q,OAAX,CAAmB/V,MAAnB,GAA4B,CAA5B,IAAiC,OAAO+E,KAAKK,KAAL,CAAW2Q,OAAX,CAAmB,CAAnB,CAAP,KAAiC,WAAlE,GAAgF9X,QAAE,KAAF,EAAS,YAAT,EAAuB8G,KAAKK,KAAL,CAAW2Q,OAAX,CAAmBtC,IAAnB,CAAwB,IAAxB,CAAvB,CAAhF,GAAwI,EAAtJ;YACI0E,QAAQpT,KAAKK,KAAL,CAAW0Q,MAAX,CAAkBS,QAAlB,CAA2BvW,MAA3B,GAAoC,CAApC,GACV/B,QAAE,KAAF,EAAS,EAACyP,mBAAiB3I,KAAKK,KAAL,CAAW6C,IAA7B,EAAT,EACElD,KAAKK,KAAL,CAAW0Q,MAAX,CAAkBS,QAAlB,CAA2BhM,MAA3B,CAAkC;iBAAM,CAACkM,EAAE2B,gBAAJ,IAAyBrT,KAAKK,KAAL,CAAWoR,YAAX,CAAwBC,CAAxB,CAA9B;SAAlC,EAA4F7R,GAA5F,CACE,aAAK;iBACI3G,QAAE,KAAF,EAAS,EAAT,EAAaA,QAAE,GAAF,EAAO;sBACf,QADe;oBAEjBwY,EAAE4B,GAAF,CAAMC,OAAN,CAAc,aAAd,EAA6BvT,KAAKK,KAAL,CAAW6C,IAAxC;WAFU,EAGjBwO,EAAEtE,IAHe,CAAb,CAAP;SAFJ,EAOErN,MAPF,CAQEC,KAAKK,KAAL,CAAW0Q,MAAX,CAAkBS,QAAlB,CAA2BH,IAA3B,CAAgC,aAAK;iBAC5BK,EAAE2B,gBAAF,IAAsBrT,KAAKK,KAAL,CAAWmT,eAAxC;SADF,IAGGxT,KAAKK,KAAL,CAAW+S,KAAX,KAAqB/Z,SAArB,GAAiCH,QAAE,iCAAF,CAAjC,GAAwE8G,KAAKK,KAAL,CAAW+S,KAAX,CAAiBvT,GAAjB,CAAqB,aAAK;iBAC1F3G,QAAE,KAAF,EAAS,EAAT,EAAaA,QAAE,GAAF,EAAO,EAACua,QAAQ,QAAT,EAAmBC,MAAMhC,EAAEgC,IAA3B,EAAP,EAAyChC,EAAEtE,IAA3C,CAAb,CAAP;SADuE,CAH3E,GAMI,EAdN,CADF,CADU,GAkBN,EAlBN;;eAoBO,CAAClU,QAAE,OAAKya,WAAL,CAAiB3T,KAAKK,KAAtB,CAAF,EAAgC,EAACuT,UAAU5T,KAAKK,KAAL,CAAW6C,IAAtB,EAAhC,CAAD,EACLhK,QAAE,KAAF,EAAS;iBACA,kBADA;+BAEY8G,KAAKK,KAAL,CAAW6C,IAFvB;iBAGA;SAHT,EAIG,CAAChH,KAAD,EAAQD,IAAR,EAAcqC,IAAd,EAAoB0S,OAApB,EAA6BoC,KAA7B,CAJH,CADK,CAAP;OAzBY,CAAd;;aAkCOla,QAAE,KAAF,EAAS,EAAT,EAAaia,OAAb,CAAP;;;;;;;;;;;;gCAUUN,OAjFd,EAiFuB;UACfgB,QAAQ;eACH,iBAAY;cACbP,YAAJ;iBACOT,QAAQ9B,MAAR,CAAeS,QAAf,CAAwBhM,MAAxB,CAA+B;mBAAKkM,EAAE2B,gBAAF,IAAsBR,QAAQvU,IAAR,CAAagT,QAAb,CAAsBI,EAAEH,WAAxB,CAA3B;WAA/B,EAAgG1R,GAAhG,CAAoG,aAAK;kBACxG6R,EAAE4B,GAAR;kBACMA,IAAIC,OAAJ,CAAY,cAAZ,EAA4BV,QAAQ3P,IAApC,CAAN;mBACOhK,QAAE4a,OAAF,CAAU;sBACP,KADO;mBAEVR;aAFA,EAIJS,IAJI,CAIC,UAAUC,MAAV,EAAkB;sBACdZ,KAAR,GAAgBY,MAAhB;aALG,CAAP;WAHK,CAAP;;OAHJ;;aAiBO;cACC,cAAU5Y,KAAV,EAAiB;cACjB6Y,8BAA4B7Y,MAAME,KAAN,CAAYsY,QAA5C;iBACO1a,QAAE,KAAF,EAAS;mBACP,kBADO;qBAEL,mBAAY;kBACfua,SAASnd,SAAS4d,cAAT,CAAwBD,UAAxB,CAAb;qBACOnd,KAAP,CAAayX,OAAb,GAAuBkF,OAAO3c,KAAP,CAAayX,OAAb,KAAyB,MAAzB,GAAkC,OAAlC,GAA4C,MAAnE;kBACIsE,QAAQO,KAAR,KAAkB/Z,SAAtB,EAAiC;oBAC3BwZ,QAAQ9B,MAAR,CAAeS,QAAf,CAAwBH,IAAxB,CAA6B,aAAK;yBAC3BK,EAAE2B,gBAAF,IAAsBR,QAAQW,eAArC;iBADA,CAAJ,EAEM;sBACA5Y,IAAIiZ,MAAMM,KAAN,EAAR;sBACIvZ,MAAMvB,SAAV,EAAqB;sBACjB,CAAF,EAAK0a,IAAL,CAAU3Y,MAAMgH,MAAhB;;iBALJ,MAQK;0BACKgR,KAAR,GAAgB,EAAhB;wBACMhR,MAAN;;;;WAhBD,EAoBJhH,MAAME,KAAN,CAAYsY,QApBR,CAAP;;OAHJ;;;;;;;;;;oCAiCc;;cAEN9b,GAAR,CAAY,kBAAZ;aACO,IAAP;;;;EAvIyBc,IAAIoa,IAAJ,EAAUvQ,IAAV,CAAe1E,sBAAf,CAA7B;;ACVA;;;;;AAKA,AACA,AAEA,AAEA;;;;AAIA,AAAO,IAAIqW,cAAc;;;;;;UAMf,gBAAUhZ,KAAV,EAAiB;UACjBiZ,KAAN,GAAcjZ,MAAME,KAApB;UACM+Y,KAAN,CAAYC,MAAZ,GAAqB;iBACRlZ,MAAME,KAAN,CAAYiZ,QAAZ,CAAqBlQ,SAArB,CAA+BjJ,MAAME,KAAN,CAAY8P,KAA3C,KAAqD,KAD7C;oBAEL,IAFK;qBAGJ;KAHjB;GARqB;;;;;;;YAoBb,kBAAUhQ,KAAV,EAAiB;UACnBE,KAAN,CAAYiZ,QAAZ,CAAqBlQ,SAArB,CAA+BjJ,MAAME,KAAN,CAAY8P,KAA3C,IAAoDhQ,MAAMiZ,KAAN,CAAYC,MAAZ,CAAmBE,SAAvE;GArBqB;;;;;;;;QA8BjB,cAAUpZ,KAAV,EAAiB;;WAEd,CAAClC,QAAE,kBAAF,EAAsB,EAACpC,oBAAkBsE,MAAMiZ,KAAN,CAAYI,MAAZ,CAAmBrZ,MAAMiZ,KAAN,CAAYjJ,KAA/B,CAAnB,EAAtB,EAAmF,CACzFlS,QAAEwb,YAAF,EAAgB,EAACnU,MAAMnF,MAAMiZ,KAAb,EAAhB,CADyF,EAEzFnb,QAAEyb,kBAAF,EAAsB,EAACpU,MAAMnF,MAAMiZ,KAAb,EAAtB,CAFyF,EAGzFnb,QAAE0b,YAAF,EAAgB,EAACrU,MAAMnF,MAAMiZ,KAAb,EAAhB,CAHyF,EAIzFnb,QAAE,0BAAF,EAA8B,EAACpC,OAAO,yEAAR,EAA9B,EACE,CAACoC,QAAE2b,QAAF,EAAY,EAACtU,MAAMnF,MAAMiZ,KAAb,EAAZ,CAAD;YACIS,gBAAF,EAAoB,EAACvU,MAAMnF,MAAMiZ,KAAb,EAAoBE,UAAUnZ,MAAMiZ,KAAN,CAAYE,QAA1C,EAApB,CADF,EAEErb,QAAE6b,gBAAF,EAAoB,EAACxU,MAAMnF,MAAMiZ,KAAb,EAApB,CAFF,CADF,CAJyF,CAAnF,CAAD,CAAP;;CAhCG;;;;;;AAmDP,AAAO,IAAIK,eAAe;;;;;;;YAOd,kBAAUtZ,KAAV,EAAiB;UACnBI,GAAN,CAAU0C,gBAAV,GAA6B,IAA7B;SACK9C,KAAL,GAAaA,KAAb;UACMiZ,KAAN,GAAcjZ,MAAME,KAApB;UACM+Y,KAAN,CAAYhY,MAAZ,GAAqB,KAAKd,EAAL,GAAUH,MAAMI,GAArC;UACM6Y,KAAN,CAAY3T,SAAZ,GAAwBtF,MAAMI,GAAN,CAAUmF,UAAV,CAAqB,IAArB,CAAxB;QACI,CAACvF,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiByU,YAAlB,IAAkC,CAAC5Z,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB0U,aAAxD,EAAuE;YAC/DZ,KAAN,CAAY3T,SAAZ,CAAsB0D,SAAtB,GAAkChJ,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBE,SAA1D;;;YAGMH,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBE,SAAxB,GAAoCpZ,MAAMiZ,KAAN,CAAY3T,SAAZ,CAAsB0D,SAA1D;YACMiQ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBU,YAAxB,GAAuC5Z,MAAMiZ,KAAN,CAAY3T,SAAZ,CAAsB0D,SAA7D;YACMiQ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAAxB,GAAwCC,SAASC,SAAS/Z,MAAMiZ,KAAN,CAAY3T,SAAZ,CAAsB0D,SAA/B,CAAT,CAAxC;;UAEIiQ,KAAN,CAAYe,MAAZ,GAAqB,KAAKC,WAAL,CAAiBja,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAAzC,CAArB;SACKzU,aAAL,GAAqB;WACd,IAAIC,MAAJ,CAAW,MAAX,CADc;WAEd,IAAIA,MAAJ,CAAW,MAAX;KAFP;SAIK3C,IAAL;GA1BsB;;;;;;;YAkCd,kBAAU1C,KAAV,EAAiB;UACnBiZ,KAAN,CAAYe,MAAZ,GAAqBha,MAAMI,GAAN,CAAU0C,gBAAV,CAA2BmX,WAA3B,CAAuCja,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAA/D,CAArB;UACMzZ,GAAN,CAAU0C,gBAAV,CAA2BJ,IAA3B;GApCsB;;;;;;;QA4ClB,gBAAY;;WAET5E,QAAE,QAAF,EAAY;aACV,mBADU;aAEV,0BAFU;aAGV,GAHU;cAIT;KAJH,CAAP;GA9CsB;;;;;;QA0DlB,gBAAY;QACZmD,SAAS,KAAKjB,KAAL,CAAWiZ,KAAX,CAAiBhY,MAA9B;QACI+C,MAAM,KAAKhE,KAAL,CAAWiZ,KAAX,CAAiB3T,SAA3B;QACI0U,SAAS,KAAKha,KAAL,CAAWiZ,KAAX,CAAiBe,MAA9B;QACIpU,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB3E,OAAO1C,KAA3B,EAAkC0C,OAAOzC,MAAzC;;;QAGI0b,QAAQlW,IAAImW,oBAAJ,CAAyB,CAAzB,EAA4B,CAA5B,EAA+BlZ,OAAO1C,KAAtC,EAA6C,CAA7C,CAAZ;UACM6b,YAAN,CAAmB,IAAI,CAAvB,EAA0B,MAA1B;UACMA,YAAN,CAAmB,IAAI,CAAvB,EAA0B,MAA1B;UACMA,YAAN,CAAmB,IAAI,CAAvB,EAA0B,MAA1B;UACMA,YAAN,CAAmB,IAAI,CAAvB,EAA0B,MAA1B;UACMA,YAAN,CAAmB,IAAI,CAAvB,EAA0B,MAA1B;UACMA,YAAN,CAAmB,IAAI,CAAvB,EAA0B,MAA1B;UACMA,YAAN,CAAmB,IAAI,CAAvB,EAA0B,MAA1B;QACIpR,SAAJ,GAAgBkR,KAAhB;QACIhR,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBjI,OAAO1C,KAA1B,EAAiC0C,OAAOzC,MAAxC;;;QAGI6b,QAAQrW,IAAImW,oBAAJ,CAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkClZ,OAAOzC,MAAzC,CAAZ;UACM4b,YAAN,CAAmB,CAAnB,EAAsB,eAAtB;UACMA,YAAN,CAAmB,CAAnB,EAAsB,eAAtB;QACIpR,SAAJ,GAAgBqR,KAAhB;;;QAGInR,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBjI,OAAO1C,KAA1B,EAAiC0C,OAAOzC,MAAxC;QACI+J,WAAJ,GAAkB,OAAlB;QACIE,SAAJ,GAAgB,CAAhB;QACIU,UAAJ,CAAe,CAAf,EAAkB,CAAlB,EAAqBlI,OAAO1C,KAA5B,EAAmC0C,OAAOzC,MAA1C;QACIiK,SAAJ,GAAgB,CAAhB;QACIH,SAAJ;QACII,MAAJ,CAAWsR,OAAO5e,CAAP,GAAW,EAAtB,EAA0B4e,OAAO3e,CAAjC;QACIsN,MAAJ,CAAWqR,OAAO5e,CAAP,GAAW,CAAtB,EAAyB4e,OAAO3e,CAAhC;QACIuN,MAAJ;QACIN,SAAJ;QACIC,WAAJ,GAAkB,OAAlB;QACIG,MAAJ,CAAWsR,OAAO5e,CAAP,GAAW,CAAtB,EAAyB4e,OAAO3e,CAAhC;QACIsN,MAAJ,CAAWqR,OAAO5e,CAAP,GAAW,CAAtB,EAAyB4e,OAAO3e,CAAhC;QACIqN,MAAJ,CAAWsR,OAAO5e,CAAP,GAAW,CAAtB,EAAyB4e,OAAO3e,CAAhC;QACIsN,MAAJ,CAAWqR,OAAO5e,CAAP,GAAW,CAAtB,EAAyB4e,OAAO3e,CAAhC;QACIuN,MAAJ;QACIN,SAAJ;QACIC,WAAJ,GAAkB,OAAlB;QACIG,MAAJ,CAAWsR,OAAO5e,CAAP,GAAW,CAAtB,EAAyB4e,OAAO3e,CAAhC;QACIsN,MAAJ,CAAWqR,OAAO5e,CAAP,GAAW,EAAtB,EAA0B4e,OAAO3e,CAAjC;QACIuN,MAAJ;QACIN,SAAJ;QACII,MAAJ,CAAWsR,OAAO5e,CAAlB,EAAqB4e,OAAO3e,CAAP,GAAW,EAAhC;QACIsN,MAAJ,CAAWqR,OAAO5e,CAAlB,EAAqB4e,OAAO3e,CAAP,GAAW,CAAhC;QACIuN,MAAJ;QACIN,SAAJ;QACIC,WAAJ,GAAkB,OAAlB;QACIG,MAAJ,CAAWsR,OAAO5e,CAAlB,EAAqB4e,OAAO3e,CAAP,GAAW,CAAhC;QACIsN,MAAJ,CAAWqR,OAAO5e,CAAlB,EAAqB4e,OAAO3e,CAAP,GAAW,CAAhC;QACIqN,MAAJ,CAAWsR,OAAO5e,CAAlB,EAAqB4e,OAAO3e,CAAP,GAAW,CAAhC;QACIsN,MAAJ,CAAWqR,OAAO5e,CAAlB,EAAqB4e,OAAO3e,CAAP,GAAW,CAAhC;QACIuN,MAAJ;QACIN,SAAJ;QACIC,WAAJ,GAAkB,OAAlB;QACIG,MAAJ,CAAWsR,OAAO5e,CAAlB,EAAqB4e,OAAO3e,CAAP,GAAW,CAAhC;QACIsN,MAAJ,CAAWqR,OAAO5e,CAAlB,EAAqB4e,OAAO3e,CAAP,GAAW,EAAhC;QACIuN,MAAJ;GAvHsB;;;;;;;;iBAgIT,uBAAU5H,GAAV,EAAe;QACxBA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBe,GAAlC,KACFnF,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBoB,GAAlC,CADF,EAC0C;UACpChG,QAAQO,aAAaC,GAAb,EAAkB,KAAKhB,KAAL,CAAWiZ,KAAX,CAAiBhY,MAAnC,CAAZ;WACKqZ,eAAL,CAAqB9Z,KAArB;;WAEK,IAAP;GAtIsB;;;;;;;;mBA+IP,yBAAUQ,GAAV,EAAe;QAC1BuZ,WAAW,KAAKva,KAAL,CAAWiZ,KAAX,CAAiB9T,IAAjB,CAAsB+T,MAAtB,CAA6BW,aAA5C;SACK7Z,KAAL,CAAWiZ,KAAX,CAAiBe,MAAjB,GAA0B;SACrBhZ,IAAI5F,CADiB;SAErB4F,IAAI3F;KAFT;QAIImf,MAAM,KAAKC,WAAL,CAAiB,KAAKza,KAAL,CAAWiZ,KAAX,CAAiBe,MAAlC,CAAV;aACS,CAAT,IAAcQ,IAAI,CAAJ,CAAd;aACS,CAAT,IAAcA,IAAI,CAAJ,CAAd;QACI,CAACD,SAAS,CAAT,CAAL,EAAkB;eACP,CAAT,IAAc,GAAd;;SAEGG,YAAL;GA3JsB;;;;;;gBAkKV,wBAAY;;;;WAIjBzT,OAAP,CAAe,UAAf,EAA2B,EAAC0T,OAAO,KAAK3a,KAAL,CAAWiZ,KAAX,CAAiBC,MAAzB,EAAiClJ,OAAO,KAAKhQ,KAAL,CAAWiZ,KAAX,CAAiB9T,IAAjB,CAAsB6K,KAA9D,EAA3B;SACKtN,IAAL;GAvKsB;;;;;;;;;eAiLX,qBAAU8X,GAAV,EAAe;;QAEtB,CAAJ,IAASxb,KAAK6O,GAAL,CAAS,CAAT,EAAY7O,KAAK4b,GAAL,CAAS,GAAT,EAAcJ,IAAI,CAAJ,CAAd,CAAZ,CAAT;QACI,CAAJ,IAASxb,KAAK6O,GAAL,CAAS,CAAT,EAAY7O,KAAK4b,GAAL,CAAS,GAAT,EAAcJ,IAAI,CAAJ,CAAd,CAAZ,CAAT;WACO;SACFK,WAAWL,IAAI,CAAJ,IAAS,GAApB,IAA4B,KAAKxa,KAAL,CAAWiZ,KAAX,CAAiBhY,MAAjB,CAAwB1C,KADlD;SAEF,CAAC,IAAKic,IAAI,CAAJ,IAAS,GAAf,IAAwB,KAAKxa,KAAL,CAAWiZ,KAAX,CAAiBhY,MAAjB,CAAwBzC;KAFrD;GArLsB;;;;;;;;;eAkMX,qBAAUsc,GAAV,EAAe;QACtBC,IAAI/b,KAAK6O,GAAL,CAAS,CAAT,EAAaiN,IAAI1f,CAAJ,GAAQ,GAAT,GAAgB,KAAK4E,KAAL,CAAWiZ,KAAX,CAAiBhY,MAAjB,CAAwB1C,KAApD,CAAR;QACIyc,IAAI,GAAR;QACI1E,IAAI,OAAO,IAAKwE,IAAIzf,CAAJ,GAAQ,KAAK2E,KAAL,CAAWiZ,KAAX,CAAiBhY,MAAjB,CAAwBzC,MAA5C,CAAR;WACO,CAACuc,CAAD,EAAIC,CAAJ,EAAO1E,CAAP,CAAP;;CAtMG;;;;;;AA8MP,AAAO,IAAIiD,qBAAqB;;;;;;YAMpB,kBAAUvZ,KAAV,EAAiB;;;UACnBI,GAAN,CAAU0C,gBAAV,GAA6B,IAA7B;SACK9C,KAAL,GAAaA,KAAb;UACMiZ,KAAN,GAAcjZ,MAAME,KAApB;UACM+Y,KAAN,CAAYhY,MAAZ,GAAqB,KAAKd,EAAL,GAAUH,MAAMI,GAArC;UACM6Y,KAAN,CAAY3T,SAAZ,GAAwBtF,MAAMI,GAAN,CAAUmF,UAAV,CAAqB,IAArB,CAAxB;QACI,CAACvF,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAAxB,CAAsC,CAAtC,CAAL,EAA+C;YACvCvU,SAAN,CAAgB0D,SAAhB,GAA4BhJ,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBE,SAApD;;;YAGMH,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAAxB,CAAsC,CAAtC,IAA2CC,SAASC,SAAS/Z,MAAMiZ,KAAN,CAAY3T,SAAZ,CAAsB0D,SAA/B,CAAT,EAAoD,CAApD,CAA3C;;UAEIiQ,KAAN,CAAYe,MAAZ,GAAqB,KAAKC,WAAL,CAAiBja,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAAzC,CAArB;SACKzU,aAAL,GAAqB;WACd,IAAIC,MAAJ,CAAW,MAAX,CADc;WAEd,IAAIA,MAAJ,CAAW,MAAX;KAFP;WAIOxI,SAAP,CAAiB,UAAjB,EAA6B,UAACoe,GAAD,EAAMxe,IAAN,EAAe;UACtCA,KAAKuT,KAAL,KAAehQ,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB6K,KAApC,EAA2C,MAAKkL,WAAL,CAAiBze,KAAKke,KAAtB;KAD7C;SAGKvV,aAAL,GAAqB;WACd,IAAIC,MAAJ,CAAW,MAAX,CADc;WAEd,IAAIA,MAAJ,CAAW,MAAX;KAFP;SAIK3C,IAAL;GA9B4B;;;;;;;YAsCpB,kBAAU1C,KAAV,EAAiB;UACnBiZ,KAAN,CAAYe,MAAZ,GAAqBha,MAAMI,GAAN,CAAU0C,gBAAV,CAA2BmX,WAA3B,CAAuCja,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAA/D,CAArB;WACO5S,OAAP,CAAe,YAAf,EAA6B,EAAC+I,OAAOhQ,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB6K,KAAzB,EAAgCmL,eAAenb,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB+T,MAAhE,EAA7B,EAFyB;UAGnB9Y,GAAN,CAAU0C,gBAAV,CAA2BJ,IAA3B;GAzC4B;;;;;;;QAiDxB,gBAAY;;WAET5E,QAAE,yBAAF,EAA6B;aAC3B,2CAD2B;aAE3B,EAF2B;cAG1B;KAHH,CAAP;GAnD4B;;;;;;QA8DxB,gBAAY;QACZmD,SAAS,KAAKjB,KAAL,CAAWiZ,KAAX,CAAiBhY,MAA9B;QACI+C,MAAM,KAAKhE,KAAL,CAAWiZ,KAAX,CAAiB3T,SAA3B;QACI0U,SAAS,KAAKha,KAAL,CAAWiZ,KAAX,CAAiBe,MAA9B;;QAEIpU,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB3E,OAAO1C,KAA3B,EAAkC0C,OAAOzC,MAAzC;QACI4c,OAAOpX,IAAImW,oBAAJ,CAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkClZ,OAAOzC,MAAzC,CAAX;QACIqb,gBAAgB,KAAK7Z,KAAL,CAAWiZ,KAAX,CAAiB9T,IAAjB,CAAsB+T,MAAtB,CAA6BW,aAAjD;QACIwB,WAAWC,SAAS,CAACzB,cAAc,CAAd,CAAD,EAAmB,GAAnB,EAAwBA,cAAc,CAAd,CAAxB,CAAT,EAAoDpV,GAApD,CAAwD,iBAAS;aACvEzF,KAAKC,KAAL,CAAW0b,KAAX,CAAP;KADa,CAAf;QAGIY,UAAUD,SAAS,CAACzB,cAAc,CAAd,CAAD,EAAmB,CAAnB,EAAsBA,cAAc,CAAd,CAAtB,CAAT,EAAkDpV,GAAlD,CAAsD,iBAAS;aACpEzF,KAAKC,KAAL,CAAW0b,KAAX,CAAP;KADY,CAAd;SAGKP,YAAL,CAAkB,CAAlB,YAA6BiB,SAAS,CAAT,CAA7B,SAA4CA,SAAS,CAAT,CAA5C,SAA2DA,SAAS,CAAT,CAA3D;SACKjB,YAAL,CAAkB,CAAlB,YAA6BmB,QAAQ,CAAR,CAA7B,SAA2CA,QAAQ,CAAR,CAA3C,SAAyDA,QAAQ,CAAR,CAAzD;QACIvS,SAAJ,GAAgBoS,IAAhB;QACIlS,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBjI,OAAO1C,KAA1B,EAAiC0C,OAAOzC,MAAxC;;;QAGI+J,WAAJ,GAAkB,OAAlB;QACIE,SAAJ,GAAgB,CAAhB;QACIU,UAAJ,CAAe,CAAf,EAAkB,CAAlB,EAAqBlI,OAAO1C,KAA5B,EAAmC0C,OAAOzC,MAA1C;QACIwK,SAAJ,GAAgB,OAAhB;QACIV,SAAJ;QACIC,WAAJ,GAAkB,OAAlB;QACIG,MAAJ,CAAWzH,OAAO1C,KAAlB,EAAyByb,SAAS,CAAlC;QACIrR,MAAJ,CAAW1H,OAAO1C,KAAP,GAAe,CAA1B,EAA6Byb,MAA7B;QACIrR,MAAJ,CAAW1H,OAAO1C,KAAlB,EAAyByb,SAAS,CAAlC;QACIwB,SAAJ;QACI3P,IAAJ;QACIjD,MAAJ;GA7F4B;;;;;;;;iBAsGf,uBAAU5H,GAAV,EAAe;QACxBA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBe,GAAlC,KACFnF,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBoB,GAAlC,CADF,EAC0C;UACpChG,QAAQO,aAAaC,GAAb,EAAkB,KAAKhB,KAAL,CAAWiZ,KAAX,CAAiBhY,MAAnC,CAAZ;WACKyZ,YAAL,CAAkBla,KAAlB;;WAEK,IAAP;GA5G4B;;;;;;;;gBAqHhB,sBAAUQ,GAAV,EAAe;SACtBhB,KAAL,CAAWiZ,KAAX,CAAiBe,MAAjB,GAA0BhZ,IAAI3F,CAA9B;SACK2E,KAAL,CAAWiZ,KAAX,CAAiB9T,IAAjB,CAAsB+T,MAAtB,CAA6BW,aAA7B,CAA2C,CAA3C,IAAgD,KAAK4B,SAAL,CAAe,KAAKzb,KAAL,CAAWiZ,KAAX,CAAiBe,MAAhC,CAAhD;SACKkB,WAAL,CAAiB,KAAKlb,KAAL,CAAWiZ,KAAX,CAAiB9T,IAAjB,CAAsB+T,MAAvC;GAxH4B;;;;;;;eAgIjB,uBAAY;WAChBjS,OAAP,CAAe,YAAf,EAA6B,EAAC+I,OAAO,KAAKhQ,KAAL,CAAWiZ,KAAX,CAAiB9T,IAAjB,CAAsB6K,KAA9B,EAAqCmL,eAAe,KAAKnb,KAAL,CAAWiZ,KAAX,CAAiB9T,IAAjB,CAAsB+T,MAA1E,EAA7B;SACKxW,IAAL;GAlI4B;;;;;;;;;eA4IjB,qBAAU8X,GAAV,EAAe;WACnBxb,KAAK0c,KAAL,CAAW,CAAC,IAAKlB,IAAI,CAAJ,IAAS,GAAf,IAAuB,KAAKxa,KAAL,CAAWiZ,KAAX,CAAiBhY,MAAjB,CAAwBzC,MAA1D,CAAP;GA7I4B;;;;;;;;;aAuJnB,mBAAUsc,GAAV,EAAe;WACjB,OAAO,IAAKA,MAAM,KAAK9a,KAAL,CAAWiZ,KAAX,CAAiBhY,MAAjB,CAAwBzC,MAA1C,CAAP;;CAxJG;;;;;;;AAiKP,AAAO,IAAIgb,eAAe;;;;;;;YAOd,kBAAUxZ,KAAV,EAAiB;;;SACpBgQ,KAAL,GAAahQ,MAAME,KAAN,CAAYiF,IAAZ,CAAiB6K,KAA9B;SACKkJ,MAAL,GAAclZ,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAA/B;SACKjY,MAAL,GAAc,KAAKd,EAAL,GAAUH,MAAMI,GAA9B;SACKkF,SAAL,GAAiB,KAAKrE,MAAL,CAAYsE,UAAZ,CAAuB,IAAvB,CAAjB;WACO1I,SAAP,CAAiB,YAAjB,EAA+B,UAACoe,GAAD,EAAMxe,IAAN,EAAe;UACxC,OAAKuT,KAAL,KAAevT,KAAKuT,KAAxB,EAA+B;YACzB/G,YAAYqS,SAAS7e,KAAK0e,aAAL,CAAmBtB,aAA5B,EAA2CpV,GAA3C,CAA+C,iBAAS;iBAC/DzF,KAAKC,KAAL,CAAW0b,KAAX,CAAP;SADc,CAAhB;eAGKrV,SAAL,CAAe0D,SAAf,aAAmCC,UAAU,CAAV,CAAnC,SAAmDA,UAAU,CAAV,CAAnD,SAAmEA,UAAU,CAAV,CAAnE;eACKiQ,MAAL,CAAYU,YAAZ,GAA2B,OAAKtU,SAAL,CAAe0D,SAA1C;eACKtG,IAAL;;KAPJ;SAUKA,IAAL;GAtBsB;;;;;;;YA8Bd,oBAAY;SACfA,IAAL;GA/BsB;;;;;;;QAuClB,gBAAY;WACT5E,QAAE,6BAAF,EAAiC;aAC/B,2CAD+B;aAE/B,EAF+B;cAG9B;KAHH,CAAP;GAxCsB;;;;;;QAmDlB,gBAAY;QACZkG,MAAM,KAAKsB,SAAf;QACIM,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,KAAK3E,MAAL,CAAY1C,KAAhC,EAAuC,KAAK0C,MAAL,CAAYzC,MAAnD;QACIwK,SAAJ,GAAgB,KAAKkQ,MAAL,CAAYU,YAA5B;QACI1Q,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,KAAKjI,MAAL,CAAY1C,KAA/B,EAAsC,KAAK0C,MAAL,CAAYzC,MAAlD;QACI+J,WAAJ,GAAkB,OAAlB;QACIE,SAAJ,GAAgB,CAAhB;QACIU,UAAJ,CAAe,CAAf,EAAkB,CAAlB,EAAqB,KAAKlI,MAAL,CAAY1C,KAAjC,EAAwC,KAAK0C,MAAL,CAAYzC,MAApD;;CA1DG;;;;;;;AAmEP,AAAO,IAAIkb,mBAAmB;;;;;;;;QAQtB,cAAU1Z,KAAV,EAAiB;;WAEdlC,QAAE,uBAAF,EAA2B;aACzB,4BADyB;eAEvB,mBAAM;cACPoC,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBE,SAAxB,GAAoCpZ,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBU,YAA5D;cACM1Z,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAAxB,GAAwCC,SAASC,SAAS/Z,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBE,SAAjC,CAAT,CAAxC;cACMlZ,KAAN,CAAYiZ,QAAZ,CAAqBwC,SAArB,CAA+B3b,MAAME,KAAN,CAAYiF,IAAZ,CAAiB6K,KAAhD,IAAyDhQ,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBE,SAAjF;eACOnS,OAAP,CAAe,YAAf,EAA6B,EAAC+I,OAAOhQ,MAAME,KAAN,CAAYiF,IAAZ,CAAiB6K,KAAzB,EAAgCmL,eAAenb,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAhE,EAA7B;;KANG,EAQJ,OARI,CAAP;;CAVG;;;;;;;AA2BP,AAAO,IAAIS,mBAAmB;;;;;;;;QAQtB,cAAU3Z,KAAV,EAAiB;;WAEdlC,QAAE,qBAAF,EAAyB;aACvB,2BADuB;eAErB,mBAAM;cACPoC,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBU,YAAxB,GAAuC5Z,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBE,SAA/D;cACMlZ,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAAxB,GAAwCC,SAASC,SAAS/Z,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBE,SAAjC,CAAT,CAAxC;eACOnS,OAAP,CAAe,YAAf,EAA6B,EAAC+I,OAAOhQ,MAAME,KAAN,CAAYiF,IAAZ,CAAiB6K,KAAzB,EAAgCmL,eAAenb,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAhE,EAA7B;;KALG,EAOJ,OAPI,CAAP;;CAVG;;;;;;;AA0BP,AAAO,IAAIO,WAAW;;;;;;;UAOZ,gBAAUzZ,KAAV,EAAiB;;;SAClBiB,MAAL,GAAc,KAAKd,EAAL,GAAUH,MAAMI,GAA9B;SACK4P,KAAL,GAAahQ,MAAME,KAAN,CAAYiF,IAAZ,CAAiB6K,KAA9B;UACMiJ,KAAN,CAAYxM,KAAZ,GAAoBzM,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBU,YAA5C;WACO/c,SAAP,CAAiB,YAAjB,EAA+B,UAACoe,GAAD,EAAMxe,IAAN,EAAe;UACxC,OAAKuT,KAAL,KAAevT,KAAKuT,KAAxB,EAA+B;cACvB5P,GAAN,CAAUqM,KAAV,GAAkBzM,MAAME,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBU,YAA1C;;KAFJ;GAXkB;;;;;;;;QAwBd,cAAU5Z,KAAV,EAAiB;;WAEdlC,QAAE,8BAAF,EAAkC;aAChC,4BADgC;eAE9BA,QAAE8d,QAAF,CAAW,OAAX,EAAoB,UAAUnP,KAAV,EAAiB;YACxC;cACEoP,OAAOpP,MAAMvG,KAAN,CAAY,iBAAZ,CAAX;cACI4V,MAAMD,KAAK,CAAL,CAAV;cACIA,KAAK,CAAL,EAAQhc,MAAR,KAAmB,CAAvB,EAA0B;wBACdic,IAAI,CAAJ,CAAV,GAAmBA,IAAI,CAAJ,CAAnB,GAA4BA,IAAI,CAAJ,CAA5B,GAAqCA,IAAI,CAAJ,CAArC,GAA8CA,IAAI,CAAJ,CAA9C,GAAuDA,IAAI,CAAJ,CAAvD;;gBAEI5b,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBU,YAAxB,GAAuCnN,KAAvC;gBACMvM,KAAN,CAAYiF,IAAZ,CAAiB+T,MAAjB,CAAwBW,aAAxB,GAAwCC,SAASC,SAAS+B,GAAT,CAAT,CAAxC;SAPF,CAQE,OAAOC,CAAP,EAAU;;;;OATL;KAFJ,CAAP;GA1BkB;;;;;;;iBAkDL,yBAAY;WAClB,IAAP;;CAnDG;;;;;;;;;AA8DP,AAAO,SAAShC,QAAT,CAAkBiC,GAAlB,EAAuB;MACxBpD,SAASoD,IAAI9V,KAAJ,CAAU,2CAAV,CAAb;SACO,CAAC+V,SAASrD,OAAO,CAAP,CAAT,EAAoB,EAApB,CAAD,EAA0BqD,SAASrD,OAAO,CAAP,CAAT,EAAoB,EAApB,CAA1B,EAAmDqD,SAASrD,OAAO,CAAP,CAAT,EAAoB,EAApB,CAAnD,CAAP;;;;;;;;;;AAUF,AAAO;;;;;;;;;AAeP,AAAO,SAASkB,QAAT,CAAkBoC,GAAlB,EAAuB;;;QAGtBA,IAAIzX,GAAJ,CAAQ,qBAAa;WAClBzF,KAAK6O,GAAL,CAAS,CAAT,EAAY7O,KAAK4b,GAAL,CAAS,GAAT,EAAcuB,SAAd,CAAZ,IAAwC,GAA/C;GADI,CAAN;;;;MAMIC,OAAOpd,KAAK4b,GAAL,CAAS5b,KAAK4b,GAAL,CAASsB,IAAI,CAAJ,CAAT,EAAiBA,IAAI,CAAJ,CAAjB,CAAT,EAAmCA,IAAI,CAAJ,CAAnC,CAAX;MACIG,OAAOrd,KAAK6O,GAAL,CAAS7O,KAAK6O,GAAL,CAASqO,IAAI,CAAJ,CAAT,EAAiBA,IAAI,CAAJ,CAAjB,CAAT,EAAmCA,IAAI,CAAJ,CAAnC,CAAX;MACIrI,QAAQgH,WAAWwB,OAAOD,IAAlB,CAAZ;MACIE,MAAM,CAAV;MACIzI,UAAU,CAAd,EAAiB;UACT,CAAN;GADF,MAEO,IAAIwI,SAASH,IAAI,CAAJ,CAAb,EAAqB;UACpB,MAAO,CAACA,IAAI,CAAJ,IAASA,IAAI,CAAJ,CAAV,IAAoBrI,KAA3B,CAAN;GADK,MAEA,IAAIwI,SAASH,IAAI,CAAJ,CAAb,EAAqB;UACpB,MAAO,CAACA,IAAI,CAAJ,IAASA,IAAI,CAAJ,CAAV,IAAoBrI,KAArB,GAA8B,CAApC,CAAN;GADK,MAEA,IAAIwI,SAASH,IAAI,CAAJ,CAAb,EAAqB;UACpB,MAAO,CAACA,IAAI,CAAJ,IAASA,IAAI,CAAJ,CAAV,IAAoBrI,KAArB,GAA8B,CAApC,CAAN;;MAEEyI,MAAM,CAAV,EAAaA,OAAO,GAAP;MACTC,MAAMF,SAAS,CAAT,GAAa,CAAb,GAAkBxI,QAAQwI,IAAT,GAAiB,GAA5C;MACI5P,QAAQ4P,OAAO,GAAnB;;SAEO,CAACC,GAAD,EAAMC,GAAN,EAAW9P,KAAX,CAAP;;;;;;;;;;AAUF,AAAO,SAAS6O,QAAT,CAAkBd,GAAlB,EAAuB;MACxBgC,IAAI,OAAOhC,IAAI,CAAJ,IAAS,GAAhB,CAAR;MACIO,IAAIP,IAAI,CAAJ,IAAS,EAAjB;MACIQ,IAAIR,IAAI,CAAJ,IAAS,GAAjB;;MAEI7a,IAAIX,KAAKC,KAAL,CAAW8b,CAAX,CAAR;MACIpb,IAAI,CAAR,EAAWA,IAAI,CAAJ;MACPiX,IAAIjX,IAAI,CAAJ,GAAQob,IAAIpb,CAAZ,GAAgB,KAAKob,IAAIpb,CAAT,CAAxB;MACI7B,IAAI0e,KAAK,IAAIxB,CAAT,CAAR;MACIyB,IAAID,KAAK,IAAIxB,IAAIpE,CAAb,CAAR;UACQjX,CAAR;SACO,CAAL;SACK,CAAL;aACS,CAAC6c,CAAD,EAAIC,CAAJ,EAAO3e,CAAP,CAAP;SACG,CAAL;aACS,CAAC2e,CAAD,EAAID,CAAJ,EAAO1e,CAAP,CAAP;SACG,CAAL;aACS,CAACA,CAAD,EAAI0e,CAAJ,EAAOC,CAAP,CAAP;SACG,CAAL;aACS,CAAC3e,CAAD,EAAI2e,CAAJ,EAAOD,CAAP,CAAP;SACG,CAAL;aACS,CAACC,CAAD,EAAI3e,CAAJ,EAAO0e,CAAP,CAAP;SACG,CAAL;aACS,CAACA,CAAD,EAAI1e,CAAJ,EAAO2e,CAAP,CAAP;;;;AC5rBN;;;;AAIA,AACA,AAEA,AACA,AAEA,IAAaC,WAAb;;;;;;;AAOE,qBAAYjgB,IAAZ,EAAkBuT,KAAlB,EAAyB;;;;;MAGnB2M,WAAWzhB,SAAS4d,cAAT,CAAwB,oBAAxB,CAAf;MACI1G,eAAelX,SAAS4d,cAAT,CAAwB,sBAAxB,EAAgDxY,qBAAhD,EAAnB;WACSwY,cAAT,CAAwB,sBAAxB,EAAgDpd,KAAhD,CAAsDkhB,UAAtD,GAAmE,QAAnE;WACSlhB,KAAT,CAAeyX,OAAf,GAAyB,OAAzB;WACSzX,KAAT,CAAekR,QAAf,GAA0B,UAA1B;WACSlR,KAAT,CAAeyC,GAAf,GAAwBiU,aAAajU,GAArC;WACSzC,KAAT,CAAe0C,IAAf,GAAyBgU,aAAahU,IAAtC;WACS1C,KAAT,CAAe6C,KAAf,GAAuB,KAAvB;WACS7C,KAAT,CAAe8C,MAAf,GAA2B4T,aAAa5T,MAAxC;;MAEIyG,QAAQxI,KAAKwI,KAAL,IAAcxI,KAAK0f,SAAL,CAAelX,KAAzC;MACI4X,UAAU5X,MAAM/B,IAAN,CAAW4L,IAAX,EAAd;MACIqK,WAAWlU,MAAMuL,MAAN,CAAaR,KAAb,IAAsBvT,KAAKoL,MAA3B,GAAoC5C,MAAM4C,MAAN,CAAagI,GAAhE;MACG,OAAOsJ,SAASlQ,SAAhB,KAA8B,QAAjC,EAA0C;aAAUA,SAAT,GAAqB,CAACkQ,SAASlQ,SAAV,CAArB;;MACvC6T,cAAc,EAAlB;MACIvO,UAAU4K,SAAS5K,OAAT,GAAmB4K,SAAS5K,OAAT,CAAiBwO,KAAjB,EAAnB,GAA8C,CAACF,QAAQ,CAAR,EAAWE,KAAX,EAAD,CAA5D;MACI9T,YAAYkQ,SAASlQ,SAAT,GAAqBkQ,SAASlQ,SAAT,CAAmB8T,KAAnB,EAArB,GAAkD,CAAC,MAAD,CAAlE;MACG,OAAO9T,SAAP,KAAqB,QAAxB,EAAiC;gBAAa,CAACA,SAAD,CAAZ;;;MAG/B,CAACkQ,SAAS5K,OAAb,EAAqB;aACVA,OAAT,GAAmBA,OAAnB;;MAEC,CAAC4K,SAASlQ,SAAb,EAAuB;aACZA,SAAT,GAAqBA,SAArB;;MAEC,CAACkQ,SAASnI,KAAb,EAAmB;aACRA,KAAT,GAAiBzC,QAAQ,CAAR,CAAjB;;;MAGEyO,kBAAkB;aACV7D,SAAS5K,OAAT,CAAiBwO,KAAjB,EADU;eAER5D,SAASlQ,SAAT,CAAmB8T,KAAnB,EAFQ;WAGZ5D,SAASnI,KAAT,CAAe+L,KAAf;GAHV;;WAMSnQ,QAAT,GAAoBnQ,KAAKmQ,QAAzB;;MAEIjH,WAAW4I,QAAQ9J,GAAR,CAAY,UAACG,IAAD,EAAU;WAC5B;YACCA,IADD;aAEEiY,QAAQhZ,OAAR,CAAgBe,IAAhB;KAFT;GADa,CAAf;;MAOIqY,cAAc;WACThY,KADS;aAEP4X,OAFO;cAGN1D,QAHM;cAINxT,QAJM;iBAKHmX;GALf;;;;MAUII,WAAW,CACbpf,QAAEqf,YAAF,EAAgB;WACRlY,KADQ;YAELkU,QAFK;WAGPnJ,KAHO;iBAIA/K,MAAMkX,SAAN,CAAgB9J,WAJhB;WAKP2K,eALO;aAMJrX;GANZ,CADa,EASb7H,QAAEsf,aAAF,EAAiB,EAACnY,OAAOA,KAAR,EAAe4C,QAAQsR,QAAvB,EAAiCnJ,OAAOA,KAAxC,EAA+CjU,OAAOihB,eAAtD,EAAjB,CATa,CAAf;;MAYIhN,QAAQ/K,MAAMuL,MAAN,CAAa3Q,MAAzB,EAAiC;aACtBpE,IAAT,CAAcqC,QAAEuf,aAAF,EAAiB;aACvBrN,KADuB;aAEvB/K,KAFuB;mBAGfA,MAAMkX,SAAN,CAAgB9J;KAHlB,CAAd;;;;MAQEiL,WAAW;cACH,kBAAUtd,KAAV,EAAiB;YACnBI,GAAN,CAAU0C,gBAAV,GAA6B,IAA7B,CADyB;KADd;UAIP,gBAAY;aACThF,QAAE,KAAF,EAAS,EAACpC,OAAO,yBAAR,EAAT,EAA6C,CAChDoC,QAAEyf,WAAF,EAAe,EAACtY,OAAOA,KAAR,EAAe4C,QAAQsR,QAAvB,EAAiCnJ,OAAOA,KAAxC,EAA+CjU,OAAOihB,eAAtD,EAAf,CADgD,EAEhDlf,QAAE0f,QAAF,EAAY,EAACrE,UAAUA,QAAX,EAAZ,CAFgD,EAGhDrb,QAAE2f,SAAF,EAAa,EAACtY,MAAM8X,WAAP,EAAoBS,OAAO,CAA3B,EAAb,CAHgD,EAIhD5f,QAAE,KAAF,EAAS,EAACpC,OAAO,mBAAR,EAAT,EAAuCwhB,QAAvC,CAJgD,CAA7C,CAAP;KALW;mBAaE,yBAAY;aAClB,IAAP;;GAdJ;UAiBES,KAAF,CAAQziB,SAAS4d,cAAT,CAAwB,oBAAxB,CAAR,EAAuDwE,QAAvD;CAvGJ;;;;;;;;AAiHA,AAAO,IAAID,gBAAgB;;;;;;;;QAQnB,cAAUrd,KAAV,EAAiB;WACdlC,QAAE,QAAF,EAAY;eAEf,mBAAM;cACEoC,KAAN,CAAY+E,KAAZ,CAAkBuL,MAAlB,CAAyBzM,MAAzB,CAAgC/D,MAAME,KAAN,CAAY8P,KAA5C,EAAmD,CAAnD;eACO/I,OAAP,CAAe5K,aAAf,EAA8B,EAACuhB,UAAU5d,MAAME,KAAN,CAAYmS,WAAvB,EAA9B;gBACErL,MAAF;;OALa;aAQV;KARF,EASJ,cATI,CAAP;;CATG;;AAsBP,AAAO,IAAIwW,WAAW;;;;;;UAMZ,gBAAUxd,KAAV,EAAiB;UACjBiZ,KAAN,CAAYxM,KAAZ,GAAoBzM,MAAME,KAAN,CAAYiZ,QAAZ,CAAqBnI,KAAzC;GAPkB;QASd,cAAUhR,KAAV,EAAiB;WACdlC,QAAE,KAAF,EAAQ,EAAR,EAAW,eAAX,EACLA,QAAE,8BAAF,EAAkC;aACzB,2BADyB;oBAEjBkC,MAAME,KAAN,CAAYiZ,QAAZ,CAAqBnI,KAFJ;eAGvBlT,QAAE8d,QAAF,CAAW,OAAX,EAAoB,UAAUnP,KAAV,EAAiB;YACxC;gBACIvM,KAAN,CAAYiZ,QAAZ,CAAqBnI,KAArB,GAA6BvE,KAA7B;SADF,CAEE,OAAOsP,CAAP,EAAU;;;;OAHL;KAHX,CADK,CAAP;;CAVG;;;;;;;;AAkCP,AAAO,IAAIqB,gBAAgB;;;;;;;;QAQnB,cAAUpd,KAAV,EAAiB;WACdlC,QAAE,QAAF,EAAY;eAEf,mBAAM;cACEoC,KAAN,CAAY2H,MAAZ,CAAmBoB,SAAnB,GAA+BjJ,MAAME,KAAN,CAAYnE,KAAZ,CAAkBkN,SAAjD;cACM/I,KAAN,CAAY2H,MAAZ,CAAmB0G,OAAnB,GAA6BvO,MAAME,KAAN,CAAYnE,KAAZ,CAAkBwS,OAA/C;cACMrO,KAAN,CAAY2H,MAAZ,CAAmBmJ,KAAnB,GAA2BhR,MAAME,KAAN,CAAYnE,KAAZ,CAAkBiV,KAA7C;YACGhR,MAAME,KAAN,CAAY8P,KAAZ,GAAoBhQ,MAAME,KAAN,CAAY+E,KAAZ,CAAkBuL,MAAlB,CAAyB3Q,MAAhD,EAAwD;gBAChDK,KAAN,CAAY+E,KAAZ,CAAkBuL,MAAlB,CAAyBxQ,MAAME,KAAN,CAAY8P,KAArC,IAA8ChQ,MAAME,KAAN,CAAY2H,MAA1D;;;;KAPD,EAWJ,QAXI,CAAP;;CATG;;;;;;;;AA8BP,AAAO,IAAIsV,eAAe;;;;;;;;QAQlB,cAAUnd,KAAV,EAAiB;WACdlC,QAAE,QAAF,EAAY;eACR,mBAAY;cACboC,KAAN,CAAY2H,MAAZ,CAAmB0G,OAAnB,GAA6BvO,MAAME,KAAN,CAAY2d,OAAZ,CAAoBpZ,GAApB,CAAwB,gBAAQ;iBAAQhI,KAAKqL,IAAZ;SAAjC,CAA7B;cACM5H,KAAN,CAAY+E,KAAZ,CAAkBuL,MAAlB,CAAyBxQ,MAAME,KAAN,CAAY8P,KAArC,IAA8ChQ,MAAME,KAAN,CAAY2H,MAA1D;eACOZ,OAAP,CAAe5K,aAAf,EAA8B,EAACuhB,UAAU5d,MAAME,KAAN,CAAYmS,WAAvB,EAA9B;gBACErL,MAAF;;;KALG,EAQJ,iBARI,CAAP;;CATG;;;;;;;AA0BP,AAAO,IAAIuW,cAAc;;;;;;;;QAQjB,cAAUvd,KAAV,EAAiB;WACdlC,QAAE,KAAF,EACL;aACS,mBADT;eAGI,mBAAM;cACEoC,KAAN,CAAY2H,MAAZ,CAAmBoB,SAAnB,GAA+BjJ,MAAME,KAAN,CAAYnE,KAAZ,CAAkBkN,SAAjD;cACM/I,KAAN,CAAY2H,MAAZ,CAAmB0G,OAAnB,GAA6BvO,MAAME,KAAN,CAAYnE,KAAZ,CAAkBwS,OAA/C;cACMrO,KAAN,CAAY2H,MAAZ,CAAmBmJ,KAAnB,GAA2BhR,MAAME,KAAN,CAAYnE,KAAZ,CAAkBiV,KAA7C;YACGhR,MAAME,KAAN,CAAY8P,KAAZ,GAAoBhQ,MAAME,KAAN,CAAY+E,KAAZ,CAAkBuL,MAAlB,CAAyB3Q,MAAhD,EAAwD;gBAChDK,KAAN,CAAY+E,KAAZ,CAAkBuL,MAAlB,CAAyBxQ,MAAME,KAAN,CAAY8P,KAArC,IAA8ChQ,MAAME,KAAN,CAAY2H,MAA1D;;;;KATH,EAaF,GAbE,CAAP;;CATG;;;;;;;;AAgCP,AAAO,IAAI4V,YAAY;;;;;;;UAOb,gBAAUzd,KAAV,EAAiB;UACjBiZ,KAAN,GAAcjZ,MAAME,KAApB;UACM+Y,KAAN,CAAYI,MAAZ,GAAqB,EAArB;UACMJ,KAAN,CAAY6E,MAAZ,GAAqB,EAArB;GAVmB;;;;;;;;QAmBf,cAAU9d,KAAV,EAAiB;;;QACjB2F,WAAW3F,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiBQ,QAAhC;QACIwT,WAAWnZ,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiBgU,QAAhC;SACKuE,KAAL,GAAa,CAAb;;QAGIK,YAAYpY,SAASlB,GAAT,CAAa,UAACG,IAAD,EAAOoL,KAAP,EAAiB;UACxCmJ,SAASlQ,SAAT,CAAmB+G,KAAnB,MAA8B/R,SAAlC,EAA6C;iBAClCgL,SAAT,CAAmB+G,KAAnB,IAA4BmJ,SAASlQ,SAAT,CAAmB8T,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,CAA5B;;UAEE,CAAC/c,MAAMiZ,KAAN,CAAYI,MAAZ,CAAmBrJ,KAAnB,CAAL,EAAgC;cACxBiJ,KAAN,CAAYI,MAAZ,CAAmBrJ,KAAnB,IAA4B,MAA5B;;UAEE,CAAChQ,MAAMiZ,KAAN,CAAY6E,MAAZ,CAAmB9N,KAAnB,CAAL,EAAgC;cACxBiJ,KAAN,CAAY6E,MAAZ,CAAmB9N,KAAnB,IAA4BmJ,SAASlQ,SAAT,CAAmB+G,KAAnB,KAA6B,QAAzD;;;UAGEgO,eAAe;kBACPrY,QADO;cAEXwT,SAAS5K,OAAT,CAAiByB,KAAjB,CAFW;mBAGNmJ,SAASlQ,SAHH;cAIXjJ,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB0X,OAJN;mBAKN7c,MAAMiZ,KAAN,CAAY6E;OALzB;UAOInY,SAASqK,KAAT,EAAgBlM,KAAhB,KAA0B,CAAC,CAA/B,EAAkC;iBACvBkM,KAAT,EAAgBlM,KAAhB,GAAwBka,aAAa9a,IAAb,CAAkBW,OAAlB,CAA0Bma,aAAalW,IAAvC,CAAxB;;UAEEoV,WAAW,CACbpf,QAAE,QAAF,EAAY;iBACD,mBAAM;mBACJ6H,SAAS9F,MAAlB,IAA4B,EAACiI,MAAM9H,MAAMiZ,KAAN,CAAY9T,IAAZ,CAAiB0X,OAAjB,CAAyB,CAAzB,CAAP,EAAoC/Y,OAAO,CAA3C,EAA5B;;OAFJ,EAIG,GAJH,CADa,CAAf;UAOI6B,SAAS9F,MAAT,GAAkB,CAAtB,EAAyB;iBACdpE,IAAT,CAAcqC,QAAE,QAAF,EAAY;mBACf,mBAAM;qBACJiG,MAAT,CAAgBiM,KAAhB,EAAuB,CAAvB;;SAFU,EAIX,GAJW,CAAd;;eAMOvU,IAAT,CAAcqC,QAAE,QAAF,EAAY;iBACb,mBAAM;gBACPmb,KAAN,CAAYI,MAAZ,CAAmBrJ,KAAnB,IAA4BhQ,MAAMiZ,KAAN,CAAYI,MAAZ,CAAmBrJ,KAAnB,MAA8B,MAA9B,GAAuC,OAAvC,GAAiD,MAA7E;;OAFQ,EAITlS,QAAE,KAAF,EACH,EAACpC,kBAAgBsE,MAAMiZ,KAAN,CAAY6E,MAAZ,CAAmB9N,KAAnB,CAAjB,EADG,EAED,GAFC,CAJS,CAAd;aAQO,CAAClS,QAAEmgB,QAAF,EAAY;kBACRD,YADQ;eAEXhO,KAFW;mBAGP,KAHO;gBAIVhQ,MAAMiZ,KAAN,CAAYI;OAJd,CAAD,EAKH6D,QALG,CAAP;KA3Cc,CAAhB;WAkDOpf,QAAE,sBAAF,EAA0B;aACxB;KADF,EAEJigB,SAFI,CAAP;;CA3EG;;;;;;;;AAuFP,AAAO,IAAIE,WAAW;;;;;;;UAOZ,gBAAUje,KAAV,EAAiB;UACjBiZ,KAAN,GAAcjZ,MAAME,KAApB;GARkB;;;;;;kBAeJ,wBAAUF,KAAV,EAAiB;QAC3BA,MAAMiZ,KAAN,CAAYyE,KAAZ,GAAoB1d,MAAME,KAAN,CAAYge,SAAZ,CAAsBR,KAA9C,EAAqD;YAC7Cxd,KAAN,CAAYge,SAAZ,CAAsBR,KAAtB,GAA8B1d,MAAMiZ,KAAN,CAAYyE,KAA1C;KADF,MAEO;YACCzE,KAAN,CAAYyE,KAAZ,GAAoB1d,MAAME,KAAN,CAAYge,SAAZ,CAAsBR,KAA1C;;GAnBgB;;;;;;;;QA6Bd,cAAU1d,KAAV,EAAiB;QACjBgQ,QAAQhQ,MAAMiZ,KAAN,CAAYjJ,KAAxB;QACImJ,WAAWnZ,MAAMiZ,KAAN,CAAYE,QAA3B;WACOrb,QAAE,KAAF,EAASA,QAAE,QAAF,EAAY;wBACVkS,KADU;qBAEXmJ,SAASxT,QAAT,CAAkBqK,KAAlB,EAAyBlM,KAFd;eAGjB,iBAACiY,CAAD,EAAO;YACVpW,WAAWoW,EAAE1D,MAAF,CAAS8F,aAAxB;iBACSxY,QAAT,CAAkBqK,KAAlB,EAAyBlI,IAAzB,GAAgCqR,SAASjW,IAAT,CAAcyC,QAAd,CAAhC;iBACSA,QAAT,CAAkBqK,KAAlB,EAAyBlM,KAAzB,GAAiC6B,QAAjC;;KANY,EAQb,CAACwT,SAASjW,IAAT,CAAcuB,GAAd,CAAkB,eAAO;aACpB3G,QAAE,QAAF,EAAYsgB,GAAZ,CAAP;KADE,CAAD,CARa,CAAT,EAWHtgB,QAAEkb,WAAF,EAAe,EAACG,UAAUnZ,MAAMiZ,KAAN,CAAYE,QAAvB,EAAiCnJ,OAAOA,KAAxC,EAA+CqJ,QAAQrZ,MAAMiZ,KAAN,CAAYI,MAAnE,EAAf,CAXG,CAAP;;CAhCG;;;;;;;;AAsDP,AAAO,SAASgF,UAAT,GAAsB;;UAEzBV,KAAF,CAAQziB,SAAS4d,cAAT,CAAwB,oBAAxB,CAAR,EAAuD,IAAvD;;WAESA,cAAT,CAAwB,sBAAxB,EAAgDpd,KAAhD,CAAsDkhB,UAAtD,GAAmE,SAAnE;WACS9D,cAAT,CAAwB,oBAAxB,EAA8Cpd,KAA9C,CAAoDyX,OAApD,GAA8D,MAA9D;;;AC7ZF;;;;;;AAMA,AACA,AAEA,AAEA,AAAO,IAAImL,iBAAiB;UAClB,gBAAUte,KAAV,EAAiB;UACjBiZ,KAAN,GAAcjZ,MAAME,KAApB;UACM+Y,KAAN,CAAY7a,IAAZ,GAAmB,CAAnB;UACM6a,KAAN,CAAYsF,QAAZ,GAAuBve,MAAMiZ,KAAN,CAAYuF,UAAZ,CAAuB3a,OAAvB,CAA+B7D,MAAMiZ,KAAN,CAAYjJ,KAA3C,CAAvB;UACMiJ,KAAN,CAAYwF,SAAZ,GAAwBze,MAAMiZ,KAAN,CAAYlS,OAAZ,CAAoB/G,MAAMiZ,KAAN,CAAYjJ,KAAhC,EAAuCxK,SAAvC,CAAiDpH,IAAzE;UACM6a,KAAN,CAAYyF,UAAZ,GAAyB1e,MAAMiZ,KAAN,CAAYlS,OAAZ,CAAoB/G,MAAMiZ,KAAN,CAAYjJ,KAAhC,EAAuCxK,SAAvC,CAAiDlH,KAA1E;UACM2a,KAAN,CAAY0F,SAAZ,GAAwB3e,MAAMiZ,KAAN,CAAYlS,OAAZ,CAAoB/G,MAAMiZ,KAAN,CAAYjJ,KAAhC,EAAuCxK,SAAvC,CAAiDpH,IAAzE;UACM6a,KAAN,CAAY7T,aAAZ,GAA4B;WACrB,IAAIC,MAAJ,CAAW,MAAX;KADP;GARwB;;YAahB,kBAAUrF,KAAV,EAAiB;;UAEnBI,GAAN,CAAU0C,gBAAV,GAA6B,IAA7B;;UAEM1C,GAAN,CAAU0C,gBAAV,CAA2B8b,aAA3B,GAA2C5e,MAAMoe,GAAN,CAAUQ,aAArD;UACM3F,KAAN,CAAYtS,MAAZ,GAAqB3G,MAAMoe,GAAN,CAAUzX,MAA/B;UACMsS,KAAN,CAAY4F,MAAZ,GAAqB,CAArB;SACK7e,KAAL,GAAaA,KAAb;GApBwB;;kBAuBV,wBAAUA,KAAV,EAAiB;UACzBiZ,KAAN,CAAYlS,OAAZ,GAAsB/G,MAAME,KAAN,CAAY6G,OAAlC;QACI,KAAKyX,UAAL,CAAgB,KAAKD,QAArB,MAAmC,KAAKvO,KAA5C,EAAmD;WAC5CuO,QAAL,GAAgB,KAAKC,UAAL,CAAgB3a,OAAhB,CAAwB,KAAKmM,KAA7B,CAAhB;;GA1BsB;;YA8BhB,kBAAUhQ,KAAV,EAAiB;QACrB8e,aAAa9e,MAAMiZ,KAAN,CAAYlS,OAAZ,CAAoB/G,MAAMiZ,KAAN,CAAYjJ,KAAhC,EAAuCxK,SAAvC,CAAiDpH,IAAjD,GAAwD4B,MAAMiZ,KAAN,CAAY0F,SAArF;QACI3e,MAAMiZ,KAAN,CAAY7a,IAAZ,KAAqB0gB,UAArB,IAAmC,CAAC9e,MAAMiZ,KAAN,CAAY/E,IAApD,EAA0D;WACnD9V,IAAL,GAAY0gB,UAAZ;WACK9Y,KAAL,GAAa,IAAb;;QAEEhG,MAAMiZ,KAAN,CAAY/E,IAAhB,EAAsB;WACf9V,IAAL,GAAY,CAAZ;WACK8V,IAAL,GAAY,KAAZ;WACKlO,KAAL,GAAa,IAAb;WACK5H,IAAL,GAAY,CAAZ;;QAEE,KAAK4H,KAAT,EAAgB;;WACTA,KAAL,GAAa,KAAb;cACEgB,MAAF;;GA5CsB;;QAgDpB,cAAUhH,KAAV,EAAiB;QACjB,CAACA,MAAME,KAAP,IAAgB,CAACF,MAAMiZ,KAAN,CAAY8F,aAAjC,EAAgD;QAC5CC,OAAOhf,MAAMiZ,KAAN,CAAYlS,OAAZ,CAAoB/G,MAAMiZ,KAAN,CAAYjJ,KAAhC,CAAX;UACMiJ,KAAN,CAAY8F,aAAZ,CAA0B3gB,IAA1B,GAAiC4B,MAAMiZ,KAAN,CAAY8F,aAAZ,CAA0BzgB,KAA1B,GAAkC0B,MAAMiZ,KAAN,CAAY8F,aAAZ,CAA0BxgB,KAA7F;QACIH,OAAO4B,MAAMiZ,KAAN,CAAY7a,IAAZ,GAAmB4B,MAAMiZ,KAAN,CAAY8F,aAAZ,CAA0B3gB,IAAxD;WACON,QAAE,KAAF,EAAS;aACL,UADK,EACOyP,cAAYvN,MAAMiZ,KAAN,CAAYsF,QAD/B;wDAEoCngB,IAAhD,sBAAqE4gB,KAAKxZ,SAAL,CAAejH,KAApF,oBAAwGyB,MAAMiZ,KAAN,CAAY4F,MAApH;KAFG,EAIL,CAAC/gB,QAAE,KAAF,EAAS,EAACmhB,OAAO,WAAR,EAAqBvjB,OAAO,uBAA5B,EAAT,EAA+D,CAACsjB,KAAK/Z,KAAL,CAAW6C,IAAZ,EAAkBhK,QAAE,IAAF,CAAlB,EAA2BkhB,KAAK/Z,KAAL,CAAW0Q,MAAX,CAAkBpI,EAA7C,CAA/D,CAAD,CAJK,CAAP;GArDwB;;iBA8DX,uBAAUvM,GAAV,EAAe;QACxBA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBoB,GAAlC,CAAJ,EAA4C;aACnC,KAAKG,MAAL,CAAY3F,GAAZ,CAAP;;WAEK,IAAP;GAlEwB;;UAqElB,gBAAUA,GAAV,EAAe;;QAEjBA,IAAIiF,IAAJ,KAAa,UAAjB,EAA6B;WACtBjG,KAAL,CAAWiZ,KAAX,CAAiB4F,MAAjB,GAA0B,IAA1B;WACKK,YAAL,GAAoB,IAApB;WACK9gB,IAAL,GAAY,CAAZ;;;QAGE4C,IAAIiF,IAAJ,KAAa,QAAjB,EAA2B;WACpBjG,KAAL,CAAWiZ,KAAX,CAAiB4F,MAAjB,GAA0B,CAA1B;aACO5X,OAAP,CAAe7K,UAAf,EAA2B,IAA3B;;;;;;QAMEyX,QAAQ,EAAZ;QACI,KAAKqL,YAAT,EAAuB;YACf9jB,CAAN,GAAU,CAAC,CAAD,IAAM,KAAK8jB,YAAL,CAAkBzL,MAAlB,GAA2BzS,IAAIyS,MAArC,CAAV;KADF,MAEO;YACCrY,CAAN,GAAU4D,KAAK0c,KAAL,CAAW1a,IAAIyS,MAAf,CAAV;;SAEGrV,IAAL,IAAayV,MAAMzY,CAAnB;;;QAGI+jB,cAAc,KAAK/gB,IAAL,GAAY,KAAKugB,SAAnC;;QAEMS,UAAU,KAAKb,QAAL,GAAgB,CAAhB,GAAoB,KAAKC,UAAL,CAAgB,KAAKD,QAAL,GAAgB,CAAhC,CAApB,GAAyD,IAAzE;QACMc,WAAW,KAAKb,UAAL,CAAgB,KAAKD,QAAL,GAAgB,CAAhC,IAAqC,CAAC,CAAtC,GAA0C,KAAKC,UAAL,CAAgB,KAAKD,QAAL,GAAgB,CAAhC,CAA1C,GAA+E,IAAhG;QACMe,gBAAgBF,UAAU,KAAKX,SAAL,GAAiB,KAAK1X,OAAL,CAAaqY,OAAb,EAAsB5Z,SAAtB,CAAgCjH,KAA3D,GAAmE,IAAzF;QACMghB,iBAAiBF,WAAW,KAAKZ,SAAL,GAAiB,KAAK1X,OAAL,CAAasY,QAAb,EAAuB7Z,SAAvB,CAAiCjH,KAA7D,GAAqE,IAA5F;;QAEI6gB,WAAWD,cAAcG,aAA7B,EAA4C;;WACrCb,SAAL,IAAkB,KAAK1X,OAAL,CAAaqY,OAAb,EAAsB5Z,SAAtB,CAAgCjH,KAAlD;WACKmgB,UAAL,IAAmB,KAAK3X,OAAL,CAAaqY,OAAb,EAAsB5Z,SAAtB,CAAgCjH,KAAnD;;WAEKigB,UAAL,CAAgB,KAAKD,QAArB,IAAiC,KAAKC,UAAL,CAAgB,KAAKD,QAAL,GAAgB,CAAhC,CAAjC,CAJ0C;WAKrCC,UAAL,CAAgB,KAAKD,QAAL,GAAgB,CAAhC,IAAqC,KAAKvO,KAA1C;WACKuO,QAAL,GAAgB,KAAKC,UAAL,CAAgB,KAAKD,QAArB,CAAhB;KANF,MAQO,IAAIc,YAAYF,cAAcI,cAA9B,EAA8C;;WAC9Cd,SAAL,IAAkB,KAAK1X,OAAL,CAAasY,QAAb,EAAuB7Z,SAAvB,CAAiCjH,KAAnD;WACKmgB,UAAL,IAAmB,KAAK3X,OAAL,CAAasY,QAAb,EAAuB7Z,SAAvB,CAAiCjH,KAApD;;WAEKigB,UAAL,CAAgB,KAAKD,QAArB,IAAiC,KAAKC,UAAL,CAAgB,KAAKD,QAAL,GAAgB,CAAhC,CAAjC,CAJmD;WAK9CC,UAAL,CAAgB,KAAKD,QAAL,GAAgB,CAAhC,IAAqC,KAAKvO,KAA1C;WACKuO,QAAL,GAAgB,KAAKC,UAAL,CAAgB,KAAKD,QAArB,CAAhB;KANK,MAQA,IAAI,EAAE,CAACa,OAAD,IAAYD,eAAe,CAA7B,KAAmC,EAAE,CAACE,QAAD,IAAaF,cAAc,KAAKV,SAAlC,CAAvC,EAAqF;;;UAEtFe,WAAWH,QAAf;;UAEIF,cAAc,KAAKV,SAAnB,IAAiCU,gBAAgB,KAAKV,SAArB,IAAkC5K,MAAMzY,CAAN,GAAU,CAAjF,EAAqF;mBACxEgkB,OAAX;;;UAGEK,aAAa,KAAK1Y,OAAL,CAAa,KAAKiJ,KAAlB,EAAyBxK,SAAzB,CAAmCjH,KAAnC,GAA2C,KAAKwI,OAAL,CAAayY,QAAb,EAAuBha,SAAvB,CAAiCjH,KAA7F;WACKwI,OAAL,CAAa,KAAKiJ,KAAlB,EAAyBxK,SAAzB,CAAmCpH,IAAnC,IAA2CyV,MAAMzY,CAAjD;WACK2L,OAAL,CAAa,KAAKiJ,KAAlB,EAAyBxK,SAAzB,CAAmClH,KAAnC,IAA4CuV,MAAMzY,CAAlD;UACMskB,KAAK,KAAK3Y,OAAL,CAAayY,QAAb,EAAuBha,SAAvB,CAAiCjH,KAA5C;WACKwI,OAAL,CAAayY,QAAb,EAAuBha,SAAvB,CAAiCpH,IAAjC,IAAyCyV,MAAMzY,CAAN,GAAUqkB,UAAnD;WACK1Y,OAAL,CAAayY,QAAb,EAAuBha,SAAvB,CAAiClH,KAAjC,GAAyC,KAAKyI,OAAL,CAAayY,QAAb,EAAuBha,SAAvB,CAAiCpH,IAAjC,GAAwCshB,EAAjF;KAbK,MAeA;;WACAthB,IAAL,IAAayV,MAAMzY,CAAnB;;;SAGG8jB,YAAL,GAAoBle,GAApB;YACEgG,MAAF;WACO,IAAP;;CA1IG;;ACXP;;;;;;AAMA,AACA;;AAEA,IAAa2Y,eAAb;2BACc3f,KAAZ,EAAmB;;;YACTtD,GAAR,CAAYsD,KAAZ;;;;;6BAGOA,KALX,EAKkB;;YAERiZ,KAAN,GAAcjZ,MAAME,KAApB;;;YAGM+Y,KAAN,CAAYhY,MAAZ,GAAqBjB,MAAMiZ,KAAN,CAAYtR,MAAZ,CAAmB1G,MAAnB,GAA4BjB,MAAMI,GAAvD;YACM6Y,KAAN,CAAYzT,SAAZ,GAAwBxF,MAAMiZ,KAAN,CAAYtR,MAAZ,CAAmBnC,SAA3C;YACMyT,KAAN,CAAY3T,SAAZ,GAAwBtF,MAAMiZ,KAAN,CAAYtR,MAAZ,CAAmBrC,SAAnB,GAA+BtF,MAAMiZ,KAAN,CAAYhY,MAAZ,CAAmBsE,UAAnB,CAA8B,IAA9B,CAAvD;YACM0T,KAAN,CAAY3T,SAAZ,CAAsBsa,qBAAtB,GAA8C,KAA9C;;;YAGMxf,GAAN,CAAU0C,gBAAV,GAA6B,IAA7B;;;WAGK9C,KAAL,GAAaA,KAAb;;;;6BAGOA,KAtBX,EAsBkB;;UAEVA,MAAMiZ,KAAN,CAAYtR,MAAZ,CAAmB3B,KAAnB,KAA6B,IAAjC,EAAuC;cAC/BiT,KAAN,CAAY3T,SAAZ,CAAsBM,SAAtB,CAAgC,CAAhC,EAAmC,CAAnC,EAAsC5F,MAAMiZ,KAAN,CAAYhY,MAAZ,CAAmB1C,KAAzD,EAAgEyB,MAAMiZ,KAAN,CAAYhY,MAAZ,CAAmBzC,MAAnF;cACMya,KAAN,CAAYtR,MAAZ,CAAmBjF,IAAnB;;;;;yBAIC1C,KA9BP,EA8Bc;;UAENwF,YAAYxF,MAAMiZ,KAAN,CAAYzT,SAAZ,IAAyB,IAAzC;UACIA,aAAa,CAACA,UAAUC,WAA5B,EAAyC;aAClCrD,sBAAL,GAA8BoD,SAA9B;;UAEErB,IAAIqB,aAAa,EAArB;UACIE,gBAAgB1F,MAAMiZ,KAAN,CAAYtT,QAAZ,GAAuB,UAAvB,GAAoC,EAAxD;aACO7H,QAAE,QAAF,EAAY;4CACiB4H,aADjB;0BAEDvB,EAAE/F,IAAlB,iBAAkC+F,EAAEhG,GAApC,mCACkBgG,EAAE5F,KADpB,oBACwC4F,EAAE3F,MAD1C,8CAE6BwB,MAAMiZ,KAAN,CAAYhW,QAFzC,UAFiB;eAKVkB,EAAE5F,KALQ;gBAMT4F,EAAE3F;OANL,CAAP;;;;kCAUYwC,GAhDhB,EAgDqB;UACbiY,QAAQ,KAAKjZ,KAAL,CAAWiZ,KAAvB;UACIA,MAAMtR,MAAN,CAAaiX,aAAb,CAA2B5d,GAA3B,CAAJ,EAAqC;cAC7B2G,MAAN,CAAa3B,KAAb,GAAqB,IAArB;eACO,IAAP;;aAEK,KAAP;;;;;;AC/DJ;;;;AAIA,AACA,AACA,AAEA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AAEA,IAAa6Z,gBAAb;;;;;;;;;;;;;;;;;;;2BAWS7f,KAXT,EAWgB;;;gIACCA,KAAb;WACK+e,aAAL,GAAqB/e,MAAME,KAAN,CAAY6e,aAAjC;WACK/e,KAAL,GAAaA,KAAb;WACKiX,gBAAL,GAAwB,EAAxB;WACK6I,2BAAL,GAAmC,EAAnC;WACKC,iBAAL,GAAyB,EAAzB;WACKC,cAAL,GAAsB,EAAtB;WACKC,eAAL,GAAuB,EAAvB;WACKC,KAAL,GAAa,EAAb;WACKC,WAAL,GAAmB,EAAnB;WACKlQ,IAAL,GAAY,CAAZ;UACMmQ,UAAU,SAAVA,OAAU;eAAM,OAAKC,aAAL,EAAN;OAAhB;WACKC,aAAL,GAAqB;;;aAGZzjB,SAAP,CAAiBZ,UAAjB,EAA6BmkB,OAA7B,CAHmB,EAInBG,OAAO1jB,SAAP,CAAiBX,UAAjB,EAA6BkkB,OAA7B,CAJmB,EAKnBG,OAAO1jB,SAAP,CAAiBV,QAAjB,EAA2BikB,OAA3B,CALmB,EAMnBG,OAAO1jB,SAAP,CAAiBd,KAAjB,EAAwB,YAAM;eACvBykB,QAAL;OADF,CANmB,EASnBD,OAAO1jB,SAAP,CAAiBR,aAAjB,EAAgC,UAAC4e,GAAD,EAAMxe,IAAN,EAAe;eACxCgkB,gBAAL,CAAsBhkB,IAAtB;OADF,CATmB,EAYnB8jB,OAAO1jB,SAAP,CAAiBT,UAAjB,EAA6B,YAAM;eAC5BskB,UAAL;OADF,CAZmB,CAArB;;;;;;;;;;6BAuBO1gB,KA/CX,EA+CkB;WACT+e,aAAL,GAAqB/e,MAAME,KAAN,CAAY6e,aAAjC;;;;;;;;;+BAOS;WACJuB,aAAL,CAAmB1kB,OAAnB,CAA2B;eAAS2kB,OAAOI,WAAP,CAAmBC,KAAnB,CAAT;OAA3B;;;;;;;;;;2BAQK;;;;;;;aAKE9iB,QAAE,4BAAF,EACL;WACOgiB,2BAAL,CAAiCrb,GAAjC,CAAqC3G,OAArC,CADF,EAEE,KAAKqiB,WAAL,CAAiB1b,GAAjB,CAAqB,UAAC9E,CAAD,EAAO;eACnB7B,QAAE+iB,eAAF,EAAe,EAAClZ,QAAQ,OAAKsP,gBAAL,CAAsBtX,CAAtB,CAAT,EAAf,CAAP;OADF,CAFF,EAIM,KAAKsgB,eAJX;;WAMOF,iBAAL,CAAuBtb,GAAvB,CAA2B,mBAAW;eAC7B3G,QAAEia,OAAF,EAAW,EAAC5S,MAAM4S,QAAQ5S,IAAf,EAAqBK,WAAWuS,QAAQvS,SAAxC,EAAX,CAAP;OADF,CANF,CADK,CAAP;;;;;;;;;;;oCAmBc;WACTsb,cAAL;WACKC,qBAAL;WACKC,sBAAL;WACKC,yBAAL;WACKC,eAAL;cACEla,MAAF;;;;;;;;;;iCAQW;UACP5I,OAAO,CAAX;UACI+iB,QAAQ,KAAKlK,gBAAjB;UACImK,KAAK,KAAKjB,WAAd;YACMvkB,OAAN,CAAc,gBAAQ;aACfoK,KAAL,GAAa,IAAb;OADF;WAGK,IAAIrG,IAAI,CAAb,EAAgBA,IAAIwhB,MAAMthB,MAA1B,EAAkCF,GAAlC,EAAuC;YACjC8E,MAAM0c,MAAMC,GAAGzhB,CAAH,CAAN,CAAV;;YAEM+f,KAAKjb,IAAIe,SAAJ,CAAcjH,KAAzB;YACIiH,SAAJ,CAAcpH,IAAd,GAAqBA,IAArB;YACIoH,SAAJ,CAAclH,KAAd,GAAsBF,OAAOshB,EAA7B;eACOjb,IAAIe,SAAJ,CAAclH,KAArB;;WAEG2iB,yBAAL;WACKD,sBAAL;cACErD,KAAF,CAAQziB,SAAS4d,cAAT,CAAwB,oBAAxB,CAAR,EAAuD,IAAvD;cACE9R,MAAF;WACK+Z,qBAAL;;;;;;;;;;4CAQsB;WACjBf,cAAL,GAAsB,EAAtB;UACIoB,KAAK,KAAKjB,WAAd;UACIkB,OAAO,IAAX;UACIpV,KAAK,KAAK8S,aAAd;;UAEIvY,MAAM,EAAV;UACI,CAAJ,IAAS,KAAT;cACEmX,KAAF,CAAQziB,SAAS4d,cAAT,CAAwB,oBAAxB,CAAR,EAAuD;cAC/C,gBAAY;iBACTsI,GAAG3c,GAAH,CAAO,UAACuL,KAAD,EAAW;mBAChBlS,QAAEwgB,cAAF,EAAkB;uBACd+C,KAAKpK,gBADS;qBAEhBjH,KAFgB;0BAGXoR,EAHW;6BAIRnV,EAJQ;mBAKlBzF;aALA,CAAP;WADK,CAAP;;OAFJ;;;;;;;;;;6CAqBuB;;;WAClByZ,eAAL,GAAuB,EAAvB;;;WAGKhJ,gBAAL,CAAsBrb,OAAtB,CAA8B,qBAAa;kBAC/BqI,QAAV,CAAmBrI,OAAnB,CAA2B,iBAAS;cAC9BsI,iBAAiBoM,YAArB,EAAmC;uCACxB3Q,CADwB;kBAE3BuE,MAAMD,QAAN,CAAetE,CAAf,EAAkBU,MAAlB,CAAyB9B,KAAzB,GAAiC,CAArC,EAAwC;oBAClC+iB,eAAepd,MAAMD,QAAN,CAAetE,CAAf,CAAnB;uBACKsgB,eAAL,CAAqBxkB,IAArB,CACEqC,QAAE,KAAF,EAAS;yBACA,eADA;mCAEQqe,UAAUlX,KAAV,CAAgB6C,IAA/B,SAAuCnI,CAFhC;uDAG4BX,KAAKC,KAAL,CAAWkd,UAAU3W,SAAV,CAAoBpH,IAApB,GAA2BkjB,aAAa5d,YAAb,CAA0BtF,IAAhE,CAAnC,yCACW+d,UAAU3W,SAAV,CAAoBrH,GAD/B,mBACgDmjB,aAAa5d,YAAb,CAA0BnF,KAD1E,QAHO;2BAKE,mBAAY;wBACf4G,OAAOjB,MAAMD,QAAN,CAAetE,CAAf,CAAX;yBACKiN,QAAL,GAAgB1I,MAAMyI,QAAtB;wBACI+P,WAAJ,CAAgBvX,IAAhB,EAAsBjB,MAAMD,QAAN,CAAetE,CAAf,EAAkBkI,MAAlB,CAAyByM,WAA/C;;iBARJ,EAUGgN,aAAatQ,KAVhB,CADF;;;;iBAHC,IAAIrR,IAAI,CAAb,EAAgBA,IAAIuE,MAAMD,QAAN,CAAepE,MAAnC,EAA2CF,GAA3C,EAAgD;oBAAvCA,CAAuC;;;mBAmB3CsgB,eAAL,CAAqBxkB,IAArB,CACEqC,QAAE,KAAF,EAAS;qBACA,eADA;+BAEQqe,UAAUlX,KAAV,CAAgB6C,IAA/B,SAFO;mDAG4B9I,KAAKC,KAAL,CAAWkd,UAAU3W,SAAV,CAAoBpH,IAApB,GAA2B8F,MAAMR,YAAN,CAAmBpF,KAA9C,GAAsD,EAAjE,CAAnC,yCACe6d,UAAU3W,SAAV,CAAoBrH,GADnC,qBAHO;uBAKE,mBAAY;oBACfgH,OAAOgX,UAAUlX,KAArB;qBACK2H,QAAL,GAAgB1I,MAAMyI,QAAtB;oBACIqD,QAAQ9L,MAAMe,KAAN,CAAYuL,MAAZ,CAAmB3Q,MAA/B;oBACI6c,WAAJ,CAAgBvX,IAAhB,EAAsB6K,KAAtB;;aATJ,EAWG,GAXH,CADF;;SArBJ;OADF;;;;;;;;;;;;qCAgDe;;;UACX,CAAC,KAAK3P,MAAV,EAAkB,OAAO,EAAP,CADH;UAEXoc,IAAI,KAAKxc,QAAL,CAAc8G,OAAd,CAAsBlH,MAA9B;UACIiR,UAAU9R,KAAKC,KAAL,CAAW,KAAKoB,MAAL,CAAY9B,KAAZ,GAAoB,GAApB,GAA0Bke,CAArC,CAAd;gBACU,CAAV,CAJe;UAKX8E,cAAcviB,KAAKC,KAAL,CAAW,KAAKoB,MAAL,CAAY7B,MAAZ,GAAqB,IAAhC,CAAlB;UACIgjB,SAASxiB,KAAKC,KAAL,CAAW6R,UAAU,GAArB,CAAb;WACKmG,gBAAL,GAAwB,KAAKhX,QAAL,CAAc8G,OAAd,CAAsBtC,GAAtB,CAA0B,UAACQ,KAAD,EAAQ2Y,QAAR,EAAqB;eAChEuC,WAAL,CAAiB1kB,IAAjB,CAAsBmiB,QAAtB;YACIxL,eAAe,IAAIlU,MAAJ,CAAW;gBACtBsjB,MADsB;eAEvB,EAFuB;iBAGrBxiB,KAAKC,KAAL,CAAW,OAAKoB,MAAL,CAAY9B,KAAvB,CAHqB;kBAIpBgjB;SAJS,CAAnB;YAMIpF,YAAY,IAAIwD,MAAJ,CAAoB;uBACrB1a,KADqB;wBAEpBmN,YAFoB;oBAGxB,OAAKnS,QAHmB;uBAIrB2d,QAJqB;uBAKpB,OAAK3d,QAAL,CAAcqS,WAAd,CAA0BsL,QAA1B;SALA,CAAhB;cAOMzB,SAAN,GAAkBA,SAAlB,CAfqE;kBAgB3DA,UAAU3W,SAAV,CAAoBjH,KAApB,GAA4BuS,OAAtC;eACOqL,SAAP;OAjBsB,CAAxB;;;;;;;;;;sCA2BgB;WACX4D,iBAAL,GAAyB,KAAK9I,gBAAL,CAAsBxS,GAAtB,CAA0B,iBAAS;YACtD0X,YAAY,IAAItE,OAAJ,EAAhB;kBACU1S,IAAV,GAAiBF,MAAME,IAAvB;kBACUK,SAAV,GAAsBP,MAAMO,SAA5B;eACO2W,SAAP;OAJuB,CAAzB;;;;;;;;;;;;gDAe0B;UACtB,CAAC,KAAK9b,MAAV,EAAkB,OAAO,EAAP,CADQ;UAEtBkhB,cAAcviB,KAAKC,KAAL,CAAW,KAAKoB,MAAL,CAAY7B,MAAZ,GAAqB,IAAhC,CAAlB;UACIie,IAAI,KAAKxF,gBAAL,CAAsBpX,MAA9B;WACKigB,2BAAL,GAAmC,EAAnC;WACK,IAAIngB,IAAI,CAAb,EAAgBA,IAAI8c,IAAI,CAAxB,EAA2B9c,GAA3B,EAAgC;YAC1BvB,OAAO,KAAK6Y,gBAAL,CAAsBtX,CAAtB,CAAX;YACIrB,QAAQ,KAAK2Y,gBAAL,CAAsBtX,IAAI,CAA1B,CAAZ;YACIyS,eAAe,IAAIlU,MAAJ,CAAW;gBACtBc,KAAKC,KAAL,CAAWb,KAAKoH,SAAL,CAAepH,IAAf,GAAsBA,KAAK2K,QAAL,CAAcrF,YAAd,CAA2BpF,KAA5D,CADsB;iBAErBU,KAAKC,KAAL,CAAWX,MAAMkH,SAAN,CAAgBpH,IAAhB,GAAuBE,MAAMyK,QAAN,CAAerF,YAAf,CAA4BtF,IAA9D,CAFqB;eAGvB,EAHuB;kBAIpBmjB;SAJS,CAAnB;YAMIpF,YAAY,IAAIsF,iBAAJ,CAAqB;4BACjB,CAACrjB,IAAD,EAAOE,KAAP,CADiB;oBAEzB,KAAK2B,QAFoB;wBAGrBmS;SAHA,CAAhB;aAKK0N,2BAAL,CAAiCrkB,IAAjC,CAAsC0gB,SAAtC;;;;;;;;;;;;;;+BAYO;WACJlF,gBAAL,CAAsBrb,OAAtB,CAA8B,gBAAQ;aAC/BqJ,KAAL,CAAWgD,IAAX,CAAgBnC,OAAhB,GAA0BlB,KAAKK,KAAL,CAAWgD,IAAX,CAAgBC,IAA1C;aACKhD,aAAL,GAAqB,GAArB;aACKC,IAAL,CAAUW,OAAV,GAAoB,QAApB;OAHF;SAKGlK,OAAH,CAAWmZ,IAAX,CAAgB7Z,SAAS4Z,sBAAT,CAAgC,aAAhC,CAAhB,EAAgE,cAAM;WACjEhS,gBAAH,CAAoBJ,IAApB;OADF;cAGEsE,MAAF;;;;;;;;;;;qCASevK,IArTnB,EAqTyB;;WAEhBwa,gBAAL,CAAsBxa,KAAKmhB,QAA3B,EAAqClL,OAArC;cACE1L,MAAF;WACK0Z,UAAL;;;;EAxTMljB,IAAIuC,UAAJ,EACLsH,IADK,CACA1E,sBADA,CADV;;;;;;;;;ACdA,CAAC,SAAS,IAAI,EAAE,OAAO;AACvB;;CAEC,IAAI,OAAOZ,SAAM,KAAK,UAAU,IAAIA,SAAM,CAAC,GAAG;CAC9C;;EAECA,SAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;EACpB;MACI,AAAI,AAA4D,AACrE;;;;EAIC,cAAc,GAAG,OAAO,EAAE,CAAC;EAC3B,AAKA;CACD,CAAClG,cAAI,EAAE;AACR;CACC,YAAY,CAAC;;CAEb,IAAI,MAAM,GAAG,CAAC,WAAW;;;;;EAKxB,IAAI,OAAO,IAAI,KAAK,WAAW,EAAE,EAAE,OAAO,IAAI,CAAC,EAAE;EACjD,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE,EAAE,OAAO,MAAM,CAAC,EAAE;EACrD,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE,EAAE,OAAO,MAAM,CAAC,EAAE;;;EAGrD,OAAO,EAAE,CAAC;EACV,GAAG,CAAC;;;CAGL,IAAI,SAAS,GAAG,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC,CAAC,MAAM,CAAC,WAAW;EACvD,cAAc,GAAG,SAAS,IAAI,yBAAyB,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;EACpF,WAAW,GAAG,KAAK,EAAE,gBAAgB,CAAC;CACvC,IAAI,OAAO,GAAG,EAAE,EAAE,eAAe,GAAG,CAAC,CAAC;;CAEtC,IAAI,IAAI,GAAG,EAAE,CAAC;;CAEd,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;CACvB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;;CAEzB,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;CAC1C,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;CACxC,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;CAChC,IAAI,CAAC,cAAc,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;CAC9D,IAAI,CAAC,iBAAiB,GAAG,CAAC,SAAS,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;CACvD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;;;CAGxB,IAAI,CAAC,cAAc,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;CACvC,IAAI,CAAC,eAAe,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC;CACvC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;;;CAG5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;CACrB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;CACjC,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;CACvC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;CACjC,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;CACrC,IAAI,CAAC,sBAAsB,GAAG,sBAAsB,CAAC;;CAErD,IAAI,MAAM,CAAC,MAAM;CACjB;EACC,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;EACtB,CAAC,CAAC,EAAE,CAAC,KAAK,GAAG,SAAS,OAAO;EAC7B;GACC,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,EAAE,CAAC;GAClC,IAAI,KAAK,GAAG,EAAE,CAAC;;GAEf,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG;GACtB;IACC,IAAI,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,KAAK,OAAO;WAC1D,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,KAAK,MAAM;WAC7C,MAAM,CAAC,UAAU,CAAC;;IAEzB,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC;KACvD,OAAO,IAAI,CAAC;;IAEb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE;IAC1C;KACC,KAAK,CAAC,IAAI,CAAC;MACV,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;MACnB,SAAS,EAAE,IAAI;MACf,cAAc,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC;MACpC,CAAC,CAAC;KACH;IACD,CAAC,CAAC;;GAEH,aAAa,EAAE,CAAC;GAChB,OAAO,IAAI,CAAC;;;GAGZ,SAAS,aAAa;GACtB;IACC,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC;IACtB;KACC,IAAI,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC;MAC/B,OAAO,CAAC,QAAQ,EAAE,CAAC;KACpB,OAAO;KACP;;IAED,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;;IAEjB,IAAI,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC;IAC9B;KACC,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC;;KAEnD,IAAI,OAAO,QAAQ,KAAK,QAAQ;KAChC;MACC,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO;MAC/B;OACC,KAAK,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;OAC1D,OAAO;OACP;WACI,IAAI,QAAQ,CAAC,MAAM,KAAK,MAAM;MACnC;OACC,YAAY,EAAE,CAAC;OACf,OAAO;OACP;WACI,IAAI,OAAO,QAAQ,CAAC,MAAM,KAAK,QAAQ;OAC3C,CAAC,CAAC,cAAc,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,cAAc,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;MAChE;UACI,IAAI,QAAQ,KAAK,MAAM;KAC5B;MACC,YAAY,EAAE,CAAC;MACf,OAAO;MACP;KACD;;;IAGD,IAAI,gBAAgB,GAAG,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC;IACjD,CAAC,CAAC,cAAc,CAAC,QAAQ,GAAG,SAAS,OAAO;IAC5C;KACC,IAAI,UAAU,CAAC,gBAAgB,CAAC;MAC/B,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC;KAChD,YAAY,EAAE,CAAC;KACf,CAAC;;IAEF,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC;IACrC;;GAED,SAAS,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM;GACvC;IACC,IAAI,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC;KAC5B,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;IACjD;;GAED,SAAS,YAAY;GACrB;IACC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACnB,aAAa,EAAE,CAAC;IAChB;GACD,CAAC;EACF;;;CAGD,IAAI,cAAc;CAClB;EACC,MAAM,CAAC,SAAS,GAAG,2BAA2B,CAAC;EAC/C;MACI,IAAI,IAAI,CAAC,iBAAiB;CAC/B;EACC,gBAAgB,GAAG,aAAa,EAAE,CAAC;;;EAGnC,IAAI,CAAC,QAAQ,CAAC,IAAI;EAClB;;GAEC,WAAW,GAAG,IAAI,CAAC;GACnB;;EAED;GACC,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,WAAW;IACxD,WAAW,GAAG,IAAI,CAAC;IACnB,EAAE,IAAI,CAAC,CAAC;GACT;EACD;;;;;CAKD,SAAS,SAAS,CAAC,MAAM,EAAE,OAAO;CAClC;EACC,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;EACxB,IAAI,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,KAAK,CAAC;EACnD,IAAI,UAAU,CAAC,aAAa,CAAC,EAAE;GAC9B,OAAO,CAAC,qBAAqB,GAAG,aAAa,CAAC;;GAE9C,aAAa,GAAG,EAAE,CAAC;GACnB;EACD,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC;;EAEtC,IAAI,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,iBAAiB;EAC5C;GACC,IAAI,CAAC,GAAG,SAAS,EAAE,CAAC;;GAEpB,CAAC,CAAC,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC;GAC1B,CAAC,CAAC,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC;GAC5B,CAAC,CAAC,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC;GAClC,CAAC,CAAC,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC;;GAE5B,OAAO,CAAC,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;GACxC,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GAC1C,OAAO,CAAC,QAAQ,GAAG,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;GAChD,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GAC1C,OAAO,OAAO,CAAC,MAAM,CAAC;;GAEtB,CAAC,CAAC,WAAW,CAAC;IACb,KAAK,EAAE,MAAM;IACb,MAAM,EAAE,OAAO;IACf,QAAQ,EAAE,CAAC,CAAC,EAAE;IACd,CAAC,CAAC;;GAEH,OAAO;GACP;;EAED,IAAI,QAAQ,GAAG,IAAI,CAAC;EACpB,IAAI,OAAO,MAAM,KAAK,QAAQ;EAC9B;GACC,IAAI,OAAO,CAAC,QAAQ;IACnB,QAAQ,GAAG,IAAI,eAAe,CAAC,OAAO,CAAC,CAAC;;IAExC,QAAQ,GAAG,IAAI,cAAc,CAAC,OAAO,CAAC,CAAC;GACxC;OACI,IAAI,MAAM,CAAC,QAAQ,KAAK,IAAI,IAAI,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC;EACrF;GACC,QAAQ,GAAG,IAAI,sBAAsB,CAAC,OAAO,CAAC,CAAC;GAC/C;OACI,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,MAAM,YAAY,IAAI,KAAK,MAAM,YAAY,MAAM;GAC3E,QAAQ,GAAG,IAAI,YAAY,CAAC,OAAO,CAAC,CAAC;;EAEtC,OAAO,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;EAC/B;;;;;;;CAOD,SAAS,SAAS,CAAC,MAAM,EAAE,OAAO;CAClC;;;;EAIC,IAAI,OAAO,GAAG,KAAK,CAAC;;;EAGpB,IAAI,YAAY,GAAG,IAAI,CAAC;;;EAGxB,IAAI,UAAU,GAAG,GAAG,CAAC;;;EAGrB,IAAI,QAAQ,GAAG,MAAM,CAAC;;;EAGtB,IAAI,UAAU,GAAG,GAAG,CAAC;;EAErB,YAAY,EAAE,CAAC;;EAEf,IAAI,cAAc,GAAG,IAAI,MAAM,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;;EAEjD,IAAI,OAAO,MAAM,KAAK,QAAQ;GAC7B,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;EAE7B,IAAI,MAAM,YAAY,KAAK;EAC3B;GACC,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC,YAAY,KAAK;IAC/C,OAAO,SAAS,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC3B,IAAI,OAAO,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ;IACrC,OAAO,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;GACjD;OACI,IAAI,OAAO,MAAM,KAAK,QAAQ;EACnC;GACC,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,QAAQ;IAClC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;GAEvC,IAAI,MAAM,CAAC,IAAI,YAAY,KAAK;GAChC;IACC,IAAI,CAAC,MAAM,CAAC,MAAM;KACjB,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;;IAEpD,IAAI,CAAC,MAAM,CAAC,MAAM;KACjB,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,KAAK;QAC7C,MAAM,CAAC,MAAM;QACb,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;;IAE/B,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,KAAK,CAAC,IAAI,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ;KAC3E,MAAM,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC7B;;GAED,OAAO,SAAS,CAAC,MAAM,CAAC,MAAM,IAAI,EAAE,EAAE,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;GACzD;;;EAGD,MAAM,mDAAmD,CAAC;;;EAG1D,SAAS,YAAY;EACrB;GACC,IAAI,OAAO,OAAO,KAAK,QAAQ;IAC9B,OAAO;;GAER,IAAI,OAAO,OAAO,CAAC,SAAS,KAAK,QAAQ;OACrC,OAAO,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC;OAC9B,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;GACzD;IACC,UAAU,GAAG,OAAO,CAAC,SAAS,CAAC;IAC/B;;GAED,IAAI,OAAO,OAAO,CAAC,MAAM,KAAK,SAAS;OACnC,OAAO,CAAC,MAAM,YAAY,KAAK;IAClC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;;GAE1B,IAAI,OAAO,OAAO,CAAC,OAAO,KAAK,QAAQ;IACtC,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC;;GAE5B,IAAI,OAAO,OAAO,CAAC,SAAS,KAAK,QAAQ;IACxC,UAAU,GAAG,OAAO,CAAC,SAAS,CAAC;;GAEhC,IAAI,OAAO,OAAO,CAAC,MAAM,KAAK,SAAS;IACtC,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC;GAC/B;;;;EAID,SAAS,UAAU,CAAC,GAAG;EACvB;GACC,IAAI,OAAO,GAAG,KAAK,QAAQ;IAC1B,OAAO,EAAE,CAAC;GACX,IAAI,IAAI,GAAG,EAAE,CAAC;GACd,KAAK,IAAI,GAAG,IAAI,GAAG;IAClB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;GAChB,OAAO,IAAI,CAAC;GACZ;;;EAGD,SAAS,SAAS,CAAC,MAAM,EAAE,IAAI;EAC/B;GACC,IAAI,GAAG,GAAG,EAAE,CAAC;;GAEb,IAAI,OAAO,MAAM,KAAK,QAAQ;IAC7B,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;GAC7B,IAAI,OAAO,IAAI,KAAK,QAAQ;IAC3B,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;;GAEzB,IAAI,SAAS,GAAG,MAAM,YAAY,KAAK,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;GAC7D,IAAI,gBAAgB,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,YAAY,KAAK,CAAC,CAAC;;;GAGnD,IAAI,SAAS,IAAI,YAAY;GAC7B;IACC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE;IACtC;KACC,IAAI,CAAC,GAAG,CAAC;MACR,GAAG,IAAI,UAAU,CAAC;KACnB,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KAC1B;IACD,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC;KAClB,GAAG,IAAI,QAAQ,CAAC;IACjB;;;GAGD,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE;GAC1C;IACC,IAAI,MAAM,GAAG,SAAS,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;;IAE1D,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,EAAE,GAAG,EAAE;IACrC;KACC,IAAI,GAAG,GAAG,CAAC;MACV,GAAG,IAAI,UAAU,CAAC;KACnB,IAAI,MAAM,GAAG,SAAS,IAAI,gBAAgB,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;KAC/D,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;KACpC;;IAED,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC;KACxB,GAAG,IAAI,QAAQ,CAAC;IACjB;;GAED,OAAO,GAAG,CAAC;GACX;;;EAGD,SAAS,IAAI,CAAC,GAAG,EAAE,GAAG;EACtB;GACC,IAAI,OAAO,GAAG,KAAK,WAAW,IAAI,GAAG,KAAK,IAAI;IAC7C,OAAO,EAAE,CAAC;;GAEX,GAAG,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,cAAc,EAAE,UAAU,GAAG,UAAU,CAAC,CAAC;;GAEtE,IAAI,WAAW,GAAG,CAAC,OAAO,OAAO,KAAK,SAAS,IAAI,OAAO;WAClD,OAAO,YAAY,KAAK,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC;UAC1C,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,cAAc,CAAC;UAChC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;UAC5B,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG;UACrB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC;;GAE1C,OAAO,WAAW,GAAG,UAAU,GAAG,GAAG,GAAG,UAAU,GAAG,GAAG,CAAC;GACzD;;EAED,SAAS,MAAM,CAAC,GAAG,EAAE,UAAU;EAC/B;GACC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE;IACzC,IAAI,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KAClC,OAAO,IAAI,CAAC;GACd,OAAO,KAAK,CAAC;GACb;EACD;;;CAGD,SAAS,aAAa,CAAC,MAAM;CAC7B;EACC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;EACpB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;EACvB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;EACxB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;EACnB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;EACpB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;EACvB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;EACnB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;EAChB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;EACvB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;EACzB,IAAI,CAAC,gBAAgB,GAAG;GACvB,IAAI,EAAE,EAAE;GACR,MAAM,EAAE,EAAE;GACV,IAAI,EAAE,EAAE;GACR,CAAC;EACF,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;;EAEjC,IAAI,CAAC,UAAU,GAAG,SAAS,KAAK,EAAE,WAAW;EAC7C;;GAEC,IAAI,IAAI,CAAC,YAAY,IAAI,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;GAClE;IACC,IAAI,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;IACzD,IAAI,aAAa,KAAK,SAAS;KAC9B,KAAK,GAAG,aAAa,CAAC;IACvB;GACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;;;GAG1B,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;GAC1C,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;;GAEvB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;GAE9E,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;IAClD,OAAO;;GAER,IAAI,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;;GAEpC,IAAI,CAAC,IAAI,CAAC,SAAS;GACnB;IACC,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;IACrE,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAC5B;;GAED,IAAI,OAAO,IAAI,OAAO,CAAC,IAAI;IAC1B,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;;GAEvC,IAAI,wBAAwB,GAAG,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;;GAElH,IAAI,cAAc;GAClB;IACC,MAAM,CAAC,WAAW,CAAC;KAClB,OAAO,EAAE,OAAO;KAChB,QAAQ,EAAE,IAAI,CAAC,SAAS;KACxB,QAAQ,EAAE,wBAAwB;KAClC,CAAC,CAAC;IACH;QACI,IAAI,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW;GACvD;IACC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IAC1C,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;KAClD,OAAO;IACR,OAAO,GAAG,SAAS,CAAC;IACpB,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;IAClC;;GAED,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;IAC9C,IAAI,CAAC,gBAAgB,CAAC,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAC7E,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IACnF,IAAI,CAAC,gBAAgB,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;IAC1C;;GAED,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,wBAAwB,IAAI,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;IAC7H,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IAC1D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACvB;;GAED,IAAI,CAAC,wBAAwB,KAAK,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;IAClE,IAAI,CAAC,UAAU,EAAE,CAAC;;GAEnB,OAAO,OAAO,CAAC;GACf,CAAC;;EAEF,IAAI,CAAC,UAAU,GAAG,SAAS,KAAK;EAChC;GACC,IAAI,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;IACjC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACtB,IAAI,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK;GAC7C;IACC,MAAM,CAAC,WAAW,CAAC;KAClB,QAAQ,EAAE,IAAI,CAAC,SAAS;KACxB,KAAK,EAAE,KAAK;KACZ,QAAQ,EAAE,KAAK;KACf,CAAC,CAAC;IACH;GACD,CAAC;;EAEF,SAAS,aAAa,CAAC,MAAM;EAC7B;;GAEC,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;GAC9B,UAAU,CAAC,SAAS,GAAG,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;GACtD,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK;IAChC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC;GAC7B,IAAI,CAAC,OAAO,GAAG,IAAI,YAAY,CAAC,UAAU,CAAC,CAAC;GAC5C,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;GAC7B,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;GAC1B;EACD;;;CAGD,SAAS,eAAe,CAAC,MAAM;CAC/B;EACC,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;EACtB,IAAI,CAAC,MAAM,CAAC,SAAS;GACpB,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC;EACzC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;;EAEjC,IAAI,GAAG,CAAC;;EAER,IAAI,SAAS;EACb;GACC,IAAI,CAAC,UAAU,GAAG;GAClB;IACC,IAAI,CAAC,UAAU,EAAE,CAAC;IAClB,IAAI,CAAC,YAAY,EAAE,CAAC;IACpB,CAAC;GACF;;EAED;GACC,IAAI,CAAC,UAAU,GAAG;GAClB;IACC,IAAI,CAAC,UAAU,EAAE,CAAC;IAClB,CAAC;GACF;;EAED,IAAI,CAAC,MAAM,GAAG,SAAS,GAAG;EAC1B;GACC,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;GAClB,IAAI,CAAC,UAAU,EAAE,CAAC;GAClB,CAAC;;EAEF,IAAI,CAAC,UAAU,GAAG;EAClB;GACC,IAAI,IAAI,CAAC,SAAS;GAClB;IACC,IAAI,CAAC,YAAY,EAAE,CAAC;IACpB,OAAO;IACP;;GAED,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;;GAE3B,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe;GAChC;IACC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;IACnD;;GAED,IAAI,CAAC,SAAS;GACd;IACC,GAAG,CAAC,MAAM,GAAG,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;IACnD,GAAG,CAAC,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IACnD;;GAED,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,CAAC;;GAEzC,IAAI,IAAI,CAAC,OAAO,CAAC,sBAAsB;GACvC;IACC,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC;;IAElD,KAAK,IAAI,UAAU,IAAI,OAAO;IAC9B;KACC,GAAG,CAAC,gBAAgB,CAAC,UAAU,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;KACtD;IACD;;GAED,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS;GAC1B;IACC,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,CAAC,CAAC;IACnD,GAAG,CAAC,gBAAgB,CAAC,OAAO,EAAE,QAAQ,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;IAClE,GAAG,CAAC,gBAAgB,CAAC,eAAe,EAAE,iBAAiB,CAAC,CAAC;IACzD;;GAED,IAAI;IACH,GAAG,CAAC,IAAI,EAAE,CAAC;IACX;GACD,OAAO,GAAG,EAAE;IACX,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IAC9B;;GAED,IAAI,SAAS,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC;IAChC,IAAI,CAAC,WAAW,EAAE,CAAC;;IAEnB,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;GACvC,CAAC;;EAEF,IAAI,CAAC,YAAY,GAAG;EACpB;GACC,IAAI,GAAG,CAAC,UAAU,KAAK,CAAC;IACvB,OAAO;;GAER,IAAI,GAAG,CAAC,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG;GACzC;IACC,IAAI,CAAC,WAAW,EAAE,CAAC;IACnB,OAAO;IACP;;GAED,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;GAC3E,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;GAClC,CAAC;;EAEF,IAAI,CAAC,WAAW,GAAG,SAAS,YAAY;EACxC;GACC,IAAI,SAAS,GAAG,GAAG,CAAC,UAAU,IAAI,YAAY,CAAC;GAC/C,IAAI,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;GACtC,CAAC;;EAEF,SAAS,WAAW,CAAC,GAAG;EACxB;GACC,IAAI,YAAY,GAAG,GAAG,CAAC,iBAAiB,CAAC,eAAe,CAAC,CAAC;GAC1D,IAAI,YAAY,KAAK,IAAI,EAAE;IAC1B,OAAO,CAAC,CAAC,CAAC;IACV;GACD,OAAO,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;GACxE;EACD;CACD,eAAe,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;CACnE,eAAe,CAAC,SAAS,CAAC,WAAW,GAAG,eAAe,CAAC;;;CAGxD,SAAS,YAAY,CAAC,MAAM;CAC5B;EACC,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;EACtB,IAAI,CAAC,MAAM,CAAC,SAAS;GACpB,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;EACxC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;;EAEjC,IAAI,MAAM,EAAE,KAAK,CAAC;;;;EAIlB,IAAI,gBAAgB,GAAG,OAAO,UAAU,KAAK,WAAW,CAAC;;EAEzD,IAAI,CAAC,MAAM,GAAG,SAAS,IAAI;EAC3B;GACC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;GACnB,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,QAAQ,CAAC;;GAExD,IAAI,gBAAgB;GACpB;IACC,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;IAC1B,MAAM,CAAC,MAAM,GAAG,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;IACtD,MAAM,CAAC,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IACtD;;IAEA,MAAM,GAAG,IAAI,cAAc,EAAE,CAAC;;GAE/B,IAAI,CAAC,UAAU,EAAE,CAAC;GAClB,CAAC;;EAEF,IAAI,CAAC,UAAU,GAAG;EAClB;GACC,IAAI,CAAC,IAAI,CAAC,SAAS,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;IACtF,IAAI,CAAC,UAAU,EAAE,CAAC;GACnB,CAAC;;EAEF,IAAI,CAAC,UAAU,GAAG;EAClB;GACC,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;GACxB,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS;GAC1B;IACC,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC3E,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;IAC5C;GACD,IAAI,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;GAC1D,IAAI,CAAC,gBAAgB;IACpB,IAAI,CAAC,YAAY,CAAC,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;GAChD,CAAC;;EAEF,IAAI,CAAC,YAAY,GAAG,SAAS,KAAK;EAClC;;GAEC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;GACtC,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;GAC5E,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;GACrC,CAAC;;EAEF,IAAI,CAAC,WAAW,GAAG;EACnB;GACC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;GAC9B,CAAC;;EAEF;CACD,YAAY,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;CAChE,YAAY,CAAC,SAAS,CAAC,WAAW,GAAG,YAAY,CAAC;;;CAGlD,SAAS,cAAc,CAAC,MAAM;CAC9B;EACC,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;EACtB,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;;EAEjC,IAAI,SAAS,CAAC;EACd,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;EACxB;GACC,SAAS,GAAG,CAAC,CAAC;GACd,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC;GACzB,CAAC;EACF,IAAI,CAAC,UAAU,GAAG;EAClB;GACC,IAAI,IAAI,CAAC,SAAS,EAAE,OAAO;GAC3B,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;GAClC,IAAI,KAAK,GAAG,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,SAAS,CAAC;GACzD,SAAS,GAAG,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;GAC/C,IAAI,CAAC,SAAS,GAAG,CAAC,SAAS,CAAC;GAC5B,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;GAC9B,CAAC;EACF;CACD,cAAc,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;CACnE,cAAc,CAAC,SAAS,CAAC,WAAW,GAAG,cAAc,CAAC;;;CAGtD,SAAS,sBAAsB,CAAC,MAAM;CACtC;EACC,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;;EAEtB,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;;EAEjC,IAAI,KAAK,GAAG,EAAE,CAAC;EACf,IAAI,WAAW,GAAG,IAAI,CAAC;EACvB,IAAI,cAAc,GAAG,KAAK,CAAC;;EAE3B,IAAI,CAAC,KAAK,GAAG;EACb;GACC,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;GACrD,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;GACpB,CAAC;;EAEF,IAAI,CAAC,MAAM,GAAG;EACd;GACC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;GACtD,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;GACrB,CAAC;;EAEF,IAAI,CAAC,MAAM,GAAG,SAAS,MAAM;EAC7B;GACC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;GAErB,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;GACzC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;GACvC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;GAC3C,CAAC;;EAEF,IAAI,CAAC,gBAAgB,GAAG;EACxB;GACC,IAAI,cAAc,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;IACzC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACtB;GACD,CAAC;;EAEF,IAAI,CAAC,UAAU,GAAG;EAClB;GACC,IAAI,CAAC,gBAAgB,EAAE,CAAC;GACxB,IAAI,KAAK,CAAC,MAAM;GAChB;IACC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;IAC/B;;GAED;IACC,WAAW,GAAG,IAAI,CAAC;IACnB;GACD,CAAC;;EAEF,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,SAAS,KAAK;EAC9C;GACC;GACA;IACC,KAAK,CAAC,IAAI,CAAC,OAAO,KAAK,KAAK,QAAQ,GAAG,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;;IAEtF,IAAI,WAAW;IACf;KACC,WAAW,GAAG,KAAK,CAAC;KACpB,IAAI,CAAC,gBAAgB,EAAE,CAAC;KACxB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;KAC/B;IACD;GACD,OAAO,KAAK;GACZ;IACC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACzB;GACD,EAAE,IAAI,CAAC,CAAC;;EAET,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC,SAAS,KAAK;EAC/C;GACC,IAAI,CAAC,cAAc,EAAE,CAAC;GACtB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;GACvB,EAAE,IAAI,CAAC,CAAC;;EAET,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC;EAC/B;GACC,IAAI,CAAC,cAAc,EAAE,CAAC;GACtB,cAAc,GAAG,IAAI,CAAC;GACtB,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;GACrB,EAAE,IAAI,CAAC,CAAC;;EAET,IAAI,CAAC,cAAc,GAAG,YAAY,CAAC;EACnC;GACC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;GACrD,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;GACnD,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;GACvD,EAAE,IAAI,CAAC,CAAC;EACT;CACD,sBAAsB,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;CAC1E,sBAAsB,CAAC,SAAS,CAAC,WAAW,GAAG,sBAAsB,CAAC;;;;CAItE,SAAS,YAAY,CAAC,OAAO;CAC7B;;EAEC,IAAI,KAAK,GAAG,8CAA8C,CAAC;;EAE3D,IAAI,IAAI,GAAG,IAAI,CAAC;EAChB,IAAI,YAAY,GAAG,CAAC,CAAC;EACrB,IAAI,MAAM,CAAC;EACX,IAAI,OAAO,CAAC;EACZ,IAAI,OAAO,GAAG,KAAK,CAAC;EACpB,IAAI,QAAQ,GAAG,KAAK,CAAC;EACrB,IAAI,eAAe,CAAC;EACpB,IAAI,OAAO,GAAG,EAAE,CAAC;EACjB,IAAI,QAAQ,GAAG;GACd,IAAI,EAAE,EAAE;GACR,MAAM,EAAE,EAAE;GACV,IAAI,EAAE,EAAE;GACR,CAAC;;EAEF,IAAI,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC;EAC5B;GACC,IAAI,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC;GAC5B,OAAO,CAAC,IAAI,GAAG,SAAS,OAAO;GAC/B;IACC,QAAQ,GAAG,OAAO,CAAC;;IAEnB,IAAI,cAAc,EAAE;KACnB,cAAc,EAAE,CAAC;;IAElB;KACC,cAAc,EAAE,CAAC;;;KAGjB,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC;MAC7B,OAAO;;KAER,YAAY,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;KACpC,IAAI,OAAO,CAAC,OAAO,IAAI,YAAY,GAAG,OAAO,CAAC,OAAO;MACpD,OAAO,CAAC,KAAK,EAAE,CAAC;;MAEhB,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;KAC1B;IACD,CAAC;GACF;;;;;;;EAOD,IAAI,CAAC,KAAK,GAAG,SAAS,KAAK,EAAE,SAAS,EAAE,aAAa;EACrD;GACC,IAAI,CAAC,OAAO,CAAC,OAAO;IACnB,OAAO,CAAC,OAAO,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;;GAE3C,eAAe,GAAG,KAAK,CAAC;GACxB,IAAI,CAAC,OAAO,CAAC,SAAS;GACtB;IACC,IAAI,UAAU,GAAG,cAAc,CAAC,KAAK,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,cAAc,CAAC,CAAC;IAChF,IAAI,UAAU,CAAC,UAAU;KACxB,OAAO,CAAC,SAAS,GAAG,UAAU,CAAC,aAAa,CAAC;;IAE9C;KACC,eAAe,GAAG,IAAI,CAAC;KACvB,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC;KAC1C;IACD,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;IAC5C;QACI,GAAG,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC;GACrC;IACC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC7C,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;IAC5C;;GAED,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;GACjC,IAAI,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM;IACpC,YAAY,CAAC,OAAO,EAAE,CAAC;;GAExB,MAAM,GAAG,KAAK,CAAC;GACf,OAAO,GAAG,IAAI,MAAM,CAAC,YAAY,CAAC,CAAC;GACnC,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,SAAS,EAAE,aAAa,CAAC,CAAC;GAC3D,cAAc,EAAE,CAAC;GACjB,OAAO,OAAO,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,IAAI,QAAQ,IAAI,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;GACxF,CAAC;;EAEF,IAAI,CAAC,MAAM,GAAG;EACd;GACC,OAAO,OAAO,CAAC;GACf,CAAC;;EAEF,IAAI,CAAC,KAAK,GAAG;EACb;GACC,OAAO,GAAG,IAAI,CAAC;GACf,OAAO,CAAC,KAAK,EAAE,CAAC;GAChB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC;GAC/C,CAAC;;EAEF,IAAI,CAAC,MAAM,GAAG;EACd;GACC,OAAO,GAAG,KAAK,CAAC;GAChB,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;GACvC,CAAC;;EAEF,IAAI,CAAC,OAAO,GAAG;EACf;GACC,OAAO,QAAQ,CAAC;GAChB,CAAC;;EAEF,IAAI,CAAC,KAAK,GAAG;EACb;GACC,QAAQ,GAAG,IAAI,CAAC;GAChB,OAAO,CAAC,KAAK,EAAE,CAAC;GAChB,QAAQ,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;GAC7B,IAAI,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC;IAC/B,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;GAC5B,MAAM,GAAG,EAAE,CAAC;GACZ,CAAC;;EAEF,SAAS,cAAc;EACvB;GACC,IAAI,QAAQ,IAAI,eAAe;GAC/B;IACC,QAAQ,CAAC,WAAW,EAAE,uBAAuB,EAAE,6DAA6D,GAAG,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,CAAC;IAC7I,eAAe,GAAG,KAAK,CAAC;IACxB;;GAED,IAAI,OAAO,CAAC,cAAc;GAC1B;IACC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;KAC5C,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;MAC9D,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IAC/B;;GAED,IAAI,cAAc,EAAE;IACnB,gBAAgB,EAAE,CAAC;;GAEpB,OAAO,2BAA2B,EAAE,CAAC;GACrC;;EAED,SAAS,cAAc;EACvB;GACC,OAAO,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC;GAC9C;;EAED,SAAS,gBAAgB;EACzB;GACC,IAAI,CAAC,QAAQ;IACZ,OAAO;GACR,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,cAAc,EAAE,IAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;IAChE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE;IAChD;KACC,IAAI,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;KAEjC,IAAI,OAAO,CAAC,WAAW,EAAE;MACxB,MAAM,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;MACvB;;KAED,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KACrB;GACF,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;GAC3B;;EAED,SAAS,wBAAwB,CAAC,KAAK,EAAE;;GAExC,IAAI,OAAO,CAAC,qBAAqB,IAAI,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,SAAS,EAAE;IAChF,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;IACpE;GACD,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC;GACxE;;EAED,SAAS,YAAY,CAAC,KAAK,EAAE,KAAK;EAClC;GACC,IAAI,wBAAwB,CAAC,KAAK,CAAC;GACnC;IACC,IAAI,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM;KACvC,OAAO,IAAI,CAAC;SACR,IAAI,KAAK,KAAK,OAAO,IAAI,KAAK,KAAK,OAAO;KAC9C,OAAO,KAAK,CAAC;SACT,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;KAC1B,OAAO,UAAU,CAAC,KAAK,CAAC,CAAC;KACzB;SACI;KACJ,QAAQ,KAAK,KAAK,EAAE,GAAG,IAAI,GAAG,KAAK,EAAE;KACrC;IACD;GACD,OAAO,KAAK,CAAC;GACb;;EAED,SAAS,2BAA2B;EACpC;GACC,IAAI,CAAC,QAAQ,KAAK,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;IAC3D,OAAO,QAAQ,CAAC;;GAEjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;GAC7C;IACC,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC;;IAEnC,IAAI,CAAC,CAAC;IACN,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE;IAC5C;KACC,IAAI,KAAK,GAAG,CAAC,CAAC;KACd,IAAI,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;KAEhC,IAAI,OAAO,CAAC,MAAM;MACjB,KAAK,GAAG,CAAC,IAAI,OAAO,CAAC,MAAM,GAAG,gBAAgB,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;;KAE7D,KAAK,GAAG,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;KAEnC,IAAI,KAAK,KAAK,gBAAgB;KAC9B;MACC,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;MAC9B,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MACvB;;MAEA,GAAG,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;KACpB;;IAED,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;;IAEvB,IAAI,OAAO,CAAC,MAAM;IAClB;KACC,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM;MACrB,QAAQ,CAAC,eAAe,EAAE,eAAe,EAAE,4BAA4B,GAAG,OAAO,CAAC,MAAM,GAAG,qBAAqB,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;UACrH,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM;MAC1B,QAAQ,CAAC,eAAe,EAAE,cAAc,EAAE,2BAA2B,GAAG,OAAO,CAAC,MAAM,GAAG,qBAAqB,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;KACxH;IACD;;GAED,IAAI,OAAO,CAAC,MAAM,IAAI,QAAQ,CAAC,IAAI;IAClC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;GAChC,OAAO,QAAQ,CAAC;GAChB;;EAED,SAAS,cAAc,CAAC,KAAK,EAAE,OAAO,EAAE,cAAc;EACtD;GACC,IAAI,YAAY,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;GACzE,IAAI,SAAS,EAAE,SAAS,EAAE,iBAAiB,CAAC;;GAE5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE;GAC5C;IACC,IAAI,KAAK,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;IAC5B,IAAI,KAAK,GAAG,CAAC,EAAE,aAAa,GAAG,CAAC,EAAE,eAAe,GAAG,CAAC,CAAC;IACtD,iBAAiB,GAAG,SAAS,CAAC;;IAE9B,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC;KACxB,SAAS,EAAE,KAAK;KAChB,OAAO,EAAE,OAAO;KAChB,OAAO,EAAE,EAAE;KACX,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;;IAEhB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;IAC5C;KACC,IAAI,cAAc,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;MACtF,eAAe,EAAE,CAAC;MAClB,SAAS;MACT;KACD,IAAI,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;KACxC,aAAa,IAAI,UAAU,CAAC;;KAE5B,IAAI,OAAO,iBAAiB,KAAK,WAAW;KAC5C;MACC,iBAAiB,GAAG,UAAU,CAAC;MAC/B,SAAS;MACT;UACI,IAAI,UAAU,GAAG,CAAC;KACvB;MACC,KAAK,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,iBAAiB,CAAC,CAAC;MAClD,iBAAiB,GAAG,UAAU,CAAC;MAC/B;KACD;;IAED,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;KAC1B,aAAa,KAAK,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,eAAe,CAAC,CAAC;;IAE1D,IAAI,CAAC,OAAO,SAAS,KAAK,WAAW,IAAI,KAAK,GAAG,SAAS;QACtD,aAAa,GAAG,IAAI;IACxB;KACC,SAAS,GAAG,KAAK,CAAC;KAClB,SAAS,GAAG,KAAK,CAAC;KAClB;IACD;;GAED,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;;GAE9B,OAAO;IACN,UAAU,EAAE,CAAC,CAAC,SAAS;IACvB,aAAa,EAAE,SAAS;IACxB,CAAC;GACF;;EAED,SAAS,gBAAgB,CAAC,KAAK;EAC/B;GACC,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;;GAErC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;;GAE1B,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;;GAE1B,IAAI,aAAa,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;;GAEhE,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,aAAa;IAClC,OAAO,IAAI,CAAC;;GAEb,IAAI,QAAQ,GAAG,CAAC,CAAC;GACjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE;GACjC;IACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI;KACnB,QAAQ,EAAE,CAAC;IACZ;;GAED,OAAO,QAAQ,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC;GAChD;;EAED,SAAS,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG;EACtC;GACC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC;IACpB,IAAI,EAAE,IAAI;IACV,IAAI,EAAE,IAAI;IACV,OAAO,EAAE,GAAG;IACZ,GAAG,EAAE,GAAG;IACR,CAAC,CAAC;GACH;EACD;;;;;;;CAOD,SAAS,MAAM,CAAC,MAAM;CACtB;;EAEC,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;EACtB,IAAI,KAAK,GAAG,MAAM,CAAC,SAAS,CAAC;EAC7B,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;EAC7B,IAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;EAC/B,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;EACvB,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;EAC7B,IAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;EAC/B,IAAI,SAAS,CAAC;;EAEd,IAAI,MAAM,CAAC,SAAS,KAAK,SAAS,EAAE;GACnC,SAAS,GAAG,GAAG,CAAC;GAChB,MAAM;GACN,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;GAC7B;EACD,IAAI,UAAU,GAAG,SAAS,CAAC;EAC3B,IAAI,MAAM,CAAC,UAAU,KAAK,SAAS,EAAE;GACpC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;GAC/B;;;EAGD,IAAI,OAAO,KAAK,KAAK,QAAQ;MACzB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;GAC1C,KAAK,GAAG,GAAG,CAAC;;;EAGb,IAAI,QAAQ,KAAK,KAAK;GACrB,MAAM,qCAAqC,CAAC;OACxC,IAAI,QAAQ,KAAK,IAAI;GACzB,QAAQ,GAAG,GAAG,CAAC;OACX,IAAI,OAAO,QAAQ,KAAK,QAAQ;MACjC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;GAC7C,QAAQ,GAAG,KAAK,CAAC;;;EAGlB,IAAI,OAAO,KAAK,IAAI,IAAI,OAAO,KAAK,IAAI,IAAI,OAAO,KAAK,MAAM;GAC7D,OAAO,GAAG,IAAI,CAAC;;;EAGhB,IAAI,MAAM,GAAG,CAAC,CAAC;EACf,IAAI,OAAO,GAAG,KAAK,CAAC;;EAEpB,IAAI,CAAC,KAAK,GAAG,SAAS,KAAK,EAAE,SAAS,EAAE,aAAa;EACrD;;GAEC,IAAI,OAAO,KAAK,KAAK,QAAQ;IAC5B,MAAM,wBAAwB,CAAC;;;;GAIhC,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM;IAC1B,QAAQ,GAAG,KAAK,CAAC,MAAM;IACvB,UAAU,GAAG,OAAO,CAAC,MAAM;IAC3B,WAAW,GAAG,QAAQ,CAAC,MAAM,CAAC;GAC/B,IAAI,cAAc,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;;;GAGtC,MAAM,GAAG,CAAC,CAAC;GACX,IAAI,IAAI,GAAG,EAAE,EAAE,MAAM,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,UAAU,GAAG,CAAC,CAAC;;GAErD,IAAI,CAAC,KAAK;IACT,OAAO,UAAU,EAAE,CAAC;;GAErB,IAAI,QAAQ,KAAK,QAAQ,KAAK,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;GACvE;IACC,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;IACpC;KACC,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;KACd,MAAM,IAAI,GAAG,CAAC,MAAM,CAAC;KACrB,IAAI,CAAC,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC;MACxB,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC;UACrB,IAAI,aAAa;MACrB,OAAO,UAAU,EAAE,CAAC;KACrB,IAAI,QAAQ,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,WAAW,CAAC,KAAK,QAAQ;MACtD,SAAS;KACV,IAAI,cAAc;KAClB;MACC,IAAI,GAAG,EAAE,CAAC;MACV,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;MAC1B,MAAM,EAAE,CAAC;MACT,IAAI,OAAO;OACV,OAAO,UAAU,EAAE,CAAC;MACrB;;MAEA,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;KAC3B,IAAI,OAAO,IAAI,CAAC,IAAI,OAAO;KAC3B;MACC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;MAC9B,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC;MACxB;KACD;IACD,OAAO,UAAU,EAAE,CAAC;IACpB;;GAED,IAAI,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;GAC7C,IAAI,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;GACjD,IAAI,cAAc,GAAG,IAAI,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,uBAAuB,EAAE,MAAM,CAAC,GAAG,SAAS,EAAE,GAAG,CAAC,CAAC;GACtG,IAAI,WAAW,CAAC;;;GAGhB;GACA;;IAEC,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,SAAS;IAC/B;;KAEC,WAAW,GAAG,MAAM,CAAC;;;KAGrB,MAAM,EAAE,CAAC;;KAET;KACA;;MAEC,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,WAAW,GAAG,CAAC,CAAC,CAAC;;;MAGxD,IAAI,WAAW,KAAK,CAAC,CAAC;MACtB;OACC,IAAI,CAAC,aAAa,EAAE;;QAEnB,MAAM,CAAC,IAAI,CAAC;SACX,IAAI,EAAE,QAAQ;SACd,IAAI,EAAE,eAAe;SACrB,OAAO,EAAE,2BAA2B;SACpC,GAAG,EAAE,IAAI,CAAC,MAAM;SAChB,KAAK,EAAE,MAAM;SACb,CAAC,CAAC;QACH;OACD,OAAO,MAAM,EAAE,CAAC;OAChB;;;MAGD,IAAI,WAAW,KAAK,QAAQ,GAAG,CAAC;MAChC;OACC,IAAI,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,OAAO,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;OACpF,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC;OACrB;;;;MAID,IAAI,SAAS,KAAK,UAAU,KAAK,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,KAAK,UAAU;MACtE;OACC,WAAW,EAAE,CAAC;OACd,SAAS;OACT;;;MAGD,IAAI,SAAS,KAAK,UAAU,IAAI,WAAW,KAAK,CAAC,IAAI,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,KAAK,UAAU;MAC1F;OACC,SAAS;OACT;;MAED,IAAI,8BAA8B,GAAG,WAAW,CAAC,SAAS,CAAC,CAAC;;;MAG5D,IAAI,KAAK,CAAC,WAAW,GAAG,CAAC,GAAG,8BAA8B,CAAC,KAAK,KAAK;MACrE;OACC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,OAAO,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC,CAAC;OAClF,MAAM,GAAG,WAAW,GAAG,CAAC,GAAG,8BAA8B,GAAG,QAAQ,CAAC;OACrE,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;OACzC,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;OAC7C,MAAM;OACN;;MAED,IAAI,4BAA4B,GAAG,WAAW,CAAC,WAAW,CAAC,CAAC;;;MAG5D,IAAI,KAAK,CAAC,MAAM,CAAC,WAAW,GAAG,CAAC,GAAG,4BAA4B,EAAE,UAAU,CAAC,KAAK,OAAO;MACxF;OACC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,OAAO,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC,CAAC;OAClF,OAAO,CAAC,WAAW,GAAG,CAAC,GAAG,4BAA4B,GAAG,UAAU,CAAC,CAAC;OACrE,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;;OAEzC,IAAI,cAAc;OAClB;QACC,MAAM,EAAE,CAAC;QACT,IAAI,OAAO;SACV,OAAO,UAAU,EAAE,CAAC;QACrB;;OAED,IAAI,OAAO,IAAI,IAAI,CAAC,MAAM,IAAI,OAAO;QACpC,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC;;OAEzB,MAAM;OACN;;;;MAID,MAAM,CAAC,IAAI,CAAC;OACX,IAAI,EAAE,QAAQ;OACd,IAAI,EAAE,eAAe;OACrB,OAAO,EAAE,6CAA6C;OACtD,GAAG,EAAE,IAAI,CAAC,MAAM;OAChB,KAAK,EAAE,MAAM;OACb,CAAC,CAAC;;MAEH,WAAW,EAAE,CAAC;MACd,SAAS;;MAET;;KAED,SAAS;KACT;;;IAGD,IAAI,QAAQ,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE,WAAW,CAAC,KAAK,QAAQ;IAClF;KACC,IAAI,WAAW,KAAK,CAAC,CAAC;MACrB,OAAO,UAAU,EAAE,CAAC;KACrB,MAAM,GAAG,WAAW,GAAG,UAAU,CAAC;KAClC,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;KAC7C,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;KACzC,SAAS;KACT;;;IAGD,IAAI,SAAS,KAAK,CAAC,CAAC,KAAK,SAAS,GAAG,WAAW,IAAI,WAAW,KAAK,CAAC,CAAC,CAAC;IACvE;KACC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;KAC7C,MAAM,GAAG,SAAS,GAAG,QAAQ,CAAC;KAC9B,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;KACzC,SAAS;KACT;;;IAGD,IAAI,WAAW,KAAK,CAAC,CAAC;IACtB;KACC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC;KAC/C,OAAO,CAAC,WAAW,GAAG,UAAU,CAAC,CAAC;;KAElC,IAAI,cAAc;KAClB;MACC,MAAM,EAAE,CAAC;MACT,IAAI,OAAO;OACV,OAAO,UAAU,EAAE,CAAC;MACrB;;KAED,IAAI,OAAO,IAAI,IAAI,CAAC,MAAM,IAAI,OAAO;MACpC,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC;;KAEzB,SAAS;KACT;;IAED,MAAM;IACN;;;GAGD,OAAO,MAAM,EAAE,CAAC;;;GAGhB,SAAS,OAAO,CAAC,GAAG;GACpB;IACC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACf,UAAU,GAAG,MAAM,CAAC;IACpB;;;;;;GAMD,SAAS,WAAW,CAAC,KAAK,EAAE;IAC3B,IAAI,WAAW,GAAG,CAAC,CAAC;IACpB,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;KACjB,IAAI,+BAA+B,GAAG,KAAK,CAAC,SAAS,CAAC,WAAW,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;KAC9E,IAAI,+BAA+B,IAAI,+BAA+B,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;MACrF,WAAW,GAAG,+BAA+B,CAAC,MAAM,CAAC;MACrD;KACD;IACD,OAAO,WAAW,CAAC;IACnB;;;;;;GAMD,SAAS,MAAM,CAAC,KAAK;GACrB;IACC,IAAI,aAAa;KAChB,OAAO,UAAU,EAAE,CAAC;IACrB,IAAI,OAAO,KAAK,KAAK,WAAW;KAC/B,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC9B,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChB,MAAM,GAAG,QAAQ,CAAC;IAClB,OAAO,CAAC,GAAG,CAAC,CAAC;IACb,IAAI,cAAc;KACjB,MAAM,EAAE,CAAC;IACV,OAAO,UAAU,EAAE,CAAC;IACpB;;;;;;;;GAQD,SAAS,OAAO,CAAC,SAAS;GAC1B;IACC,MAAM,GAAG,SAAS,CAAC;IACnB,OAAO,CAAC,GAAG,CAAC,CAAC;IACb,GAAG,GAAG,EAAE,CAAC;IACT,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IAC7C;;;GAGD,SAAS,UAAU,CAAC,OAAO;GAC3B;IACC,OAAO;KACN,IAAI,EAAE,IAAI;KACV,MAAM,EAAE,MAAM;KACd,IAAI,EAAE;MACL,SAAS,EAAE,KAAK;MAChB,SAAS,EAAE,OAAO;MAClB,OAAO,EAAE,OAAO;MAChB,SAAS,EAAE,CAAC,CAAC,OAAO;MACpB,MAAM,EAAE,UAAU,IAAI,SAAS,IAAI,CAAC,CAAC;MACrC;KACD,CAAC;IACF;;;GAGD,SAAS,MAAM;GACf;IACC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;IACnB,IAAI,GAAG,EAAE,CAAC;IACV,MAAM,GAAG,EAAE,CAAC;IACZ;GACD,CAAC;;;EAGF,IAAI,CAAC,KAAK,GAAG;EACb;GACC,OAAO,GAAG,IAAI,CAAC;GACf,CAAC;;;EAGF,IAAI,CAAC,YAAY,GAAG;EACpB;GACC,OAAO,MAAM,CAAC;GACd,CAAC;EACF;;;;;CAKD,SAAS,aAAa;CACtB;EACC,IAAI,OAAO,GAAG,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;EACtD,OAAO,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC;EAC7D;;CAED,SAAS,SAAS;CAClB;EACC,IAAI,CAAC,IAAI,CAAC,iBAAiB;GAC1B,OAAO,KAAK,CAAC;EACd,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI;GAC5C,MAAM,IAAI,KAAK;IACd,2FAA2F;IAC3F,4CAA4C;IAC5C,CAAC;EACH,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,IAAI,gBAAgB,CAAC;;EAErD,SAAS,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,YAAY,CAAC;EACxE,IAAI,CAAC,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;EACrC,CAAC,CAAC,SAAS,GAAG,yBAAyB,CAAC;EACxC,CAAC,CAAC,EAAE,GAAG,eAAe,EAAE,CAAC;EACzB,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;EAClB,OAAO,CAAC,CAAC;EACT;;;CAGD,SAAS,yBAAyB,CAAC,CAAC;CACpC;EACC,IAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC;EACjB,IAAI,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EACnC,IAAI,OAAO,GAAG,KAAK,CAAC;;EAEpB,IAAI,GAAG,CAAC,KAAK;GACZ,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;OAClC,IAAI,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,OAAO,CAAC,IAAI;EACxC;GACC,IAAI,KAAK,GAAG,WAAW;IACtB,OAAO,GAAG,IAAI,CAAC;IACf,cAAc,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IAChF,CAAC;;GAEF,IAAI,MAAM,GAAG;IACZ,KAAK,EAAE,KAAK;IACZ,KAAK,EAAE,cAAc;IACrB,MAAM,EAAE,cAAc;IACtB,CAAC;;GAEF,IAAI,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC;GAC/B;IACC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;IAChD;KACC,MAAM,CAAC,QAAQ,CAAC;MACf,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;MAC3B,MAAM,EAAE,GAAG,CAAC,OAAO,CAAC,MAAM;MAC1B,IAAI,EAAE,GAAG,CAAC,OAAO,CAAC,IAAI;MACtB,EAAE,MAAM,CAAC,CAAC;KACX,IAAI,OAAO;MACV,MAAM;KACP;IACD,OAAO,GAAG,CAAC,OAAO,CAAC;IACnB;QACI,IAAI,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC;GACrC;IACC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;IAChD,OAAO,GAAG,CAAC,OAAO,CAAC;IACnB;GACD;;EAED,IAAI,GAAG,CAAC,QAAQ,IAAI,CAAC,OAAO;GAC3B,cAAc,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;EAC3C;;CAED,SAAS,cAAc,CAAC,QAAQ,EAAE,OAAO,EAAE;EAC1C,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;EAC/B,IAAI,UAAU,CAAC,MAAM,CAAC,YAAY,CAAC;GAClC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;EAC9B,MAAM,CAAC,SAAS,EAAE,CAAC;EACnB,OAAO,OAAO,CAAC,QAAQ,CAAC,CAAC;EACzB;;CAED,SAAS,cAAc,GAAG;EACzB,MAAM,kBAAkB,CAAC;EACzB;;;CAGD,SAAS,2BAA2B,CAAC,CAAC;CACtC;EACC,IAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC;;EAEjB,IAAI,OAAO,IAAI,CAAC,SAAS,KAAK,WAAW,IAAI,GAAG;GAC/C,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,QAAQ,CAAC;;EAE/B,IAAI,OAAO,GAAG,CAAC,KAAK,KAAK,QAAQ;EACjC;GACC,MAAM,CAAC,WAAW,CAAC;IAClB,QAAQ,EAAE,IAAI,CAAC,SAAS;IACxB,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC;IAC1C,QAAQ,EAAE,IAAI;IACd,CAAC,CAAC;GACH;OACI,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,GAAG,CAAC,KAAK,YAAY,IAAI,KAAK,GAAG,CAAC,KAAK,YAAY,MAAM;EAClF;GACC,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;GAChD,IAAI,OAAO;IACV,MAAM,CAAC,WAAW,CAAC;KAClB,QAAQ,EAAE,IAAI,CAAC,SAAS;KACxB,OAAO,EAAE,OAAO;KAChB,QAAQ,EAAE,IAAI;KACd,CAAC,CAAC;GACJ;EACD;;;CAGD,SAAS,IAAI,CAAC,GAAG;CACjB;EACC,IAAI,OAAO,GAAG,KAAK,QAAQ;GAC1B,OAAO,GAAG,CAAC;EACZ,IAAI,GAAG,GAAG,GAAG,YAAY,KAAK,GAAG,EAAE,GAAG,EAAE,CAAC;EACzC,KAAK,IAAI,GAAG,IAAI,GAAG;GAClB,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;EAC3B,OAAO,GAAG,CAAC;EACX;;CAED,SAAS,YAAY,CAAC,CAAC,EAAE,IAAI;CAC7B;EACC,OAAO,WAAW,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC;EAChD;;CAED,SAAS,UAAU,CAAC,IAAI;CACxB;EACC,OAAO,OAAO,IAAI,KAAK,UAAU,CAAC;EAClC;;CAED,OAAO,IAAI,CAAC;CACZ,CAAC,EAAE;;;ACrnDJ;;;;AAIA,IAAa6lB,WAAb;;;;;;;;;;;6BAkBiB;QAND5Z,IAMC,QANDA,IAMC;QALD6N,MAKC,QALDA,MAKC;QAJDxL,QAIC,QAJDA,QAIC;QAHDjH,IAGC,QAHDA,IAGC;gCAFDiF,WAEC;QAFDA,WAEC,oCAFa,EAACrH,OAAO,CAAR,EAAWD,MAAM,CAAjB,EAEb;QADDgH,MACC,QADDA,MACC;;;SACRC,IAAL,GAAYA,IAAZ;SACK6N,MAAL,GAAcA,MAAd;SACKxL,QAAL,GAAgBA,QAAhB;SACKjH,IAAL,GAAYA,IAAZ;SACKiF,WAAL,GAAmBA,WAAnB;SACKN,MAAL,GAAcA,MAAd;;;;;;;;;;2BAQW;aACJ,KAAKM,WAAL,CAAiBtH,IAAjB,GAAwB,KAAKsH,WAAL,CAAiBrH,KAAhD;;;;;;;;;;;2BASe;aACL,KAAK6U,MAAL,CAAYpI,EAAtB,SAA4B,KAAKzF,IAAjC;;;;;;AC/CJ;;;AAGA,AAEA,IAAa6Z,iBAAb;;;;;;;;mCAQ6B;QAAdzJ,GAAc,QAAdA,GAAc;QAAT0J,MAAS,QAATA,MAAS;;;SACpB1J,GAAL,GAAWA,GAAX;SACK0J,MAAL,GAAcA,MAAd;;;;;;;;;;2BAMK;aACE9jB,QAAE4a,OAAF,CAAU,IAAV,CAAP;;;;;;;;;;;;;AAWJ,AAAO,IAAMmJ,gBAAgB;cACd;aACD,EADC;iBAEG,SAFH;kBAGI,CAHJ;iBAIG;GALW;WAOjB;aACE,EADF;eAEI,CAFJ;iBAGM,MAHN;kBAIO,CAJP;iBAKM,OALN;iBAMM,QANN;iBAOM,EAPN;kBAQO,OARP;uBASY,GATZ;sBAUW,OAVX;iBAWM,CAXN;aAYE;GAnBe;WAqBjB;aACE,CADF;eAEI,CAFJ;iBAGM,SAHN;kBAIO,CAJP;iBAKM,OALN;iBAMM,QANN;iBAOM,EAPN;kBAQO,OARP;uBASY;GA9BK;YAgClB;kBACQ,CADR;iBAEO,OAFP;iBAGO,QAHP;iBAIO,EAJP;kBAKQ;GArCU;;eAwCd;aACD,CADC;iBAEC,OAFD;kBAGE,CAHF;iBAIC,OAJD;iBAKG,QALH;iBAMG,EANH;kBAOI,OAPJ;oBAQM,EARN;yBASW,CATX;wBAUU,KAVV;mBAWK,CAXL;kBAYI,OAZJ;sBAaM,EAbN;sBAcM,CAdN;YAeJ;GAvDkB;SAyDrB;eACQ,EADR;aAEK,CAFL;iBAGS,CAAC,OAAD,CAHT;iBAIS,EAJT;iBAKS,QALT;kBAMU,OANV;qBAOc,EAPd;uBAQe,CARf;gBASS,CATT;YAUG;GAnEkB;YAqEjB;CArEL;;ACjCP;;;;AAIA,AACA,AAEA,AACA,AACA,AAEA;;AAEA,IAAaC,eAAb;;;;;;;;;;;iCAWkE;;;QAAnDvU,EAAmD,QAAnDA,EAAmD;QAA/CqU,MAA+C,QAA/CA,MAA+C;QAAvCnlB,IAAuC,QAAvCA,IAAuC;QAAjCyb,GAAiC,QAAjCA,GAAiC;QAA5B3J,OAA4B,QAA5BA,OAA4B;QAAnB6H,QAAmB,QAAnBA,QAAmB;QAATvO,MAAS,QAATA,MAAS;;;SACzD0F,EAAL,GAAUA,EAAV;SACKqU,MAAL,GAAcA,MAAd;SACKnlB,IAAL,GAAYA,IAAZ;SACKyb,GAAL,GAAWA,GAAX;SACKrQ,MAAL,GAAcA,UAAU,EAAxB;SACKka,SAAL,GAAiB,EAAC,WAAWF,aAAZ,EAAjB;;;;KAIC,YAAM;;UACDG,MAAM,IAAIL,iBAAJ,CAAsB,MAAK9Z,MAA3B,CAAV;aACOma,IAAIrX,IAAJ,EAAP;KAFF,IAGKgO,IAHL;cAIG/T,IAAD,EAAU;;YACHmd,SAAL,GAAiBnd,IAAjB;;;;;;6BAC0BiR,OAAOlZ,IAAP,CAAY,MAAKolB,SAAjB,CAA1B,8HAAuD;cAA5CE,WAA4C;;;;;;kCACnCpM,OAAOlZ,IAAP,CAAYklB,aAAZ,CAAlB,mIAA8C;kBAAnC/U,GAAmC;;kBACxC,MAAKiV,SAAL,CAAeE,WAAf,EAA4BnV,GAA5B,MAAqC7O,SAAzC,EAAoD;sBAC7C8jB,SAAL,CAAeE,WAAf,EAA4BnV,GAA5B,IAAmC,MAAKiV,SAAL,CAAeG,OAAf,CAAuBpV,GAAvB,KAA+B+U,cAAc/U,GAAd,CAAlE;;;;;;;sCAEkB+I,OAAOlZ,IAAP,CAAYklB,cAAc/U,GAAd,CAAZ,CAApB,mIAAqD;sBAA3CqV,MAA2C;;sBAC/C,MAAKJ,SAAL,CAAeE,WAAf,EAA4BnV,GAA5B,EAAiCqV,MAAjC,MAA6ClkB,SAAjD,EAA4D;0BACrD8jB,SAAL,CAAeE,WAAf,EAA4BnV,GAA5B,EAAiCqV,MAAjC,IAA2C,MAAKJ,SAAL,CAAeG,OAAf,CAAuBpV,GAAvB,EAA4BqV,MAA5B,KAAuCN,cAAc/U,GAAd,EAAmBqV,MAAnB,CAAlF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAbZ,EAmBE,YAAM;;YACCJ,SAAL,CAAeG,OAAf,GAAyBL,aAAzB;KApBJ;;SAwBKtT,OAAL,GAAeA,WAAW,EAA1B;SACK6H,QAAL,GAAgBA,YAAY,EAA5B;SACKA,QAAL,CAAcxa,OAAd,CAAsB,aAAK;QACvBoa,kBAAF,KAAyB/X,SAAzB,GAAqCqY,EAAEN,kBAAF,GAAuB,IAAI3Q,MAAJ,CAAWiR,EAAEN,kBAAb,CAA5D,GAA+F/X,SAA/F;KADF;SAGKmkB,UAAL,GAAkB,IAAlB,CAvC8D;;;;;;;;;;2BA+CzD;aACEtkB,QAAE4a,OAAF,CAAU,IAAV,CAAP;;;;;;;;;;;;gCAUUjc,IArEd,EAqEoB;;;UACV4lB,MAAMC,UAAOC,KAAP,CAAa9lB,IAAb,EAAmB;gBACrB,IADqB;uBAEd,IAFc;wBAGb;OAHN,CAAZ;UAKI4lB,IAAIG,MAAJ,CAAW3iB,MAAf,EAAuB;gBACb4iB,KAAR,CAAcJ,IAAIG,MAAlB;gDACsC,KAAKtK,GAA3C;;;UAGEzb,IAAJ,GAAW4lB,IAAI5lB,IAAJ,CAAS2N,MAAT,CAAgB;eAAK,OAAKsY,aAAL,CAAmBC,CAAnB,CAAL;OAAhB,CAAX;WACKjV,WAAL,GAAmB2U,GAAnB;;;;;;;;;;;;;;kCAYYM,CA7FhB,EA6FmB;UACX9d,OAAO,CAAX;WACK0J,OAAL,CAAa3S,OAAb,CAAqB,aAAK;YACpBgnB,MAAMhM,EAAEiM,MAAZ;YACIF,EAAE3V,cAAF,CAAiB4V,GAAjB,CAAJ,EAA2B;cACrBE,UAAUH,EAAEC,GAAF,CAAd;cACI1c,cAAJ;cACI0Q,EAAEmM,QAAF,KAAe,QAAnB,EAA6B;oBAClBD,YAAYlM,EAAEnK,KAAvB;WADF,MAGK,IAAImK,EAAEmM,QAAF,KAAe,OAAnB,EAA4B;oBACvBD,QAAQ5c,KAAR,CAAc0Q,EAAEnK,KAAhB,CAAR;;cAEEmK,EAAEoM,GAAN,EAAW;gBACL,CAAC9c,KAAL,EAAY,EAAErB,IAAF;WADd,MAGK;gBACCqB,KAAJ,EAAW,EAAErB,IAAF;;;OAfjB;aAmBQA,SAAS,KAAK0J,OAAL,CAAa1O,MAA9B;;;;;;;;;;;;2BAUY;;;UACNwiB,MAAM,EAAZ;UACM;YACEY,YAAY,KAAKvV,WAAL,CAAiBwV,IAAjB,CAAsBC,MAAtB,CAA6BjN,QAA7B,CAAsC,cAAtC,IAAwD,cAAxD,GAAyE,kBAAzF;aACKxI,WAAL,CAAiBjR,IAAjB,CAAsBb,OAAtB,CAA+B,aAAK;cAC/B,CAAE+mB,EAAES,QAAP,EAAiB;cACXC,gBAAmB,OAAK9V,EAAxB,SAA8BoV,EAAES,QAAtC;cACG,CAAEf,IAAIgB,aAAJ,CAAL,EAAyB;gBACjBpe,QAAQ,IAAIyc,WAAJ,CAAgB;sBACpB,MADoB;oBAEtBiB,EAAES,QAFoB;wBAGlB,EAHkB;oBAItB,EAJsB;2BAKf,EAAEtiB,OAAO6hB,EAAEW,SAAX,EAAsBziB,MAAM8hB,EAAEY,QAA9B,EALe;sBAMpB,OAAKxB,SAAL,CAAeY,EAAES,QAAjB,KAA8B,OAAKrB,SAAL,CAAeG;aANzC,CAAd;gBAQImB,aAAJ,IAAqBpe,KAArB;WATF,MAWK;gBACG0d,EAAEY,QAAF,GAAalB,IAAIgB,aAAJ,EAAmBlb,WAAnB,CAA+BtH,IAAhD,EAAsD;kBAC9CwiB,aAAJ,EAAmBlb,WAAnB,CAA+BtH,IAA/B,GAAsC8hB,EAAEY,QAAxC;;;cAGJF,aAAJ,EAAmBlZ,QAAnB,CAA4B1O,IAA5B,CACE,IAAIia,OAAJ,CAAY;oBACD,MADC;kBAEJiN,EAAEa,YAFE;kBAGJ,CAACb,EAAEM,SAAF,MAAiB,EAAjB,GAAsBN,EAAEM,SAAF,CAAtB,GAAqC,IAAtC,CAHI;qBAIDN,EAAEc,eAAF,KAAsB,EAAtB,GAA4Bd,EAAEc,eAAF,CAAkBC,KAAlB,CAAwB,GAAxB,CAA5B,GAA2D,EAJ1D;yBAKG,EAAE5iB,OAAO6hB,EAAEgB,aAAX,EAA0B9iB,MAAM8hB,EAAEiB,YAAlC;WALf,CADF;cASGjB,EAAEM,SAAF,MAAiB,EAAjB,IAAuBZ,IAAIgB,aAAJ,EAAmBngB,IAAnB,CAAwBW,OAAxB,CAAgC8e,EAAEM,SAAF,CAAhC,MAAkD,CAAC,CAA7E,EAA+E;gBACzEI,aAAJ,EAAmBngB,IAAnB,CAAwBzH,IAAxB,CAA6BknB,EAAEM,SAAF,CAA7B;;SA7BJ;OAFF,CAkCA,OAAOlH,CAAP,EAAU;gBACF8H,KAAR;gBACQpB,KAAR,CAAc1G,CAAd;;aAEKsG,GAAP;;;;;;ACjLJ;;;;;;AAMA,AAEA,AACA,AACA,AAEA,IAAayB,QAAb;;;;;;sBAMgB;;;;;;SAEPxW,OAAL,GAAe,EAAf;SACKvG,OAAL,GAAe,EAAf;SACKgd,KAAL,GAAa;kBACC,CADD;cAEHlE,gBAFG;KAAb;SAIK/Y,SAAL,GAAiB;;eAEN;KAFX;WAIOjK,SAAP,CAAiBd,KAAjB,EAAwB;aAAM,MAAKykB,QAAL,EAAN;KAAxB;;;SAGKwD,MAAL,GAAc,EAAd;SACKC,IAAL,GAAY,KAAZ;;;;;;;;;;;;;+BAWgD;;;UAA5CC,MAA4C,QAA5CA,MAA4C;UAApCC,WAAoC,QAApCA,WAAoC;UAAvB7W,OAAuB,QAAvBA,OAAuB;UAAdgF,WAAc,QAAdA,WAAc;;UAC5C8R,gBAAgB9W,OAApB;WACK4W,MAAL,GAAcA,MAAd;WACKC,WAAL,GAAmBA,WAAnB;WACK7R,WAAL,GAAmBA,eAAe,EAAlC;WACK+R,OAAL,GAAe,EAAf;UACIC,WAAWF,cAAc3f,GAAd,CAAkB,kBAAU;YACrC8f,MAAM,IAAIzC,eAAJ,CAAoBja,MAApB,CAAV;eACKyF,OAAL,CAAa7R,IAAb,CAAkB8oB,GAAlB;eACOA,IAAI5Z,IAAJ,EAAP;OAHa,CAAf;;;;cAQQjG,GAAR,CAAY4f,QAAZ,EAAsB3L,IAAtB,CAA2B,YAAM;eAC1B6L,OAAL,GAAe,OAAKlX,OAAL,CAAa7I,GAAb,CAAiB;iBAAOoR,OAAO4O,MAAP,CAAcC,IAAI3d,OAAlB,CAAP;SAAjB,EAAoD5J,SAApD,EAAf;YACI,CAAC,OAAKmV,WAAL,CAAiBzS,MAAtB,EAA8B;iBACvB8kB,kBAAL;SADF,MAGK;iBACEC,gBAAL;;eAEK3d,OAAP,CAAehL,UAAf;OARF,EASG4oB,KATH,CASS,eAAO;;YAER5J,0CAAwC6J,GAA9C;gBACQrC,KAAR,CAAcxH,GAAd;gBACQ4I,KAAR;cACM5I,GAAN;OAdF;aAgBOqJ,QAAP;;;;;;;;;uCAOiB;;;WACZvd,OAAL,GAAe,KAAKuL,WAAL,CAAiB7N,GAAjB,CAAqB,oBAAY;YACxC4d,MAAM,OAAKmC,OAAL,CAAapa,MAAb,CAAoB,eAAO;iBAC7B2a,SAASpP,MAAT,KAAoBlR,IAAIkR,MAAJ,CAAWpI,EAA/B,IACNwX,SAAStgB,GAAT,KAAiBA,IAAIqD,IADvB;SADU,CAAZ;YAIIua,IAAIxiB,MAAJ,KAAe,CAAnB,EAAsB;;cAEdsF,OAAO6f,KAAKC,SAAL,CAAeF,QAAf,CAAb;cACM9J,gDAA8C9V,IAApD;kBACQsd,KAAR,CAAcxH,GAAd;kBACQ4I,KAAR;gBACM5I,GAAN;;YAEC8J,SAASvU,MAAZ,EAAmB;cACb,CAAJ,EAAOA,MAAP,GAAgBuU,SAASvU,MAAzB;;YAEEuU,SAASlV,GAAb,EAAkB;cACZ,CAAJ,EAAOqV,SAAP,GAAmBH,SAASlV,GAA5B;;eAEKwS,GAAP;OAnBa,EAoBZllB,SApBY,EAAf;;;;;;;;;;yCA2BmB;WACd4J,OAAL,GAAe,KAAKuG,OAAL,CAAa7I,GAAb,CAAiB;eAAOoR,OAAO4O,MAAP,CAAcC,IAAI3d,OAAlB,EAA2B,CAA3B,CAAP;OAAjB,CAAf;;;;;;;;;;;2BASKY,MA5GT,EA4G4B;UAAX7D,KAAW,uEAAH,CAAG;;WACnBiD,OAAL,CAAahD,MAAb,CAAoBD,KAApB,EAA2B,CAA3B,EAA8B6D,MAA9B;aACOV,OAAP,CAAe9K,QAAf,EAAyBwL,MAAzB;;;;;;;;;;+BAQS;WACJoc,KAAL,CAAWoB,UAAX,GAAwB,CAAxB;WACKpB,KAAL,CAAW/nB,MAAX,GAAoB6jB,gBAApB;;;;;;;;;;;;;AC9HJ,CAAC,SAAS,MAAM,EAAE,QAAQ,CAAC;AAC3B,YAAY,CAAC;;;;;;;;AAQb,IAAI,OAAO,GAAG,SAAS,OAAO,EAAE;EAC9B,OAAO,IAAI,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;CACtC,CAAC;;;AAGF,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC;;;AAG1B,OAAO,CAAC,SAAS,GAAG,kBAAkB,CAAC;AACvC,OAAO,CAAC,YAAY,GAAG,qBAAqB,CAAC;AAC7C,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;;;AAGpB,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;;AAEtB,OAAO,CAAC,QAAQ,GAAG,SAAS,OAAO,CAAC;EAClC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;;IAElB,OAAO,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;;;IAG5B,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;GACtB;;EAED,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;;;EAGvB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;;;EAGnB,OAAO,IAAI,CAAC;CACb,CAAC;;;;;;;;;AASF,OAAO,CAAC,QAAQ,CAAC,SAAS,GAAG;;;;;;;EAO3B,KAAK,EAAE,SAAS,OAAO,CAAC,OAAO,EAAE,UAAU,CAAC;IAC1C,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;;;IAG9D,IAAI,OAAO,CAAC,OAAO,KAAK,gBAAgB,EAAE;MACxC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,qBAAqB,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;KACrE;;IAED,OAAO,IAAI,CAAC;GACb;;;;;;;;EAQD,OAAO,EAAE,SAAS,QAAQ,CAAC,OAAO,EAAE,UAAU,CAAC;;;IAG7C,IAAI,OAAO,KAAK,SAAS,KAAK,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACnE,OAAO,GAAG,OAAO,CAAC,QAAQ,CAAC;KAC5B;;IAED,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;;;IAGjE,IAAI,OAAO,CAAC,OAAO,KAAK,gBAAgB,EAAE;MACxC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,qBAAqB,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;KACxE;;IAED,OAAO,IAAI,CAAC;GACb;CACF,CAAC;;AAEF,OAAO,CAAC,KAAK,GAAG;;;;;;;;EAQd,GAAG,EAAE,SAAS,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,UAAU,CAAC;;IAExD,IAAI,eAAe,GAAG,OAAO,CAAC;;;IAG9B,OAAO,GAAG,SAAS,aAAa,CAAC;;MAE/B,IAAI,CAAC,aAAa,EAAE;QAClB,aAAa,GAAG,MAAM,CAAC,KAAK,CAAC;OAC9B;;;;MAID,IAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC;UAC9C,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;;;MAGnD,OAAO,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;KAE7D,CAAC;;;IAGF,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,SAAS,EAAE,OAAO,EAAE,UAAU,IAAI,KAAK,CAAC,CAAC;;;IAG7F,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;MACpB,QAAQ,EAAE,eAAe;MACzB,UAAU,EAAE,OAAO;KACpB,CAAC,CAAC;GACJ;;;;;;;;;EASD,MAAM,EAAE,SAAS,MAAM,CAAC,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,UAAU,CAAC;;IAE9D,IAAI,eAAe,GAAG,OAAO;QACzB,MAAM,GAAG,EAAE;QACX,QAAQ,CAAC;IACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;MAC3D,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;KAC5D;IACD,QAAQ,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC;IACnC,OAAO,GAAG,QAAQ,CAAC,UAAU,CAAC;;;IAG9B,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,SAAS,EAAE,OAAO,EAAE,UAAU,IAAI,KAAK,CAAC,CAAC;;;IAGhG,KAAK,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,EAAE;MAC9B,IAAI,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,QAAQ,EAAE;QACnC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC9B,MAAM;OACP;KACF;GACF;CACF,CAAC;;;;;;;AAOF,IAAI,WAAW;IACX,aAAa,CAAC;;AAElB,OAAO,CAAC,SAAS,GAAG;;;;EAIlB,OAAO,EAAE,SAAS,gBAAgB,EAAE;;IAElC,IAAI,EAAE,SAAS,IAAI,QAAQ,IAAI,QAAQ,CAAC,YAAY,IAAI,CAAC,CAAC,EAAE;MAC1D,OAAO,CAAC,OAAO,GAAG,QAAQ,CAAC,YAAY,KAAK,SAAS;wBACnC,YAAY;wBACZ,gBAAgB,CAAC;KACpC;;;IAGD,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE;;MAE5B,OAAO,CAAC,SAAS,GAAG,aAAa,CAAC;MAClC,OAAO,CAAC,YAAY,GAAG,aAAa,CAAC;MACrC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;KACvB;;GAEF;;;;;;;GAOA,KAAK,EAAE,SAAS,cAAc,CAAC,aAAa,CAAC;IAC5C,IAAI,KAAK,GAAG;;UAEN,aAAa,EAAE,aAAa;UAC5B,MAAM,EAAE,aAAa,CAAC,MAAM,IAAI,aAAa,CAAC,UAAU;UACxD,IAAI,EAAE,OAAO;UACb,SAAS,EAAE,aAAa,CAAC,IAAI,KAAK,qBAAqB,GAAG,CAAC,GAAG,CAAC;UAC/D,MAAM,EAAE,CAAC;UACT,MAAM,EAAE,CAAC;UACT,cAAc,EAAE,UAAU;YACxB,IAAI,aAAa,CAAC,cAAc,EAAE;cAChC,aAAa,CAAC,cAAc,EAAE,CAAC;aAChC,MAAM;cACL,aAAa,CAAC,WAAW,GAAG,KAAK,CAAC;aACnC;WACF;UACD,eAAe,EAAE,UAAU;YACzB,IAAI,aAAa,CAAC,eAAe,EAAE;cACjC,aAAa,CAAC,eAAe,EAAE,CAAC;aACjC,MAAM;cACL,aAAa,CAAC,YAAY,GAAG,KAAK,CAAC;aACpC;WACF;SACF,CAAC;;;;;IAKN,IAAI,aAAa,CAAC,UAAU,EAAE;MAC5B,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,EAAE,GAAG,aAAa,CAAC,UAAU,CAAC;KAClD;;IAED,IAAI,aAAa,CAAC,WAAW,EAAE;MAC7B,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,EAAE,GAAG,aAAa,CAAC,WAAW,CAAC;KACnD;;;IAGD,IAAI,aAAa,CAAC,MAAM,EAAE;MACxB,KAAK,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;KACrC;;IAED,OAAO,KAAK,CAAC;GACd;;;;;;;EAOD,KAAK,EAAE,SAAS,cAAc,CAAC,aAAa,CAAC;IAC3C,IAAI,KAAK,GAAG,CAAC;MACX,MAAM,GAAG,CAAC;MACV,MAAM,GAAG,CAAC;MACV,QAAQ,GAAG,CAAC;MACZ,UAAU,GAAG,CAAC;MACd,EAAE,CAAC;;;;;IAKL,IAAI,aAAa,CAAC,MAAM,EAAE;MACxB,MAAM,GAAG,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;MACnC,KAAK,IAAI,MAAM,CAAC;KACjB;IACD,IAAI,aAAa,CAAC,MAAM,EAAE;MACxB,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;MAC9B,KAAK,IAAI,MAAM,GAAG,CAAC,CAAC,CAAC;KACtB;;;IAGD,IAAI,aAAa,CAAC,UAAU,EAAE;MAC5B,KAAK,GAAG,aAAa,CAAC,UAAU,CAAC;KAClC;;IAED,IAAI,aAAa,CAAC,WAAW,EAAE;MAC7B,MAAM,GAAG,aAAa,CAAC,WAAW,CAAC;KACpC;IACD,IAAI,aAAa,CAAC,WAAW,EAAE;MAC7B,MAAM,GAAG,aAAa,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;KACzC;;;IAGD,IAAI,aAAa,CAAC,MAAM,EAAE;MACxB,KAAK,GAAG,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KACnC;;;IAGD,IAAI,KAAK,KAAK,CAAC,EAAE;MACf,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KAClB;;;IAGD,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IAC3B,IAAI,CAAC,WAAW,IAAI,QAAQ,GAAG,WAAW,EAAE;MAC1C,WAAW,GAAG,QAAQ,CAAC;KACxB;IACD,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;IAC1D,IAAI,CAAC,aAAa,IAAI,UAAU,GAAG,aAAa,EAAE;MAChD,aAAa,GAAG,UAAU,CAAC;KAC5B;;;IAGD,EAAE,GAAG,KAAK,GAAG,CAAC,GAAG,OAAO,GAAG,MAAM,CAAC;IAClC,KAAK,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC;IACvC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,GAAG,aAAa,CAAC,CAAC;IAC1C,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,GAAG,aAAa,CAAC,CAAC;;IAE1C,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;GAChC;CACF,CAAC;;AAEF,IAAI,OAAO,MAAM,CAAC,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;;EAE5D,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,EAAE,UAAU;IACrC,OAAO,OAAO,CAAC;GAChB,CAAC,CAAC;CACJ,MAAM,AAAI,AAA2B,AAAE;;EAEtC,cAAc,GAAG,OAAO,CAAC;CAC1B,AAGA;;CAEA,EAAE,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;;;ACtU5B;;;;AAIA,AACA,AACA,AAEA,IAAauF,WAAb;;;;;;;;;;;;;;;;2BASS;;;aACEtnB,QAAE,QAAF,EAAY;iBACR;iBAAO,MAAKunB,QAAL,CAAcrkB,GAAd,CAAP;;OADJ,EAEJ,CACDlD,QAAE,kBAAF,EAAsB,SAAtB,CADC,EAED,YAFC,CAFI,CAAP;;;;;;;;;;;6BAcOkD,GAxBX,EAwBgB;aACLiG,OAAP,CAAelL,KAAf,EAAsB,IAAtB;;;UAGIiL,MAAJ,GAAa,KAAb;;;;;;ACpCJ;;;AAGA,AAEA,IAAase,eAAb;;;;;;;;;;;;;;;;;yBAUOtlB,KAVP,EAUc;UACJE,QAAQ;iBACHF,MAAME,KAAN,CAAYqlB;OADvB;aAGOznB,QAAE,QAAF,EAAYoC,KAAZ,EAAmB,CACxBpC,QAAE,kBAAF,EAAsB,uBAAtB,CADwB,EAExB,YAFwB,CAAnB,CAAP;;;;;;ACnBJ;;;AAGA,AAEA,IAAa0nB,YAAb;;;;;;;;;;;;;;;;;yBAUOxlB,KAVP,EAUc;UACJE,QAAQ;iBACHF,MAAME,KAAN,CAAYqlB;OADvB;aAGOznB,QAAE,QAAF,EAAYoC,KAAZ,EAAmB,CACxBpC,QAAE,kBAAF,EAAsB,oBAAtB,CADwB,EAExB,SAFwB,CAAnB,CAAP;;;;;;ACnBJ;;;AAGA,AAEA,IAAa2nB,mBAAb;;;;;;;;;;;;;;;;yBASOzlB,KATP,EASc;UACJE,QAAQ;iBACHF,MAAME,KAAN,CAAYqlB;OADvB;aAGOznB,QAAE,QAAF,EAAYoC,KAAZ,EAAmB,CACxBpC,QAAE,kBAAF,EAAsB,WAAtB,CADwB,EAExB,eAFwB,CAAnB,CAAP;;;;;;AClBJ;;;AAGA,AAEA,IAAa4nB,YAAb;;;;;;;;;;;;;;;;;yBAUO1lB,KAVP,EAUc;UACJE,QAAQ;iBACHF,MAAME,KAAN,CAAYqlB;OADvB;aAGOznB,QAAE,QAAF,EAAYoC,KAAZ,EAAmB,CACxBpC,QAAE,kBAAF,EAAsB,OAAtB,CADwB,EAExB,UAFwB,CAAnB,CAAP;;;;;;ACnBJ;;;AAGA,AACA,AACA,AAEA,IAAa6nB,gBAAb;;;;;;;;;;;;;;;;2BASS3lB,KATT,EASgB;WACPiF,KAAL,GAAajF,MAAME,KAAN,CAAY+E,KAAzB;WACK2gB,SAAL,GAAiB5lB,MAAME,KAAN,CAAY0lB,SAA7B;WACK9e,SAAL,GAAiB,EAAjB;;;;;;;;;;;8BASQ9F,GArBZ,EAqBiB;UACT6kB,cAAJ;WACKD,SAAL,CAAe5kB,GAAf;;;;;;;;;;;8BASQA,GAhCZ,EAgCiB;;;WACRiE,KAAL,CAAW8B,OAAX,GAAqB,KAAK9B,KAAL,CAAW8B,OAAX,CAAmBqD,MAAnB,CAA0B,kBAAU;eAChD,MAAKtD,SAAL,CAAejD,OAAf,CAAuB8D,MAAvB,MAAmC,CAAC,CAA3C;OADmB,CAArB;aAGOV,OAAP,CAAe/K,UAAf,EAA2B,KAAK4K,SAAhC;UACI+e,cAAJ;WACKD,SAAL,CAAe5kB,GAAf;;;;;;;;;;;uCASiB2G,MA/CrB,EA+C6B;UACnBhI,IAAI,KAAKmH,SAAL,CAAejD,OAAf,CAAuB8D,MAAvB,CAAV;UACIhI,MAAM,CAAC,CAAX,EAAc;aACPmH,SAAL,CAAerL,IAAf,CAAoBkM,MAApB;OADF,MAGK;aACEb,SAAL,CAAe/C,MAAf,CAAsBpE,CAAtB,EAAyB,CAAzB;;;;;;;;;;;2BASG;;;UACCmmB,gBAAgB,KAAKhf,SAAL,CAAejH,MAAf,GAAwB,CAA9C;UACMkmB,SAAS,KAAKjf,SAAL,CAAejH,MAAf,GAAwB,CAAvC;aACO/B,QAAE,6BAAF,EAAiC,CACtCA,QAAE,IAAF,EAAQioB,SAAS,aAAT,GAAyB,YAAjC,CADsC,EAEtCjoB,QAAE,MAAF,EAAU,CACR,KAAKmH,KAAL,CAAW8B,OAAX,CAAmBtC,GAAnB,CAAuB,kBAAU;eACxB3G,QAAE,qBAAF,EAAyB,CAC9BA,QAAE,wBAAF,EAA4B;mBACjB,OAAKgJ,SAAL,CAAejD,OAAf,CAAuB8D,MAAvB,MAAmC,CAAC,CADnB;mBAEjB;mBAAM,OAAKqe,kBAAL,CAAwBre,MAAxB,CAAN;;SAFX,CAD8B,EAK9B7J,QAAE,iBAAF,EAAqB6J,OAAOse,UAA5B,CAL8B,CAAzB,CAAP;OADF,CADQ,EAURnoB,QAAE,QAAF,EAAY;eACHgoB,gBAAgB,gBAAhB,GAAmC,QADhC;kBAEA,CAACA,aAFD;sBAGI,KAHJ;iBAID;iBAAO,OAAKI,SAAL,CAAellB,GAAf,CAAP;;OAJX,EAKG,CACDlD,QAAE,kBAAF,EAAsB,uBAAtB,CADC,EAED,iBAFC,CALH,CAVQ,EAmBRA,QAAE,eAAF,EAAmB,EAACynB,SAAS;iBAAO,OAAKY,SAAL,CAAenlB,GAAf,CAAP;SAAV,EAAnB,EAA0D,CACxDlD,QAAE,kBAAF,EAAsB,QAAtB,CADwD,EAExD,QAFwD,CAA1D,CAnBQ,CAAV,CAFsC,CAAjC,CAAP;;;;;;ACxEJ;;;AAGA,AAEA,IAAasoB,iBAAb;;;;;;;;;;;;;;;;2BASSpmB,KATT,EASgB;WACPiF,KAAL,GAAajF,MAAME,KAAN,CAAY+E,KAAzB;WACK2gB,SAAL,GAAiB5lB,MAAME,KAAN,CAAY0lB,SAA7B;WACK9e,SAAL,GAAiB,IAAjB;;;;;;;;;;;8BASQ9F,GArBZ,EAqBiB;UACT6kB,cAAJ;WACKD,SAAL,CAAe5kB,GAAf;;;;;;;;;;;gCASUA,GAhCd,EAgCmB;UACTrB,IAAI,KAAKsF,KAAL,CAAW8B,OAAX,CAAmBlH,MAA7B;WACKoF,KAAL,CAAWohB,MAAX,CAAkB,KAAKvf,SAAvB,EAAkCnH,CAAlC;UACIkmB,cAAJ;WACKD,SAAL,CAAe5kB,GAAf;;;;;;;;;;;+BASSA,GA7Cb,EA6CkB;WACTiE,KAAL,CAAWohB,MAAX,CAAkB,KAAKvf,SAAvB,EAAkC,CAAlC;UACI+e,cAAJ;WACKD,SAAL,CAAe5kB,GAAf;;;;;;;;;;;;iCAUWA,GA1Df,EA0DoByD,GA1DpB,EA0DyB;UACjBohB,cAAJ;WACK/e,SAAL,GAAiBrC,GAAjB;;;;;;;;;;2BAQK;;;UACC+f,UAAU,KAAKvf,KAAL,CAAWuf,OAAX,IAAsB,EAAtC;aACO1mB,QAAE,8BAAF,EAAkC,CACvCA,QAAE,IAAF,EAAQ,SAAR,CADuC,EAEvCA,QAAE,MAAF,EAAU,CACRA,QAAE,oBAAF,EAAwB,CACtBA,QAAE,OAAF,EACEA,QAAE,IAAF,EAAQ,CAACA,QAAE,IAAF,EAAQ,aAAR,CAAD,EAAyBA,QAAE,IAAF,EAAQ,gBAAR,CAAzB,CAAR,CADF,CADsB,EAItBA,QAAE,OAAF,EACE,KAAKmH,KAAL,CAAWqI,OAAX,CAAmB7I,GAAnB,CAAuB,kBAAU;eACxB3G,QAAE,IAAF,EAAQ,CACbA,QAAE,IAAF,EAAQ6X,OAAOpI,EAAf,CADa,EAEbzP,QAAE,IAAF,EAAQ0mB,QAAQpa,MAAR,CAAe,eAAO;iBAClB3F,IAAIkR,MAAJ,KAAeA,MAAf,IACN,MAAK1Q,KAAL,CAAW8B,OAAX,CAAmBlD,OAAnB,CAA2BY,GAA3B,MAAoC,CAAC,CADvC;SADI,EAGHA,GAHG,CAGC,eAAO;iBACL3G,QAAE,OAAF,EAAW,CAChBA,QAAE,qBAAF,EAAyB;4BACT6X,OAAOpI,EADE;qBAEd,MAAKzG,SAAL,KAAmBrC,GAFL;mBAGhBA,IAAIwhB,UAHY;sBAIb,kBAACjlB,GAAD;qBAAS,MAAKslB,YAAL,CAAkBtlB,GAAlB,EAAuByD,GAAvB,CAAT;;WAJZ,CADgB,EAOhB3G,QAAE,0BAAF,EAA8B2G,IAAIqD,IAAlC,CAPgB,CAAX,CAAP;SAJI,CAAR,CAFa,CAAR,CAAP;OADF,CADF,CAJsB,CAAxB,CADQ,CAAV,CAFuC,EA+BvChK,QAAE,QAAF,EAAY;kBACE,CAAC,KAAKgJ,SADR;eAED,KAAKA,SAAL,GAAiB,gBAAjB,GAAoC,QAFnC;iBAGC;iBAAO,MAAKyf,UAAL,CAAgBvlB,GAAhB,CAAP;;OAHb,EAIK,CACDlD,QAAE,kBAAF,EAAsB,qBAAtB,CADC,EAED,iBAFC,CAJL,CA/BuC,EAwCvCA,QAAE,eAAF,EAAmB;kBACL,CAAC,KAAKgJ,SADD;eAER,KAAKA,SAAL,GAAiB,gBAAjB,GAAoC,QAF5B;iBAGN;iBAAO,MAAK0f,WAAL,CAAiBxlB,GAAjB,CAAP;;OAHb,EAIK,CACDlD,QAAE,kBAAF,EAAsB,sBAAtB,CADC,EAED,kBAFC,CAJL,CAxCuC,EAiDvCA,QAAE,eAAF,EAAmB,EAACynB,SAAS;iBAAO,MAAKY,SAAL,CAAenlB,GAAf,CAAP;SAAV,EAAnB,EAA0D,CACxDlD,QAAE,kBAAF,EAAsB,QAAtB,CADwD,EAExD,QAFwD,CAA1D,CAjDuC,CAAlC,CAAP;;;;;;AC3EJ;;;AAGA,AACA,AACA,AAEA,IAAa2oB,mBAAb;;;;;;;;;;;;;;;;;;;2BAYSzmB,KAZT,EAYgB;WACPiF,KAAL,GAAajF,MAAME,KAAN,CAAY+E,KAAzB;UACIyhB,KAAK,EAAT;WACKzhB,KAAL,CAAW8B,OAAX,CAAmBnL,OAAnB,CAA2B,kBAAU;WAChC+L,OAAOG,IAAV,IAAkB;kBACRH,OAAOE,MADC;gBAEVF,OAAOG,IAFG;qBAGLH,OAAOud,SAHF;kBAIRvd,OAAOgO,MAAP,CAAcpI;SAJxB;OADF;;iBASWrF,IAAX,GAAkB8c,KAAKC,SAAL,CAAeyB,EAAf,EAAmB,IAAnB,EAAyB,CAAzB,CAAlB;iBACWC,OAAX,GAAqB3B,KAAKC,SAAL,CAAeyB,EAAf,EAAmB,IAAnB,EAAyB,CAAzB,CAArB;;WAEKd,SAAL,GAAiB5lB,MAAME,KAAN,CAAY0lB,SAA7B;WACK9e,SAAL,GAAiB,IAAjB;;;;;;;;;;;8BASQ9F,GArCZ,EAqCiB;UACT6kB,cAAJ;WACKD,SAAL,CAAe5kB,GAAf;;;;;;;;;;;+BASSA,GAhDb,EAgDkB;UACV4lB,YAAY5B,KAAKzC,KAAL,CAAWsE,WAAWF,OAAtB,CAAhB;UACIG,cAAc,EAAlB;WACK7hB,KAAL,CAAWuf,OAAX,CAAmB5oB,OAAnB,CAA2B,eAAO;aAC3B,IAAIkM,IAAT,IAAiB8e,SAAjB,EAA4B;cACtBA,UAAU5Z,cAAV,CAAyBlF,IAAzB,KAAkCA,SAASrD,IAAIqD,IAA/C,IAAuD8e,UAAU9e,IAAV,EAAgB6N,MAAhB,KAA2BlR,IAAIkR,MAAJ,CAAWpI,EAAjG,EAAqG;oBAC3F7Q,GAAR;gBACIkI,OAAOH,GAAX;iBACKoD,MAAL,GAAc+e,UAAU9e,IAAV,EAAgBD,MAA9B;gBACG+e,UAAU9e,IAAV,EAAgBD,MAAhB,CAAuB2I,MAA1B,EAAkC;kBAC5BA,SAASwU,KAAKzC,KAAL,CAAWyC,KAAKC,SAAL,CAAe2B,UAAU9e,IAAV,EAAgBD,MAAhB,CAAuB2I,MAAtC,CAAX,CAAb;qBACOoW,UAAU9e,IAAV,EAAgBD,MAAhB,CAAuB2I,MAA9B;mBACKA,MAAL,GAAcA,MAAd;;wBAEU/U,IAAZ,CAAiBmJ,IAAjB;;;OAXN;WAeKK,KAAL,CAAW8B,OAAX,GAAqB+f,WAArB;WACK,IAAInnB,IAAI,CAAb,EAAgBA,IAAImnB,YAAYjnB,MAAhC,EAAwCF,GAAxC,EAA6C;eACpCsH,OAAP,CAAe5K,aAAf,EAA8B,EAACuhB,UAAUje,CAAX,EAA9B;;WAEGimB,SAAL,CAAe5kB,GAAf;;;;;;;;;;2BAQK;;;;aAEElD,QAAE,8BAAF,EAAkC,CACvCA,QAAE,IAAF,EAAQ,uBAAR,CADuC,EAEvCA,QAAE,MAAF,EAAU,CACRA,QAAE,UAAF,EAAc;eACH,uBADG;eAEH+oB,WAAWF,OAFR;kBAGA,kBAAU5K,CAAV,EAAa;YACnB8J,cAAF;qBACWc,OAAX,GAAqBra,OAAOyP,EAAEgL,aAAF,CAAgBta,KAAvB,CAArB;;OALN,CADQ,CAAV,CAFuC,EAavC3O,QAAE,QAAF,EAAY;eACD,QADC;iBAEC;iBAAO,MAAKkpB,UAAL,CAAgBhmB,GAAhB,CAAP;;OAFb,EAGK,CACDlD,QAAE,kBAAF,EAAsB,WAAtB,CADC,EAED,uBAFC,CAHL,CAbuC,EAqBvCA,QAAE,eAAF,EAAmB,EAACynB,SAAS;iBAAO,MAAKY,SAAL,CAAenlB,GAAf,CAAP;SAAV,EAAnB,EAA0D,CACxDlD,QAAE,kBAAF,EAAsB,QAAtB,CADwD,EAExD,QAFwD,CAA1D,CArBuC,CAAlC,CAAP;;;;;;;;;;;AAkCJ,IAAI+oB,aAAa;QACT,EADS;WAEN,EAFM;WAGN,iBAAUpa,KAAV,EAAiB;eACbvE,IAAX,GAAkBuE,KAAlB;GAJa;cAMH,oBAAUA,KAAV,EAAiB;eAChBka,OAAX,GAAqBla,KAArB;;CAPJ;;ACzHA;;;AAGA,AACA,AAEA,IAAawa,YAAb;;;;;;;;;;;;;;;;2BASSjnB,KATT,EASgB;WACPiF,KAAL,GAAajF,MAAME,KAAN,CAAY+E,KAAzB;WACK2gB,SAAL,GAAiB5lB,MAAME,KAAN,CAAY0lB,SAA7B;iBACWsB,GAAX,GAAiB,KAAjB;iBACWC,OAAX,CAAmB,EAAnB;iBACWC,IAAX,GAAkB,EAAlB;WACKtgB,SAAL,GAAiB,IAAjB;;;;;;;;;;;8BASQ9F,GAxBZ,EAwBiB;UACT6kB,cAAJ;WACKD,SAAL,CAAe5kB,GAAf;;;;;;;;;;;+BASSA,GAnCb,EAmCkB;;;UACVsM,UAAU,EAAd;UACI,CAAC,KAAKxG,SAAV,EAAqB;aACdA,SAAL,GAAiB;cACXugB,WAAWC,OADA;mBAEN,EAFM;oBAGL,EAHK;kBAIP,KAJO;eAKVD,WAAWD,IAAX,KAAoB,EAApB,GAAyBC,WAAWD,IAApC,GAA2CC,WAAWzmB,GAL5C;kBAMP,EANO;uBAOF,EAACnE,MAAM,EAAP;SAPf;;;UAWI8qB,OAAO,KAAKzgB,SAAL,CAAeoR,GAA5B;WACKpR,SAAL,CAAeoR,GAAf,GAAqBmP,WAAWD,IAAX,KAAoB,EAApB,GAAyBC,WAAWD,IAApC,GAA2CC,WAAWzmB,GAA3E;UACIohB,MAAM,CAAC,KAAKlb,SAAN,CAAV;;UAEIwd,WAAWtC,IAAIvd,GAAJ,CAAQ,eAAO;YACxB8f,MAAM,IAAIzC,eAAJ,CAAoBE,GAApB,CAAV;gBACQvmB,IAAR,CAAa8oB,GAAb;eACOA,IAAI5Z,IAAJ,EAAP;OAHa,CAAf;;cAMQjG,GAAR,CAAY4f,QAAZ,EAAsB3L,IAAtB,CAA2B,YAAM;gBACvB/c,OAAR,CAAgB,eAAO;;cAEjByrB,WAAWH,GAAf,EAAoB;kBACbjiB,KAAL,CAAWqI,OAAX,CAAmB7R,IAAnB,CAAwBipB,GAAxB;;cAEEhX,WAAJ,CAAgBjR,IAAhB,CAAqBb,OAArB,CAA6B;mBAAQa,KAAK+qB,gBAAL,GAAwB,cAAc/qB,KAAK+qB,gBAAnD;WAA7B;;gBAEK1gB,SAAL,CAAe4G,WAAf,CAA2BjR,IAA3B,GAAkC,MAAKqK,SAAL,CAAe4G,WAAf,CAA2BjR,IAA3B,CAAgCkI,MAAhC,CAAuC+f,IAAIhX,WAAJ,CAAgBjR,IAAvD,CAAlC;gBACKwI,KAAL,CAAWuf,OAAX,GAAqB,MAAKvf,KAAL,CAAWqI,OAAX,CAAmB7I,GAAnB,CAAuB;mBAAOoR,OAAO4O,MAAP,CAAcC,IAAI3d,OAAlB,CAAP;WAAvB,EAA0D5J,SAA1D,EAArB;;gBAEK8H,KAAL,CAAW8B,OAAX,CAAmBnL,OAAnB,CAA2B,qBAAa;kBACjCqJ,KAAL,CAAWuf,OAAX,CAAmBpa,MAAnB,CAA0B,eAAO;qBACtB3F,IAAIqD,IAAJ,KAAa2f,UAAU3f,IAAvB,IACP2f,UAAU9R,MAAV,CAAiBpI,EAAjB,KAAwB9I,IAAIkR,MAAJ,CAAWpI,EADrC;aADF,EAGG3R,OAHH,CAGW,iBAAS;wBACRuO,QAAV,GAAqBjE,MAAMiE,QAA3B;wBACUjH,IAAV,GAAiBgD,MAAMhD,IAAvB;aALF;WADF;SAVF;cAoBK4D,SAAL,CAAeoR,GAAf,GAAqBqP,IAArB;OArBF,EAsBG1C,KAtBH,CAsBS,eAAO;YACR5J,sCAAoC6J,GAA1C;gBACQrC,KAAR,CAAcxH,GAAd;gBACQ4I,KAAR;cACM5I,GAAN;OA1BF;;UA6BI4K,cAAJ;WACKD,SAAL,CAAe5kB,GAAf;;;;;;;;;;;;iCAUWA,GAnGf,EAmGoByD,GAnGpB,EAmGyB;UACjBohB,cAAJ;WACK/e,SAAL,GAAiBrC,GAAjB;iBACWijB,SAAX,CAAqB,KAAK5gB,SAA1B;;;;;;;;;;2BAQK;;;;aAEEhJ,QAAE,8BAAF,EAAkC,CACvCA,QAAE,IAAF,EAAQ,SAAR,CADuC,EAEvCA,QAAE,GAAF,EAAO,0IAAP,CAFuC,EAGvCA,QAAE,MAAF,EAAU,CACRA,QAAE,oBAAF,EAAwB,CACtBA,QAAE,OAAF,EAAW,CACTA,QAAE,IAAF,EAAQ,CAACA,QAAE,IAAF,EAAQ,KAAR,CAAD,EAAiBA,QAAE,IAAF,EAAQA,QAAE,kBAAF,EAAsB;iBAC5CA,QAAE8d,QAAF,CAAW,OAAX,EAAoByL,WAAWM,MAA/B,CAD4C;eAE9CN,WAAWzmB,GAFmC;eAG9C;OAHwB,CAAR,CAAjB,CAAR,CADS,EAMP9C,QAAE,IAAF,EAAQ,CAACA,QAAE,IAAF,EAAQ,YAAR,CAAD,EAAwBA,QAAE,IAAF,EAAQA,QAAE,kBAAF,EAAsB;kBACpDA,QAAE8d,QAAF,CAAW,OAAX,EAAoByL,WAAWO,OAA/B,CADoD;cAExDP,WAAWQ;OAFuB,CAAR,CAAxB,CAAR,CANO,CAAX,CADsB,EAYtB/pB,QAAE,OAAF,EACEA,QAAE,IAAF,EAAQ,CACNA,QAAE,IAAF,EAAQ,gBAAR,CADM,EAENA,QAAE,IAAF,EAAQ,CACJA,QAAE,OAAF,EAAW,CACTA,QAAE,qBAAF,EAAyB;cACjB,UADiB;iBAEdupB,WAAWH,GAFG;eAGhB,QAHgB;kBAIb,kBAAClmB,GAAD;iBAAS,OAAKslB,YAAL,CAAkBtlB,GAAlB,EAAuB,IAAvB,CAAT;;OAJZ,CADS,EAMLlD,QAAE,kBAAF,EAAsB;iBACfA,QAAE8d,QAAF,CAAW,OAAX,EAAoByL,WAAWF,OAA/B,CADe;eAEjBE,WAAWC;OAFhB,CANK,CAAX,CADI,EAYJ3iB,MAZI,CAYG,KAAKM,KAAL,CAAWqI,OAAX,CAAmB7I,GAAnB,CAAuB,eAAO;eAC9B3G,QAAE,OAAF,EAAW,CAChBA,QAAE,qBAAF,EAAyB;0BACT2G,IAAI8I,EADK;mBAEd,OAAKzG,SAAL,KAAmBrC,GAFL;iBAGhBA,IAAI8I,EAHY;oBAIb,kBAACvM,GAAD;mBAAS,OAAKslB,YAAL,CAAkBtlB,GAAlB,EAAuByD,GAAvB,CAAT;;SAJZ,CADgB,EAOhB3G,QAAE,0BAAF,EAA8B2G,IAAI8I,EAAlC,CAPgB,CAAX,CAAP;OADO,CAZH,CAAR,CAFM,CAAR,CADF,CAZsB,CAAxB,CADQ,CAAV,CAHuC,EAgDvCzP,QAAE,QAAF,EAAY;;kBAEE,EAAE,CAAC,KAAKgJ,SAAL,IAAkBugB,WAAWH,GAA9B,MAAuCG,WAAWzmB,GAAX,KAAmB,EAAnB,IAAyBymB,WAAWD,IAAX,KAAoB,EAApF,CAAF,CAFF;eAGD,KAAKtgB,SAAL,IAAkBugB,WAAWH,GAA7B,GAAmC,gBAAnC,GAAsD,QAHrD;iBAIC;iBAAO,OAAKY,UAAL,CAAgB9mB,GAAhB,CAAP;;OAJb,EAKK,CACDlD,QAAE,kBAAF,EAAsB,OAAtB,CADC,EAED,iBAFC,CALL,CAhDuC,EA0DvCA,QAAE,eAAF,EAAmB,EAACynB,SAAS;iBAAO,OAAKY,SAAL,CAAenlB,GAAf,CAAP;SAAV,EAAnB,EAA0D,CACxDlD,QAAE,kBAAF,EAAsB,QAAtB,CADwD,EAExD,QAFwD,CAA1D,CA1DuC,CAAlC,CAAP;;;;;;;;;;;AAuEJ,IAAIupB,aAAa;OACV,EADU;QAET,EAFS;WAGN,EAHM;OAIV,KAJU;UAKP,gBAAU5a,KAAV,EAAiB;eACZ7L,GAAX,GAAiB6L,KAAjB;GANa;WAQN,iBAAUA,KAAV,EAAiB;eACb6a,OAAX,GAAqB7a,KAArB;GATa;WAWN,iBAAUob,KAAV,EAAiB;QACpBE,SAAS,IAAIC,UAAJ,EAAb;WACOC,MAAP,GAAgB,UAAUlM,CAAV,EAAa;iBAChBqL,IAAX,GAAkBrL,EAAE1D,MAAF,CAASO,MAA3B;KADF;WAGOsP,aAAP,CAAqBL,MAAM,CAAN,CAArB;GAhBa;aAkBJ,mBAAU/gB,SAAV,EAAqB;eACnBogB,GAAX,GAAiB,CAACpgB,SAAlB;;CAnBJ;;AC7LA;;;AAGA,AAEA,AACA,AACA,AACA,AACA,AACA;AACA,AACA,AACA,AACA,AAEA,IAAaqhB,KAAb;;;;;;;;;;;;;;;;2BASSnoB,KATT,EASgB;WACPC,QAAL,GAAgBD,MAAME,KAAN,CAAYD,QAA5B;WACKmoB,aAAL,GAAqBpoB,MAAME,KAAN,CAAYmoB,MAAjC;;;;;;;;;;2BAQK;;;aACEvqB,QAAE,gBAAF,EAAoB,CACzBA,QAAE,4BAAF,EAAgC,CAC9BA,QAAEsnB,WAAF,CAD8B;;cAG5BI,YAAF,EAAgB;iBACL;iBAAM,MAAK4C,aAAL,GAAqBhC,iBAA3B;;OADX,CAH8B,EAM9BtoB,QAAEwnB,eAAF,EAAmB;iBACR;iBAAM,MAAK8C,aAAL,GAAqBzC,gBAA3B;;OADX,CAN8B,EAS9B7nB,QAAE2nB,mBAAF,EAAuB;iBACZ;iBAAM,MAAK2C,aAAL,GAAqB3B,mBAA3B;;OADX,CAT8B,EAY9B3oB,QAAE4nB,YAAF,EAAgB;iBACL;iBAAM,MAAK0C,aAAL,GAAqBnB,YAA3B;;OADX,CAZ8B,CAAhC,CADyB,EAiBzB,KAAKmB,aAAL,IAAsBtqB,QAAE,KAAKsqB,aAAP,EAAsB;eACnC,KAAKnoB,QAD8B;mBAE/B;iBAAM,MAAKmoB,aAAL,GAAqB,IAA3B;;OAFS,CAjBG,CAApB,CAAP;;;;;;ACpCJ;;;AAGA,AAEA,IAAaE,MAAb;;;;;;;;;;;;;;2BAOStoB,KAPT,EAOgB;WACPC,QAAL,GAAgBD,MAAME,KAAN,CAAYD,QAA5B;;;;;;;;;;2BAQK;aACEnC,QAAE,eAAF,EACLA,QAAE,gBAAF,EAAoB,CAClB,UADkB,EAElBA,QAAE,kBAAF,EAAsB,KAAKmC,QAAL,CAAcikB,MAApC,CAFkB,CAApB,CADK,CAAP;;;;;;ACtBJ;;;;AAIA,AAEA,IAAaqE,SAAb;;;;;;;;;;;;;;;2BAQSvoB,KART,EAQgB;WACPC,QAAL,GAAgBD,MAAME,KAAN,CAAYD,QAA5B;;;;;;;;;;2BAQK;aACEnC,QAAE,KAAF,EAAS,CACdA,QAAE,sBAAF,EAA0B,KAAKmC,QAAL,CAAckkB,WAAxC,CADc,EAEdrmB,QAAE,KAAF,EAAS,EAACyP,IAAI,iBAAL,EAAT,EAAkC,yIAAlC,CAFc,EAGdzP,QAAE,iBAAF,EAAqB,CACnB,KAAKmC,QAAL,CAAcgkB,IAAd,GAAqBnmB,QAAE,iCAAF,CAArB,GAA4D,EADzC,EAEnB,KAAKmC,QAAL,CAAc+jB,MAFK,CAArB,CAHc,CAAT,CAAP;;;;;;ACxBJ;;;;AAIA,AACA,AAEA,AACA,AACA,AAEA,IAAMwE,UAAU,SAAVA,OAAU;SAAWnkB,UAAUrF,KAAK4M,EAAf,GAAoB,GAA/B;CAAhB;;;;AAIA,IAAa6c,YAAb;;;;;;;;;;;;;;;;;;8BAUY;UACJC,UAAU,KAAKvoB,EAAL,CAAQG,qBAAR,EAAd;UACI,CAACooB,QAAQnqB,KAAT,IAAkB,CAACmqB,QAAQlqB,MAA/B,EAAuC;;;gBAG7BoI,IAAR,CAAa,kBAAb;;;UAGE+hB,YAAY,IAAIzqB,MAAJ,CAAWwqB,OAAX,CAAhB;UACI1iB,QAAQ,CAAC9H,OAAOiB,MAAP,CAAc,KAAKqG,SAAnB,EAA8BmjB,SAA9B,CAAb;WACKnjB,SAAL,GAAiBmjB,SAAjB;;UAEInd,SAAS,KAAKhG,SAAL,CAAejH,KAAf,GAAuB,KAAKiH,SAAL,CAAehH,MAAtC,GACT,KAAKgH,SAAL,CAAehH,MAAf,GAAwB,GADf,GACqB,KAAKgH,SAAL,CAAejH,KAAf,GAAuB,GADzD;UAEIke,IAAI,KAAK1V,OAAL,CAAalH,MAArB;UACI+oB,SAAS;WACR5pB,KAAKC,KAAL,CAAW,KAAKuG,SAAL,CAAejH,KAAf,GAAuB,GAAlC,CADQ;WAERS,KAAKC,KAAL,CAAW,KAAKuG,SAAL,CAAehH,MAAf,GAAwB,GAAnC;OAFL;UAIIqqB,kBAAkB,MAAMpM,CAA5B;UACIqM,aAAa9pB,KAAKC,KAAL,CAAW,MAAM,KAAKuG,SAAL,CAAejH,KAArB,GAA6Bke,CAAxC,CAAjB;UACI8E,cAAcviB,KAAKC,KAAL,CAAW6pB,aAAa,GAAxB,CAAlB;UACIC,eAAe,CAAC,GAApB;UACI1kB,UAAU0kB,YAAd;WACKhiB,OAAL,CAAanL,OAAb,CAAqB,iBAAS;YACxBotB,MAAMR,QAAQnkB,OAAR,CAAV;YACIjJ,IAAIwtB,OAAOxtB,CAAP,GAAW4D,KAAKC,KAAL,CAAW6pB,aAAa,GAAxB,CAAX,GAA0C9pB,KAAKC,KAAL,CAAWuM,SAASxM,KAAKiqB,GAAL,CAASD,GAAT,CAApB,CAAlD;YACI3tB,IAAIutB,OAAOvtB,CAAP,GAAW2D,KAAKC,KAAL,CAAWsiB,cAAc,GAAzB,CAAX,GAA2CviB,KAAKC,KAAL,CAAWuM,SAASxM,KAAKkqB,GAAL,CAASF,GAAT,CAApB,CAAnD;;;cAGMxjB,SAAN,GAAkB,IAAItH,MAAJ,CAAW;gBACrB9C,CADqB;eAEtBC,CAFsB;iBAGpBkmB,WAHoB;kBAInBuH;SAJQ,CAAlB;cAMM7lB,QAAN,GAAiBjE,KAAKC,KAAL,CAAWoF,OAAX,IAAsB0kB,YAAvC;mBACWF,eAAX;OAbF;UAeI7iB,KAAJ,EAAWlI,QAAEkJ,MAAF;;;;;;;;;;;2BAQN;aACElJ,QAAE,wBAAF,EACL,KAAKmG,QAAL,CAAcQ,GAAd,CAAkB3G,OAAlB,CADK,CAAP;;;;EAzDMN,IAAIuC,UAAJ,EACLsH,IADK,CACA1E,sBADA,CADV;;ACfA;;;;;AAKA,AACA,AACA,AAEA,AACA,AACA,AACA,AACA,AAEA;AACA,IAAMwmB,QAAQtT,OAAOC,MAAP,CAAc,EAAC8E,KAAK,IAAN,EAAY/M,KAAK,CAAjB,EAAd,CAAd;;AAEA,IAAaub,eAAb;;;;;;;;;;;;;;;;;;;2BASSppB,KATT,EASgB;;;8HACCA,KAAb;WACKC,QAAL,GAAgBD,MAAME,KAAN,CAAYD,QAA5B;WACKD,KAAL,GAAaA,KAAb;aACOnD,SAAP,CAAiBd,KAAjB,EAAwB;eAAM,OAAKykB,QAAL,EAAN;OAAxB;;;WAGKpb,aAAL,GAAqB;aACd,IAAIC,MAAJ,CAAW,MAAX,CADc;eAEZ,IAAIA,MAAJ,CAAW,QAAX,CAFY;aAGd,IAAIA,MAAJ,CAAW,MAAX,CAHc;eAIZ,IAAIA,MAAJ,CAAW,QAAX;OAJT;;;;;;;;;;6BAaOrF,KA7BX,EA6BkB;gIACCA,KAAf;WACKG,EAAL,GAAUH,MAAMI,GAAhB,CAFc;;YAIR6Y,KAAN,CAAY5Y,MAAZ,GAAqB,KAAKA,MAAL,GAAc,IAAInC,MAAJ,CAAW,KAAKiC,EAAL,CAAQG,qBAAR,EAAX,CAAnC;YACM2Y,KAAN,CAAY8F,aAAZ,GAA4B,KAAKA,aAAL,GAAqB,IAAI7gB,MAAJ,CAAW;cACpD,CADoD;aAErD,CAFqD;eAGnD,KAAKmC,MAAL,CAAY9B,KAHuC;gBAIlD,KAAK8B,MAAL,CAAY7B;OAJ2B,CAAjD;;WAOK6qB,qBAAL,GAA6B,IAAInrB,MAAJ,CAAW,KAAK6gB,aAAhB,CAA7B;;;;;;;;;;6BAQO/e,KAjDX,EAiDkB;WACTK,MAAL,GAAc,IAAInC,MAAJ,CAAW8B,MAAMI,GAAN,CAAUE,qBAAV,EAAX,CAAd;;;;;;;;;;;yBASGN,KA3DP,EA2Dc;UACNmE,IAAI,KAAK4a,aAAL,IAAsB,EAA9B,CADU;UAENuK,QAAQ,KAAKrpB,QAAL,CAAc8jB,KAAd,CAAoBoB,UAAhC;aACOrnB,QAAE,2BAAF,EAA+B;0BACpBqG,EAAE/F,IAAlB,iBAAkC+F,EAAEhG,GAApC,kCACiBgG,EAAE5F,KADnB,oBACuC4F,EAAE3F,MADzC,4CAE2B8qB,KAF3B;OADK,EAIJ,CACD,KAAKrpB,QAAL,CAAc8jB,KAAd,CAAoB/nB,MAApB,KAA+B6jB,gBAA/B,GAEE/hB,QAAE+hB,gBAAF,EAAoB;kBACR,KAAK5f,QADG;sBAEJ,KAAKI,MAFD;uBAGHL,MAAMiZ,KAAN,CAAY8F;OAH7B,CAFF,GAQEjhB,QAAE2qB,YAAF,EAAgB,EAACxoB,UAAU,KAAKA,QAAhB,EAA0BmS,cAAc,KAAK/R,MAA7C,EAAhB,CATD,CAJI,CAAP;;;;;;;;;;;;kCAwBYW,GAtFhB,EAsFqB;UACbA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBoB,GAAlC,CAAJ,EAA4C;eACnC,KAAKG,MAAL,CAAY3F,GAAZ,CAAP;OADF,MAGK,IAAIA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBiB,KAAlC,CAAJ,EAA8C;eAC1C,KAAKC,OAAL,CAAatF,GAAb,CAAP;OADG,MAGA,IAAIA,IAAIiF,IAAJ,CAASC,KAAT,CAAe,KAAKd,aAAL,CAAmBmB,KAAlC,CAAJ,EAA8C;eAC1C,KAAKD,OAAL,CAAatF,GAAb,CAAP;;aAEK,KAAP,CAViB;;;;;;;;;;;;4BAoBXA,GA1GV,EA0Ge;;UAELuoB,aAAavoB,IAAI2R,MAAJ,GAAa,KAAKtS,MAAL,CAAY7B,MAA5C;UACMgrB,IAAI,KAAKvpB,QAAL,CAAc8jB,KAAd,CAAoBoB,UAApB,GAAiCoE,UAA3C;;WAEKtpB,QAAL,CAAc8jB,KAAd,CAAoBoB,UAApB,GAAiCnmB,KAAKyqB,KAAL,CAAWD,CAAX,EAAcL,MAAMvO,GAApB,EAAyBuO,MAAMtb,GAA/B,CAAjC;cACE7G,MAAF;aACO,IAAP,CAPW;;;;;;;;;;;;2BAiBNhG,GA3HT,EA2Hc;cACFtE,GAAR,CAAY,0BAAZ,EAAwCsE,GAAxC;;;UAGIA,IAAIiF,IAAJ,KAAa,QAAjB,EAA2B;aACpBiZ,YAAL,GAAoB,IAApB;eACO,IAAP;;UAEErL,QAAQ,EAAZ;UACI,KAAKqL,YAAT,EAAuB;cACf9jB,CAAN,GAAU,CAAC,CAAD,IAAM,KAAK8jB,YAAL,CAAkBzL,MAAlB,GAA2BzS,IAAIyS,MAArC,CAAV;cACMpY,CAAN,GAAU,CAAC,CAAD,IAAM,KAAK6jB,YAAL,CAAkBvM,MAAlB,GAA2B3R,IAAI2R,MAArC,CAAV;OAFF,MAIK;cACGvX,CAAN,GAAU4F,IAAIyS,MAAd;cACMpY,CAAN,GAAU2F,IAAI2R,MAAd;;WAEGoM,aAAL,CAAmB3gB,IAAnB,IAA2ByV,MAAMzY,CAAjC;;cAEE4L,MAAF;WACKkY,YAAL,GAAoBle,GAApB;aACO,IAAP,CArBU;;;;;;;;;;+BA6BD;WACJ+d,aAAL,GAAqB,IAAI7gB,MAAJ,CAAW,KAAKmrB,qBAAhB,CAArB;cACEriB,MAAF;;;;EA1JiCxJ,MAAM6J,IAAN,CAAW1E,sBAAX,CAArC;;AClBA;;;;AAIA,AACA,AACA,AACA,AACA,AAEA,AACA,AACA,AACA,AACA,AACA,AAEA,IAAa+mB,EAAb;;;;;;;;cAOczpB,QAAZ,EAAsB;;;;;UAEfA,QAAL,GAAgBA,QAAhB;;;;;;;;;;;6BAQOD,KAjBX,EAiBkB;sGACCA,KAAf;WACKG,EAAL,GAAUH,MAAMI,GAAhB;WACKupB,mBAAL,CAAyB,KAAKxpB,EAA9B;;;;;;;;;;2BAQK;;;UACCypB,aAAa;kBACP,KAAK3pB;OADjB;WAGK4pB,WAAL;aACO/rB,QAAE,2BAAF,EAA+B,CACpCA,QAAEwqB,MAAF,EAAUsB,UAAV,CADoC,EAEpC9rB,QAAEqqB,KAAF,EAASyB,UAAT,CAFoC,EAGpC9rB,QAAE,wBAAF,EAA4B,EAACpC,OAAO,sBAAR,EAA5B,CAHoC,EAIpC,CAACoC,QAAE,2CAAF,EAA+C,EAACpC,OAAO,eAAR,EAA/C,CAAD,EACEoC,QAAE,oCAAF,EAAwC,EAACyP,IAAI,sBAAL,EAA6B7R,OAAO,oBAApC,EAAxC,EACEoC,QAAEsrB,eAAF,EAAmB;kBACP,KAAKnpB,QADE;mCAEU,mCAAC6pB,IAAD;iBAAU,OAAKC,gBAAL,GAAwBD,IAAlC;;OAF7B,CADF,CADF,CAJoC,EAWpChsB,QAAEyqB,SAAF,EAAaqB,UAAb,CAXoC,CAA/B,CAAP;;;;;;;;;;kCAoBY;UACR,CAAC,KAAKlM,KAAV,EAAiB,KAAKA,KAAL,GAAa,CAAb;WACZA,KAAL,IAAc,CAAd;cACQhhB,GAAR,0BAAmC,KAAKghB,KAAxC;;;;;;;;;;0CAQoB;WACfsM,gBAAL;WACKC,cAAL;WACKC,YAAL;;;;;;;;;;mCAQa;aACNrtB,SAAP,CAAiBd,KAAjB,EAAwB,YAAM;;;YAGtB4gB,WAAWzhB,SAAS4d,cAAT,CAAwB,sBAAxB,CAAjB;iBACSrX,SAAT,GAAqB,CAArB;iBACSD,UAAT,GAAsB,CAAtB;OALF;;;;;;;;;;uCAciB;;;UACX2oB,aAAUC,QAAQ,KAAKjqB,EAAb,CAAhB;UACMkqB,iBAAiB,SAAjBA,cAAiB,CAACrpB,GAAD,EAAM6S,KAAN,EAAaJ,MAAb,EAAqBd,MAArB,EAAgC;;;YAGjDA,MAAJ,GAAaA,MAAb,CAHqD;;;YAMjDiW,MAAJ,GAAa,EAACxtB,GAAG4F,IAAIspB,aAAJ,CAAkBlvB,CAAtB,EAAyBC,GAAG2F,IAAIspB,aAAJ,CAAkBjvB,CAA9C,EAAb;eACKkvB,mBAAL,CAAyBvpB,GAAzB;OAPF;iBASQuF,KAAR,CAAc8jB,cAAd;;;;;;;;;;qCAQe;;;UACTG,YAASrjB,OAAO,KAAKhH,EAAZ,CAAf;UACMsqB,gBAAgB,SAAhBA,aAAgB,CAACzpB,GAAD;eAAS,OAAKupB,mBAAL,CAAyBvpB,GAAzB,CAAT;OAAtB;UACM0pB,eAAe,gDAArB;gBACOC,GAAP,CAAW,KAAX,EAAkBC,GAAlB,CAAsB,EAAC1jB,WAAWC,OAAO0jB,aAAnB,EAAtB;gBACOF,GAAP,CAAW,OAAX,EAAoBC,GAApB,CAAwB,EAACE,QAAQ,IAAT,EAAxB;gBACOC,EAAP,CAAUL,YAAV,EAAwBD,aAAxB;;;;;;;;;;;;;;;;;;wCAgBkBzpB,GAnItB,EAmI2B;UACnBgqB,cAAc9vB,SAASC,iBAAT,CAA2B6F,IAAI4nB,MAAJ,CAAWxtB,CAAtC,EAAyC4F,IAAI4nB,MAAJ,CAAWvtB,CAApD,CAAlB;UACI4vB,WAAWD,YAAY5gB,MAAZ,CAAmB,cAAM;eAC9BjK,GAAG2C,gBAAH,IAAuB3C,GAAG2C,gBAAH,CAAoB8b,aAAnD;OADa,CAAf;;;eAKS3I,IAAT,CAAc,cAAM;eACX9V,GAAG2C,gBAAH,CAAoB8b,aAApB,CAAkC5d,GAAlC,CAAP;OADF;;;;;;;;;;;;;kCAaYA,GAvJhB,EAuJqB;WACZ+oB,gBAAL,CAAsBnL,aAAtB,CAAoC5d,GAApC;;;;EAxJoBxD,MAAM6J,IAAN,CAAW1E,sBAAX,CAAxB;;ACjBA;;;;AAIA,AAEA,AACA,AAEA;AACA,IAAauoB,IAAb;;;;;;;;;;;;;;yBAOOC,SAPP,EAOkB;;;WACTC,WAAL,GAAmBlwB,SAAS4d,cAAT,CAAwB,SAAxB,CAAnB;WACK7Y,QAAL,GAAgB,IAAI6jB,QAAJ,CAAa,EAAb,CAAhB;WACK4F,EAAL,GAAU,IAAIA,EAAJ,CAAO,KAAKzpB,QAAZ,CAAV;cACE0d,KAAF,CAAQ,KAAKyN,WAAb,EAA0B,KAAK1B,EAA/B;;UAEIyB,cAAc,IAAlB,EAAwB;oBACV,WAAZ;;;WAGGlrB,QAAL,CAAc+jB,MAAd,GAAuB,+BAAvB;WACK/jB,QAAL,CAAcgkB,IAAd,GAAqB,IAArB;;cAEEvL,OAAF,CAAUyS,SAAV,EAAqBxS,IAArB,CAA0B,kBAAU;YAC9B0S,aAAaxjB,OAAOyF,OAAP,CAAezN,MAAhC;YACIkmB,SAASsF,aAAa,CAAb,GAAiB,GAAjB,GAAuB,EAApC;cACKprB,QAAL,CAAc+jB,MAAd,gBAAkCqH,UAAlC,kBAAyDtF,MAAzD;YACIzB,WAAW,MAAKrkB,QAAL,CAAc0K,IAAd,CAAmB9C,MAAnB,CAAf;gBACQnD,GAAR,CAAY4f,QAAZ,EAAsB3L,IAAtB,CAA2B,YAAM;gBAC1B1Y,QAAL,CAAc+jB,MAAd,GAAuB,EAAvB;gBACK/jB,QAAL,CAAcgkB,IAAd,GAAqB,KAArB;SAFF;OALF,EASGY,KATH,CASS,eAAO;;gBAENpC,KAAR,CAAcqC,GAAd;gBACQjB,KAAR;yDAC+CiB,GAA/C;OAbF;;;;;;AC9BJ;;;;;AAKA,AACA,AAEA,AACA,AACA,AACA,AAEA,AAEA;;;;;;;AAOA,IAAMwG,OAAO,SAAPA,IAAO,GAAM;;;;MAIb,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,OAAOC,OAAd,KAA0B,WAA/D,EAA4E;;WAEnEA,OAAP,GAAiBN,IAAjB;GAFF,MAIK;;WAEIO,IAAP,GAAcP,IAAd;;MAEIQ,UAAU,kBAAhB;MACMC,gBAAgB,SAAhBA,aAAgB,GAAM;QACtBC,QAAQ,IAAIV,IAAJ,EAAZ;UACMvgB,IAAN,CAAW,IAAIkhB,eAAJ,CAAoBC,OAAOC,QAAP,CAAgBjhB,MAApC,EAA4C6f,GAA5C,CAAgD,QAAhD,CAAX;aACSqB,mBAAT,CAA6BN,OAA7B,EAAsCC,aAAtC;GAHF;WAKSM,gBAAT,CAA0BP,OAA1B,EAAmCC,aAAnC;CAlBF;;AAqBAL;;"}